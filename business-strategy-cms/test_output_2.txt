
> business-strategy-cms@1.0.0 test /home/vivi/pixelated/business-strategy-cms
> jest --verbose

FAIL src/tests/collaboration.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/collaboration.test.ts[0m:[93m20[0m:[93m7[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'role' does not exist in type 'UserRegistration'.

    [7m20[0m       role: UserRole.CONTENT_CREATOR,
    [7m  [0m [91m      ~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m29[0m:[93m7[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'role' does not exist in type 'UserRegistration'.

    [7m29[0m       role: UserRole.EDITOR,
    [7m  [0m [91m      ~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m33[0m:[93m38[0m - [91merror[0m[90m TS2554: [0mExpected 2 arguments, but got 1.

    [7m33[0m     document = await DocumentService.createDocument({
    [7m  [0m [91m                                     ~~~~~~~~~~~~~~[0m

      [96msrc/services/documentService.ts[0m:[93m15[0m:[93m5[0m
        [7m15[0m     authorId: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'authorId' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m46[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'clearAllSessions' does not exist on type 'typeof CollaborationService'.

    [7m46[0m     CollaborationService.clearAllSessions()
    [7m  [0m [91m                         ~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m51[0m:[93m45[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m51[0m       const session1 = CollaborationService.joinSession(document.id, user1.id)
    [7m  [0m [91m                                            ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m52[0m:[93m45[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m52[0m       const session2 = CollaborationService.joinSession(document.id, user1.id)
    [7m  [0m [91m                                            ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m54[0m:[93m23[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type 'CollaborationSession'.

    [7m54[0m       expect(session1.id).toBe(session2.id)
    [7m  [0m [91m                      ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m54[0m:[93m41[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type 'CollaborationSession'.

    [7m54[0m       expect(session1.id).toBe(session2.id)
    [7m  [0m [91m                                        ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m55[0m:[93m35[0m - [91merror[0m[90m TS2339: [0mProperty 'getActiveSessions' does not exist on type 'typeof CollaborationService'.

    [7m55[0m       expect(CollaborationService.getActiveSessions(document.id)).toHaveLength(
    [7m  [0m [91m                                  ~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m61[0m:[93m45[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m61[0m       const session1 = CollaborationService.joinSession(document.id, user1.id)
    [7m  [0m [91m                                            ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m62[0m:[93m45[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m62[0m       const session2 = CollaborationService.joinSession(document.id, user2.id)
    [7m  [0m [91m                                            ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m64[0m:[93m23[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type 'CollaborationSession'.

    [7m64[0m       expect(session1.id).not.toBe(session2.id)
    [7m  [0m [91m                      ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m64[0m:[93m45[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type 'CollaborationSession'.

    [7m64[0m       expect(session1.id).not.toBe(session2.id)
    [7m  [0m [91m                                            ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m65[0m:[93m35[0m - [91merror[0m[90m TS2339: [0mProperty 'getActiveSessions' does not exist on type 'typeof CollaborationService'.

    [7m65[0m       expect(CollaborationService.getActiveSessions(document.id)).toHaveLength(
    [7m  [0m [91m                                  ~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m71[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m71[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m  [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m72[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m72[0m       CollaborationService.joinSession(document.id, user2.id)
    [7m  [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m74[0m:[93m35[0m - [91merror[0m[90m TS2339: [0mProperty 'getActiveSessions' does not exist on type 'typeof CollaborationService'.

    [7m74[0m       expect(CollaborationService.getActiveSessions(document.id)).toHaveLength(
    [7m  [0m [91m                                  ~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m79[0m:[93m35[0m - [91merror[0m[90m TS2339: [0mProperty 'getActiveSessions' does not exist on type 'typeof CollaborationService'.

    [7m79[0m       expect(CollaborationService.getActiveSessions(document.id)).toHaveLength(
    [7m  [0m [91m                                  ~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m87[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m87[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m  [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m88[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m88[0m       CollaborationService.joinSession(document.id, user2.id)
    [7m  [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m97[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'onCursorUpdate' does not exist on type 'typeof CollaborationService'.

    [7m97[0m       CollaborationService.onCursorUpdate(document.id, (update: any) => {
    [7m  [0m [91m                           ~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m101[0m:[93m64[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ userId: any; position: { line: number; column: number; }; selection: null; }' is not assignable to parameter of type 'number'.

    [7m101[0m       CollaborationService.updateCursor(document.id, user1.id, cursorUpdate)
    [7m   [0m [91m                                                               ~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m109[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m109[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m118[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'onCursorUpdate' does not exist on type 'typeof CollaborationService'.

    [7m118[0m       CollaborationService.onCursorUpdate(document.id, (update: any) => {
    [7m   [0m [91m                           ~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m123[0m:[93m66[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ userId: any; position: { line: number; column: number; }; selection: null; }' is not assignable to parameter of type 'number'.

    [7m123[0m         CollaborationService.updateCursor(document.id, user1.id, update),
    [7m   [0m [91m                                                                 ~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m133[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m133[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m160[0m:[93m56[0m - [91merror[0m[90m TS2379: [0mArgument of type '{ type: "insert"; position: number; content: string; userId: any; timestamp: number; length?: never; } | { type: "delete"; position: number; length: number; userId: any; timestamp: number; content?: never; }' is not assignable to parameter of type 'DocumentChange' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
      Type '{ type: "insert"; position: number; content: string; userId: any; timestamp: number; length?: never; }' is not assignable to type 'DocumentChange' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
        Types of property 'timestamp' are incompatible.
          Type 'number' is not assignable to type 'Date'.

    [7m160[0m         CollaborationService.recordChange(document.id, change),
    [7m   [0m [91m                                                       ~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m163[0m:[93m44[0m - [91merror[0m[90m TS2339: [0mProperty 'getChangeHistory' does not exist on type 'typeof CollaborationService'.

    [7m163[0m       const history = CollaborationService.getChangeHistory(document.id)
    [7m   [0m [91m                                           ~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m171[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m171[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m172[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m172[0m       CollaborationService.joinSession(document.id, user2.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m179[0m:[93m9[0m - [91merror[0m[90m TS2322: [0mType 'number' is not assignable to type 'Date'.

    [7m179[0m         timestamp: Date.now(),
    [7m   [0m [91m        ~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m24[0m:[93m3[0m
        [7m24[0m   timestamp: Date
        [7m  [0m [96m  ~~~~~~~~~[0m
        The expected type comes from property 'timestamp' which is declared here on type 'DocumentChange'
    [96msrc/tests/collaboration.test.ts[0m:[93m187[0m:[93m9[0m - [91merror[0m[90m TS2322: [0mType 'number' is not assignable to type 'Date'.

    [7m187[0m         timestamp: Date.now() + 1,
    [7m   [0m [91m        ~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m24[0m:[93m3[0m
        [7m24[0m   timestamp: Date
        [7m  [0m [96m  ~~~~~~~~~[0m
        The expected type comes from property 'timestamp' which is declared here on type 'DocumentChange'
    [96msrc/tests/collaboration.test.ts[0m:[93m190[0m:[93m44[0m - [91merror[0m[90m TS2339: [0mProperty 'getChangeHistory' does not exist on type 'typeof CollaborationService'.

    [7m190[0m       const history = CollaborationService.getChangeHistory(document.id)
    [7m   [0m [91m                                           ~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m197[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m197[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m198[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m198[0m       CollaborationService.joinSession(document.id, user2.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m216[0m:[93m54[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ type: "insert"; position: number; content: string; userId: any; timestamp: number; }' is not assignable to parameter of type 'DocumentChange'.
      Types of property 'timestamp' are incompatible.
        Type 'number' is not assignable to type 'Date'.

    [7m216[0m       CollaborationService.recordChange(document.id, change1)
    [7m   [0m [91m                                                     ~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m217[0m:[93m54[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ type: "insert"; position: number; content: string; userId: any; timestamp: number; }' is not assignable to parameter of type 'DocumentChange'.
      Types of property 'timestamp' are incompatible.
        Type 'number' is not assignable to type 'Date'.

    [7m217[0m       CollaborationService.recordChange(document.id, change2)
    [7m   [0m [91m                                                     ~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m219[0m:[93m44[0m - [91merror[0m[90m TS2339: [0mProperty 'getChangeHistory' does not exist on type 'typeof CollaborationService'.

    [7m219[0m       const history = CollaborationService.getChangeHistory(document.id)
    [7m   [0m [91m                                           ~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m230[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m230[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m231[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m231[0m       CollaborationService.joinSession(document.id, user2.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m234[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'onContentChange' does not exist on type 'typeof CollaborationService'.

    [7m234[0m       CollaborationService.onContentChange(document.id, (change: any) => {
    [7m   [0m [91m                           ~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m246[0m:[93m54[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ type: "insert"; position: number; content: string; userId: any; timestamp: number; }' is not assignable to parameter of type 'DocumentChange'.
      Types of property 'timestamp' are incompatible.
        Type 'number' is not assignable to type 'Date'.

    [7m246[0m       CollaborationService.recordChange(document.id, change)
    [7m   [0m [91m                                                     ~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m253[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m253[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m254[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m254[0m       CollaborationService.joinSession(document.id, user2.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m259[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'onContentChange' does not exist on type 'typeof CollaborationService'.

    [7m259[0m       CollaborationService.onContentChange(document.id, (change: any) => {
    [7m   [0m [91m                           ~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m271[0m:[93m54[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ type: "insert"; position: number; content: string; userId: any; timestamp: number; }' is not assignable to parameter of type 'DocumentChange'.
      Types of property 'timestamp' are incompatible.
        Type 'number' is not assignable to type 'Date'.

    [7m271[0m       CollaborationService.recordChange(document.id, change)
    [7m   [0m [91m                                                     ~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m274[0m:[93m35[0m - [91merror[0m[90m TS2339: [0mProperty 'getActiveSessions' does not exist on type 'typeof CollaborationService'.

    [7m274[0m       expect(CollaborationService.getActiveSessions(document.id)).toHaveLength(
    [7m   [0m [91m                                  ~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m292[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'role' does not exist in type 'UserRegistration'.

    [7m292[0m           role: UserRole.VIEWER,
    [7m   [0m [91m          ~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m298[0m:[93m30[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m298[0m         CollaborationService.joinSession(document.id, user.id),
    [7m   [0m [91m                             ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m298[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type '{ user: User; tokens: AuthTokens; }'.

    [7m298[0m         CollaborationService.joinSession(document.id, user.id),
    [7m   [0m [91m                                                           ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m301[0m:[93m35[0m - [91merror[0m[90m TS2339: [0mProperty 'getActiveSessions' does not exist on type 'typeof CollaborationService'.

    [7m301[0m       expect(CollaborationService.getActiveSessions(document.id)).toHaveLength(
    [7m   [0m [91m                                  ~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m309[0m:[93m17[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

    [7m309[0m         userId: users[0].id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m309[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type '{ user: User; tokens: AuthTokens; }'.

    [7m309[0m         userId: users[0].id,
    [7m   [0m [91m                         ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m314[0m:[93m54[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ type: "insert"; position: number; content: string; userId: any; timestamp: number; }' is not assignable to parameter of type 'DocumentChange'.
      Types of property 'timestamp' are incompatible.
        Type 'number' is not assignable to type 'Date'.

    [7m314[0m       CollaborationService.recordChange(document.id, change)
    [7m   [0m [91m                                                     ~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m321[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m321[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m333[0m:[93m56[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ type: "insert"; position: number; content: string; userId: any; timestamp: number; }' is not assignable to parameter of type 'DocumentChange'.
      Types of property 'timestamp' are incompatible.
        Type 'number' is not assignable to type 'Date'.

    [7m333[0m         CollaborationService.recordChange(document.id, change),
    [7m   [0m [91m                                                       ~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m336[0m:[93m44[0m - [91merror[0m[90m TS2339: [0mProperty 'getChangeHistory' does not exist on type 'typeof CollaborationService'.

    [7m336[0m       const history = CollaborationService.getChangeHistory(document.id)
    [7m   [0m [91m                                           ~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m339[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'clearChangeHistory' does not exist on type 'typeof CollaborationService'.

    [7m339[0m       CollaborationService.clearChangeHistory(document.id)
    [7m   [0m [91m                           ~~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m340[0m:[93m35[0m - [91merror[0m[90m TS2339: [0mProperty 'getChangeHistory' does not exist on type 'typeof CollaborationService'.

    [7m340[0m       expect(CollaborationService.getChangeHistory(document.id)).toHaveLength(0)
    [7m   [0m [91m                                  ~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m352[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'role' does not exist in type 'UserRegistration'.

    [7m352[0m         role: UserRole.VIEWER,
    [7m   [0m [91m        ~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m355[0m:[93m47[0m - [91merror[0m[90m TS2339: [0mProperty 'checkDocumentPermission' does not exist on type 'typeof DocumentService'.

    [7m355[0m       const canAccess = await DocumentService.checkDocumentPermission(
    [7m   [0m [91m                                              ~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m357[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type '{ user: User; tokens: AuthTokens; }'.

    [7m357[0m         unauthorizedUser.id,
    [7m   [0m [91m                         ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m362[0m:[93m30[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m362[0m         CollaborationService.joinSession(document.id, unauthorizedUser.id)
    [7m   [0m [91m                             ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m362[0m:[93m72[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type '{ user: User; tokens: AuthTokens; }'.

    [7m362[0m         CollaborationService.joinSession(document.id, unauthorizedUser.id)
    [7m   [0m [91m                                                                       ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m364[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getActiveSessions' does not exist on type 'typeof CollaborationService'.

    [7m364[0m           CollaborationService.getActiveSessions(document.id),
    [7m   [0m [91m                               ~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m366[0m:[93m62[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type '{ user: User; tokens: AuthTokens; }'.

    [7m366[0m           expect.objectContaining({ userId: unauthorizedUser.id }),
    [7m   [0m [91m                                                             ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m370[0m:[93m32[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m370[0m           CollaborationService.joinSession(document.id, unauthorizedUser.id),
    [7m   [0m [91m                               ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m370[0m:[93m74[0m - [91merror[0m[90m TS2339: [0mProperty 'id' does not exist on type '{ user: User; tokens: AuthTokens; }'.

    [7m370[0m           CollaborationService.joinSession(document.id, unauthorizedUser.id),
    [7m   [0m [91m                                                                         ~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m376[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 2.

    [7m376[0m       CollaborationService.joinSession(document.id, user1.id)
    [7m   [0m [91m                           ~~~~~~~~~~~[0m

      [96msrc/services/collaborationService.ts[0m:[93m34[0m:[93m5[0m
        [7m34[0m     userName: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'userName' was not provided.
    [96msrc/tests/collaboration.test.ts[0m:[93m386[0m:[93m54[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ type: "insert"; position: number; content: string; userId: any; timestamp: number; }' is not assignable to parameter of type 'DocumentChange'.
      Types of property 'timestamp' are incompatible.
        Type 'number' is not assignable to type 'Date'.

    [7m386[0m       CollaborationService.recordChange(document.id, maliciousChange)
    [7m   [0m [91m                                                     ~~~~~~~~~~~~~~~[0m
    [96msrc/tests/collaboration.test.ts[0m:[93m388[0m:[93m44[0m - [91merror[0m[90m TS2339: [0mProperty 'getChangeHistory' does not exist on type 'typeof CollaborationService'.

    [7m388[0m       const history = CollaborationService.getChangeHistory(document.id)
    [7m   [0m [91m                                           ~~~~~~~~~~~~~~~~[0m

FAIL src/tests/bi-persistence.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/bi-persistence.test.ts[0m:[93m17[0m:[93m62[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'growth' does not exist in type 'MarketSegment'.

    [7m17[0m             segments: [{ name: 'Test Segment', size: 500000, growth: 10.2 }],
    [7m  [0m [91m                                                             ~~~~~~[0m
    [96msrc/tests/bi-persistence.test.ts[0m:[93m29[0m:[93m16[0m - [91merror[0m[90m TS18048: [0m'result' is possibly 'undefined'.

    [7m29[0m         expect(result.industry).toBe(marketData.industry)
    [7m  [0m [91m               ~~~~~~[0m
    [96msrc/tests/bi-persistence.test.ts[0m:[93m30[0m:[93m16[0m - [91merror[0m[90m TS18048: [0m'result' is possibly 'undefined'.

    [7m30[0m         expect(result.marketSize).toBe(marketData.marketSize)
    [7m  [0m [91m               ~~~~~~[0m
    [96msrc/tests/bi-persistence.test.ts[0m:[93m60[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'createdAt' does not exist in type 'BusinessMetrics'.

    [7m60[0m             createdAt: new Date()
    [7m  [0m [91m            ~~~~~~~~~[0m

FAIL src/tests/workflow.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/workflow.test.ts[0m:[93m29[0m:[93m7[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'role' does not exist in type 'UserRegistration'.

    [7m29[0m       role: UserRole.CONTENT_CREATOR,
    [7m  [0m [91m      ~~~~[0m
    [96msrc/tests/workflow.test.ts[0m:[93m38[0m:[93m7[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'role' does not exist in type 'UserRegistration'.

    [7m38[0m       role: UserRole.ADMINISTRATOR,
    [7m  [0m [91m      ~~~~[0m
    [96msrc/tests/workflow.test.ts[0m:[93m42[0m:[93m38[0m - [91merror[0m[90m TS2554: [0mExpected 2 arguments, but got 1.

    [7m42[0m     document = await DocumentService.createDocument({
    [7m  [0m [91m                                     ~~~~~~~~~~~~~~[0m

      [96msrc/services/documentService.ts[0m:[93m15[0m:[93m5[0m
        [7m15[0m     authorId: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'authorId' was not provided.
    [96msrc/tests/workflow.test.ts[0m:[93m63[0m:[93m14[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

    [7m63[0m       expect(templates[0].name).toBe('Strategy Document Review')
    [7m  [0m [91m             ~~~~~~~~~~~~[0m
    [96msrc/tests/workflow.test.ts[0m:[93m64[0m:[93m14[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

    [7m64[0m       expect(templates[1].name).toBe('Marketing Content Review')
    [7m  [0m [91m             ~~~~~~~~~~~~[0m
    [96msrc/tests/workflow.test.ts[0m:[93m120[0m:[93m50[0m - [91merror[0m[90m TS2554: [0mExpected 2 arguments, but got 1.

    [7m120[0m       const marketingDoc = await DocumentService.createDocument({
    [7m   [0m [91m                                                 ~~~~~~~~~~~~~~[0m

      [96msrc/services/documentService.ts[0m:[93m15[0m:[93m5[0m
        [7m15[0m     authorId: string,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~[0m
        An argument for 'authorId' was not provided.
    [96msrc/tests/workflow.test.ts[0m:[93m160[0m:[93m14[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

    [7m160[0m       expect(submitted.comments[0].content).toBe('Ready for review')
    [7m   [0m [91m             ~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/workflow.test.ts[0m:[93m192[0m:[93m14[0m - [91merror[0m[90m TS2532: [0mObject is possibly 'undefined'.

    [7m192[0m       expect(approved.approvals[0].action).toBe(WorkflowAction.APPROVE)
    [7m   [0m [91m             ~~~~~~~~~~~~~~~~~~~~~[0m

Test Suites: 3 failed, 3 total
Tests:       0 total
Snapshots:   0 total
Time:        18.02 s
Ran all test suites.
‚ÄâELIFECYCLE‚Äâ Test failed. See above for more details.
