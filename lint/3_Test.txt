2025-06-04T21:51:40.0544231Z Current runner version: '2.325.0'
2025-06-04T21:51:40.0567268Z ##[group]Runner Image Provisioner
2025-06-04T21:51:40.0568201Z Hosted Compute Agent
2025-06-04T21:51:40.0568858Z Version: 20250508.323
2025-06-04T21:51:40.0569636Z Commit: 81b259f29879f73b4213d199e42d8c3465dae986
2025-06-04T21:51:40.0570296Z Build Date: 2025-05-08T19:40:08Z
2025-06-04T21:51:40.0570958Z ##[endgroup]
2025-06-04T21:51:40.0571526Z ##[group]Operating System
2025-06-04T21:51:40.0572064Z Ubuntu
2025-06-04T21:51:40.0572604Z 24.04.2
2025-06-04T21:51:40.0573043Z LTS
2025-06-04T21:51:40.0573504Z ##[endgroup]
2025-06-04T21:51:40.0573989Z ##[group]Runner Image
2025-06-04T21:51:40.0574589Z Image: ubuntu-24.04
2025-06-04T21:51:40.0575066Z Version: 20250511.1.0
2025-06-04T21:51:40.0576157Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20250511.1/images/ubuntu/Ubuntu2404-Readme.md
2025-06-04T21:51:40.0577660Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20250511.1
2025-06-04T21:51:40.0578754Z ##[endgroup]
2025-06-04T21:51:40.0579947Z ##[group]GITHUB_TOKEN Permissions
2025-06-04T21:51:40.0581927Z Contents: read
2025-06-04T21:51:40.0582605Z Metadata: read
2025-06-04T21:51:40.0583115Z ##[endgroup]
2025-06-04T21:51:40.0585071Z Secret source: Actions
2025-06-04T21:51:40.0585884Z Prepare workflow directory
2025-06-04T21:51:40.1185418Z Prepare all required actions
2025-06-04T21:51:40.1223008Z Getting action download info
2025-06-04T21:51:40.5737880Z ##[group]Download immutable action package 'actions/checkout@v4'
2025-06-04T21:51:40.5738907Z Version: 4.2.2
2025-06-04T21:51:40.5740340Z Digest: sha256:ccb2698953eaebd21c7bf6268a94f9c26518a7e38e27e0b83c1fe1ad049819b1
2025-06-04T21:51:40.5741542Z Source commit SHA: 11bd71901bbe5b1630ceea73d27597364c9af683
2025-06-04T21:51:40.5742307Z ##[endgroup]
2025-06-04T21:51:40.6709714Z ##[group]Download immutable action package 'actions/setup-node@v4'
2025-06-04T21:51:40.6710661Z Version: 4.4.0
2025-06-04T21:51:40.6711561Z Digest: sha256:9427cefe82346e992fb5b949e3569b39d537ae41aa3086483b14eceebfc16bc1
2025-06-04T21:51:40.6712630Z Source commit SHA: 49933ea5288caeca8642d1e84afbd3f7d6820020
2025-06-04T21:51:40.6713444Z ##[endgroup]
2025-06-04T21:51:40.8072020Z Download action repository 'pnpm/action-setup@v4' (SHA:a7487c7e89a18df4991f7f222e4898a00d66ddda)
2025-06-04T21:51:41.3668240Z ##[group]Download immutable action package 'actions/cache@v4'
2025-06-04T21:51:41.3668974Z Version: 4.2.3
2025-06-04T21:51:41.3669940Z Digest: sha256:c8a3bb963e1f1826d8fcc8d1354f0dd29d8ac1db1d4f6f20247055ae11b81ed9
2025-06-04T21:51:41.3670863Z Source commit SHA: 5a3ec84eff668545956fd18022155c47e93e2684
2025-06-04T21:51:41.3671521Z ##[endgroup]
2025-06-04T21:51:41.6263342Z Complete job name: Test
2025-06-04T21:51:41.6820969Z ##[group]Checking docker version
2025-06-04T21:51:41.6834951Z ##[command]/usr/bin/docker version --format '{{.Server.APIVersion}}'
2025-06-04T21:51:41.7936838Z '1.48'
2025-06-04T21:51:41.7951292Z Docker daemon API version: '1.48'
2025-06-04T21:51:41.7952693Z ##[command]/usr/bin/docker version --format '{{.Client.APIVersion}}'
2025-06-04T21:51:41.8179621Z '1.48'
2025-06-04T21:51:41.8192046Z Docker client API version: '1.48'
2025-06-04T21:51:41.8197729Z ##[endgroup]
2025-06-04T21:51:41.8201259Z ##[group]Clean up resources from previous jobs
2025-06-04T21:51:41.8207257Z ##[command]/usr/bin/docker ps --all --quiet --no-trunc --filter "label=35cc9b"
2025-06-04T21:51:41.8342677Z ##[command]/usr/bin/docker network prune --force --filter "label=35cc9b"
2025-06-04T21:51:41.8467012Z ##[endgroup]
2025-06-04T21:51:41.8467825Z ##[group]Create local container network
2025-06-04T21:51:41.8478179Z ##[command]/usr/bin/docker network create --label 35cc9b github_network_6b650f71936e4c90a2bc0d16c3b8fcf8
2025-06-04T21:51:41.8975042Z 6b29a558b67ee781a90aba1b6c80f243a5b8a7bbb7f8a87556e873131f6f2e4b
2025-06-04T21:51:41.8994238Z ##[endgroup]
2025-06-04T21:51:41.9019366Z ##[group]Starting redis service container
2025-06-04T21:51:41.9039636Z ##[command]/usr/bin/docker pull redis:latest
2025-06-04T21:51:42.8901911Z latest: Pulling from library/redis
2025-06-04T21:51:43.1404009Z 61320b01ae5e: Pulling fs layer
2025-06-04T21:51:43.1405752Z 2eadfe3f8ccb: Pulling fs layer
2025-06-04T21:51:43.1406898Z 7cd6cf8be223: Pulling fs layer
2025-06-04T21:51:43.1408025Z b99b504f32ae: Pulling fs layer
2025-06-04T21:51:43.1409367Z 1db54fb7bf48: Pulling fs layer
2025-06-04T21:51:43.1410496Z 4f4fb700ef54: Pulling fs layer
2025-06-04T21:51:43.1411606Z 85952d2db39a: Pulling fs layer
2025-06-04T21:51:43.1412687Z 85952d2db39a: Waiting
2025-06-04T21:51:43.1413650Z 4f4fb700ef54: Waiting
2025-06-04T21:51:43.1414609Z b99b504f32ae: Waiting
2025-06-04T21:51:43.1415572Z 1db54fb7bf48: Waiting
2025-06-04T21:51:43.3853937Z 2eadfe3f8ccb: Verifying Checksum
2025-06-04T21:51:43.3855849Z 2eadfe3f8ccb: Download complete
2025-06-04T21:51:43.4035055Z 7cd6cf8be223: Download complete
2025-06-04T21:51:43.5323204Z 61320b01ae5e: Verifying Checksum
2025-06-04T21:51:43.5325270Z 61320b01ae5e: Download complete
2025-06-04T21:51:43.6472379Z 1db54fb7bf48: Verifying Checksum
2025-06-04T21:51:43.6478665Z 1db54fb7bf48: Download complete
2025-06-04T21:51:43.6992050Z b99b504f32ae: Verifying Checksum
2025-06-04T21:51:43.6994754Z b99b504f32ae: Download complete
2025-06-04T21:51:43.7774892Z 4f4fb700ef54: Download complete
2025-06-04T21:51:43.9030931Z 85952d2db39a: Verifying Checksum
2025-06-04T21:51:43.9031758Z 85952d2db39a: Download complete
2025-06-04T21:51:44.6318557Z 61320b01ae5e: Pull complete
2025-06-04T21:51:45.1058995Z 2eadfe3f8ccb: Pull complete
2025-06-04T21:51:45.1648955Z 7cd6cf8be223: Pull complete
2025-06-04T21:51:45.4527633Z b99b504f32ae: Pull complete
2025-06-04T21:51:45.4620319Z 1db54fb7bf48: Pull complete
2025-06-04T21:51:45.4724610Z 4f4fb700ef54: Pull complete
2025-06-04T21:51:45.4861568Z 85952d2db39a: Pull complete
2025-06-04T21:51:45.4908423Z Digest: sha256:dbf3e4b6ad3ece9c733282ff3f16942ed754fdc4ea12332154f30a9a9b88c3af
2025-06-04T21:51:45.4923644Z Status: Downloaded newer image for redis:latest
2025-06-04T21:51:45.4933200Z docker.io/library/redis:latest
2025-06-04T21:51:45.4967070Z ##[command]/usr/bin/docker create --name bf83ecc7e3ae463081a9c4e9200ade6b_redislatest_6761ba --label 35cc9b --network github_network_6b650f71936e4c90a2bc0d16c3b8fcf8 --network-alias redis -p 6379:6379 --health-cmd "redis-cli ping" --health-interval 10s --health-timeout 5s --health-retries 5 --name redis-service -e GITHUB_ACTIONS=true -e CI=true redis:latest
2025-06-04T21:51:45.5258748Z 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T21:51:45.5281219Z ##[command]/usr/bin/docker start 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T21:51:45.8790587Z 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T21:51:45.8816640Z ##[command]/usr/bin/docker ps --all --filter id=0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0 --filter status=running --no-trunc --format "{{.ID}} {{.Status}}"
2025-06-04T21:51:45.8945003Z 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0 Up Less than a second (health: starting)
2025-06-04T21:51:45.8969512Z ##[command]/usr/bin/docker port 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T21:51:45.9078324Z 6379/tcp -> 0.0.0.0:6379
2025-06-04T21:51:45.9078750Z 6379/tcp -> [::]:6379
2025-06-04T21:51:45.9121715Z ##[endgroup]
2025-06-04T21:51:45.9130968Z ##[group]Waiting for all services to be ready
2025-06-04T21:51:45.9144076Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T21:51:45.9253554Z starting
2025-06-04T21:51:45.9274777Z redis service is starting, waiting 2 seconds before checking again.
2025-06-04T21:51:47.9275160Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T21:51:47.9394085Z starting
2025-06-04T21:51:47.9407838Z redis service is starting, waiting 3 seconds before checking again.
2025-06-04T21:51:51.6487586Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T21:51:51.6610283Z starting
2025-06-04T21:51:51.6623492Z redis service is starting, waiting 8 seconds before checking again.
2025-06-04T21:51:59.9506544Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T21:51:59.9632522Z healthy
2025-06-04T21:51:59.9649713Z redis service is healthy.
2025-06-04T21:51:59.9650357Z ##[endgroup]
2025-06-04T21:51:59.9876789Z ##[group]Run actions/checkout@v4
2025-06-04T21:51:59.9877323Z with:
2025-06-04T21:51:59.9877524Z   submodules: recursive
2025-06-04T21:51:59.9877792Z   repository: nochadisfaction/pixelated
2025-06-04T21:51:59.9878183Z   token: ***
2025-06-04T21:51:59.9878367Z   ssh-strict: true
2025-06-04T21:51:59.9878573Z   ssh-user: git
2025-06-04T21:51:59.9878765Z   persist-credentials: true
2025-06-04T21:51:59.9878991Z   clean: true
2025-06-04T21:51:59.9879509Z   sparse-checkout-cone-mode: true
2025-06-04T21:51:59.9879814Z   fetch-depth: 1
2025-06-04T21:51:59.9880017Z   fetch-tags: false
2025-06-04T21:51:59.9880218Z   show-progress: true
2025-06-04T21:51:59.9880424Z   lfs: false
2025-06-04T21:51:59.9880609Z   set-safe-directory: true
2025-06-04T21:51:59.9881449Z env:
2025-06-04T21:51:59.9881703Z   PNPM_HOME: /home/runner/work/pixelated/pixelated/.pnpm
2025-06-04T21:51:59.9882053Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:51:59.9882311Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:51:59.9882569Z   VITEST_TIMEOUT: 30000
2025-06-04T21:51:59.9882774Z   SKIP_REDIS_TESTS: true
2025-06-04T21:51:59.9882981Z   SKIP_FHE_TESTS: true
2025-06-04T21:51:59.9883189Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:51:59.9883415Z ##[endgroup]
2025-06-04T21:52:00.0943533Z Syncing repository: nochadisfaction/pixelated
2025-06-04T21:52:00.0944802Z ##[group]Getting Git version info
2025-06-04T21:52:00.0945193Z Working directory is '/home/runner/work/pixelated/pixelated'
2025-06-04T21:52:00.0945729Z [command]/usr/bin/git version
2025-06-04T21:52:00.1041428Z git version 2.49.0
2025-06-04T21:52:00.1067307Z ##[endgroup]
2025-06-04T21:52:00.1080753Z Temporarily overriding HOME='/home/runner/work/_temp/1339104b-2f46-4c1c-9ab8-a3301bafe864' before making global git config changes
2025-06-04T21:52:00.1081578Z Adding repository directory to the temporary git global config as a safe directory
2025-06-04T21:52:00.1085816Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/pixelated/pixelated
2025-06-04T21:52:00.1121063Z Deleting the contents of '/home/runner/work/pixelated/pixelated'
2025-06-04T21:52:00.1124708Z ##[group]Initializing the repository
2025-06-04T21:52:00.1128800Z [command]/usr/bin/git init /home/runner/work/pixelated/pixelated
2025-06-04T21:52:00.1223765Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-06-04T21:52:00.1224990Z hint: is subject to change. To configure the initial branch name to use in all
2025-06-04T21:52:00.1225562Z hint: of your new repositories, which will suppress this warning, call:
2025-06-04T21:52:00.1225948Z hint:
2025-06-04T21:52:00.1226222Z hint: 	git config --global init.defaultBranch <name>
2025-06-04T21:52:00.1226549Z hint:
2025-06-04T21:52:00.1226875Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-06-04T21:52:00.1227517Z hint: 'development'. The just-created branch can be renamed via this command:
2025-06-04T21:52:00.1227942Z hint:
2025-06-04T21:52:00.1228145Z hint: 	git branch -m <name>
2025-06-04T21:52:00.1230976Z Initialized empty Git repository in /home/runner/work/pixelated/pixelated/.git/
2025-06-04T21:52:00.1242651Z [command]/usr/bin/git remote add origin https://github.com/nochadisfaction/pixelated
2025-06-04T21:52:00.1277109Z ##[endgroup]
2025-06-04T21:52:00.1277722Z ##[group]Disabling automatic garbage collection
2025-06-04T21:52:00.1282641Z [command]/usr/bin/git config --local gc.auto 0
2025-06-04T21:52:00.1311106Z ##[endgroup]
2025-06-04T21:52:00.1311693Z ##[group]Setting up auth
2025-06-04T21:52:00.1318357Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-06-04T21:52:00.1348017Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-06-04T21:52:00.1689773Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-06-04T21:52:00.1720139Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-06-04T21:52:00.1936913Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-06-04T21:52:00.1979613Z ##[endgroup]
2025-06-04T21:52:00.1980266Z ##[group]Fetching the repository
2025-06-04T21:52:00.1988362Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +eee88bf9c2234d2ab50d5d867568ad2a7638a9ac:refs/remotes/pull/2/merge
2025-06-04T21:52:09.9115696Z From https://github.com/nochadisfaction/pixelated
2025-06-04T21:52:09.9116428Z  * [new ref]             eee88bf9c2234d2ab50d5d867568ad2a7638a9ac -> pull/2/merge
2025-06-04T21:52:09.9146490Z ##[endgroup]
2025-06-04T21:52:09.9147013Z ##[group]Determining the checkout info
2025-06-04T21:52:09.9149030Z ##[endgroup]
2025-06-04T21:52:09.9157612Z [command]/usr/bin/git sparse-checkout disable
2025-06-04T21:52:09.9201593Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2025-06-04T21:52:09.9227760Z ##[group]Checking out the ref
2025-06-04T21:52:09.9233792Z [command]/usr/bin/git checkout --progress --force refs/remotes/pull/2/merge
2025-06-04T21:52:11.0118924Z Updating files:   4% (4167/83443)
2025-06-04T21:52:11.1757467Z Updating files:   5% (4173/83443)
2025-06-04T21:52:11.2501883Z Updating files:   6% (5007/83443)
2025-06-04T21:52:11.3210635Z Updating files:   7% (5842/83443)
2025-06-04T21:52:11.5674912Z Updating files:   8% (6676/83443)
2025-06-04T21:52:11.6281711Z Updating files:   9% (7510/83443)
2025-06-04T21:52:11.7165191Z Updating files:  10% (8345/83443)
2025-06-04T21:52:11.7706246Z Updating files:  11% (9179/83443)
2025-06-04T21:52:11.8082871Z Updating files:  12% (10014/83443)
2025-06-04T21:52:11.8541017Z Updating files:  13% (10848/83443)
2025-06-04T21:52:11.9174312Z Updating files:  14% (11683/83443)
2025-06-04T21:52:12.0060553Z Updating files:  15% (12517/83443)
2025-06-04T21:52:12.0241586Z Updating files:  15% (13128/83443)
2025-06-04T21:52:12.1166860Z Updating files:  16% (13351/83443)
2025-06-04T21:52:12.2478978Z Updating files:  17% (14186/83443)
2025-06-04T21:52:12.3182418Z Updating files:  18% (15020/83443)
2025-06-04T21:52:12.3871691Z Updating files:  19% (15855/83443)
2025-06-04T21:52:12.4629379Z Updating files:  20% (16689/83443)
2025-06-04T21:52:12.5401029Z Updating files:  21% (17524/83443)
2025-06-04T21:52:12.6255358Z Updating files:  22% (18358/83443)
2025-06-04T21:52:12.7153215Z Updating files:  23% (19192/83443)
2025-06-04T21:52:12.7929856Z Updating files:  24% (20027/83443)
2025-06-04T21:52:12.8941121Z Updating files:  25% (20861/83443)
2025-06-04T21:52:12.9657037Z Updating files:  26% (21696/83443)
2025-06-04T21:52:13.0060672Z Updating files:  27% (22530/83443)
2025-06-04T21:52:13.0438494Z Updating files:  27% (22962/83443)
2025-06-04T21:52:13.1036208Z Updating files:  28% (23365/83443)
2025-06-04T21:52:13.1875365Z Updating files:  29% (24199/83443)
2025-06-04T21:52:13.2540250Z Updating files:  30% (25033/83443)
2025-06-04T21:52:13.2989783Z Updating files:  31% (25868/83443)
2025-06-04T21:52:13.3425182Z Updating files:  32% (26702/83443)
2025-06-04T21:52:13.4387083Z Updating files:  33% (27537/83443)
2025-06-04T21:52:13.4666268Z Updating files:  34% (28371/83443)
2025-06-04T21:52:13.4942234Z Updating files:  35% (29206/83443)
2025-06-04T21:52:13.5210644Z Updating files:  36% (30040/83443)
2025-06-04T21:52:13.5477131Z Updating files:  37% (30874/83443)
2025-06-04T21:52:13.5740013Z Updating files:  38% (31709/83443)
2025-06-04T21:52:13.5999825Z Updating files:  39% (32543/83443)
2025-06-04T21:52:13.6280678Z Updating files:  40% (33378/83443)
2025-06-04T21:52:13.6543589Z Updating files:  41% (34212/83443)
2025-06-04T21:52:13.6810726Z Updating files:  42% (35047/83443)
2025-06-04T21:52:13.7076403Z Updating files:  43% (35881/83443)
2025-06-04T21:52:13.7347067Z Updating files:  44% (36715/83443)
2025-06-04T21:52:13.7618591Z Updating files:  45% (37550/83443)
2025-06-04T21:52:13.7892400Z Updating files:  46% (38384/83443)
2025-06-04T21:52:13.8177963Z Updating files:  47% (39219/83443)
2025-06-04T21:52:13.8448345Z Updating files:  48% (40053/83443)
2025-06-04T21:52:13.8714816Z Updating files:  49% (40888/83443)
2025-06-04T21:52:13.8985218Z Updating files:  50% (41722/83443)
2025-06-04T21:52:13.9265271Z Updating files:  51% (42556/83443)
2025-06-04T21:52:13.9531529Z Updating files:  52% (43391/83443)
2025-06-04T21:52:13.9794048Z Updating files:  53% (44225/83443)
2025-06-04T21:52:14.0060066Z Updating files:  54% (45060/83443)
2025-06-04T21:52:14.0060693Z Updating files:  54% (45892/83443)
2025-06-04T21:52:14.0330929Z Updating files:  55% (45894/83443)
2025-06-04T21:52:14.0595216Z Updating files:  56% (46729/83443)
2025-06-04T21:52:14.0863291Z Updating files:  57% (47563/83443)
2025-06-04T21:52:14.1131174Z Updating files:  58% (48397/83443)
2025-06-04T21:52:14.1392833Z Updating files:  59% (49232/83443)
2025-06-04T21:52:14.1662382Z Updating files:  60% (50066/83443)
2025-06-04T21:52:14.1932041Z Updating files:  61% (50901/83443)
2025-06-04T21:52:14.2195192Z Updating files:  62% (51735/83443)
2025-06-04T21:52:14.2457451Z Updating files:  63% (52570/83443)
2025-06-04T21:52:14.2726104Z Updating files:  64% (53404/83443)
2025-06-04T21:52:14.3099685Z Updating files:  65% (54238/83443)
2025-06-04T21:52:14.3961734Z Updating files:  66% (55073/83443)
2025-06-04T21:52:14.4768872Z Updating files:  67% (55907/83443)
2025-06-04T21:52:14.5525396Z Updating files:  68% (56742/83443)
2025-06-04T21:52:14.5975167Z Updating files:  69% (57576/83443)
2025-06-04T21:52:14.6858179Z Updating files:  70% (58411/83443)
2025-06-04T21:52:14.7662972Z Updating files:  71% (59245/83443)
2025-06-04T21:52:14.8774549Z Updating files:  72% (60079/83443)
2025-06-04T21:52:14.9698774Z Updating files:  73% (60914/83443)
2025-06-04T21:52:15.0061468Z Updating files:  74% (61748/83443)
2025-06-04T21:52:15.0515527Z Updating files:  74% (62204/83443)
2025-06-04T21:52:15.1261893Z Updating files:  75% (62583/83443)
2025-06-04T21:52:15.2210554Z Updating files:  76% (63417/83443)
2025-06-04T21:52:15.2994687Z Updating files:  77% (64252/83443)
2025-06-04T21:52:15.4244234Z Updating files:  78% (65086/83443)
2025-06-04T21:52:15.5111472Z Updating files:  79% (65920/83443)
2025-06-04T21:52:15.5886440Z Updating files:  80% (66755/83443)
2025-06-04T21:52:15.6985272Z Updating files:  81% (67589/83443)
2025-06-04T21:52:15.7638760Z Updating files:  82% (68424/83443)
2025-06-04T21:52:15.8292377Z Updating files:  83% (69258/83443)
2025-06-04T21:52:15.9119496Z Updating files:  84% (70093/83443)
2025-06-04T21:52:16.0061252Z Updating files:  85% (70927/83443)
2025-06-04T21:52:16.0144771Z Updating files:  85% (71623/83443)
2025-06-04T21:52:16.1025696Z Updating files:  86% (71761/83443)
2025-06-04T21:52:16.2068354Z Updating files:  87% (72596/83443)
2025-06-04T21:52:16.2723678Z Updating files:  88% (73430/83443)
2025-06-04T21:52:16.3332705Z Updating files:  89% (74265/83443)
2025-06-04T21:52:16.3884742Z Updating files:  90% (75099/83443)
2025-06-04T21:52:16.4640223Z Updating files:  91% (75934/83443)
2025-06-04T21:52:16.5505735Z Updating files:  92% (76768/83443)
2025-06-04T21:52:16.6437421Z Updating files:  93% (77602/83443)
2025-06-04T21:52:16.7750086Z Updating files:  94% (78437/83443)
2025-06-04T21:52:16.8490342Z Updating files:  95% (79271/83443)
2025-06-04T21:52:16.9265392Z Updating files:  96% (80106/83443)
2025-06-04T21:52:16.9649469Z Updating files:  97% (80940/83443)
2025-06-04T21:52:17.0059873Z Updating files:  98% (81775/83443)
2025-06-04T21:52:17.1063449Z Updating files:  98% (82111/83443)
2025-06-04T21:52:17.1597315Z Updating files:  99% (82609/83443)
2025-06-04T21:52:17.1597741Z Updating files: 100% (83443/83443)
2025-06-04T21:52:17.1598123Z Updating files: 100% (83443/83443), done.
2025-06-04T21:52:17.2710892Z Note: switching to 'refs/remotes/pull/2/merge'.
2025-06-04T21:52:17.2711297Z 
2025-06-04T21:52:17.2711612Z You are in 'detached HEAD' state. You can look around, make experimental
2025-06-04T21:52:17.2712598Z changes and commit them, and you can discard any commits you make in this
2025-06-04T21:52:17.2713327Z state without impacting any branches by switching back to a branch.
2025-06-04T21:52:17.2713742Z 
2025-06-04T21:52:17.2714018Z If you want to create a new branch to retain commits you create, you may
2025-06-04T21:52:17.2714678Z do so (now or later) by using -c with the switch command. Example:
2025-06-04T21:52:17.2715051Z 
2025-06-04T21:52:17.2715206Z   git switch -c <new-branch-name>
2025-06-04T21:52:17.2715460Z 
2025-06-04T21:52:17.2715601Z Or undo this operation with:
2025-06-04T21:52:17.2715888Z 
2025-06-04T21:52:17.2716009Z   git switch -
2025-06-04T21:52:17.2716182Z 
2025-06-04T21:52:17.2716499Z Turn off this advice by setting config variable advice.detachedHead to false
2025-06-04T21:52:17.2716949Z 
2025-06-04T21:52:17.2717493Z HEAD is now at eee88bf9c Merge a7ab312bee181441b3edbb4a374fb42bff08c442 into a01b55b8ccd924680002ffc57ed60baa1f256fdc
2025-06-04T21:52:17.4308153Z ##[endgroup]
2025-06-04T21:52:17.4308585Z ##[group]Setting up auth for fetching submodules
2025-06-04T21:52:17.4314630Z [command]/usr/bin/git config --global http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-06-04T21:52:17.4356768Z [command]/usr/bin/git config --global --unset-all url.https://github.com/.insteadOf
2025-06-04T21:52:17.4385043Z [command]/usr/bin/git config --global --add url.https://github.com/.insteadOf git@github.com:
2025-06-04T21:52:17.4416575Z [command]/usr/bin/git config --global --add url.https://github.com/.insteadOf org-150661001@github.com:
2025-06-04T21:52:17.4441734Z ##[endgroup]
2025-06-04T21:52:17.4442274Z ##[group]Fetching submodules
2025-06-04T21:52:17.4446123Z [command]/usr/bin/git submodule sync --recursive
2025-06-04T21:52:17.4741922Z [command]/usr/bin/git -c protocol.version=2 submodule update --init --force --depth=1 --recursive
2025-06-04T21:52:17.5052360Z [command]/usr/bin/git submodule foreach --recursive git config --local gc.auto 0
2025-06-04T21:52:17.5340531Z ##[endgroup]
2025-06-04T21:52:17.5341179Z ##[group]Persisting credentials for submodules
2025-06-04T21:52:17.5348042Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'url\.https\:\/\/github\.com\/\.insteadOf' && git config --local --unset-all 'url.https://github.com/.insteadOf' || :"
2025-06-04T21:52:17.5662555Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local 'http.https://github.com/.extraheader' 'AUTHORIZATION: basic ***' && git config --local --show-origin --name-only --get-regexp remote.origin.url"
2025-06-04T21:52:17.5961482Z [command]/usr/bin/git submodule foreach --recursive git config --local --add 'url.https://github.com/.insteadOf' 'git@github.com:'
2025-06-04T21:52:17.6256733Z [command]/usr/bin/git submodule foreach --recursive git config --local --add 'url.https://github.com/.insteadOf' 'org-150661001@github.com:'
2025-06-04T21:52:17.6555618Z ##[endgroup]
2025-06-04T21:52:17.6593327Z [command]/usr/bin/git log -1 --format=%H
2025-06-04T21:52:17.6615079Z eee88bf9c2234d2ab50d5d867568ad2a7638a9ac
2025-06-04T21:52:17.6820624Z ##[group]Run actions/setup-node@v4
2025-06-04T21:52:17.6820889Z with:
2025-06-04T21:52:17.6821056Z   node-version: 22.x
2025-06-04T21:52:17.6821251Z   always-auth: false
2025-06-04T21:52:17.6821436Z   check-latest: false
2025-06-04T21:52:17.6821927Z   token: ***
2025-06-04T21:52:17.6822091Z env:
2025-06-04T21:52:17.6822313Z   PNPM_HOME: /home/runner/work/pixelated/pixelated/.pnpm
2025-06-04T21:52:17.6822614Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:17.6822852Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:17.6823055Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:17.6823249Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:17.6823443Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:17.6823636Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:17.6823853Z ##[endgroup]
2025-06-04T21:52:17.8808764Z Found in cache @ /opt/hostedtoolcache/node/22.15.0/x64
2025-06-04T21:52:17.8815440Z ##[group]Environment details
2025-06-04T21:52:19.6490983Z node: v22.15.0
2025-06-04T21:52:19.6491381Z npm: 10.9.2
2025-06-04T21:52:19.6491769Z yarn: 1.22.22
2025-06-04T21:52:19.6492499Z ##[endgroup]
2025-06-04T21:52:19.6604368Z ##[group]Run corepack enable
2025-06-04T21:52:19.6604698Z [36;1mcorepack enable[0m
2025-06-04T21:52:19.6691020Z shell: /usr/bin/bash -e {0}
2025-06-04T21:52:19.6691276Z env:
2025-06-04T21:52:19.6691535Z   PNPM_HOME: /home/runner/work/pixelated/pixelated/.pnpm
2025-06-04T21:52:19.6691873Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:19.6692122Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:19.6692346Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:19.6692547Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:19.6692741Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:19.6692935Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:19.6693151Z ##[endgroup]
2025-06-04T21:52:19.7820144Z ##[group]Run pnpm/action-setup@v4
2025-06-04T21:52:19.7820398Z with:
2025-06-04T21:52:19.7820559Z   version: 10.11.0
2025-06-04T21:52:19.7820737Z   run_install: false
2025-06-04T21:52:19.7820916Z   dest: ~/setup-pnpm
2025-06-04T21:52:19.7821112Z   package_json_file: package.json
2025-06-04T21:52:19.7821330Z   standalone: false
2025-06-04T21:52:19.7821511Z env:
2025-06-04T21:52:19.7821723Z   PNPM_HOME: /home/runner/work/pixelated/pixelated/.pnpm
2025-06-04T21:52:19.7822037Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:19.7822283Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:19.7822479Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:19.7822670Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:19.7822852Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:19.7823048Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:19.7823254Z ##[endgroup]
2025-06-04T21:52:19.8357246Z ##[group]Running self-installer...
2025-06-04T21:52:20.3618465Z Progress: resolved 1, reused 0, downloaded 0, added 0
2025-06-04T21:52:20.3731683Z Packages: +1
2025-06-04T21:52:20.3732025Z +
2025-06-04T21:52:20.7988896Z Progress: resolved 1, reused 0, downloaded 1, added 1, done
2025-06-04T21:52:20.8301376Z 
2025-06-04T21:52:20.8301829Z dependencies:
2025-06-04T21:52:20.8302318Z + pnpm 10.11.0 (10.11.1 is available)
2025-06-04T21:52:20.8302514Z 
2025-06-04T21:52:20.8358101Z Done in 840ms
2025-06-04T21:52:20.8529654Z ##[endgroup]
2025-06-04T21:52:20.8534148Z Installation Completed!
2025-06-04T21:52:20.8604766Z ##[group]Run mkdir -p node_modules/supabase/bin
2025-06-04T21:52:20.8605132Z [36;1mmkdir -p node_modules/supabase/bin[0m
2025-06-04T21:52:20.8605411Z [36;1mchmod +x node_modules/supabase/bin[0m
2025-06-04T21:52:20.8657188Z shell: /usr/bin/bash -e {0}
2025-06-04T21:52:20.8657405Z env:
2025-06-04T21:52:20.8657631Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:52:20.8657938Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:20.8658190Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:20.8658394Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:20.8658581Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:20.8658777Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:20.8658965Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:20.8659371Z ##[endgroup]
2025-06-04T21:52:20.8772731Z ##[group]Run mkdir -p $PNPM_HOME
2025-06-04T21:52:20.8773026Z [36;1mmkdir -p $PNPM_HOME[0m
2025-06-04T21:52:20.8773283Z [36;1mecho "$PNPM_HOME" >> $GITHUB_PATH[0m
2025-06-04T21:52:20.8818669Z shell: /usr/bin/bash -e {0}
2025-06-04T21:52:20.8819226Z env:
2025-06-04T21:52:20.8819500Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:52:20.8819828Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:20.8820105Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:20.8820320Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:20.8820533Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:20.8820743Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:20.8820959Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:20.8821186Z ##[endgroup]
2025-06-04T21:52:20.8918302Z ##[group]Run which pnpm || echo "pnpm not found in PATH"
2025-06-04T21:52:20.8918656Z [36;1mwhich pnpm || echo "pnpm not found in PATH"[0m
2025-06-04T21:52:20.8918939Z [36;1mpnpm --version[0m
2025-06-04T21:52:20.8919406Z [36;1mecho "PNPM_HOME: $PNPM_HOME"[0m
2025-06-04T21:52:20.8919650Z [36;1mecho "PATH: $PATH"[0m
2025-06-04T21:52:20.8964886Z shell: /usr/bin/bash -e {0}
2025-06-04T21:52:20.8965099Z env:
2025-06-04T21:52:20.8965322Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:52:20.8965654Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:20.8965897Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:20.8966103Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:20.8966289Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:20.8966480Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:20.8966668Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:20.8966881Z ##[endgroup]
2025-06-04T21:52:20.9045747Z /home/runner/setup-pnpm/node_modules/.bin/pnpm
2025-06-04T21:52:21.4237559Z 10.11.0
2025-06-04T21:52:21.4317348Z PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:52:21.4320807Z PATH: /home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
2025-06-04T21:52:21.4354312Z ##[group]Run echo "STORE_PATH=$(pnpm store path)" >> $GITHUB_OUTPUT
2025-06-04T21:52:21.4354757Z [36;1mecho "STORE_PATH=$(pnpm store path)" >> $GITHUB_OUTPUT[0m
2025-06-04T21:52:21.4406493Z shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}
2025-06-04T21:52:21.4406799Z env:
2025-06-04T21:52:21.4407017Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:52:21.4407348Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:21.4407593Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:21.4407794Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:21.4407988Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:21.4408175Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:21.4408372Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:21.4408581Z ##[endgroup]
2025-06-04T21:52:27.9985911Z ##[group]Run actions/cache@v4
2025-06-04T21:52:27.9986170Z with:
2025-06-04T21:52:27.9986412Z   path: /home/runner/setup-pnpm/node_modules/.bin/store/v10
2025-06-04T21:52:27.9986898Z   key: Linux-pnpm-store-d40f7695f5fc24af859f4094fb70e2049dae2fa1d650dd8184c1fce824f04d32
2025-06-04T21:52:27.9987349Z   restore-keys: Linux-pnpm-store-

2025-06-04T21:52:27.9987592Z   enableCrossOsArchive: false
2025-06-04T21:52:27.9987822Z   fail-on-cache-miss: false
2025-06-04T21:52:27.9988021Z   lookup-only: false
2025-06-04T21:52:27.9988210Z   save-always: false
2025-06-04T21:52:27.9988378Z env:
2025-06-04T21:52:27.9988588Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:52:27.9988886Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:27.9989325Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:27.9989530Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:27.9989716Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:27.9989912Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:27.9990141Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:27.9990352Z ##[endgroup]
2025-06-04T21:52:28.4405732Z Cache hit for: Linux-pnpm-store-d40f7695f5fc24af859f4094fb70e2049dae2fa1d650dd8184c1fce824f04d32
2025-06-04T21:52:29.7936551Z Received 0 of 650543306 (0.0%), 0.0 MBs/sec
2025-06-04T21:52:30.7941303Z Received 100663296 of 650543306 (15.5%), 48.0 MBs/sec
2025-06-04T21:52:31.7954101Z Received 201326592 of 650543306 (30.9%), 64.0 MBs/sec
2025-06-04T21:52:32.7969401Z Received 293601280 of 650543306 (45.1%), 69.9 MBs/sec
2025-06-04T21:52:33.7972887Z Received 402653184 of 650543306 (61.9%), 76.7 MBs/sec
2025-06-04T21:52:34.7983234Z Received 528482304 of 650543306 (81.2%), 83.9 MBs/sec
2025-06-04T21:52:35.7988634Z Received 612368384 of 650543306 (94.1%), 83.4 MBs/sec
2025-06-04T21:52:36.1217846Z Received 650543306 of 650543306 (100.0%), 84.7 MBs/sec
2025-06-04T21:52:36.1221363Z Cache Size: ~620 MB (650543306 B)
2025-06-04T21:52:36.1339685Z [command]/usr/bin/tar -xf /home/runner/work/_temp/bce64bdc-1ec4-40a9-937b-4ef1f7bbd292/cache.tzst -P -C /home/runner/work/pixelated/pixelated --use-compress-program unzstd
2025-06-04T21:52:43.9246215Z Cache restored successfully
2025-06-04T21:52:44.0445281Z Cache restored from key: Linux-pnpm-store-b3446d8c68abd51a30aaf9ae3f7360bf88b6376b2942c22c2944d55a191e2319
2025-06-04T21:52:44.0568086Z ##[group]Run pnpm install --no-frozen-lockfile --reporter=verbose
2025-06-04T21:52:44.0568533Z [36;1mpnpm install --no-frozen-lockfile --reporter=verbose[0m
2025-06-04T21:52:44.0619534Z shell: /usr/bin/bash -e {0}
2025-06-04T21:52:44.0619763Z env:
2025-06-04T21:52:44.0620001Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:52:44.0620327Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:44.0620572Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:44.0620780Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:44.0620974Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:44.0621170Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:44.0621367Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:44.0621585Z ##[endgroup]
2025-06-04T21:52:55.6530764Z ##[group]Run sudo apt-get update && sudo apt-get install -y redis-tools
2025-06-04T21:52:55.6531266Z [36;1msudo apt-get update && sudo apt-get install -y redis-tools[0m
2025-06-04T21:52:55.6582068Z shell: /usr/bin/bash -e {0}
2025-06-04T21:52:55.6582342Z env:
2025-06-04T21:52:55.6582573Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:52:55.6582910Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:52:55.6583150Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:52:55.6583357Z   VITEST_TIMEOUT: 30000
2025-06-04T21:52:55.6583549Z   SKIP_REDIS_TESTS: true
2025-06-04T21:52:55.6583737Z   SKIP_FHE_TESTS: true
2025-06-04T21:52:55.6583936Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:52:55.6584149Z ##[endgroup]
2025-06-04T21:52:55.7326607Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2025-06-04T21:52:55.7684113Z Hit:2 http://azure.archive.ubuntu.com/ubuntu noble InRelease
2025-06-04T21:52:55.7688872Z Get:6 https://packages.microsoft.com/repos/azure-cli noble InRelease [3564 B]
2025-06-04T21:52:55.7707642Z Get:3 http://azure.archive.ubuntu.com/ubuntu noble-updates InRelease [126 kB]
2025-06-04T21:52:55.7771439Z Get:4 http://azure.archive.ubuntu.com/ubuntu noble-backports InRelease [126 kB]
2025-06-04T21:52:55.7787571Z Get:7 https://packages.microsoft.com/ubuntu/24.04/prod noble InRelease [3600 B]
2025-06-04T21:52:55.7793598Z Get:5 http://azure.archive.ubuntu.com/ubuntu noble-security InRelease [126 kB]
2025-06-04T21:52:55.8941676Z Get:8 https://packages.microsoft.com/repos/azure-cli noble/main amd64 Packages [1377 B]
2025-06-04T21:52:55.9396258Z Get:9 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 Packages [1112 kB]
2025-06-04T21:52:55.9473730Z Get:10 http://azure.archive.ubuntu.com/ubuntu noble-updates/main Translation-en [237 kB]
2025-06-04T21:52:55.9494753Z Get:11 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 Components [161 kB]
2025-06-04T21:52:55.9514182Z Get:12 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe amd64 Packages [1070 kB]
2025-06-04T21:52:55.9578822Z Get:13 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe Translation-en [272 kB]
2025-06-04T21:52:55.9604198Z Get:14 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe amd64 Components [376 kB]
2025-06-04T21:52:55.9647930Z Get:15 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Packages [1174 kB]
2025-06-04T21:52:55.9721103Z Get:16 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted Translation-en [243 kB]
2025-06-04T21:52:55.9749274Z Get:17 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Components [212 B]
2025-06-04T21:52:55.9760201Z Get:18 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 Components [940 B]
2025-06-04T21:52:56.0407658Z Get:19 http://azure.archive.ubuntu.com/ubuntu noble-backports/main amd64 Packages [39.2 kB]
2025-06-04T21:52:56.0425714Z Get:20 http://azure.archive.ubuntu.com/ubuntu noble-backports/main amd64 Components [7068 B]
2025-06-04T21:52:56.0440987Z Get:21 http://azure.archive.ubuntu.com/ubuntu noble-backports/universe amd64 Packages [27.1 kB]
2025-06-04T21:52:56.0449487Z Get:25 https://packages.microsoft.com/ubuntu/24.04/prod noble/main armhf Packages [8426 B]
2025-06-04T21:52:56.0460660Z Get:22 http://azure.archive.ubuntu.com/ubuntu noble-backports/universe amd64 Components [16.4 kB]
2025-06-04T21:52:56.0472513Z Get:23 http://azure.archive.ubuntu.com/ubuntu noble-backports/restricted amd64 Components [216 B]
2025-06-04T21:52:56.0484535Z Get:24 http://azure.archive.ubuntu.com/ubuntu noble-backports/multiverse amd64 Components [212 B]
2025-06-04T21:52:56.0490166Z Get:26 https://packages.microsoft.com/ubuntu/24.04/prod noble/main amd64 Packages [33.6 kB]
2025-06-04T21:52:56.0546511Z Get:27 https://packages.microsoft.com/ubuntu/24.04/prod noble/main arm64 Packages [20.8 kB]
2025-06-04T21:52:56.0923310Z Get:28 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Packages [864 kB]
2025-06-04T21:52:56.0982520Z Get:29 http://azure.archive.ubuntu.com/ubuntu noble-security/main Translation-en [159 kB]
2025-06-04T21:52:56.1003197Z Get:30 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Components [21.6 kB]
2025-06-04T21:52:56.1015593Z Get:31 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Packages [845 kB]
2025-06-04T21:52:56.1073400Z Get:32 http://azure.archive.ubuntu.com/ubuntu noble-security/universe Translation-en [185 kB]
2025-06-04T21:52:56.1095822Z Get:33 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Components [52.2 kB]
2025-06-04T21:52:56.1110310Z Get:34 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted amd64 Packages [1138 kB]
2025-06-04T21:52:56.1182863Z Get:35 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted Translation-en [236 kB]
2025-06-04T21:52:56.1640081Z Get:36 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted amd64 Components [212 B]
2025-06-04T21:52:56.1652527Z Get:37 http://azure.archive.ubuntu.com/ubuntu noble-security/multiverse amd64 Components [212 B]
2025-06-04T21:52:59.7739802Z Fetched 8688 kB in 1s (7964 kB/s)
2025-06-04T21:53:00.3992193Z Reading package lists...
2025-06-04T21:53:00.4310034Z Reading package lists...
2025-06-04T21:53:00.5774062Z Building dependency tree...
2025-06-04T21:53:00.5781304Z Reading state information...
2025-06-04T21:53:00.7210530Z The following additional packages will be installed:
2025-06-04T21:53:00.7216953Z   libjemalloc2 liblzf1
2025-06-04T21:53:00.7223440Z Suggested packages:
2025-06-04T21:53:00.7223802Z   ruby-redis
2025-06-04T21:53:00.7381500Z The following NEW packages will be installed:
2025-06-04T21:53:00.7385750Z   libjemalloc2 liblzf1 redis-tools
2025-06-04T21:53:00.7558697Z 0 upgraded, 3 newly installed, 0 to remove and 52 not upgraded.
2025-06-04T21:53:00.7559450Z Need to get 1430 kB of archives.
2025-06-04T21:53:00.7559860Z After this operation, 7372 kB of additional disk space will be used.
2025-06-04T21:53:00.7560326Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2025-06-04T21:53:00.8542325Z Get:2 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libjemalloc2 amd64 5.3.0-2build1 [256 kB]
2025-06-04T21:53:00.9446152Z Get:3 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 liblzf1 amd64 3.6-4 [7624 B]
2025-06-04T21:53:01.0285927Z Get:4 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe amd64 redis-tools amd64 5:7.0.15-1ubuntu0.24.04.1 [1166 kB]
2025-06-04T21:53:01.4372765Z Fetched 1430 kB in 0s (3216 kB/s)
2025-06-04T21:53:01.4602551Z Selecting previously unselected package libjemalloc2:amd64.
2025-06-04T21:53:01.4846216Z (Reading database ... 
2025-06-04T21:53:01.4846896Z (Reading database ... 5%
2025-06-04T21:53:01.4847333Z (Reading database ... 10%
2025-06-04T21:53:01.4847764Z (Reading database ... 15%
2025-06-04T21:53:01.4848035Z (Reading database ... 20%
2025-06-04T21:53:01.4848266Z (Reading database ... 25%
2025-06-04T21:53:01.4848485Z (Reading database ... 30%
2025-06-04T21:53:01.4848698Z (Reading database ... 35%
2025-06-04T21:53:01.4848944Z (Reading database ... 40%
2025-06-04T21:53:01.4849648Z (Reading database ... 45%
2025-06-04T21:53:01.4850021Z (Reading database ... 50%
2025-06-04T21:53:01.4982329Z (Reading database ... 55%
2025-06-04T21:53:01.5374971Z (Reading database ... 60%
2025-06-04T21:53:01.5656847Z (Reading database ... 65%
2025-06-04T21:53:01.5941223Z (Reading database ... 70%
2025-06-04T21:53:01.6181617Z (Reading database ... 75%
2025-06-04T21:53:01.6703306Z (Reading database ... 80%
2025-06-04T21:53:01.7188603Z (Reading database ... 85%
2025-06-04T21:53:01.7998028Z (Reading database ... 90%
2025-06-04T21:53:01.8465273Z (Reading database ... 95%
2025-06-04T21:53:01.8465717Z (Reading database ... 100%
2025-06-04T21:53:01.8466337Z (Reading database ... 222694 files and directories currently installed.)
2025-06-04T21:53:01.8507935Z Preparing to unpack .../libjemalloc2_5.3.0-2build1_amd64.deb ...
2025-06-04T21:53:01.8543546Z Unpacking libjemalloc2:amd64 (5.3.0-2build1) ...
2025-06-04T21:53:01.8856723Z Selecting previously unselected package liblzf1:amd64.
2025-06-04T21:53:01.8987782Z Preparing to unpack .../liblzf1_3.6-4_amd64.deb ...
2025-06-04T21:53:01.8998429Z Unpacking liblzf1:amd64 (3.6-4) ...
2025-06-04T21:53:01.9234995Z Selecting previously unselected package redis-tools.
2025-06-04T21:53:01.9367818Z Preparing to unpack .../redis-tools_5%3a7.0.15-1ubuntu0.24.04.1_amd64.deb ...
2025-06-04T21:53:01.9381026Z Unpacking redis-tools (5:7.0.15-1ubuntu0.24.04.1) ...
2025-06-04T21:53:02.0300193Z Setting up libjemalloc2:amd64 (5.3.0-2build1) ...
2025-06-04T21:53:02.0331592Z Setting up liblzf1:amd64 (3.6-4) ...
2025-06-04T21:53:02.0371814Z Setting up redis-tools (5:7.0.15-1ubuntu0.24.04.1) ...
2025-06-04T21:53:02.1706029Z Processing triggers for man-db (2.12.0-4build2) ...
2025-06-04T21:53:08.9822092Z Processing triggers for libc-bin (2.39-0ubuntu8.4) ...
2025-06-04T21:53:09.7293996Z 
2025-06-04T21:53:09.7294559Z Running kernel seems to be up-to-date.
2025-06-04T21:53:09.7294904Z 
2025-06-04T21:53:09.7295058Z Restarting services...
2025-06-04T21:53:09.7364992Z 
2025-06-04T21:53:09.7365414Z Service restarts being deferred:
2025-06-04T21:53:09.7366273Z  systemctl restart hosted-compute-agent.service
2025-06-04T21:53:09.7366652Z 
2025-06-04T21:53:09.7367101Z No containers need to be restarted.
2025-06-04T21:53:09.7367406Z 
2025-06-04T21:53:09.7367715Z No user sessions are running outdated binaries.
2025-06-04T21:53:09.7368102Z 
2025-06-04T21:53:09.7368576Z No VM guests are running outdated hypervisor (qemu) binaries on this host.
2025-06-04T21:53:10.5748544Z ##[group]Run echo "Checking Redis connection..."
2025-06-04T21:53:10.5749363Z [36;1mecho "Checking Redis connection..."[0m
2025-06-04T21:53:10.5749844Z [36;1mredis-cli -h localhost ping[0m
2025-06-04T21:53:10.5750287Z [36;1mecho "Redis server info:"[0m
2025-06-04T21:53:10.5750817Z [36;1mredis-cli -h localhost info server | grep redis_version[0m
2025-06-04T21:53:10.5751459Z [36;1mecho "Testing Redis connection with CLI commands..."[0m
2025-06-04T21:53:10.5752269Z [36;1mredis-cli -h localhost set test:connection-check "connected" || echo "Failed to set key"[0m
2025-06-04T21:53:10.5753221Z [36;1mredis-cli -h localhost get test:connection-check || echo "Failed to get key"[0m
2025-06-04T21:53:10.5753938Z [36;1mecho "Checking Redis service status..."[0m
2025-06-04T21:53:10.5754625Z [36;1msudo service redis-server status || echo "Redis service status check failed"[0m
2025-06-04T21:53:10.5829777Z shell: /usr/bin/bash -e {0}
2025-06-04T21:53:10.5830165Z env:
2025-06-04T21:53:10.5830594Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:53:10.5831139Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:53:10.5831583Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:53:10.5831950Z   VITEST_TIMEOUT: 30000
2025-06-04T21:53:10.5832310Z   SKIP_REDIS_TESTS: true
2025-06-04T21:53:10.5832669Z   SKIP_FHE_TESTS: true
2025-06-04T21:53:10.5833018Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:53:10.5833411Z ##[endgroup]
2025-06-04T21:53:10.5912471Z Checking Redis connection...
2025-06-04T21:53:10.6009950Z PONG
2025-06-04T21:53:10.6014713Z Redis server info:
2025-06-04T21:53:10.6057224Z redis_version:8.0.2
2025-06-04T21:53:10.6060151Z Testing Redis connection with CLI commands...
2025-06-04T21:53:10.6094704Z OK
2025-06-04T21:53:10.6133175Z connected
2025-06-04T21:53:10.6138435Z Checking Redis service status...
2025-06-04T21:53:10.6267066Z Unit redis-server.service could not be found.
2025-06-04T21:53:10.6278604Z Redis service status check failed
2025-06-04T21:53:10.6308441Z ##[group]Run echo "Ensuring axe-core is installed..."
2025-06-04T21:53:10.6308816Z [36;1mecho "Ensuring axe-core is installed..."[0m
2025-06-04T21:53:10.6309433Z [36;1mif ! pnpm list axe-core --depth=0 | grep -q "axe-core"; then[0m
2025-06-04T21:53:10.6309792Z [36;1m  echo "axe-core not found, installing..."[0m
2025-06-04T21:53:10.6310073Z [36;1m  pnpm add -D axe-core[0m
2025-06-04T21:53:10.6310295Z [36;1melse[0m
2025-06-04T21:53:10.6310506Z [36;1m  echo "✅ axe-core is already installed"[0m
2025-06-04T21:53:10.6310754Z [36;1mfi[0m
2025-06-04T21:53:10.6360837Z shell: /usr/bin/bash -e {0}
2025-06-04T21:53:10.6361068Z env:
2025-06-04T21:53:10.6361299Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:53:10.6361616Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:53:10.6361863Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:53:10.6362097Z   VITEST_TIMEOUT: 30000
2025-06-04T21:53:10.6362297Z   SKIP_REDIS_TESTS: true
2025-06-04T21:53:10.6362524Z   SKIP_FHE_TESTS: true
2025-06-04T21:53:10.6362721Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:53:10.6362940Z ##[endgroup]
2025-06-04T21:53:10.6429333Z Ensuring axe-core is installed...
2025-06-04T21:53:11.1109284Z ✅ axe-core is already installed
2025-06-04T21:53:11.1134523Z ##[group]Run pnpm rebuild supabase
2025-06-04T21:53:11.1134833Z [36;1mpnpm rebuild supabase[0m
2025-06-04T21:53:11.1186227Z shell: /usr/bin/bash -e {0}
2025-06-04T21:53:11.1186452Z env:
2025-06-04T21:53:11.1186682Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:53:11.1187102Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:53:11.1187469Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:53:11.1187747Z   VITEST_TIMEOUT: 30000
2025-06-04T21:53:11.1187949Z   SKIP_REDIS_TESTS: true
2025-06-04T21:53:11.1188143Z   SKIP_FHE_TESTS: true
2025-06-04T21:53:11.1188342Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:53:11.1188580Z ##[endgroup]
2025-06-04T21:53:11.6380878Z .../node_modules/supabase postinstall$ node scripts/postinstall.js
2025-06-04T21:53:11.7525421Z .../node_modules/supabase postinstall: Downloading https://github.com/supabase/cli/releases/download/v2.23.4/supabase_2.23.4_checksums.txt
2025-06-04T21:53:12.2925034Z .../node_modules/supabase postinstall: Downloading https://github.com/supabase/cli/releases/download/v2.23.4/supabase_linux_amd64.tar.gz
2025-06-04T21:53:13.1184651Z .../node_modules/supabase postinstall: Checksum verified.
2025-06-04T21:53:13.1210141Z .../node_modules/supabase postinstall: Installed Supabase CLI successfully
2025-06-04T21:53:13.1321026Z .../node_modules/supabase postinstall: Done
2025-06-04T21:53:18.4087154Z ##[group]Run echo "Checking for multiple Playwright versions..."
2025-06-04T21:53:18.4087601Z [36;1mecho "Checking for multiple Playwright versions..."[0m
2025-06-04T21:53:18.4088076Z [36;1mpnpm list @playwright/test --depth=0 || echo "No conflicts found in direct dependencies"[0m
2025-06-04T21:53:18.4088917Z [36;1mpnpm list playwright --depth=0 || echo "No playwright package found in direct dependencies"[0m
2025-06-04T21:53:18.4089502Z [36;1m# Check for any duplicate installations[0m
2025-06-04T21:53:18.4089939Z [36;1mPLAYWRIGHT_VERSIONS=$(find node_modules -path "*playwright*" -type d -maxdepth 2 | sort)[0m
2025-06-04T21:53:18.4090385Z [36;1mecho "Found Playwright installations:"[0m
2025-06-04T21:53:18.4090659Z [36;1mecho "$PLAYWRIGHT_VERSIONS"[0m
2025-06-04T21:53:18.4090961Z [36;1m# Remove any playwright packages from node_modules[0m
2025-06-04T21:53:18.4091300Z [36;1mecho "Ensuring consistent Playwright version..."[0m
2025-06-04T21:53:18.4091647Z [36;1mrm -rf node_modules/playwright[0m
2025-06-04T21:53:18.4091914Z [36;1m# Reinstall the specific version we want[0m
2025-06-04T21:53:18.4092221Z [36;1mpnpm install @playwright/test@1.52.0 --save-dev[0m
2025-06-04T21:53:18.4142742Z shell: /usr/bin/bash -e {0}
2025-06-04T21:53:18.4142971Z env:
2025-06-04T21:53:18.4143221Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:53:18.4143541Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:53:18.4143788Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:53:18.4143997Z   VITEST_TIMEOUT: 30000
2025-06-04T21:53:18.4144191Z   SKIP_REDIS_TESTS: true
2025-06-04T21:53:18.4144380Z   SKIP_FHE_TESTS: true
2025-06-04T21:53:18.4144580Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:53:18.4144801Z ##[endgroup]
2025-06-04T21:53:18.4211011Z Checking for multiple Playwright versions...
2025-06-04T21:53:18.8936281Z Legend: production dependency, optional only, dev only
2025-06-04T21:53:18.8936766Z 
2025-06-04T21:53:18.8937257Z pixelated@0.0.1 /home/runner/work/pixelated/pixelated (PRIVATE)
2025-06-04T21:53:18.8937737Z 
2025-06-04T21:53:18.8937902Z devDependencies:
2025-06-04T21:53:18.8938328Z @playwright/test 1.52.0
2025-06-04T21:53:19.3476550Z Legend: production dependency, optional only, dev only
2025-06-04T21:53:19.3477039Z 
2025-06-04T21:53:19.3477503Z pixelated@0.0.1 /home/runner/work/pixelated/pixelated (PRIVATE)
2025-06-04T21:53:19.3477997Z 
2025-06-04T21:53:19.3478162Z devDependencies:
2025-06-04T21:53:19.3478550Z playwright 1.52.0
2025-06-04T21:53:19.3703853Z Found Playwright installations:
2025-06-04T21:53:19.3705130Z node_modules/.pnpm/@next+font@14.2.15_next@15.3.2_@babel+core@7.27.1_@opentelemetry+api@1.9.0_@playwright+_94befc8773fa4af030b8c9cd560a3fe8
2025-06-04T21:53:19.3705881Z node_modules/.pnpm/@playwright+test@1.52.0
2025-06-04T21:53:19.3706624Z node_modules/.pnpm/next@15.3.2_@babel+core@7.27.1_@opentelemetry+api@1.9.0_@playwright+test@1.52.0_react-d_7be2276b9661895f19e9ebdd091432d3
2025-06-04T21:53:19.3707238Z node_modules/.pnpm/playwright-core@1.52.0
2025-06-04T21:53:19.3707617Z node_modules/.pnpm/playwright@1.52.0
2025-06-04T21:53:19.3707911Z node_modules/@playwright
2025-06-04T21:53:19.3708215Z Ensuring consistent Playwright version...
2025-06-04T21:53:19.9991305Z Progress: resolved 0, reused 1, downloaded 0, added 0
2025-06-04T21:53:21.0290440Z Progress: resolved 293, reused 293, downloaded 0, added 0
2025-06-04T21:53:22.0276105Z Progress: resolved 726, reused 693, downloaded 0, added 0
2025-06-04T21:53:23.0296746Z Progress: resolved 1038, reused 957, downloaded 0, added 0
2025-06-04T21:53:24.0308769Z Progress: resolved 1449, reused 1326, downloaded 0, added 0
2025-06-04T21:53:25.0398080Z Progress: resolved 1794, reused 1682, downloaded 0, added 0
2025-06-04T21:53:26.0573810Z Progress: resolved 2174, reused 2069, downloaded 0, added 0
2025-06-04T21:53:27.0847035Z Progress: resolved 2522, reused 2412, downloaded 1, added 0
2025-06-04T21:53:28.2196999Z Progress: resolved 2688, reused 2578, downloaded 5, added 0
2025-06-04T21:53:29.2219493Z Progress: resolved 2799, reused 2669, downloaded 5, added 0
2025-06-04T21:53:30.6409327Z Progress: resolved 2826, reused 2695, downloaded 5, added 0
2025-06-04T21:53:30.7187549Z Already up to date
2025-06-04T21:53:30.7869469Z Progress: resolved 2826, reused 2695, downloaded 5, added 0, done
2025-06-04T21:53:32.1443748Z 
2025-06-04T21:53:32.1444197Z devDependencies:
2025-06-04T21:53:32.1444641Z + playwright 1.52.0
2025-06-04T21:53:32.1444867Z 
2025-06-04T21:53:32.1588081Z Done in 12.7s using pnpm v10.11.0
2025-06-04T21:53:32.2577566Z ##[group]Run # Create mock directories if they don't exist
2025-06-04T21:53:32.2577979Z [36;1m# Create mock directories if they don't exist[0m
2025-06-04T21:53:32.2578286Z [36;1mmkdir -p src/lib/utils/__mocks__[0m
2025-06-04T21:53:32.2578584Z [36;1mmkdir -p src/lib/services/redis/__mocks__[0m
2025-06-04T21:53:32.2578872Z [36;1mmkdir -p src/lib/fhe/__mocks__[0m
2025-06-04T21:53:32.2579310Z [36;1m[0m
2025-06-04T21:53:32.2579494Z [36;1m# Copy basic logger mock[0m
2025-06-04T21:53:32.2579737Z [36;1mecho 'export const logger = {[0m
2025-06-04T21:53:32.2579976Z [36;1m  info: vi.fn(),[0m
2025-06-04T21:53:32.2580177Z [36;1m  error: vi.fn(),[0m
2025-06-04T21:53:32.2580379Z [36;1m  warn: vi.fn(),[0m
2025-06-04T21:53:32.2580572Z [36;1m  debug: vi.fn(),[0m
2025-06-04T21:53:32.2580772Z [36;1m};[0m
2025-06-04T21:53:32.2580933Z [36;1m[0m
2025-06-04T21:53:32.2581137Z [36;1mexport const getLogger = vi.fn(() => logger);[0m
2025-06-04T21:53:32.2581392Z [36;1m[0m
2025-06-04T21:53:32.2581580Z [36;1mexport default {[0m
2025-06-04T21:53:32.2581770Z [36;1m  logger,[0m
2025-06-04T21:53:32.2581950Z [36;1m  getLogger,[0m
2025-06-04T21:53:32.2582164Z [36;1m};' > src/lib/utils/__mocks__/logger.ts[0m
2025-06-04T21:53:32.2582407Z [36;1m[0m
2025-06-04T21:53:32.2582576Z [36;1m# Ensure Redis mock exists[0m
2025-06-04T21:53:32.2582897Z [36;1mif [ -f src/lib/services/redis/__mocks__/redis.mock.ts ]; then[0m
2025-06-04T21:53:32.2583282Z [36;1m  echo "✅ Redis mock already exists"[0m
2025-06-04T21:53:32.2583670Z [36;1melse[0m
2025-06-04T21:53:32.2583962Z [36;1m  echo "Creating Redis mock file"[0m
2025-06-04T21:53:32.2584483Z [36;1m  cp -f vitest.setup.ts src/lib/services/redis/__mocks__/redis.mock.ts[0m
2025-06-04T21:53:32.2584807Z [36;1mfi[0m
2025-06-04T21:53:32.2584967Z [36;1m[0m
2025-06-04T21:53:32.2585148Z [36;1m# Create FHE mocks for tests[0m
2025-06-04T21:53:32.2585407Z [36;1mecho 'export const mockFHEService = {[0m
2025-06-04T21:53:32.2585737Z [36;1m  encrypt: vi.fn((data) => Promise.resolve(`encrypted-${data}`)),[0m
2025-06-04T21:53:32.2586184Z [36;1m  decrypt: vi.fn((data) => Promise.resolve(data.replace("encrypted-", ""))),[0m
2025-06-04T21:53:32.2586582Z [36;1m  verifySender: vi.fn(() => Promise.resolve(true)),[0m
2025-06-04T21:53:32.2586916Z [36;1m  processEncrypted: vi.fn(() => Promise.resolve({[0m
2025-06-04T21:53:32.2587193Z [36;1m    success: true,[0m
2025-06-04T21:53:32.2587423Z [36;1m    metadata: { operation: "test" }[0m
2025-06-04T21:53:32.2587657Z [36;1m  })),[0m
2025-06-04T21:53:32.2587817Z [36;1m};[0m
2025-06-04T21:53:32.2587971Z [36;1m[0m
2025-06-04T21:53:32.2588248Z [36;1mexport default mockFHEService;' > src/lib/fhe/__mocks__/fhe-service.ts[0m
2025-06-04T21:53:32.2639389Z shell: /usr/bin/bash -e {0}
2025-06-04T21:53:32.2639625Z env:
2025-06-04T21:53:32.2639856Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:53:32.2640185Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:53:32.2640443Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:53:32.2640652Z   VITEST_TIMEOUT: 30000
2025-06-04T21:53:32.2640846Z   SKIP_REDIS_TESTS: true
2025-06-04T21:53:32.2641042Z   SKIP_FHE_TESTS: true
2025-06-04T21:53:32.2641237Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:53:32.2641449Z ##[endgroup]
2025-06-04T21:53:32.2745587Z ✅ Redis mock already exists
2025-06-04T21:53:32.2768951Z ##[group]Run pnpm exec playwright install --with-deps
2025-06-04T21:53:32.2769546Z [36;1mpnpm exec playwright install --with-deps[0m
2025-06-04T21:53:32.2814704Z shell: /usr/bin/bash -e {0}
2025-06-04T21:53:32.2814927Z env:
2025-06-04T21:53:32.2815157Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:53:32.2815479Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:53:32.2815730Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:53:32.2815937Z   VITEST_TIMEOUT: 30000
2025-06-04T21:53:32.2816306Z   SKIP_REDIS_TESTS: true
2025-06-04T21:53:32.2816498Z   SKIP_FHE_TESTS: true
2025-06-04T21:53:32.2816697Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:53:32.2816914Z ##[endgroup]
2025-06-04T21:53:33.0733495Z Installing dependencies...
2025-06-04T21:53:33.0813601Z Switching to root user to install dependencies...
2025-06-04T21:53:33.1486914Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2025-06-04T21:53:33.1748221Z Hit:2 http://azure.archive.ubuntu.com/ubuntu noble InRelease
2025-06-04T21:53:33.1761349Z Hit:3 http://azure.archive.ubuntu.com/ubuntu noble-updates InRelease
2025-06-04T21:53:33.1770636Z Hit:4 http://azure.archive.ubuntu.com/ubuntu noble-backports InRelease
2025-06-04T21:53:33.1777883Z Hit:5 http://azure.archive.ubuntu.com/ubuntu noble-security InRelease
2025-06-04T21:53:33.1802876Z Hit:6 https://packages.microsoft.com/repos/azure-cli noble InRelease
2025-06-04T21:53:33.1847751Z Hit:7 https://packages.microsoft.com/ubuntu/24.04/prod noble InRelease
2025-06-04T21:53:34.2427486Z Reading package lists...
2025-06-04T21:53:34.2670353Z Reading package lists...
2025-06-04T21:53:34.4103971Z Building dependency tree...
2025-06-04T21:53:34.4111547Z Reading state information...
2025-06-04T21:53:34.4278406Z libasound2t64 is already the newest version (1.2.11-1build2).
2025-06-04T21:53:34.4279063Z libasound2t64 set to manually installed.
2025-06-04T21:53:34.4280101Z libatk-bridge2.0-0t64 is already the newest version (2.52.0-1build1).
2025-06-04T21:53:34.4280818Z libatk-bridge2.0-0t64 set to manually installed.
2025-06-04T21:53:34.4281468Z libatk1.0-0t64 is already the newest version (2.52.0-1build1).
2025-06-04T21:53:34.4282049Z libatk1.0-0t64 set to manually installed.
2025-06-04T21:53:34.4282678Z libatspi2.0-0t64 is already the newest version (2.52.0-1build1).
2025-06-04T21:53:34.4283278Z libatspi2.0-0t64 set to manually installed.
2025-06-04T21:53:34.4283862Z libcairo2 is already the newest version (1.18.0-3build1).
2025-06-04T21:53:34.4284412Z libcairo2 set to manually installed.
2025-06-04T21:53:34.4285033Z libcups2t64 is already the newest version (2.4.7-1.2ubuntu7.3).
2025-06-04T21:53:34.4285623Z libcups2t64 set to manually installed.
2025-06-04T21:53:34.4286218Z libdbus-1-3 is already the newest version (1.14.10-4ubuntu4.1).
2025-06-04T21:53:34.4286786Z libdbus-1-3 set to manually installed.
2025-06-04T21:53:34.4287403Z libdrm2 is already the newest version (2.4.122-1~ubuntu0.24.04.1).
2025-06-04T21:53:34.4287980Z libdrm2 set to manually installed.
2025-06-04T21:53:34.4288573Z libgbm1 is already the newest version (24.2.8-1ubuntu1~24.04.1).
2025-06-04T21:53:34.4289247Z libgbm1 set to manually installed.
2025-06-04T21:53:34.4289825Z libnspr4 is already the newest version (2:4.35-1.1build1).
2025-06-04T21:53:34.4290305Z libnspr4 set to manually installed.
2025-06-04T21:53:34.4290750Z libnss3 is already the newest version (2:3.98-1build1).
2025-06-04T21:53:34.4291167Z libnss3 set to manually installed.
2025-06-04T21:53:34.4291647Z libpango-1.0-0 is already the newest version (1.52.1+ds-1build1).
2025-06-04T21:53:34.4292135Z libpango-1.0-0 set to manually installed.
2025-06-04T21:53:34.4292603Z libx11-6 is already the newest version (2:1.8.7-1build1).
2025-06-04T21:53:34.4293022Z libx11-6 set to manually installed.
2025-06-04T21:53:34.4293449Z libxcb1 is already the newest version (1.15-1ubuntu2).
2025-06-04T21:53:34.4293864Z libxcb1 set to manually installed.
2025-06-04T21:53:34.4294349Z libxcomposite1 is already the newest version (1:0.4.5-1build3).
2025-06-04T21:53:34.4295268Z libxcomposite1 set to manually installed.
2025-06-04T21:53:34.4295773Z libxdamage1 is already the newest version (1:1.1.6-1build1).
2025-06-04T21:53:34.4296232Z libxdamage1 set to manually installed.
2025-06-04T21:53:34.4296696Z libxext6 is already the newest version (2:1.3.4-1build2).
2025-06-04T21:53:34.4297126Z libxext6 set to manually installed.
2025-06-04T21:53:34.4297582Z libxfixes3 is already the newest version (1:6.0.0-2build1).
2025-06-04T21:53:34.4298029Z libxfixes3 set to manually installed.
2025-06-04T21:53:34.4298660Z libxkbcommon0 is already the newest version (1.6.0-1build1).
2025-06-04T21:53:34.4299225Z libxkbcommon0 set to manually installed.
2025-06-04T21:53:34.4299709Z libxrandr2 is already the newest version (2:1.5.2-2build1).
2025-06-04T21:53:34.4300173Z libxrandr2 set to manually installed.
2025-06-04T21:53:34.4300607Z libcairo-gobject2 is already the newest version (1.18.0-3build1).
2025-06-04T21:53:34.4301020Z libcairo-gobject2 set to manually installed.
2025-06-04T21:53:34.4301433Z libfontconfig1 is already the newest version (2.15.0-1.1ubuntu2).
2025-06-04T21:53:34.4301815Z libfontconfig1 set to manually installed.
2025-06-04T21:53:34.4302204Z libfreetype6 is already the newest version (2.13.2+dfsg-1build3).
2025-06-04T21:53:34.4302574Z libfreetype6 set to manually installed.
2025-06-04T21:53:34.4303017Z libgdk-pixbuf-2.0-0 is already the newest version (2.42.10+dfsg-3ubuntu3.1).
2025-06-04T21:53:34.4303436Z libgdk-pixbuf-2.0-0 set to manually installed.
2025-06-04T21:53:34.4303842Z libgtk-3-0t64 is already the newest version (3.24.41-4ubuntu1.3).
2025-06-04T21:53:34.4304207Z libgtk-3-0t64 set to manually installed.
2025-06-04T21:53:34.4304630Z libpangocairo-1.0-0 is already the newest version (1.52.1+ds-1build1).
2025-06-04T21:53:34.4305039Z libpangocairo-1.0-0 set to manually installed.
2025-06-04T21:53:34.4305429Z libx11-xcb1 is already the newest version (2:1.8.7-1build1).
2025-06-04T21:53:34.4305776Z libx11-xcb1 set to manually installed.
2025-06-04T21:53:34.4306141Z libxcb-shm0 is already the newest version (1.15-1ubuntu2).
2025-06-04T21:53:34.4306485Z libxcb-shm0 set to manually installed.
2025-06-04T21:53:34.4306853Z libxcursor1 is already the newest version (1:1.2.1-1build1).
2025-06-04T21:53:34.4307195Z libxcursor1 set to manually installed.
2025-06-04T21:53:34.4307533Z libxi6 is already the newest version (2:1.8.1-1build1).
2025-06-04T21:53:34.4307857Z libxi6 set to manually installed.
2025-06-04T21:53:34.4308217Z libxrender1 is already the newest version (1:0.9.10-1.1build1).
2025-06-04T21:53:34.4308590Z libxrender1 set to manually installed.
2025-06-04T21:53:34.4308942Z libicu74 is already the newest version (74.2-1ubuntu3.1).
2025-06-04T21:53:34.4309374Z libicu74 set to manually installed.
2025-06-04T21:53:34.4309746Z libatomic1 is already the newest version (14.2.0-4ubuntu2~24.04).
2025-06-04T21:53:34.4310113Z libatomic1 set to manually installed.
2025-06-04T21:53:34.4310478Z libenchant-2-2 is already the newest version (2.3.3-2build2).
2025-06-04T21:53:34.4310838Z libenchant-2-2 set to manually installed.
2025-06-04T21:53:34.4311195Z libepoxy0 is already the newest version (1.5.10-1build1).
2025-06-04T21:53:34.4311529Z libepoxy0 set to manually installed.
2025-06-04T21:53:34.4311919Z libgstreamer1.0-0 is already the newest version (1.24.2-1ubuntu0.1).
2025-06-04T21:53:34.4312308Z libgstreamer1.0-0 set to manually installed.
2025-06-04T21:53:34.4312680Z libharfbuzz0b is already the newest version (8.3.0-2build2).
2025-06-04T21:53:34.4313033Z libharfbuzz0b set to manually installed.
2025-06-04T21:53:34.4313415Z libjpeg-turbo8 is already the newest version (2.1.5-2ubuntu2).
2025-06-04T21:53:34.4313779Z libjpeg-turbo8 set to manually installed.
2025-06-04T21:53:34.4314129Z liblcms2-2 is already the newest version (2.14-2build1).
2025-06-04T21:53:34.4314459Z liblcms2-2 set to manually installed.
2025-06-04T21:53:34.4314834Z libpng16-16t64 is already the newest version (1.6.43-5build1).
2025-06-04T21:53:34.5617028Z libpng16-16t64 set to manually installed.
2025-06-04T21:53:34.5618683Z libwayland-client0 is already the newest version (1.22.0-2.1build1).
2025-06-04T21:53:34.5620036Z libwayland-client0 set to manually installed.
2025-06-04T21:53:34.5620989Z libwayland-egl1 is already the newest version (1.22.0-2.1build1).
2025-06-04T21:53:34.5621865Z libwayland-egl1 set to manually installed.
2025-06-04T21:53:34.5622710Z libwayland-server0 is already the newest version (1.22.0-2.1build1).
2025-06-04T21:53:34.5623409Z libwayland-server0 set to manually installed.
2025-06-04T21:53:34.5624319Z libwebp7 is already the newest version (1.3.2-0.4build3).
2025-06-04T21:53:34.5624911Z libwebp7 set to manually installed.
2025-06-04T21:53:34.5625564Z libwebpdemux2 is already the newest version (1.3.2-0.4build3).
2025-06-04T21:53:34.5626203Z libwebpdemux2 set to manually installed.
2025-06-04T21:53:34.5626867Z libxml2 is already the newest version (2.9.14+dfsg-1.3ubuntu3.3).
2025-06-04T21:53:34.5627393Z libxml2 set to manually installed.
2025-06-04T21:53:34.5627873Z libxslt1.1 is already the newest version (1.1.39-0exp1ubuntu0.24.04.2).
2025-06-04T21:53:34.5628308Z libxslt1.1 set to manually installed.
2025-06-04T21:53:34.5628721Z xvfb is already the newest version (2:21.1.12-1ubuntu1.3).
2025-06-04T21:53:34.5629538Z fonts-noto-color-emoji is already the newest version (2.047-0ubuntu0.24.04.1).
2025-06-04T21:53:34.5630113Z fonts-liberation is already the newest version (1:2.1.5-3).
2025-06-04T21:53:34.5630531Z fonts-liberation set to manually installed.
2025-06-04T21:53:34.5630936Z The following additional packages will be installed:
2025-06-04T21:53:34.5631364Z   gir1.2-glib-2.0 glib-networking glib-networking-common
2025-06-04T21:53:34.5632137Z   glib-networking-services gsettings-desktop-schemas libaa1 libabsl20220623t64
2025-06-04T21:53:34.5632911Z   libass9 libasyncns0 libavc1394-0 libavcodec60 libavfilter9 libavformat60
2025-06-04T21:53:34.5633363Z   libavtp0 libavutil58 libblas3 libbluray2 libbs2b0 libcaca0
2025-06-04T21:53:34.5633819Z   libcairo-script-interpreter2 libcdparanoia0 libchromaprint1 libcjson1
2025-06-04T21:53:34.5634264Z   libcodec2-1.2 libdav1d7 libdc1394-25 libdca0 libdecor-0-0
2025-06-04T21:53:34.5634681Z   libdirectfb-1.7-7t64 libdv4t64 libdvdnav4 libdvdread8t64 libegl-mesa0
2025-06-04T21:53:34.5635162Z   libegl1 libfaad2 libflac12t64 libfluidsynth3 libfreeaptx0 libgav1-1
2025-06-04T21:53:34.5635604Z   libglib2.0-bin libglib2.0-data libgme0 libgraphene-1.0-0 libgsm1
2025-06-04T21:53:34.5636088Z   libgssdp-1.6-0 libgstreamer-plugins-good1.0-0 libgtk-4-common libgupnp-1.6-0
2025-06-04T21:53:34.5636556Z   libgupnp-igd-1.6-0 libhwy1t64 libiec61883-0 libimath-3-1-29t64
2025-06-04T21:53:34.5636983Z   libinstpatch-1.0-2 libjack-jackd2-0 libjxl0.7 liblapack3 liblc3-1
2025-06-04T21:53:34.5637439Z   libldacbt-enc2 liblilv-0-0 liblrdf0 libltc11 libmbedcrypto7t64 libmfx1
2025-06-04T21:53:34.5637868Z   libmjpegutils-2.1-0t64 libmodplug1 libmp3lame0 libmpcdec6
2025-06-04T21:53:34.5638289Z   libmpeg2encpp-2.1-0t64 libmpg123-0t64 libmplex2-2.1-0t64 libmysofa1
2025-06-04T21:53:34.5638738Z   libneon27t64 libnice10 libopenal-data libopenal1 libopenexr-3-1-30
2025-06-04T21:53:34.5639322Z   libopenh264-7 libopenmpt0t64 libopenni2-0 liborc-0.4-0t64
2025-06-04T21:53:34.5639738Z   libpipewire-0.3-0t64 libplacebo338 libpocketsphinx3 libpostproc57
2025-06-04T21:53:34.5640199Z   libproxy1v5 libpulse0 libqrencode4 libraptor2-0 librav1e0 libraw1394-11
2025-06-04T21:53:34.5640677Z   librist4 librsvg2-2 librubberband2 libsamplerate0 libsbc1 libsdl2-2.0-0
2025-06-04T21:53:34.5641151Z   libsecret-common libserd-0-0 libshine3 libshout3 libsndfile1 libsndio7.0
2025-06-04T21:53:34.5641626Z   libsord-0-0 libsoundtouch1 libsoup-3.0-0 libsoup-3.0-common libsoxr0
2025-06-04T21:53:34.5642104Z   libspa-0.2-modules libspandsp2t64 libspeex1 libsphinxbase3t64 libsratom-0-0
2025-06-04T21:53:34.5642607Z   libsrt1.5-gnutls libsrtp2-1 libssh-gcrypt-4 libsvtav1enc1d1 libswresample4
2025-06-04T21:53:34.5643101Z   libswscale7 libtag1v5 libtag1v5-vanilla libtheora0 libtwolame0 libudfread0
2025-06-04T21:53:34.5643732Z   libunibreak5 libv4l-0t64 libv4lconvert0t64 libva-drm2 libva-x11-2 libva2
2025-06-04T21:53:34.5644217Z   libvdpau1 libvidstab1.1 libvisual-0.4-0 libvo-aacenc0 libvo-amrwbenc0
2025-06-04T21:53:34.5644708Z   libvorbisenc2 libvpl2 libwavpack1 libwebrtc-audio-processing1 libwildmidi2
2025-06-04T21:53:34.5645208Z   libx265-199 libxcb-xkb1 libxkbcommon-x11-0 libxvidcore4 libyuv0 libzbar0t64
2025-06-04T21:53:34.5645697Z   libzimg2 libzix-0-0 libzvbi-common libzvbi0t64 libzxing3 ocl-icd-libopencl1
2025-06-04T21:53:34.5646344Z   session-migration timgm6mb-soundfont xfonts-encodings xfonts-utils
2025-06-04T21:53:34.5646691Z Suggested packages:
2025-06-04T21:53:34.5647033Z   frei0r-plugins gvfs libcuda1 libnvcuvid1 libnvidia-encode1 libbluray-bdj
2025-06-04T21:53:34.5647516Z   libdirectfb-extra libdv-bin oss-compat libdvdcss2 low-memory-monitor
2025-06-04T21:53:34.5648012Z   libvisual-0.4-plugins jackd2 liblrdf0-dev libportaudio2 opus-tools pipewire
2025-06-04T21:53:34.5648510Z   pulseaudio raptor2-utils libraw1394-doc librsvg2-bin serdi sndiod sordi
2025-06-04T21:53:34.5648941Z   speex libwildmidi-config opencl-icd fluid-soundfont-gm
2025-06-04T21:53:34.5649439Z Recommended packages:
2025-06-04T21:53:34.5649751Z   fonts-ipafont-mincho fonts-tlwg-loma gstreamer1.0-x libaacs0
2025-06-04T21:53:34.5650197Z   default-libdecor-0-plugin-1 | libdecor-0-plugin-1 gstreamer1.0-gl
2025-06-04T21:53:34.5650692Z   libgtk-4-bin librsvg2-common libgtk-4-media-gstreamer libpipewire-0.3-common
2025-06-04T21:53:34.5651216Z   pocketsphinx-en-us va-driver-all | va-driver vdpau-driver-all | vdpau-driver
2025-06-04T21:53:34.5651589Z   libmagickcore-6.q16-7-extra
2025-06-04T21:53:34.6293414Z The following NEW packages will be installed:
2025-06-04T21:53:34.6294540Z   fonts-freefont-ttf fonts-ipafont-gothic fonts-tlwg-loma-otf fonts-unifont
2025-06-04T21:53:34.6295529Z   fonts-wqy-zenhei glib-networking glib-networking-common
2025-06-04T21:53:34.6296504Z   glib-networking-services gsettings-desktop-schemas gstreamer1.0-libav
2025-06-04T21:53:34.6297691Z   gstreamer1.0-plugins-bad gstreamer1.0-plugins-base gstreamer1.0-plugins-good
2025-06-04T21:53:34.6298811Z   libaa1 libabsl20220623t64 libass9 libasyncns0 libavc1394-0 libavcodec60
2025-06-04T21:53:34.6300059Z   libavfilter9 libavformat60 libavif16 libavtp0 libavutil58 libblas3
2025-06-04T21:53:34.6301103Z   libbluray2 libbs2b0 libcaca0 libcairo-script-interpreter2 libcdparanoia0
2025-06-04T21:53:34.6302167Z   libchromaprint1 libcjson1 libcodec2-1.2 libdav1d7 libdc1394-25 libdca0
2025-06-04T21:53:34.6303211Z   libdecor-0-0 libdirectfb-1.7-7t64 libdv4t64 libdvdnav4 libdvdread8t64
2025-06-04T21:53:34.6304221Z   libegl-mesa0 libegl1 libevent-2.1-7t64 libfaad2 libflac12t64 libflite1
2025-06-04T21:53:34.6305229Z   libfluidsynth3 libfreeaptx0 libgav1-1 libgles2 libgme0 libgraphene-1.0-0
2025-06-04T21:53:34.6306132Z   libgsm1 libgssdp-1.6-0 libgstreamer-gl1.0-0 libgstreamer-plugins-bad1.0-0
2025-06-04T21:53:34.6306977Z   libgstreamer-plugins-base1.0-0 libgstreamer-plugins-good1.0-0 libgtk-4-1
2025-06-04T21:53:34.6307561Z   libgtk-4-common libgupnp-1.6-0 libgupnp-igd-1.6-0 libharfbuzz-icu0
2025-06-04T21:53:34.6308107Z   libhwy1t64 libhyphen0 libiec61883-0 libimath-3-1-29t64 libinstpatch-1.0-2
2025-06-04T21:53:34.6308670Z   libjack-jackd2-0 libjxl0.7 liblapack3 liblc3-1 libldacbt-enc2 liblilv-0-0
2025-06-04T21:53:34.6309412Z   liblrdf0 libltc11 libmanette-0.2-0 libmbedcrypto7t64 libmfx1
2025-06-04T21:53:34.6309898Z   libmjpegutils-2.1-0t64 libmodplug1 libmp3lame0 libmpcdec6
2025-06-04T21:53:34.6310388Z   libmpeg2encpp-2.1-0t64 libmpg123-0t64 libmplex2-2.1-0t64 libmysofa1
2025-06-04T21:53:34.6310908Z   libneon27t64 libnice10 libopenal-data libopenal1 libopenexr-3-1-30
2025-06-04T21:53:34.6311426Z   libopenh264-7 libopenmpt0t64 libopenni2-0 libopus0 liborc-0.4-0t64
2025-06-04T21:53:34.6312187Z   libpipewire-0.3-0t64 libplacebo338 libpocketsphinx3 libpostproc57
2025-06-04T21:53:34.6312904Z   libproxy1v5 libpulse0 libqrencode4 libraptor2-0 librav1e0 libraw1394-11
2025-06-04T21:53:34.6313773Z   librist4 librsvg2-2 librubberband2 libsamplerate0 libsbc1 libsdl2-2.0-0
2025-06-04T21:53:34.6314326Z   libsecret-1-0 libsecret-common libserd-0-0 libshine3 libshout3 libsndfile1
2025-06-04T21:53:34.6314809Z   libsndio7.0 libsord-0-0 libsoundtouch1 libsoup-3.0-0 libsoup-3.0-common
2025-06-04T21:53:34.6315273Z   libsoxr0 libspa-0.2-modules libspandsp2t64 libspeex1 libsphinxbase3t64
2025-06-04T21:53:34.6315742Z   libsratom-0-0 libsrt1.5-gnutls libsrtp2-1 libssh-gcrypt-4 libsvtav1enc1d1
2025-06-04T21:53:34.6316208Z   libswresample4 libswscale7 libtag1v5 libtag1v5-vanilla libtheora0
2025-06-04T21:53:34.6316789Z   libtwolame0 libudfread0 libunibreak5 libv4l-0t64 libv4lconvert0t64
2025-06-04T21:53:34.6317241Z   libva-drm2 libva-x11-2 libva2 libvdpau1 libvidstab1.1 libvisual-0.4-0
2025-06-04T21:53:34.6317702Z   libvo-aacenc0 libvo-amrwbenc0 libvorbisenc2 libvpl2 libvpx9 libwavpack1
2025-06-04T21:53:34.6318184Z   libwebrtc-audio-processing1 libwildmidi2 libwoff1 libx264-164 libx265-199
2025-06-04T21:53:34.6318685Z   libxcb-xkb1 libxkbcommon-x11-0 libxvidcore4 libyuv0 libzbar0t64 libzimg2
2025-06-04T21:53:34.6319270Z   libzix-0-0 libzvbi-common libzvbi0t64 libzxing3 ocl-icd-libopencl1
2025-06-04T21:53:34.6319725Z   session-migration timgm6mb-soundfont xfonts-cyrillic xfonts-encodings
2025-06-04T21:53:34.6320102Z   xfonts-scalable xfonts-utils
2025-06-04T21:53:34.6320401Z The following packages will be upgraded:
2025-06-04T21:53:34.6320761Z   gir1.2-glib-2.0 libglib2.0-0t64 libglib2.0-bin libglib2.0-data
2025-06-04T21:53:34.6524413Z 4 upgraded, 179 newly installed, 0 to remove and 48 not upgraded.
2025-06-04T21:53:34.6525053Z Need to get 116 MB of archives.
2025-06-04T21:53:34.6525459Z After this operation, 363 MB of additional disk space will be used.
2025-06-04T21:53:34.6525922Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2025-06-04T21:53:34.7515600Z Get:2 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 fonts-ipafont-gothic all 00303-21ubuntu1 [3513 kB]
2025-06-04T21:53:35.1607008Z Get:3 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libglib2.0-data all 2.80.0-6ubuntu3.4 [48.7 kB]
2025-06-04T21:53:35.2444675Z Get:4 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libglib2.0-bin amd64 2.80.0-6ubuntu3.4 [97.9 kB]
2025-06-04T21:53:35.3291279Z Get:5 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 gir1.2-glib-2.0 amd64 2.80.0-6ubuntu3.4 [183 kB]
2025-06-04T21:53:35.4143166Z Get:6 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libglib2.0-0t64 amd64 2.80.0-6ubuntu3.4 [1544 kB]
2025-06-04T21:53:35.6677221Z Get:7 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 fonts-freefont-ttf all 20211204+svn4273-2 [5641 kB]
2025-06-04T21:53:36.0880589Z Get:8 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 fonts-tlwg-loma-otf all 1:0.7.3-1 [107 kB]
2025-06-04T21:53:36.1719896Z Get:9 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 fonts-unifont all 1:15.1.01-1build1 [2993 kB]
2025-06-04T21:53:36.5108836Z Get:10 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 fonts-wqy-zenhei all 0.9.45-8 [7472 kB]
2025-06-04T21:53:37.0886549Z Get:11 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libproxy1v5 amd64 0.5.4-4build1 [26.5 kB]
2025-06-04T21:53:37.1726988Z Get:12 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 glib-networking-common all 2.80.0-1build1 [6702 B]
2025-06-04T21:53:37.2560921Z Get:13 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 glib-networking-services amd64 2.80.0-1build1 [12.8 kB]
2025-06-04T21:53:37.3414962Z Get:14 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 session-migration amd64 0.3.9build1 [9034 B]
2025-06-04T21:53:37.4258167Z Get:15 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 gsettings-desktop-schemas all 46.1-0ubuntu1 [35.6 kB]
2025-06-04T21:53:37.5105823Z Get:16 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 glib-networking amd64 2.80.0-1build1 [64.1 kB]
2025-06-04T21:53:37.5945251Z Get:17 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libva2 amd64 2.20.0-2build1 [66.2 kB]
2025-06-04T21:53:37.6781690Z Get:18 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libva-drm2 amd64 2.20.0-2build1 [7124 B]
2025-06-04T21:53:37.7619341Z Get:19 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libva-x11-2 amd64 2.20.0-2build1 [12.0 kB]
2025-06-04T21:53:37.8465936Z Get:20 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libvdpau1 amd64 1.5-2build1 [27.8 kB]
2025-06-04T21:53:37.9304603Z Get:21 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libvpl2 amd64 2023.3.0-1build1 [99.8 kB]
2025-06-04T21:53:38.0155504Z Get:22 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 ocl-icd-libopencl1 amd64 2.3.2-1build1 [38.5 kB]
2025-06-04T21:53:38.1014320Z Get:23 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libavutil58 amd64 7:6.1.1-3ubuntu5 [401 kB]
2025-06-04T21:53:38.2655751Z Get:24 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libcodec2-1.2 amd64 1.2.0-2build1 [8998 kB]
2025-06-04T21:53:38.7888365Z Get:25 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libdav1d7 amd64 1.4.1-1build1 [604 kB]
2025-06-04T21:53:38.9521669Z Get:26 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libgsm1 amd64 1.0.22-1build1 [27.8 kB]
2025-06-04T21:53:39.0355790Z Get:27 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libhwy1t64 amd64 1.0.7-8.1build1 [584 kB]
2025-06-04T21:53:39.2007936Z Get:28 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libjxl0.7 amd64 0.7.0-10.2ubuntu6 [999 kB]
2025-06-04T21:53:39.3844062Z Get:29 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libmp3lame0 amd64 3.100-6build1 [142 kB]
2025-06-04T21:53:39.4682343Z Get:30 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libopus0 amd64 1.4-1build1 [208 kB]
2025-06-04T21:53:39.5556259Z Get:31 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 librav1e0 amd64 0.7.1-2 [1022 kB]
2025-06-04T21:53:39.8045358Z Get:32 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 librsvg2-2 amd64 2.58.0+dfsg-1build1 [2135 kB]
2025-06-04T21:53:40.1419331Z Get:33 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libshine3 amd64 3.1.1-2build1 [23.2 kB]
2025-06-04T21:53:40.2258384Z Get:34 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libspeex1 amd64 1.2.1-2ubuntu2.24.04.1 [59.6 kB]
2025-06-04T21:53:40.3108217Z Get:35 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libsvtav1enc1d1 amd64 1.7.0+dfsg-2build1 [2425 kB]
2025-06-04T21:53:40.6498451Z Get:36 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libsoxr0 amd64 0.1.3-4build3 [80.0 kB]
2025-06-04T21:53:40.7354000Z Get:37 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libswresample4 amd64 7:6.1.1-3ubuntu5 [63.8 kB]
2025-06-04T21:53:40.8202403Z Get:38 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libtheora0 amd64 1.1.1+dfsg.1-16.1build3 [211 kB]
2025-06-04T21:53:40.9069648Z Get:39 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libtwolame0 amd64 0.4.0-2build3 [52.3 kB]
2025-06-04T21:53:40.9912716Z Get:40 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libvorbisenc2 amd64 1.3.7-1build3 [80.8 kB]
2025-06-04T21:53:41.0767852Z Get:41 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libvpx9 amd64 1.14.0-1ubuntu2.2 [1143 kB]
2025-06-04T21:53:41.3249784Z Get:42 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libx264-164 amd64 2:0.164.3108+git31e19f9-1 [604 kB]
2025-06-04T21:53:41.4992002Z Get:43 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libx265-199 amd64 3.5-2build1 [1226 kB]
2025-06-04T21:53:41.7468179Z Get:44 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libxvidcore4 amd64 2:1.3.7-1build1 [219 kB]
2025-06-04T21:53:41.8348951Z Get:45 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libzvbi-common all 0.2.42-2 [42.4 kB]
2025-06-04T21:53:41.9189042Z Get:46 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libzvbi0t64 amd64 0.2.42-2 [261 kB]
2025-06-04T21:53:42.0083045Z Get:47 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libavcodec60 amd64 7:6.1.1-3ubuntu5 [5851 kB]
2025-06-04T21:53:42.4297804Z Get:48 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libunibreak5 amd64 5.1-2build1 [25.0 kB]
2025-06-04T21:53:42.5134305Z Get:49 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libass9 amd64 1:0.17.1-2build1 [104 kB]
2025-06-04T21:53:42.6000266Z Get:50 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libudfread0 amd64 1.1.2-1build1 [19.0 kB]
2025-06-04T21:53:42.6835444Z Get:51 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libbluray2 amd64 1:1.3.4-1build1 [159 kB]
2025-06-04T21:53:42.7716186Z Get:52 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libchromaprint1 amd64 1.5.1-5 [30.5 kB]
2025-06-04T21:53:42.8558448Z Get:53 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libgme0 amd64 0.6.3-7build1 [134 kB]
2025-06-04T21:53:42.9401232Z Get:54 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libmpg123-0t64 amd64 1.32.5-1ubuntu1.1 [169 kB]
2025-06-04T21:53:43.0251348Z Get:55 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libopenmpt0t64 amd64 0.7.3-1.1build3 [647 kB]
2025-06-04T21:53:43.1920054Z Get:56 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libcjson1 amd64 1.7.17-1 [24.8 kB]
2025-06-04T21:53:43.2775913Z Get:57 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libmbedcrypto7t64 amd64 2.28.8-1 [209 kB]
2025-06-04T21:53:43.3633380Z Get:58 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 librist4 amd64 0.2.10+dfsg-2 [74.9 kB]
2025-06-04T21:53:43.4486702Z Get:59 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libsrt1.5-gnutls amd64 1.5.3-1build2 [316 kB]
2025-06-04T21:53:43.5375067Z Get:60 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libssh-gcrypt-4 amd64 0.10.6-2build2 [223 kB]
2025-06-04T21:53:43.6359547Z Get:61 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libavformat60 amd64 7:6.1.1-3ubuntu5 [1153 kB]
2025-06-04T21:53:43.8871103Z Get:62 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libbs2b0 amd64 3.1.0+dfsg-7build1 [10.6 kB]
2025-06-04T21:53:43.9709467Z Get:63 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libflite1 amd64 2.2-6build3 [13.6 MB]
2025-06-04T21:53:44.7345885Z Get:64 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libserd-0-0 amd64 0.32.2-1 [43.6 kB]
2025-06-04T21:53:44.8182360Z Get:65 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libzix-0-0 amd64 0.4.2-2build1 [23.6 kB]
2025-06-04T21:53:44.9037050Z Get:66 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libsord-0-0 amd64 0.16.16-2build1 [15.8 kB]
2025-06-04T21:53:44.9871534Z Get:67 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libsratom-0-0 amd64 0.6.16-1build1 [17.3 kB]
2025-06-04T21:53:45.0780925Z Get:68 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 liblilv-0-0 amd64 0.24.22-1build1 [41.0 kB]
2025-06-04T21:53:45.1640278Z Get:69 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libmysofa1 amd64 1.3.2+dfsg-2ubuntu2 [1158 kB]
2025-06-04T21:53:45.4157133Z Get:70 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libplacebo338 amd64 6.338.2-2build1 [2654 kB]
2025-06-04T21:53:45.7462951Z Get:71 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libblas3 amd64 3.12.0-3build1.1 [238 kB]
2025-06-04T21:53:45.8343016Z Get:72 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 liblapack3 amd64 3.12.0-3build1.1 [2646 kB]
2025-06-04T21:53:46.2490318Z Get:73 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libasyncns0 amd64 0.8-6build4 [11.3 kB]
2025-06-04T21:53:46.3321180Z Get:74 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libflac12t64 amd64 1.4.3+ds-2.1ubuntu2 [197 kB]
2025-06-04T21:53:46.4205375Z Get:75 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libsndfile1 amd64 1.2.2-1ubuntu5.24.04.1 [209 kB]
2025-06-04T21:53:46.5134079Z Get:76 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libpulse0 amd64 1:16.1+dfsg1-2ubuntu10.1 [292 kB]
2025-06-04T21:53:46.6768696Z Get:77 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libsphinxbase3t64 amd64 0.8+5prealpha+1-17build2 [126 kB]
2025-06-04T21:53:46.7624099Z Get:78 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libpocketsphinx3 amd64 0.8.0+real5prealpha+1-15ubuntu5 [133 kB]
2025-06-04T21:53:46.8507391Z Get:79 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libpostproc57 amd64 7:6.1.1-3ubuntu5 [49.9 kB]
2025-06-04T21:53:46.9353205Z Get:80 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libsamplerate0 amd64 0.2.2-4build1 [1344 kB]
2025-06-04T21:53:47.1908227Z Get:81 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 librubberband2 amd64 3.3.0+dfsg-2build1 [130 kB]
2025-06-04T21:53:47.2759488Z Get:82 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libswscale7 amd64 7:6.1.1-3ubuntu5 [193 kB]
2025-06-04T21:53:47.3643626Z Get:83 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libvidstab1.1 amd64 1.1.0-2build1 [38.5 kB]
2025-06-04T21:53:47.4480555Z Get:84 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libzimg2 amd64 3.0.5+ds1-1build1 [254 kB]
2025-06-04T21:53:47.5404170Z Get:85 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libavfilter9 amd64 7:6.1.1-3ubuntu5 [4235 kB]
2025-06-04T21:53:47.9517350Z Get:86 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 liborc-0.4-0t64 amd64 1:0.4.38-1ubuntu0.1 [207 kB]
2025-06-04T21:53:48.0391422Z Get:87 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libgstreamer-plugins-base1.0-0 amd64 1.24.2-1ubuntu0.2 [862 kB]
2025-06-04T21:53:48.2197101Z Get:88 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 gstreamer1.0-libav amd64 1.24.1-1build1 [103 kB]
2025-06-04T21:53:48.3061572Z Get:89 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libcdparanoia0 amd64 3.10.2+debian-14build3 [48.5 kB]
2025-06-04T21:53:48.3900249Z Get:90 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libvisual-0.4-0 amd64 0.4.2-2build1 [115 kB]
2025-06-04T21:53:48.4759026Z Get:91 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 gstreamer1.0-plugins-base amd64 1.24.2-1ubuntu0.2 [721 kB]
2025-06-04T21:53:48.6468195Z Get:92 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libaa1 amd64 1.4p5-51.1 [49.9 kB]
2025-06-04T21:53:48.7304680Z Get:93 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libraw1394-11 amd64 2.1.2-2build3 [26.2 kB]
2025-06-04T21:53:48.8156956Z Get:94 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libavc1394-0 amd64 0.5.4-5build3 [15.4 kB]
2025-06-04T21:53:48.8987913Z Get:95 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libcaca0 amd64 0.99.beta20-4build2 [208 kB]
2025-06-04T21:53:48.9933518Z Get:96 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libdv4t64 amd64 1.0.0-17.1build1 [63.2 kB]
2025-06-04T21:53:49.0803833Z Get:97 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libgstreamer-plugins-good1.0-0 amd64 1.24.2-1ubuntu1.1 [32.9 kB]
2025-06-04T21:53:49.1638089Z Get:98 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libiec61883-0 amd64 1.2.0-6build1 [24.5 kB]
2025-06-04T21:53:49.2467430Z Get:99 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libshout3 amd64 2.4.6-1build2 [50.3 kB]
2025-06-04T21:53:49.3311023Z Get:100 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libtag1v5-vanilla amd64 1.13.1-1build1 [326 kB]
2025-06-04T21:53:49.4186522Z Get:101 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libtag1v5 amd64 1.13.1-1build1 [11.7 kB]
2025-06-04T21:53:49.5022695Z Get:102 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libv4lconvert0t64 amd64 1.26.1-4build3 [87.6 kB]
2025-06-04T21:53:49.5890794Z Get:103 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libv4l-0t64 amd64 1.26.1-4build3 [46.9 kB]
2025-06-04T21:53:49.6739646Z Get:104 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libwavpack1 amd64 5.6.0-1build1 [84.6 kB]
2025-06-04T21:53:49.7583750Z Get:105 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libsoup-3.0-common all 3.4.4-5ubuntu0.4 [11.1 kB]
2025-06-04T21:53:49.8423372Z Get:106 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libsoup-3.0-0 amd64 3.4.4-5ubuntu0.4 [290 kB]
2025-06-04T21:53:49.9294439Z Get:107 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 gstreamer1.0-plugins-good amd64 1.24.2-1ubuntu1.1 [2238 kB]
2025-06-04T21:53:50.1858035Z Get:108 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libabsl20220623t64 amd64 20220623.1-3.1ubuntu3.2 [423 kB]
2025-06-04T21:53:50.3502607Z Get:109 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libgav1-1 amd64 0.18.0-1build3 [357 kB]
2025-06-04T21:53:50.4395621Z Get:110 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libyuv0 amd64 0.0~git202401110.af6ac82-1 [178 kB]
2025-06-04T21:53:50.5242377Z Get:111 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libavif16 amd64 1.0.4-1ubuntu3 [91.2 kB]
2025-06-04T21:53:50.6082080Z Get:112 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libavtp0 amd64 0.2.0-1build1 [6414 B]
2025-06-04T21:53:50.6913875Z Get:113 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libcairo-script-interpreter2 amd64 1.18.0-3build1 [60.3 kB]
2025-06-04T21:53:50.7752451Z Get:114 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libdc1394-25 amd64 2.2.6-4build1 [90.1 kB]
2025-06-04T21:53:50.8591941Z Get:115 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libdecor-0-0 amd64 0.2.2-1build2 [16.5 kB]
2025-06-04T21:53:50.9425864Z Get:116 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libgles2 amd64 1.7.0-1build1 [17.1 kB]
2025-06-04T21:53:51.0263434Z Get:117 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libdirectfb-1.7-7t64 amd64 1.7.7-11.1ubuntu2 [1035 kB]
2025-06-04T21:53:51.2002091Z Get:118 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libdvdread8t64 amd64 6.1.3-1.1build1 [54.7 kB]
2025-06-04T21:53:51.2842326Z Get:119 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libdvdnav4 amd64 6.1.1-3build1 [39.5 kB]
2025-06-04T21:53:51.3713536Z Get:120 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libegl-mesa0 amd64 24.2.8-1ubuntu1~24.04.1 [129 kB]
2025-06-04T21:53:51.4568307Z Get:121 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libevent-2.1-7t64 amd64 2.1.12-stable-9ubuntu2 [145 kB]
2025-06-04T21:53:51.5433602Z Get:122 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libfaad2 amd64 2.11.1-1build1 [207 kB]
2025-06-04T21:53:51.6344683Z Get:123 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libinstpatch-1.0-2 amd64 1.1.6-1build2 [251 kB]
2025-06-04T21:53:51.7207617Z Get:124 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libjack-jackd2-0 amd64 1.9.21~dfsg-3ubuntu3 [289 kB]
2025-06-04T21:53:51.8084735Z Get:125 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libwebrtc-audio-processing1 amd64 0.3.1-0ubuntu6 [290 kB]
2025-06-04T21:53:51.8952848Z Get:126 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libspa-0.2-modules amd64 1.0.5-1ubuntu3 [626 kB]
2025-06-04T21:53:52.0626612Z Get:127 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libpipewire-0.3-0t64 amd64 1.0.5-1ubuntu3 [252 kB]
2025-06-04T21:53:52.1503098Z Get:128 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libsdl2-2.0-0 amd64 2.30.0+dfsg-1ubuntu3.1 [686 kB]
2025-06-04T21:53:52.3208500Z Get:129 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 timgm6mb-soundfont all 1.3-5 [5427 kB]
2025-06-04T21:53:52.7356188Z Get:130 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libfluidsynth3 amd64 2.3.4-1build3 [249 kB]
2025-06-04T21:53:52.8214796Z Get:131 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libfreeaptx0 amd64 0.1.1-2build1 [13.5 kB]
2025-06-04T21:53:52.9047805Z Get:132 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libgraphene-1.0-0 amd64 1.10.8-3build2 [46.2 kB]
2025-06-04T21:53:52.9884295Z Get:133 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libgssdp-1.6-0 amd64 1.6.3-1build3 [40.4 kB]
2025-06-04T21:53:53.0725209Z Get:134 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libegl1 amd64 1.7.0-1build1 [28.7 kB]
2025-06-04T21:53:53.1592156Z Get:135 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libgstreamer-gl1.0-0 amd64 1.24.2-1ubuntu0.2 [214 kB]
2025-06-04T21:53:53.2442869Z Get:136 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libgtk-4-common all 4.14.2+ds-1ubuntu3 [1496 kB]
2025-06-04T21:53:53.9274792Z Get:137 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libgtk-4-1 amd64 4.14.2+ds-1ubuntu3 [3289 kB]
2025-06-04T21:53:54.3522226Z Get:138 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libgupnp-1.6-0 amd64 1.6.6-1build3 [92.7 kB]
2025-06-04T21:53:54.4370922Z Get:139 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libgupnp-igd-1.6-0 amd64 1.6.0-3build3 [16.5 kB]
2025-06-04T21:53:54.5200194Z Get:140 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libharfbuzz-icu0 amd64 8.3.0-2build2 [13.3 kB]
2025-06-04T21:53:54.6032140Z Get:141 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libhyphen0 amd64 2.8.8-7build3 [26.5 kB]
2025-06-04T21:53:54.6864502Z Get:142 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libimath-3-1-29t64 amd64 3.1.9-3.1ubuntu2 [72.2 kB]
2025-06-04T21:53:54.7709067Z Get:143 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 liblc3-1 amd64 1.0.4-3build1 [69.7 kB]
2025-06-04T21:53:54.8543374Z Get:144 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libldacbt-enc2 amd64 2.0.2.3+git20200429+ed310a0-4ubuntu2 [27.1 kB]
2025-06-04T21:53:54.9372801Z Get:145 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 libraptor2-0 amd64 2.0.16-3ubuntu0.1 [165 kB]
2025-06-04T21:53:55.0244444Z Get:146 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 liblrdf0 amd64 0.6.1-4build1 [18.5 kB]
2025-06-04T21:53:55.1078665Z Get:147 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libltc11 amd64 1.3.2-1build1 [13.0 kB]
2025-06-04T21:53:55.1911086Z Get:148 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libmanette-0.2-0 amd64 0.2.7-1build2 [30.6 kB]
2025-06-04T21:53:55.2756419Z Get:149 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libmfx1 amd64 22.5.4-1 [3124 kB]
2025-06-04T21:53:55.7043536Z Get:150 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libmjpegutils-2.1-0t64 amd64 1:2.1.0+debian-8.1build1 [25.5 kB]
2025-06-04T21:53:55.7872597Z Get:151 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libmodplug1 amd64 1:0.8.9.0-3build1 [166 kB]
2025-06-04T21:53:55.8733666Z Get:152 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libmpcdec6 amd64 2:0.1~r495-2build1 [32.7 kB]
2025-06-04T21:53:55.9567667Z Get:153 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libmpeg2encpp-2.1-0t64 amd64 1:2.1.0+debian-8.1build1 [75.6 kB]
2025-06-04T21:53:56.0410950Z Get:154 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libmplex2-2.1-0t64 amd64 1:2.1.0+debian-8.1build1 [46.1 kB]
2025-06-04T21:53:56.1246502Z Get:155 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libneon27t64 amd64 0.33.0-1.1build3 [102 kB]
2025-06-04T21:53:56.2094330Z Get:156 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libnice10 amd64 0.1.21-2build3 [157 kB]
2025-06-04T21:53:56.2963671Z Get:157 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libopenal-data all 1:1.23.1-4build1 [161 kB]
2025-06-04T21:53:56.3824414Z Get:158 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libopenexr-3-1-30 amd64 3.1.5-5.1build3 [1004 kB]
2025-06-04T21:53:56.6318546Z Get:159 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libopenh264-7 amd64 2.4.1+dfsg-1 [409 kB]
2025-06-04T21:53:56.7964962Z Get:160 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libopenni2-0 amd64 2.2.0.33+dfsg-18 [370 kB]
2025-06-04T21:53:56.9619500Z Get:161 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libqrencode4 amd64 4.1.1-1build2 [25.0 kB]
2025-06-04T21:53:57.0455643Z Get:162 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libsecret-common all 0.21.4-1build3 [4962 B]
2025-06-04T21:53:57.1290763Z Get:163 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libsecret-1-0 amd64 0.21.4-1build3 [116 kB]
2025-06-04T21:53:57.2138697Z Get:164 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libsndio7.0 amd64 1.9.0-0.3build3 [29.6 kB]
2025-06-04T21:53:57.2973310Z Get:165 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libsoundtouch1 amd64 2.3.2+ds1-1build1 [60.5 kB]
2025-06-04T21:53:57.3819060Z Get:166 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libspandsp2t64 amd64 0.0.6+dfsg-2.1build1 [311 kB]
2025-06-04T21:53:57.5467700Z Get:167 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libsrtp2-1 amd64 2.5.0-3build1 [41.9 kB]
2025-06-04T21:53:57.6335085Z Get:168 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libwildmidi2 amd64 0.4.3-1build3 [68.5 kB]
2025-06-04T21:53:57.7185367Z Get:169 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libwoff1 amd64 1.0.2-2build1 [45.3 kB]
2025-06-04T21:53:57.8047614Z Get:170 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libxcb-xkb1 amd64 1.15-1ubuntu2 [32.3 kB]
2025-06-04T21:53:57.8880945Z Get:171 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libxkbcommon-x11-0 amd64 1.6.0-1build1 [14.5 kB]
2025-06-04T21:53:57.9760697Z Get:172 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libzbar0t64 amd64 0.23.93-4build3 [123 kB]
2025-06-04T21:53:58.0607317Z Get:173 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libzxing3 amd64 2.2.1-3 [583 kB]
2025-06-04T21:53:58.2296871Z Get:174 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 xfonts-encodings all 1:1.0.5-0ubuntu2 [578 kB]
2025-06-04T21:53:58.3997813Z Get:175 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 xfonts-utils amd64 1:7.7+6build3 [94.4 kB]
2025-06-04T21:53:58.4861384Z Get:176 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 xfonts-cyrillic all 1:1.0.5+nmu1 [384 kB]
2025-06-04T21:53:58.6510846Z Get:177 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 xfonts-scalable all 1:1.0.3-1.3 [304 kB]
2025-06-04T21:53:58.8153701Z Get:178 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libgstreamer-plugins-bad1.0-0 amd64 1.24.2-1ubuntu4 [797 kB]
2025-06-04T21:53:58.9897587Z Get:179 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libdca0 amd64 0.0.7-2build1 [93.8 kB]
2025-06-04T21:53:59.0736912Z Get:180 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libopenal1 amd64 1:1.23.1-4build1 [540 kB]
2025-06-04T21:53:59.2427235Z Get:181 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 libsbc1 amd64 2.0-1build1 [33.9 kB]
2025-06-04T21:53:59.3258829Z Get:182 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libvo-aacenc0 amd64 0.1.3-2build1 [67.8 kB]
2025-06-04T21:53:59.4100443Z Get:183 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 libvo-amrwbenc0 amd64 0.1.3-2build1 [76.7 kB]
2025-06-04T21:53:59.4953119Z Get:184 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 gstreamer1.0-plugins-bad amd64 1.24.2-1ubuntu4 [3081 kB]
2025-06-04T21:54:00.2529879Z Fetched 116 MB in 25s (4597 kB/s)
2025-06-04T21:54:00.2812295Z Selecting previously unselected package fonts-ipafont-gothic.
2025-06-04T21:54:00.2865455Z (Reading database ... 
2025-06-04T21:54:00.2865889Z (Reading database ... 5%
2025-06-04T21:54:00.2866303Z (Reading database ... 10%
2025-06-04T21:54:00.2866684Z (Reading database ... 15%
2025-06-04T21:54:00.2867072Z (Reading database ... 20%
2025-06-04T21:54:00.2867481Z (Reading database ... 25%
2025-06-04T21:54:00.2867843Z (Reading database ... 30%
2025-06-04T21:54:00.2868222Z (Reading database ... 35%
2025-06-04T21:54:00.2868592Z (Reading database ... 40%
2025-06-04T21:54:00.2868960Z (Reading database ... 45%
2025-06-04T21:54:00.2869492Z (Reading database ... 50%
2025-06-04T21:54:00.2886994Z (Reading database ... 55%
2025-06-04T21:54:00.2985327Z (Reading database ... 60%
2025-06-04T21:54:00.3003657Z (Reading database ... 65%
2025-06-04T21:54:00.3040556Z (Reading database ... 70%
2025-06-04T21:54:00.3063804Z (Reading database ... 75%
2025-06-04T21:54:00.3242156Z (Reading database ... 80%
2025-06-04T21:54:00.3268488Z (Reading database ... 85%
2025-06-04T21:54:00.3505218Z (Reading database ... 90%
2025-06-04T21:54:00.3579284Z (Reading database ... 95%
2025-06-04T21:54:00.3579972Z (Reading database ... 100%
2025-06-04T21:54:00.3580907Z (Reading database ... 222723 files and directories currently installed.)
2025-06-04T21:54:00.3621475Z Preparing to unpack .../000-fonts-ipafont-gothic_00303-21ubuntu1_all.deb ...
2025-06-04T21:54:00.3704280Z Unpacking fonts-ipafont-gothic (00303-21ubuntu1) ...
2025-06-04T21:54:00.6127245Z Preparing to unpack .../001-libglib2.0-data_2.80.0-6ubuntu3.4_all.deb ...
2025-06-04T21:54:00.6169230Z Unpacking libglib2.0-data (2.80.0-6ubuntu3.4) over (2.80.0-6ubuntu3.2) ...
2025-06-04T21:54:00.6582016Z Preparing to unpack .../002-libglib2.0-bin_2.80.0-6ubuntu3.4_amd64.deb ...
2025-06-04T21:54:00.6621403Z Unpacking libglib2.0-bin (2.80.0-6ubuntu3.4) over (2.80.0-6ubuntu3.2) ...
2025-06-04T21:54:00.7116399Z Preparing to unpack .../003-gir1.2-glib-2.0_2.80.0-6ubuntu3.4_amd64.deb ...
2025-06-04T21:54:00.7147991Z Unpacking gir1.2-glib-2.0:amd64 (2.80.0-6ubuntu3.4) over (2.80.0-6ubuntu3.2) ...
2025-06-04T21:54:00.7681620Z Preparing to unpack .../004-libglib2.0-0t64_2.80.0-6ubuntu3.4_amd64.deb ...
2025-06-04T21:54:00.7816009Z Unpacking libglib2.0-0t64:amd64 (2.80.0-6ubuntu3.4) over (2.80.0-6ubuntu3.2) ...
2025-06-04T21:54:00.8351356Z Selecting previously unselected package fonts-freefont-ttf.
2025-06-04T21:54:00.8491880Z Preparing to unpack .../005-fonts-freefont-ttf_20211204+svn4273-2_all.deb ...
2025-06-04T21:54:00.8503676Z Unpacking fonts-freefont-ttf (20211204+svn4273-2) ...
2025-06-04T21:54:00.9322103Z Selecting previously unselected package fonts-tlwg-loma-otf.
2025-06-04T21:54:00.9456458Z Preparing to unpack .../006-fonts-tlwg-loma-otf_1%3a0.7.3-1_all.deb ...
2025-06-04T21:54:00.9465102Z Unpacking fonts-tlwg-loma-otf (1:0.7.3-1) ...
2025-06-04T21:54:00.9705971Z Selecting previously unselected package fonts-unifont.
2025-06-04T21:54:00.9843838Z Preparing to unpack .../007-fonts-unifont_1%3a15.1.01-1build1_all.deb ...
2025-06-04T21:54:00.9858124Z Unpacking fonts-unifont (1:15.1.01-1build1) ...
2025-06-04T21:54:01.1070250Z Selecting previously unselected package fonts-wqy-zenhei.
2025-06-04T21:54:01.1211917Z Preparing to unpack .../008-fonts-wqy-zenhei_0.9.45-8_all.deb ...
2025-06-04T21:54:01.1312732Z Unpacking fonts-wqy-zenhei (0.9.45-8) ...
2025-06-04T21:54:01.5885161Z Selecting previously unselected package libproxy1v5:amd64.
2025-06-04T21:54:01.6019880Z Preparing to unpack .../009-libproxy1v5_0.5.4-4build1_amd64.deb ...
2025-06-04T21:54:01.6038877Z Unpacking libproxy1v5:amd64 (0.5.4-4build1) ...
2025-06-04T21:54:01.6271303Z Selecting previously unselected package glib-networking-common.
2025-06-04T21:54:01.6404354Z Preparing to unpack .../010-glib-networking-common_2.80.0-1build1_all.deb ...
2025-06-04T21:54:01.6417256Z Unpacking glib-networking-common (2.80.0-1build1) ...
2025-06-04T21:54:01.6628111Z Selecting previously unselected package glib-networking-services.
2025-06-04T21:54:01.6761491Z Preparing to unpack .../011-glib-networking-services_2.80.0-1build1_amd64.deb ...
2025-06-04T21:54:01.6771786Z Unpacking glib-networking-services (2.80.0-1build1) ...
2025-06-04T21:54:01.7011955Z Selecting previously unselected package session-migration.
2025-06-04T21:54:01.7145664Z Preparing to unpack .../012-session-migration_0.3.9build1_amd64.deb ...
2025-06-04T21:54:01.7157773Z Unpacking session-migration (0.3.9build1) ...
2025-06-04T21:54:01.7440437Z Selecting previously unselected package gsettings-desktop-schemas.
2025-06-04T21:54:01.7574157Z Preparing to unpack .../013-gsettings-desktop-schemas_46.1-0ubuntu1_all.deb ...
2025-06-04T21:54:01.7584467Z Unpacking gsettings-desktop-schemas (46.1-0ubuntu1) ...
2025-06-04T21:54:01.7874742Z Selecting previously unselected package glib-networking:amd64.
2025-06-04T21:54:01.8014197Z Preparing to unpack .../014-glib-networking_2.80.0-1build1_amd64.deb ...
2025-06-04T21:54:01.8028411Z Unpacking glib-networking:amd64 (2.80.0-1build1) ...
2025-06-04T21:54:01.8273710Z Selecting previously unselected package libva2:amd64.
2025-06-04T21:54:01.8405388Z Preparing to unpack .../015-libva2_2.20.0-2build1_amd64.deb ...
2025-06-04T21:54:01.8415960Z Unpacking libva2:amd64 (2.20.0-2build1) ...
2025-06-04T21:54:01.8677398Z Selecting previously unselected package libva-drm2:amd64.
2025-06-04T21:54:01.8807579Z Preparing to unpack .../016-libva-drm2_2.20.0-2build1_amd64.deb ...
2025-06-04T21:54:01.8823777Z Unpacking libva-drm2:amd64 (2.20.0-2build1) ...
2025-06-04T21:54:01.9054390Z Selecting previously unselected package libva-x11-2:amd64.
2025-06-04T21:54:01.9190162Z Preparing to unpack .../017-libva-x11-2_2.20.0-2build1_amd64.deb ...
2025-06-04T21:54:01.9201282Z Unpacking libva-x11-2:amd64 (2.20.0-2build1) ...
2025-06-04T21:54:01.9464110Z Selecting previously unselected package libvdpau1:amd64.
2025-06-04T21:54:01.9596129Z Preparing to unpack .../018-libvdpau1_1.5-2build1_amd64.deb ...
2025-06-04T21:54:01.9608026Z Unpacking libvdpau1:amd64 (1.5-2build1) ...
2025-06-04T21:54:01.9866303Z Selecting previously unselected package libvpl2.
2025-06-04T21:54:01.9998858Z Preparing to unpack .../019-libvpl2_2023.3.0-1build1_amd64.deb ...
2025-06-04T21:54:02.0008275Z Unpacking libvpl2 (2023.3.0-1build1) ...
2025-06-04T21:54:02.0265717Z Selecting previously unselected package ocl-icd-libopencl1:amd64.
2025-06-04T21:54:02.0397673Z Preparing to unpack .../020-ocl-icd-libopencl1_2.3.2-1build1_amd64.deb ...
2025-06-04T21:54:02.0408968Z Unpacking ocl-icd-libopencl1:amd64 (2.3.2-1build1) ...
2025-06-04T21:54:02.0659940Z Selecting previously unselected package libavutil58:amd64.
2025-06-04T21:54:02.0793447Z Preparing to unpack .../021-libavutil58_7%3a6.1.1-3ubuntu5_amd64.deb ...
2025-06-04T21:54:02.0807526Z Unpacking libavutil58:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:02.1094990Z Selecting previously unselected package libcodec2-1.2:amd64.
2025-06-04T21:54:02.1229790Z Preparing to unpack .../022-libcodec2-1.2_1.2.0-2build1_amd64.deb ...
2025-06-04T21:54:02.1238512Z Unpacking libcodec2-1.2:amd64 (1.2.0-2build1) ...
2025-06-04T21:54:02.2077553Z Selecting previously unselected package libdav1d7:amd64.
2025-06-04T21:54:02.2212854Z Preparing to unpack .../023-libdav1d7_1.4.1-1build1_amd64.deb ...
2025-06-04T21:54:02.2222965Z Unpacking libdav1d7:amd64 (1.4.1-1build1) ...
2025-06-04T21:54:02.2531404Z Selecting previously unselected package libgsm1:amd64.
2025-06-04T21:54:02.2667440Z Preparing to unpack .../024-libgsm1_1.0.22-1build1_amd64.deb ...
2025-06-04T21:54:02.2685872Z Unpacking libgsm1:amd64 (1.0.22-1build1) ...
2025-06-04T21:54:02.2938747Z Selecting previously unselected package libhwy1t64:amd64.
2025-06-04T21:54:02.3071611Z Preparing to unpack .../025-libhwy1t64_1.0.7-8.1build1_amd64.deb ...
2025-06-04T21:54:02.3085252Z Unpacking libhwy1t64:amd64 (1.0.7-8.1build1) ...
2025-06-04T21:54:02.3450299Z Selecting previously unselected package libjxl0.7:amd64.
2025-06-04T21:54:02.3586878Z Preparing to unpack .../026-libjxl0.7_0.7.0-10.2ubuntu6_amd64.deb ...
2025-06-04T21:54:02.3599034Z Unpacking libjxl0.7:amd64 (0.7.0-10.2ubuntu6) ...
2025-06-04T21:54:02.3983115Z Selecting previously unselected package libmp3lame0:amd64.
2025-06-04T21:54:02.4116505Z Preparing to unpack .../027-libmp3lame0_3.100-6build1_amd64.deb ...
2025-06-04T21:54:02.4126910Z Unpacking libmp3lame0:amd64 (3.100-6build1) ...
2025-06-04T21:54:02.4380547Z Selecting previously unselected package libopus0:amd64.
2025-06-04T21:54:02.4513833Z Preparing to unpack .../028-libopus0_1.4-1build1_amd64.deb ...
2025-06-04T21:54:02.4524427Z Unpacking libopus0:amd64 (1.4-1build1) ...
2025-06-04T21:54:02.4783203Z Selecting previously unselected package librav1e0:amd64.
2025-06-04T21:54:02.4912465Z Preparing to unpack .../029-librav1e0_0.7.1-2_amd64.deb ...
2025-06-04T21:54:02.4937100Z Unpacking librav1e0:amd64 (0.7.1-2) ...
2025-06-04T21:54:02.5302276Z Selecting previously unselected package librsvg2-2:amd64.
2025-06-04T21:54:02.5439505Z Preparing to unpack .../030-librsvg2-2_2.58.0+dfsg-1build1_amd64.deb ...
2025-06-04T21:54:02.5452436Z Unpacking librsvg2-2:amd64 (2.58.0+dfsg-1build1) ...
2025-06-04T21:54:02.5952624Z Selecting previously unselected package libshine3:amd64.
2025-06-04T21:54:02.6088705Z Preparing to unpack .../031-libshine3_3.1.1-2build1_amd64.deb ...
2025-06-04T21:54:02.6099621Z Unpacking libshine3:amd64 (3.1.1-2build1) ...
2025-06-04T21:54:02.6333533Z Selecting previously unselected package libspeex1:amd64.
2025-06-04T21:54:02.6468387Z Preparing to unpack .../032-libspeex1_1.2.1-2ubuntu2.24.04.1_amd64.deb ...
2025-06-04T21:54:02.6480325Z Unpacking libspeex1:amd64 (1.2.1-2ubuntu2.24.04.1) ...
2025-06-04T21:54:02.6712409Z Selecting previously unselected package libsvtav1enc1d1:amd64.
2025-06-04T21:54:02.6847369Z Preparing to unpack .../033-libsvtav1enc1d1_1.7.0+dfsg-2build1_amd64.deb ...
2025-06-04T21:54:02.6869544Z Unpacking libsvtav1enc1d1:amd64 (1.7.0+dfsg-2build1) ...
2025-06-04T21:54:02.7404796Z Selecting previously unselected package libsoxr0:amd64.
2025-06-04T21:54:02.7544033Z Preparing to unpack .../034-libsoxr0_0.1.3-4build3_amd64.deb ...
2025-06-04T21:54:02.7563613Z Unpacking libsoxr0:amd64 (0.1.3-4build3) ...
2025-06-04T21:54:02.7802716Z Selecting previously unselected package libswresample4:amd64.
2025-06-04T21:54:02.7939066Z Preparing to unpack .../035-libswresample4_7%3a6.1.1-3ubuntu5_amd64.deb ...
2025-06-04T21:54:02.7955427Z Unpacking libswresample4:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:02.8210147Z Selecting previously unselected package libtheora0:amd64.
2025-06-04T21:54:02.8345571Z Preparing to unpack .../036-libtheora0_1.1.1+dfsg.1-16.1build3_amd64.deb ...
2025-06-04T21:54:02.8357994Z Unpacking libtheora0:amd64 (1.1.1+dfsg.1-16.1build3) ...
2025-06-04T21:54:02.8657327Z Selecting previously unselected package libtwolame0:amd64.
2025-06-04T21:54:02.8790223Z Preparing to unpack .../037-libtwolame0_0.4.0-2build3_amd64.deb ...
2025-06-04T21:54:02.8801902Z Unpacking libtwolame0:amd64 (0.4.0-2build3) ...
2025-06-04T21:54:02.9041782Z Selecting previously unselected package libvorbisenc2:amd64.
2025-06-04T21:54:02.9174535Z Preparing to unpack .../038-libvorbisenc2_1.3.7-1build3_amd64.deb ...
2025-06-04T21:54:02.9186913Z Unpacking libvorbisenc2:amd64 (1.3.7-1build3) ...
2025-06-04T21:54:02.9452470Z Selecting previously unselected package libvpx9:amd64.
2025-06-04T21:54:02.9583124Z Preparing to unpack .../039-libvpx9_1.14.0-1ubuntu2.2_amd64.deb ...
2025-06-04T21:54:02.9597933Z Unpacking libvpx9:amd64 (1.14.0-1ubuntu2.2) ...
2025-06-04T21:54:02.9954917Z Selecting previously unselected package libx264-164:amd64.
2025-06-04T21:54:03.0089066Z Preparing to unpack .../040-libx264-164_2%3a0.164.3108+git31e19f9-1_amd64.deb ...
2025-06-04T21:54:03.0104582Z Unpacking libx264-164:amd64 (2:0.164.3108+git31e19f9-1) ...
2025-06-04T21:54:03.0426580Z Selecting previously unselected package libx265-199:amd64.
2025-06-04T21:54:03.0562188Z Preparing to unpack .../041-libx265-199_3.5-2build1_amd64.deb ...
2025-06-04T21:54:03.0572596Z Unpacking libx265-199:amd64 (3.5-2build1) ...
2025-06-04T21:54:03.1356338Z Selecting previously unselected package libxvidcore4:amd64.
2025-06-04T21:54:03.1490134Z Preparing to unpack .../042-libxvidcore4_2%3a1.3.7-1build1_amd64.deb ...
2025-06-04T21:54:03.1511923Z Unpacking libxvidcore4:amd64 (2:1.3.7-1build1) ...
2025-06-04T21:54:03.1744878Z Selecting previously unselected package libzvbi-common.
2025-06-04T21:54:03.1878862Z Preparing to unpack .../043-libzvbi-common_0.2.42-2_all.deb ...
2025-06-04T21:54:03.1889964Z Unpacking libzvbi-common (0.2.42-2) ...
2025-06-04T21:54:03.2390462Z Selecting previously unselected package libzvbi0t64:amd64.
2025-06-04T21:54:03.2526429Z Preparing to unpack .../044-libzvbi0t64_0.2.42-2_amd64.deb ...
2025-06-04T21:54:03.2538506Z Unpacking libzvbi0t64:amd64 (0.2.42-2) ...
2025-06-04T21:54:03.2813860Z Selecting previously unselected package libavcodec60:amd64.
2025-06-04T21:54:03.2950964Z Preparing to unpack .../045-libavcodec60_7%3a6.1.1-3ubuntu5_amd64.deb ...
2025-06-04T21:54:03.2965213Z Unpacking libavcodec60:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:03.3895415Z Selecting previously unselected package libunibreak5:amd64.
2025-06-04T21:54:03.4030270Z Preparing to unpack .../046-libunibreak5_5.1-2build1_amd64.deb ...
2025-06-04T21:54:03.4041972Z Unpacking libunibreak5:amd64 (5.1-2build1) ...
2025-06-04T21:54:03.4273752Z Selecting previously unselected package libass9:amd64.
2025-06-04T21:54:03.4408595Z Preparing to unpack .../047-libass9_1%3a0.17.1-2build1_amd64.deb ...
2025-06-04T21:54:03.4420318Z Unpacking libass9:amd64 (1:0.17.1-2build1) ...
2025-06-04T21:54:03.4661232Z Selecting previously unselected package libudfread0:amd64.
2025-06-04T21:54:03.4794577Z Preparing to unpack .../048-libudfread0_1.1.2-1build1_amd64.deb ...
2025-06-04T21:54:03.4803949Z Unpacking libudfread0:amd64 (1.1.2-1build1) ...
2025-06-04T21:54:03.5041053Z Selecting previously unselected package libbluray2:amd64.
2025-06-04T21:54:03.5173769Z Preparing to unpack .../049-libbluray2_1%3a1.3.4-1build1_amd64.deb ...
2025-06-04T21:54:03.5183881Z Unpacking libbluray2:amd64 (1:1.3.4-1build1) ...
2025-06-04T21:54:03.5456640Z Selecting previously unselected package libchromaprint1:amd64.
2025-06-04T21:54:03.5591111Z Preparing to unpack .../050-libchromaprint1_1.5.1-5_amd64.deb ...
2025-06-04T21:54:03.5604683Z Unpacking libchromaprint1:amd64 (1.5.1-5) ...
2025-06-04T21:54:03.5858021Z Selecting previously unselected package libgme0:amd64.
2025-06-04T21:54:03.5989323Z Preparing to unpack .../051-libgme0_0.6.3-7build1_amd64.deb ...
2025-06-04T21:54:03.6002839Z Unpacking libgme0:amd64 (0.6.3-7build1) ...
2025-06-04T21:54:03.6261924Z Selecting previously unselected package libmpg123-0t64:amd64.
2025-06-04T21:54:03.6393960Z Preparing to unpack .../052-libmpg123-0t64_1.32.5-1ubuntu1.1_amd64.deb ...
2025-06-04T21:54:03.6408272Z Unpacking libmpg123-0t64:amd64 (1.32.5-1ubuntu1.1) ...
2025-06-04T21:54:03.6696849Z Selecting previously unselected package libopenmpt0t64:amd64.
2025-06-04T21:54:03.6831091Z Preparing to unpack .../053-libopenmpt0t64_0.7.3-1.1build3_amd64.deb ...
2025-06-04T21:54:03.6841328Z Unpacking libopenmpt0t64:amd64 (0.7.3-1.1build3) ...
2025-06-04T21:54:03.7162049Z Selecting previously unselected package libcjson1:amd64.
2025-06-04T21:54:03.7296936Z Preparing to unpack .../054-libcjson1_1.7.17-1_amd64.deb ...
2025-06-04T21:54:03.7314542Z Unpacking libcjson1:amd64 (1.7.17-1) ...
2025-06-04T21:54:03.7581473Z Selecting previously unselected package libmbedcrypto7t64:amd64.
2025-06-04T21:54:03.7716135Z Preparing to unpack .../055-libmbedcrypto7t64_2.28.8-1_amd64.deb ...
2025-06-04T21:54:03.7727744Z Unpacking libmbedcrypto7t64:amd64 (2.28.8-1) ...
2025-06-04T21:54:03.7999788Z Selecting previously unselected package librist4:amd64.
2025-06-04T21:54:03.8133969Z Preparing to unpack .../056-librist4_0.2.10+dfsg-2_amd64.deb ...
2025-06-04T21:54:03.8147403Z Unpacking librist4:amd64 (0.2.10+dfsg-2) ...
2025-06-04T21:54:03.8393669Z Selecting previously unselected package libsrt1.5-gnutls:amd64.
2025-06-04T21:54:03.8527227Z Preparing to unpack .../057-libsrt1.5-gnutls_1.5.3-1build2_amd64.deb ...
2025-06-04T21:54:03.8538884Z Unpacking libsrt1.5-gnutls:amd64 (1.5.3-1build2) ...
2025-06-04T21:54:03.8819749Z Selecting previously unselected package libssh-gcrypt-4:amd64.
2025-06-04T21:54:03.8953973Z Preparing to unpack .../058-libssh-gcrypt-4_0.10.6-2build2_amd64.deb ...
2025-06-04T21:54:03.8965988Z Unpacking libssh-gcrypt-4:amd64 (0.10.6-2build2) ...
2025-06-04T21:54:03.9229698Z Selecting previously unselected package libavformat60:amd64.
2025-06-04T21:54:03.9364619Z Preparing to unpack .../059-libavformat60_7%3a6.1.1-3ubuntu5_amd64.deb ...
2025-06-04T21:54:03.9375658Z Unpacking libavformat60:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:03.9745566Z Selecting previously unselected package libbs2b0:amd64.
2025-06-04T21:54:03.9883471Z Preparing to unpack .../060-libbs2b0_3.1.0+dfsg-7build1_amd64.deb ...
2025-06-04T21:54:03.9898314Z Unpacking libbs2b0:amd64 (3.1.0+dfsg-7build1) ...
2025-06-04T21:54:04.0154728Z Selecting previously unselected package libflite1:amd64.
2025-06-04T21:54:04.0288705Z Preparing to unpack .../061-libflite1_2.2-6build3_amd64.deb ...
2025-06-04T21:54:04.0302552Z Unpacking libflite1:amd64 (2.2-6build3) ...
2025-06-04T21:54:04.1532428Z Selecting previously unselected package libserd-0-0:amd64.
2025-06-04T21:54:04.1668173Z Preparing to unpack .../062-libserd-0-0_0.32.2-1_amd64.deb ...
2025-06-04T21:54:04.1677859Z Unpacking libserd-0-0:amd64 (0.32.2-1) ...
2025-06-04T21:54:04.1943162Z Selecting previously unselected package libzix-0-0:amd64.
2025-06-04T21:54:04.2076798Z Preparing to unpack .../063-libzix-0-0_0.4.2-2build1_amd64.deb ...
2025-06-04T21:54:04.2108853Z Unpacking libzix-0-0:amd64 (0.4.2-2build1) ...
2025-06-04T21:54:04.2344853Z Selecting previously unselected package libsord-0-0:amd64.
2025-06-04T21:54:04.2479418Z Preparing to unpack .../064-libsord-0-0_0.16.16-2build1_amd64.deb ...
2025-06-04T21:54:04.2490680Z Unpacking libsord-0-0:amd64 (0.16.16-2build1) ...
2025-06-04T21:54:04.2725463Z Selecting previously unselected package libsratom-0-0:amd64.
2025-06-04T21:54:04.2859933Z Preparing to unpack .../065-libsratom-0-0_0.6.16-1build1_amd64.deb ...
2025-06-04T21:54:04.2871681Z Unpacking libsratom-0-0:amd64 (0.6.16-1build1) ...
2025-06-04T21:54:04.3100498Z Selecting previously unselected package liblilv-0-0:amd64.
2025-06-04T21:54:04.3237049Z Preparing to unpack .../066-liblilv-0-0_0.24.22-1build1_amd64.deb ...
2025-06-04T21:54:04.3253301Z Unpacking liblilv-0-0:amd64 (0.24.22-1build1) ...
2025-06-04T21:54:04.3500278Z Selecting previously unselected package libmysofa1:amd64.
2025-06-04T21:54:04.3635497Z Preparing to unpack .../067-libmysofa1_1.3.2+dfsg-2ubuntu2_amd64.deb ...
2025-06-04T21:54:04.3644223Z Unpacking libmysofa1:amd64 (1.3.2+dfsg-2ubuntu2) ...
2025-06-04T21:54:04.3924660Z Selecting previously unselected package libplacebo338:amd64.
2025-06-04T21:54:04.4059861Z Preparing to unpack .../068-libplacebo338_6.338.2-2build1_amd64.deb ...
2025-06-04T21:54:04.4072503Z Unpacking libplacebo338:amd64 (6.338.2-2build1) ...
2025-06-04T21:54:04.4701877Z Selecting previously unselected package libblas3:amd64.
2025-06-04T21:54:04.4838523Z Preparing to unpack .../069-libblas3_3.12.0-3build1.1_amd64.deb ...
2025-06-04T21:54:04.4870721Z Unpacking libblas3:amd64 (3.12.0-3build1.1) ...
2025-06-04T21:54:04.5293542Z Selecting previously unselected package liblapack3:amd64.
2025-06-04T21:54:04.5428625Z Preparing to unpack .../070-liblapack3_3.12.0-3build1.1_amd64.deb ...
2025-06-04T21:54:04.5463268Z Unpacking liblapack3:amd64 (3.12.0-3build1.1) ...
2025-06-04T21:54:04.6004275Z Selecting previously unselected package libasyncns0:amd64.
2025-06-04T21:54:04.6138130Z Preparing to unpack .../071-libasyncns0_0.8-6build4_amd64.deb ...
2025-06-04T21:54:04.6153038Z Unpacking libasyncns0:amd64 (0.8-6build4) ...
2025-06-04T21:54:04.6419317Z Selecting previously unselected package libflac12t64:amd64.
2025-06-04T21:54:04.6552913Z Preparing to unpack .../072-libflac12t64_1.4.3+ds-2.1ubuntu2_amd64.deb ...
2025-06-04T21:54:04.6567211Z Unpacking libflac12t64:amd64 (1.4.3+ds-2.1ubuntu2) ...
2025-06-04T21:54:04.6824490Z Selecting previously unselected package libsndfile1:amd64.
2025-06-04T21:54:04.6959443Z Preparing to unpack .../073-libsndfile1_1.2.2-1ubuntu5.24.04.1_amd64.deb ...
2025-06-04T21:54:04.6969722Z Unpacking libsndfile1:amd64 (1.2.2-1ubuntu5.24.04.1) ...
2025-06-04T21:54:04.7282520Z Selecting previously unselected package libpulse0:amd64.
2025-06-04T21:54:04.7416471Z Preparing to unpack .../074-libpulse0_1%3a16.1+dfsg1-2ubuntu10.1_amd64.deb ...
2025-06-04T21:54:04.7486642Z Unpacking libpulse0:amd64 (1:16.1+dfsg1-2ubuntu10.1) ...
2025-06-04T21:54:04.7824390Z Selecting previously unselected package libsphinxbase3t64:amd64.
2025-06-04T21:54:04.7961495Z Preparing to unpack .../075-libsphinxbase3t64_0.8+5prealpha+1-17build2_amd64.deb ...
2025-06-04T21:54:04.7975840Z Unpacking libsphinxbase3t64:amd64 (0.8+5prealpha+1-17build2) ...
2025-06-04T21:54:04.8251932Z Selecting previously unselected package libpocketsphinx3:amd64.
2025-06-04T21:54:04.8389706Z Preparing to unpack .../076-libpocketsphinx3_0.8.0+real5prealpha+1-15ubuntu5_amd64.deb ...
2025-06-04T21:54:04.8403617Z Unpacking libpocketsphinx3:amd64 (0.8.0+real5prealpha+1-15ubuntu5) ...
2025-06-04T21:54:04.8744802Z Selecting previously unselected package libpostproc57:amd64.
2025-06-04T21:54:04.8881706Z Preparing to unpack .../077-libpostproc57_7%3a6.1.1-3ubuntu5_amd64.deb ...
2025-06-04T21:54:04.8895184Z Unpacking libpostproc57:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:04.9166867Z Selecting previously unselected package libsamplerate0:amd64.
2025-06-04T21:54:04.9305773Z Preparing to unpack .../078-libsamplerate0_0.2.2-4build1_amd64.deb ...
2025-06-04T21:54:04.9317015Z Unpacking libsamplerate0:amd64 (0.2.2-4build1) ...
2025-06-04T21:54:04.9820079Z Selecting previously unselected package librubberband2:amd64.
2025-06-04T21:54:04.9960118Z Preparing to unpack .../079-librubberband2_3.3.0+dfsg-2build1_amd64.deb ...
2025-06-04T21:54:04.9971280Z Unpacking librubberband2:amd64 (3.3.0+dfsg-2build1) ...
2025-06-04T21:54:05.0215780Z Selecting previously unselected package libswscale7:amd64.
2025-06-04T21:54:05.0348108Z Preparing to unpack .../080-libswscale7_7%3a6.1.1-3ubuntu5_amd64.deb ...
2025-06-04T21:54:05.0358544Z Unpacking libswscale7:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:05.0623273Z Selecting previously unselected package libvidstab1.1:amd64.
2025-06-04T21:54:05.0758683Z Preparing to unpack .../081-libvidstab1.1_1.1.0-2build1_amd64.deb ...
2025-06-04T21:54:05.0777923Z Unpacking libvidstab1.1:amd64 (1.1.0-2build1) ...
2025-06-04T21:54:05.1012970Z Selecting previously unselected package libzimg2:amd64.
2025-06-04T21:54:05.1148926Z Preparing to unpack .../082-libzimg2_3.0.5+ds1-1build1_amd64.deb ...
2025-06-04T21:54:05.1158996Z Unpacking libzimg2:amd64 (3.0.5+ds1-1build1) ...
2025-06-04T21:54:05.1435919Z Selecting previously unselected package libavfilter9:amd64.
2025-06-04T21:54:05.1572682Z Preparing to unpack .../083-libavfilter9_7%3a6.1.1-3ubuntu5_amd64.deb ...
2025-06-04T21:54:05.1584231Z Unpacking libavfilter9:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:05.2380697Z Selecting previously unselected package liborc-0.4-0t64:amd64.
2025-06-04T21:54:05.2515190Z Preparing to unpack .../084-liborc-0.4-0t64_1%3a0.4.38-1ubuntu0.1_amd64.deb ...
2025-06-04T21:54:05.2523768Z Unpacking liborc-0.4-0t64:amd64 (1:0.4.38-1ubuntu0.1) ...
2025-06-04T21:54:05.2787654Z Selecting previously unselected package libgstreamer-plugins-base1.0-0:amd64.
2025-06-04T21:54:05.2922652Z Preparing to unpack .../085-libgstreamer-plugins-base1.0-0_1.24.2-1ubuntu0.2_amd64.deb ...
2025-06-04T21:54:05.2932098Z Unpacking libgstreamer-plugins-base1.0-0:amd64 (1.24.2-1ubuntu0.2) ...
2025-06-04T21:54:05.3276658Z Selecting previously unselected package gstreamer1.0-libav:amd64.
2025-06-04T21:54:05.3412805Z Preparing to unpack .../086-gstreamer1.0-libav_1.24.1-1build1_amd64.deb ...
2025-06-04T21:54:05.3427198Z Unpacking gstreamer1.0-libav:amd64 (1.24.1-1build1) ...
2025-06-04T21:54:05.3662287Z Selecting previously unselected package libcdparanoia0:amd64.
2025-06-04T21:54:05.3795580Z Preparing to unpack .../087-libcdparanoia0_3.10.2+debian-14build3_amd64.deb ...
2025-06-04T21:54:05.3811213Z Unpacking libcdparanoia0:amd64 (3.10.2+debian-14build3) ...
2025-06-04T21:54:05.4086700Z Selecting previously unselected package libvisual-0.4-0:amd64.
2025-06-04T21:54:05.4220857Z Preparing to unpack .../088-libvisual-0.4-0_0.4.2-2build1_amd64.deb ...
2025-06-04T21:54:05.4231511Z Unpacking libvisual-0.4-0:amd64 (0.4.2-2build1) ...
2025-06-04T21:54:05.4484387Z Selecting previously unselected package gstreamer1.0-plugins-base:amd64.
2025-06-04T21:54:05.4620286Z Preparing to unpack .../089-gstreamer1.0-plugins-base_1.24.2-1ubuntu0.2_amd64.deb ...
2025-06-04T21:54:05.4629449Z Unpacking gstreamer1.0-plugins-base:amd64 (1.24.2-1ubuntu0.2) ...
2025-06-04T21:54:05.5013113Z Selecting previously unselected package libaa1:amd64.
2025-06-04T21:54:05.5145534Z Preparing to unpack .../090-libaa1_1.4p5-51.1_amd64.deb ...
2025-06-04T21:54:05.5158830Z Unpacking libaa1:amd64 (1.4p5-51.1) ...
2025-06-04T21:54:05.5404277Z Selecting previously unselected package libraw1394-11:amd64.
2025-06-04T21:54:05.5536183Z Preparing to unpack .../091-libraw1394-11_2.1.2-2build3_amd64.deb ...
2025-06-04T21:54:05.5562880Z Unpacking libraw1394-11:amd64 (2.1.2-2build3) ...
2025-06-04T21:54:05.5795959Z Selecting previously unselected package libavc1394-0:amd64.
2025-06-04T21:54:05.5970402Z Preparing to unpack .../092-libavc1394-0_0.5.4-5build3_amd64.deb ...
2025-06-04T21:54:05.5991642Z Unpacking libavc1394-0:amd64 (0.5.4-5build3) ...
2025-06-04T21:54:05.6238414Z Selecting previously unselected package libcaca0:amd64.
2025-06-04T21:54:05.6374057Z Preparing to unpack .../093-libcaca0_0.99.beta20-4build2_amd64.deb ...
2025-06-04T21:54:05.6385311Z Unpacking libcaca0:amd64 (0.99.beta20-4build2) ...
2025-06-04T21:54:05.6697550Z Selecting previously unselected package libdv4t64:amd64.
2025-06-04T21:54:05.6833655Z Preparing to unpack .../094-libdv4t64_1.0.0-17.1build1_amd64.deb ...
2025-06-04T21:54:05.6848192Z Unpacking libdv4t64:amd64 (1.0.0-17.1build1) ...
2025-06-04T21:54:05.7105571Z Selecting previously unselected package libgstreamer-plugins-good1.0-0:amd64.
2025-06-04T21:54:05.7243364Z Preparing to unpack .../095-libgstreamer-plugins-good1.0-0_1.24.2-1ubuntu1.1_amd64.deb ...
2025-06-04T21:54:05.7267561Z Unpacking libgstreamer-plugins-good1.0-0:amd64 (1.24.2-1ubuntu1.1) ...
2025-06-04T21:54:05.7546377Z Selecting previously unselected package libiec61883-0:amd64.
2025-06-04T21:54:05.7682240Z Preparing to unpack .../096-libiec61883-0_1.2.0-6build1_amd64.deb ...
2025-06-04T21:54:05.7701912Z Unpacking libiec61883-0:amd64 (1.2.0-6build1) ...
2025-06-04T21:54:05.7980610Z Selecting previously unselected package libshout3:amd64.
2025-06-04T21:54:05.8117389Z Preparing to unpack .../097-libshout3_2.4.6-1build2_amd64.deb ...
2025-06-04T21:54:05.8131479Z Unpacking libshout3:amd64 (2.4.6-1build2) ...
2025-06-04T21:54:05.8435279Z Selecting previously unselected package libtag1v5-vanilla:amd64.
2025-06-04T21:54:05.8575042Z Preparing to unpack .../098-libtag1v5-vanilla_1.13.1-1build1_amd64.deb ...
2025-06-04T21:54:05.8602246Z Unpacking libtag1v5-vanilla:amd64 (1.13.1-1build1) ...
2025-06-04T21:54:05.8942236Z Selecting previously unselected package libtag1v5:amd64.
2025-06-04T21:54:05.9078591Z Preparing to unpack .../099-libtag1v5_1.13.1-1build1_amd64.deb ...
2025-06-04T21:54:05.9092830Z Unpacking libtag1v5:amd64 (1.13.1-1build1) ...
2025-06-04T21:54:05.9346062Z Selecting previously unselected package libv4lconvert0t64:amd64.
2025-06-04T21:54:05.9481872Z Preparing to unpack .../100-libv4lconvert0t64_1.26.1-4build3_amd64.deb ...
2025-06-04T21:54:05.9497838Z Unpacking libv4lconvert0t64:amd64 (1.26.1-4build3) ...
2025-06-04T21:54:05.9761457Z Selecting previously unselected package libv4l-0t64:amd64.
2025-06-04T21:54:05.9897472Z Preparing to unpack .../101-libv4l-0t64_1.26.1-4build3_amd64.deb ...
2025-06-04T21:54:05.9913803Z Unpacking libv4l-0t64:amd64 (1.26.1-4build3) ...
2025-06-04T21:54:06.0196217Z Selecting previously unselected package libwavpack1:amd64.
2025-06-04T21:54:06.0332853Z Preparing to unpack .../102-libwavpack1_5.6.0-1build1_amd64.deb ...
2025-06-04T21:54:06.0366245Z Unpacking libwavpack1:amd64 (5.6.0-1build1) ...
2025-06-04T21:54:06.0603042Z Selecting previously unselected package libsoup-3.0-common.
2025-06-04T21:54:06.0738790Z Preparing to unpack .../103-libsoup-3.0-common_3.4.4-5ubuntu0.4_all.deb ...
2025-06-04T21:54:06.0747262Z Unpacking libsoup-3.0-common (3.4.4-5ubuntu0.4) ...
2025-06-04T21:54:06.0987019Z Selecting previously unselected package libsoup-3.0-0:amd64.
2025-06-04T21:54:06.1125882Z Preparing to unpack .../104-libsoup-3.0-0_3.4.4-5ubuntu0.4_amd64.deb ...
2025-06-04T21:54:06.1220386Z Unpacking libsoup-3.0-0:amd64 (3.4.4-5ubuntu0.4) ...
2025-06-04T21:54:06.1499680Z Selecting previously unselected package gstreamer1.0-plugins-good:amd64.
2025-06-04T21:54:06.1638205Z Preparing to unpack .../105-gstreamer1.0-plugins-good_1.24.2-1ubuntu1.1_amd64.deb ...
2025-06-04T21:54:06.1647960Z Unpacking gstreamer1.0-plugins-good:amd64 (1.24.2-1ubuntu1.1) ...
2025-06-04T21:54:06.2284119Z Selecting previously unselected package libabsl20220623t64:amd64.
2025-06-04T21:54:06.2419597Z Preparing to unpack .../106-libabsl20220623t64_20220623.1-3.1ubuntu3.2_amd64.deb ...
2025-06-04T21:54:06.2429897Z Unpacking libabsl20220623t64:amd64 (20220623.1-3.1ubuntu3.2) ...
2025-06-04T21:54:06.2908766Z Selecting previously unselected package libgav1-1:amd64.
2025-06-04T21:54:06.3045041Z Preparing to unpack .../107-libgav1-1_0.18.0-1build3_amd64.deb ...
2025-06-04T21:54:06.3059665Z Unpacking libgav1-1:amd64 (0.18.0-1build3) ...
2025-06-04T21:54:06.3352936Z Selecting previously unselected package libyuv0:amd64.
2025-06-04T21:54:06.3489349Z Preparing to unpack .../108-libyuv0_0.0~git202401110.af6ac82-1_amd64.deb ...
2025-06-04T21:54:06.3506387Z Unpacking libyuv0:amd64 (0.0~git202401110.af6ac82-1) ...
2025-06-04T21:54:06.3791052Z Selecting previously unselected package libavif16:amd64.
2025-06-04T21:54:06.3924067Z Preparing to unpack .../109-libavif16_1.0.4-1ubuntu3_amd64.deb ...
2025-06-04T21:54:06.3943581Z Unpacking libavif16:amd64 (1.0.4-1ubuntu3) ...
2025-06-04T21:54:06.4183848Z Selecting previously unselected package libavtp0:amd64.
2025-06-04T21:54:06.4319939Z Preparing to unpack .../110-libavtp0_0.2.0-1build1_amd64.deb ...
2025-06-04T21:54:06.4334880Z Unpacking libavtp0:amd64 (0.2.0-1build1) ...
2025-06-04T21:54:06.4580395Z Selecting previously unselected package libcairo-script-interpreter2:amd64.
2025-06-04T21:54:06.4714877Z Preparing to unpack .../111-libcairo-script-interpreter2_1.18.0-3build1_amd64.deb ...
2025-06-04T21:54:06.4726918Z Unpacking libcairo-script-interpreter2:amd64 (1.18.0-3build1) ...
2025-06-04T21:54:06.4986156Z Selecting previously unselected package libdc1394-25:amd64.
2025-06-04T21:54:06.5136877Z Preparing to unpack .../112-libdc1394-25_2.2.6-4build1_amd64.deb ...
2025-06-04T21:54:06.5147022Z Unpacking libdc1394-25:amd64 (2.2.6-4build1) ...
2025-06-04T21:54:06.5417992Z Selecting previously unselected package libdecor-0-0:amd64.
2025-06-04T21:54:06.5558819Z Preparing to unpack .../113-libdecor-0-0_0.2.2-1build2_amd64.deb ...
2025-06-04T21:54:06.5569047Z Unpacking libdecor-0-0:amd64 (0.2.2-1build2) ...
2025-06-04T21:54:06.5829591Z Selecting previously unselected package libgles2:amd64.
2025-06-04T21:54:06.5967000Z Preparing to unpack .../114-libgles2_1.7.0-1build1_amd64.deb ...
2025-06-04T21:54:06.5976311Z Unpacking libgles2:amd64 (1.7.0-1build1) ...
2025-06-04T21:54:06.6200969Z Selecting previously unselected package libdirectfb-1.7-7t64:amd64.
2025-06-04T21:54:06.6335670Z Preparing to unpack .../115-libdirectfb-1.7-7t64_1.7.7-11.1ubuntu2_amd64.deb ...
2025-06-04T21:54:06.6347622Z Unpacking libdirectfb-1.7-7t64:amd64 (1.7.7-11.1ubuntu2) ...
2025-06-04T21:54:06.6810309Z Selecting previously unselected package libdvdread8t64:amd64.
2025-06-04T21:54:06.6947155Z Preparing to unpack .../116-libdvdread8t64_6.1.3-1.1build1_amd64.deb ...
2025-06-04T21:54:06.6959877Z Unpacking libdvdread8t64:amd64 (6.1.3-1.1build1) ...
2025-06-04T21:54:06.7224254Z Selecting previously unselected package libdvdnav4:amd64.
2025-06-04T21:54:06.7359395Z Preparing to unpack .../117-libdvdnav4_6.1.1-3build1_amd64.deb ...
2025-06-04T21:54:06.7374275Z Unpacking libdvdnav4:amd64 (6.1.1-3build1) ...
2025-06-04T21:54:06.7620823Z Selecting previously unselected package libegl-mesa0:amd64.
2025-06-04T21:54:06.7755372Z Preparing to unpack .../118-libegl-mesa0_24.2.8-1ubuntu1~24.04.1_amd64.deb ...
2025-06-04T21:54:06.7775792Z Unpacking libegl-mesa0:amd64 (24.2.8-1ubuntu1~24.04.1) ...
2025-06-04T21:54:06.8158396Z Selecting previously unselected package libevent-2.1-7t64:amd64.
2025-06-04T21:54:06.8292648Z Preparing to unpack .../119-libevent-2.1-7t64_2.1.12-stable-9ubuntu2_amd64.deb ...
2025-06-04T21:54:06.8307271Z Unpacking libevent-2.1-7t64:amd64 (2.1.12-stable-9ubuntu2) ...
2025-06-04T21:54:06.8573619Z Selecting previously unselected package libfaad2:amd64.
2025-06-04T21:54:06.8708228Z Preparing to unpack .../120-libfaad2_2.11.1-1build1_amd64.deb ...
2025-06-04T21:54:06.8725919Z Unpacking libfaad2:amd64 (2.11.1-1build1) ...
2025-06-04T21:54:06.9115200Z Selecting previously unselected package libinstpatch-1.0-2:amd64.
2025-06-04T21:54:06.9254500Z Preparing to unpack .../121-libinstpatch-1.0-2_1.1.6-1build2_amd64.deb ...
2025-06-04T21:54:06.9271417Z Unpacking libinstpatch-1.0-2:amd64 (1.1.6-1build2) ...
2025-06-04T21:54:06.9543565Z Selecting previously unselected package libjack-jackd2-0:amd64.
2025-06-04T21:54:06.9679812Z Preparing to unpack .../122-libjack-jackd2-0_1.9.21~dfsg-3ubuntu3_amd64.deb ...
2025-06-04T21:54:06.9697216Z Unpacking libjack-jackd2-0:amd64 (1.9.21~dfsg-3ubuntu3) ...
2025-06-04T21:54:06.9988224Z Selecting previously unselected package libwebrtc-audio-processing1:amd64.
2025-06-04T21:54:07.0126648Z Preparing to unpack .../123-libwebrtc-audio-processing1_0.3.1-0ubuntu6_amd64.deb ...
2025-06-04T21:54:07.0138635Z Unpacking libwebrtc-audio-processing1:amd64 (0.3.1-0ubuntu6) ...
2025-06-04T21:54:07.0384314Z Selecting previously unselected package libspa-0.2-modules:amd64.
2025-06-04T21:54:07.0521635Z Preparing to unpack .../124-libspa-0.2-modules_1.0.5-1ubuntu3_amd64.deb ...
2025-06-04T21:54:07.0541206Z Unpacking libspa-0.2-modules:amd64 (1.0.5-1ubuntu3) ...
2025-06-04T21:54:07.0894341Z Selecting previously unselected package libpipewire-0.3-0t64:amd64.
2025-06-04T21:54:07.1028369Z Preparing to unpack .../125-libpipewire-0.3-0t64_1.0.5-1ubuntu3_amd64.deb ...
2025-06-04T21:54:07.1042552Z Unpacking libpipewire-0.3-0t64:amd64 (1.0.5-1ubuntu3) ...
2025-06-04T21:54:07.1358878Z Selecting previously unselected package libsdl2-2.0-0:amd64.
2025-06-04T21:54:07.1491414Z Preparing to unpack .../126-libsdl2-2.0-0_2.30.0+dfsg-1ubuntu3.1_amd64.deb ...
2025-06-04T21:54:07.1505299Z Unpacking libsdl2-2.0-0:amd64 (2.30.0+dfsg-1ubuntu3.1) ...
2025-06-04T21:54:07.1852177Z Selecting previously unselected package timgm6mb-soundfont.
2025-06-04T21:54:07.1984979Z Preparing to unpack .../127-timgm6mb-soundfont_1.3-5_all.deb ...
2025-06-04T21:54:07.2000316Z Unpacking timgm6mb-soundfont (1.3-5) ...
2025-06-04T21:54:07.5398907Z Selecting previously unselected package libfluidsynth3:amd64.
2025-06-04T21:54:07.5536677Z Preparing to unpack .../128-libfluidsynth3_2.3.4-1build3_amd64.deb ...
2025-06-04T21:54:07.5552124Z Unpacking libfluidsynth3:amd64 (2.3.4-1build3) ...
2025-06-04T21:54:07.5825782Z Selecting previously unselected package libfreeaptx0:amd64.
2025-06-04T21:54:07.5962425Z Preparing to unpack .../129-libfreeaptx0_0.1.1-2build1_amd64.deb ...
2025-06-04T21:54:07.5973291Z Unpacking libfreeaptx0:amd64 (0.1.1-2build1) ...
2025-06-04T21:54:07.6388510Z Selecting previously unselected package libgraphene-1.0-0:amd64.
2025-06-04T21:54:07.6523450Z Preparing to unpack .../130-libgraphene-1.0-0_1.10.8-3build2_amd64.deb ...
2025-06-04T21:54:07.6534776Z Unpacking libgraphene-1.0-0:amd64 (1.10.8-3build2) ...
2025-06-04T21:54:07.6798614Z Selecting previously unselected package libgssdp-1.6-0:amd64.
2025-06-04T21:54:07.6935672Z Preparing to unpack .../131-libgssdp-1.6-0_1.6.3-1build3_amd64.deb ...
2025-06-04T21:54:07.6947635Z Unpacking libgssdp-1.6-0:amd64 (1.6.3-1build3) ...
2025-06-04T21:54:07.7196382Z Selecting previously unselected package libegl1:amd64.
2025-06-04T21:54:07.7336577Z Preparing to unpack .../132-libegl1_1.7.0-1build1_amd64.deb ...
2025-06-04T21:54:07.7347287Z Unpacking libegl1:amd64 (1.7.0-1build1) ...
2025-06-04T21:54:07.7626670Z Selecting previously unselected package libgstreamer-gl1.0-0:amd64.
2025-06-04T21:54:07.7764997Z Preparing to unpack .../133-libgstreamer-gl1.0-0_1.24.2-1ubuntu0.2_amd64.deb ...
2025-06-04T21:54:07.7785488Z Unpacking libgstreamer-gl1.0-0:amd64 (1.24.2-1ubuntu0.2) ...
2025-06-04T21:54:07.8058522Z Selecting previously unselected package libgtk-4-common.
2025-06-04T21:54:07.8196004Z Preparing to unpack .../134-libgtk-4-common_4.14.2+ds-1ubuntu3_all.deb ...
2025-06-04T21:54:07.8206761Z Unpacking libgtk-4-common (4.14.2+ds-1ubuntu3) ...
2025-06-04T21:54:07.8723457Z Selecting previously unselected package libgtk-4-1:amd64.
2025-06-04T21:54:07.8859303Z Preparing to unpack .../135-libgtk-4-1_4.14.2+ds-1ubuntu3_amd64.deb ...
2025-06-04T21:54:07.8869729Z Unpacking libgtk-4-1:amd64 (4.14.2+ds-1ubuntu3) ...
2025-06-04T21:54:07.9590524Z Selecting previously unselected package libgupnp-1.6-0:amd64.
2025-06-04T21:54:07.9726222Z Preparing to unpack .../136-libgupnp-1.6-0_1.6.6-1build3_amd64.deb ...
2025-06-04T21:54:07.9738811Z Unpacking libgupnp-1.6-0:amd64 (1.6.6-1build3) ...
2025-06-04T21:54:07.9996559Z Selecting previously unselected package libgupnp-igd-1.6-0:amd64.
2025-06-04T21:54:08.0134269Z Preparing to unpack .../137-libgupnp-igd-1.6-0_1.6.0-3build3_amd64.deb ...
2025-06-04T21:54:08.0145861Z Unpacking libgupnp-igd-1.6-0:amd64 (1.6.0-3build3) ...
2025-06-04T21:54:08.0366284Z Selecting previously unselected package libharfbuzz-icu0:amd64.
2025-06-04T21:54:08.0502169Z Preparing to unpack .../138-libharfbuzz-icu0_8.3.0-2build2_amd64.deb ...
2025-06-04T21:54:08.0510122Z Unpacking libharfbuzz-icu0:amd64 (8.3.0-2build2) ...
2025-06-04T21:54:08.0729532Z Selecting previously unselected package libhyphen0:amd64.
2025-06-04T21:54:08.0863963Z Preparing to unpack .../139-libhyphen0_2.8.8-7build3_amd64.deb ...
2025-06-04T21:54:08.0874769Z Unpacking libhyphen0:amd64 (2.8.8-7build3) ...
2025-06-04T21:54:08.1099665Z Selecting previously unselected package libimath-3-1-29t64:amd64.
2025-06-04T21:54:08.1233334Z Preparing to unpack .../140-libimath-3-1-29t64_3.1.9-3.1ubuntu2_amd64.deb ...
2025-06-04T21:54:08.1243637Z Unpacking libimath-3-1-29t64:amd64 (3.1.9-3.1ubuntu2) ...
2025-06-04T21:54:08.1505128Z Selecting previously unselected package liblc3-1:amd64.
2025-06-04T21:54:08.1639950Z Preparing to unpack .../141-liblc3-1_1.0.4-3build1_amd64.deb ...
2025-06-04T21:54:08.1650918Z Unpacking liblc3-1:amd64 (1.0.4-3build1) ...
2025-06-04T21:54:08.1876565Z Selecting previously unselected package libldacbt-enc2:amd64.
2025-06-04T21:54:08.2012383Z Preparing to unpack .../142-libldacbt-enc2_2.0.2.3+git20200429+ed310a0-4ubuntu2_amd64.deb ...
2025-06-04T21:54:08.2021435Z Unpacking libldacbt-enc2:amd64 (2.0.2.3+git20200429+ed310a0-4ubuntu2) ...
2025-06-04T21:54:08.2244549Z Selecting previously unselected package libraptor2-0:amd64.
2025-06-04T21:54:08.2379725Z Preparing to unpack .../143-libraptor2-0_2.0.16-3ubuntu0.1_amd64.deb ...
2025-06-04T21:54:08.2390883Z Unpacking libraptor2-0:amd64 (2.0.16-3ubuntu0.1) ...
2025-06-04T21:54:08.2650708Z Selecting previously unselected package liblrdf0:amd64.
2025-06-04T21:54:08.2785198Z Preparing to unpack .../144-liblrdf0_0.6.1-4build1_amd64.deb ...
2025-06-04T21:54:08.2794262Z Unpacking liblrdf0:amd64 (0.6.1-4build1) ...
2025-06-04T21:54:08.3023633Z Selecting previously unselected package libltc11:amd64.
2025-06-04T21:54:08.3162193Z Preparing to unpack .../145-libltc11_1.3.2-1build1_amd64.deb ...
2025-06-04T21:54:08.3204981Z Unpacking libltc11:amd64 (1.3.2-1build1) ...
2025-06-04T21:54:08.3660198Z Selecting previously unselected package libmanette-0.2-0:amd64.
2025-06-04T21:54:08.3796680Z Preparing to unpack .../146-libmanette-0.2-0_0.2.7-1build2_amd64.deb ...
2025-06-04T21:54:08.3810736Z Unpacking libmanette-0.2-0:amd64 (0.2.7-1build2) ...
2025-06-04T21:54:08.4079395Z Selecting previously unselected package libmfx1:amd64.
2025-06-04T21:54:08.4215227Z Preparing to unpack .../147-libmfx1_22.5.4-1_amd64.deb ...
2025-06-04T21:54:08.4231991Z Unpacking libmfx1:amd64 (22.5.4-1) ...
2025-06-04T21:54:08.5262283Z Selecting previously unselected package libmjpegutils-2.1-0t64:amd64.
2025-06-04T21:54:08.5396896Z Preparing to unpack .../148-libmjpegutils-2.1-0t64_1%3a2.1.0+debian-8.1build1_amd64.deb ...
2025-06-04T21:54:08.5409371Z Unpacking libmjpegutils-2.1-0t64:amd64 (1:2.1.0+debian-8.1build1) ...
2025-06-04T21:54:08.5628961Z Selecting previously unselected package libmodplug1:amd64.
2025-06-04T21:54:08.5764315Z Preparing to unpack .../149-libmodplug1_1%3a0.8.9.0-3build1_amd64.deb ...
2025-06-04T21:54:08.5778384Z Unpacking libmodplug1:amd64 (1:0.8.9.0-3build1) ...
2025-06-04T21:54:08.6040401Z Selecting previously unselected package libmpcdec6:amd64.
2025-06-04T21:54:08.6176163Z Preparing to unpack .../150-libmpcdec6_2%3a0.1~r495-2build1_amd64.deb ...
2025-06-04T21:54:08.6188998Z Unpacking libmpcdec6:amd64 (2:0.1~r495-2build1) ...
2025-06-04T21:54:08.6408054Z Selecting previously unselected package libmpeg2encpp-2.1-0t64:amd64.
2025-06-04T21:54:08.6543584Z Preparing to unpack .../151-libmpeg2encpp-2.1-0t64_1%3a2.1.0+debian-8.1build1_amd64.deb ...
2025-06-04T21:54:08.6552947Z Unpacking libmpeg2encpp-2.1-0t64:amd64 (1:2.1.0+debian-8.1build1) ...
2025-06-04T21:54:08.6788009Z Selecting previously unselected package libmplex2-2.1-0t64:amd64.
2025-06-04T21:54:08.6925503Z Preparing to unpack .../152-libmplex2-2.1-0t64_1%3a2.1.0+debian-8.1build1_amd64.deb ...
2025-06-04T21:54:08.6935427Z Unpacking libmplex2-2.1-0t64:amd64 (1:2.1.0+debian-8.1build1) ...
2025-06-04T21:54:08.7171605Z Selecting previously unselected package libneon27t64:amd64.
2025-06-04T21:54:08.7305692Z Preparing to unpack .../153-libneon27t64_0.33.0-1.1build3_amd64.deb ...
2025-06-04T21:54:08.7322481Z Unpacking libneon27t64:amd64 (0.33.0-1.1build3) ...
2025-06-04T21:54:08.7565535Z Selecting previously unselected package libnice10:amd64.
2025-06-04T21:54:08.7698515Z Preparing to unpack .../154-libnice10_0.1.21-2build3_amd64.deb ...
2025-06-04T21:54:08.7707427Z Unpacking libnice10:amd64 (0.1.21-2build3) ...
2025-06-04T21:54:08.7941951Z Selecting previously unselected package libopenal-data.
2025-06-04T21:54:08.8077673Z Preparing to unpack .../155-libopenal-data_1%3a1.23.1-4build1_all.deb ...
2025-06-04T21:54:08.8099268Z Unpacking libopenal-data (1:1.23.1-4build1) ...
2025-06-04T21:54:08.8337111Z Selecting previously unselected package libopenexr-3-1-30:amd64.
2025-06-04T21:54:08.8471391Z Preparing to unpack .../156-libopenexr-3-1-30_3.1.5-5.1build3_amd64.deb ...
2025-06-04T21:54:08.8480767Z Unpacking libopenexr-3-1-30:amd64 (3.1.5-5.1build3) ...
2025-06-04T21:54:08.8876166Z Selecting previously unselected package libopenh264-7:amd64.
2025-06-04T21:54:08.9014657Z Preparing to unpack .../157-libopenh264-7_2.4.1+dfsg-1_amd64.deb ...
2025-06-04T21:54:08.9029404Z Unpacking libopenh264-7:amd64 (2.4.1+dfsg-1) ...
2025-06-04T21:54:08.9380698Z Selecting previously unselected package libopenni2-0:amd64.
2025-06-04T21:54:08.9539740Z Preparing to unpack .../158-libopenni2-0_2.2.0.33+dfsg-18_amd64.deb ...
2025-06-04T21:54:08.9574994Z Unpacking libopenni2-0:amd64 (2.2.0.33+dfsg-18) ...
2025-06-04T21:54:08.9903716Z Selecting previously unselected package libqrencode4:amd64.
2025-06-04T21:54:09.0049804Z Preparing to unpack .../159-libqrencode4_4.1.1-1build2_amd64.deb ...
2025-06-04T21:54:09.0065812Z Unpacking libqrencode4:amd64 (4.1.1-1build2) ...
2025-06-04T21:54:09.0299957Z Selecting previously unselected package libsecret-common.
2025-06-04T21:54:09.0444758Z Preparing to unpack .../160-libsecret-common_0.21.4-1build3_all.deb ...
2025-06-04T21:54:09.0463198Z Unpacking libsecret-common (0.21.4-1build3) ...
2025-06-04T21:54:09.0717358Z Selecting previously unselected package libsecret-1-0:amd64.
2025-06-04T21:54:09.0862794Z Preparing to unpack .../161-libsecret-1-0_0.21.4-1build3_amd64.deb ...
2025-06-04T21:54:09.0880064Z Unpacking libsecret-1-0:amd64 (0.21.4-1build3) ...
2025-06-04T21:54:09.1150399Z Selecting previously unselected package libsndio7.0:amd64.
2025-06-04T21:54:09.1297881Z Preparing to unpack .../162-libsndio7.0_1.9.0-0.3build3_amd64.deb ...
2025-06-04T21:54:09.1456164Z Unpacking libsndio7.0:amd64 (1.9.0-0.3build3) ...
2025-06-04T21:54:09.1711384Z Selecting previously unselected package libsoundtouch1:amd64.
2025-06-04T21:54:09.1853663Z Preparing to unpack .../163-libsoundtouch1_2.3.2+ds1-1build1_amd64.deb ...
2025-06-04T21:54:09.1866637Z Unpacking libsoundtouch1:amd64 (2.3.2+ds1-1build1) ...
2025-06-04T21:54:09.2111012Z Selecting previously unselected package libspandsp2t64:amd64.
2025-06-04T21:54:09.2255252Z Preparing to unpack .../164-libspandsp2t64_0.0.6+dfsg-2.1build1_amd64.deb ...
2025-06-04T21:54:09.2264354Z Unpacking libspandsp2t64:amd64 (0.0.6+dfsg-2.1build1) ...
2025-06-04T21:54:09.2638371Z Selecting previously unselected package libsrtp2-1:amd64.
2025-06-04T21:54:09.2785261Z Preparing to unpack .../165-libsrtp2-1_2.5.0-3build1_amd64.deb ...
2025-06-04T21:54:09.2797600Z Unpacking libsrtp2-1:amd64 (2.5.0-3build1) ...
2025-06-04T21:54:09.3046984Z Selecting previously unselected package libwildmidi2:amd64.
2025-06-04T21:54:09.3188991Z Preparing to unpack .../166-libwildmidi2_0.4.3-1build3_amd64.deb ...
2025-06-04T21:54:09.3198898Z Unpacking libwildmidi2:amd64 (0.4.3-1build3) ...
2025-06-04T21:54:09.3432771Z Selecting previously unselected package libwoff1:amd64.
2025-06-04T21:54:09.3580744Z Preparing to unpack .../167-libwoff1_1.0.2-2build1_amd64.deb ...
2025-06-04T21:54:09.3589045Z Unpacking libwoff1:amd64 (1.0.2-2build1) ...
2025-06-04T21:54:09.3878873Z Selecting previously unselected package libxcb-xkb1:amd64.
2025-06-04T21:54:09.4016998Z Preparing to unpack .../168-libxcb-xkb1_1.15-1ubuntu2_amd64.deb ...
2025-06-04T21:54:09.4025983Z Unpacking libxcb-xkb1:amd64 (1.15-1ubuntu2) ...
2025-06-04T21:54:09.4257964Z Selecting previously unselected package libxkbcommon-x11-0:amd64.
2025-06-04T21:54:09.4396769Z Preparing to unpack .../169-libxkbcommon-x11-0_1.6.0-1build1_amd64.deb ...
2025-06-04T21:54:09.4408353Z Unpacking libxkbcommon-x11-0:amd64 (1.6.0-1build1) ...
2025-06-04T21:54:09.4631152Z Selecting previously unselected package libzbar0t64:amd64.
2025-06-04T21:54:09.4767089Z Preparing to unpack .../170-libzbar0t64_0.23.93-4build3_amd64.deb ...
2025-06-04T21:54:09.4797304Z Unpacking libzbar0t64:amd64 (0.23.93-4build3) ...
2025-06-04T21:54:09.5027327Z Selecting previously unselected package libzxing3:amd64.
2025-06-04T21:54:09.5164748Z Preparing to unpack .../171-libzxing3_2.2.1-3_amd64.deb ...
2025-06-04T21:54:09.5173180Z Unpacking libzxing3:amd64 (2.2.1-3) ...
2025-06-04T21:54:09.5436489Z Selecting previously unselected package xfonts-encodings.
2025-06-04T21:54:09.5573374Z Preparing to unpack .../172-xfonts-encodings_1%3a1.0.5-0ubuntu2_all.deb ...
2025-06-04T21:54:09.5586436Z Unpacking xfonts-encodings (1:1.0.5-0ubuntu2) ...
2025-06-04T21:54:09.5918480Z Selecting previously unselected package xfonts-utils.
2025-06-04T21:54:09.6054124Z Preparing to unpack .../173-xfonts-utils_1%3a7.7+6build3_amd64.deb ...
2025-06-04T21:54:09.6064376Z Unpacking xfonts-utils (1:7.7+6build3) ...
2025-06-04T21:54:09.6446254Z Selecting previously unselected package xfonts-cyrillic.
2025-06-04T21:54:09.6582927Z Preparing to unpack .../174-xfonts-cyrillic_1%3a1.0.5+nmu1_all.deb ...
2025-06-04T21:54:09.6592481Z Unpacking xfonts-cyrillic (1:1.0.5+nmu1) ...
2025-06-04T21:54:09.6959330Z Selecting previously unselected package xfonts-scalable.
2025-06-04T21:54:09.7095456Z Preparing to unpack .../175-xfonts-scalable_1%3a1.0.3-1.3_all.deb ...
2025-06-04T21:54:09.7104889Z Unpacking xfonts-scalable (1:1.0.3-1.3) ...
2025-06-04T21:54:09.7355959Z Selecting previously unselected package libgstreamer-plugins-bad1.0-0:amd64.
2025-06-04T21:54:09.7491502Z Preparing to unpack .../176-libgstreamer-plugins-bad1.0-0_1.24.2-1ubuntu4_amd64.deb ...
2025-06-04T21:54:09.7501240Z Unpacking libgstreamer-plugins-bad1.0-0:amd64 (1.24.2-1ubuntu4) ...
2025-06-04T21:54:09.7945430Z Selecting previously unselected package libdca0:amd64.
2025-06-04T21:54:09.8081249Z Preparing to unpack .../177-libdca0_0.0.7-2build1_amd64.deb ...
2025-06-04T21:54:09.8092663Z Unpacking libdca0:amd64 (0.0.7-2build1) ...
2025-06-04T21:54:09.8424739Z Selecting previously unselected package libopenal1:amd64.
2025-06-04T21:54:09.8560211Z Preparing to unpack .../178-libopenal1_1%3a1.23.1-4build1_amd64.deb ...
2025-06-04T21:54:09.8572128Z Unpacking libopenal1:amd64 (1:1.23.1-4build1) ...
2025-06-04T21:54:09.8876678Z Selecting previously unselected package libsbc1:amd64.
2025-06-04T21:54:09.9012162Z Preparing to unpack .../179-libsbc1_2.0-1build1_amd64.deb ...
2025-06-04T21:54:09.9023631Z Unpacking libsbc1:amd64 (2.0-1build1) ...
2025-06-04T21:54:09.9282970Z Selecting previously unselected package libvo-aacenc0:amd64.
2025-06-04T21:54:09.9418467Z Preparing to unpack .../180-libvo-aacenc0_0.1.3-2build1_amd64.deb ...
2025-06-04T21:54:09.9442163Z Unpacking libvo-aacenc0:amd64 (0.1.3-2build1) ...
2025-06-04T21:54:09.9709487Z Selecting previously unselected package libvo-amrwbenc0:amd64.
2025-06-04T21:54:09.9844214Z Preparing to unpack .../181-libvo-amrwbenc0_0.1.3-2build1_amd64.deb ...
2025-06-04T21:54:09.9866260Z Unpacking libvo-amrwbenc0:amd64 (0.1.3-2build1) ...
2025-06-04T21:54:10.0101101Z Selecting previously unselected package gstreamer1.0-plugins-bad:amd64.
2025-06-04T21:54:10.0235393Z Preparing to unpack .../182-gstreamer1.0-plugins-bad_1.24.2-1ubuntu4_amd64.deb ...
2025-06-04T21:54:10.0258034Z Unpacking gstreamer1.0-plugins-bad:amd64 (1.24.2-1ubuntu4) ...
2025-06-04T21:54:10.1759298Z Setting up libgme0:amd64 (0.6.3-7build1) ...
2025-06-04T21:54:10.1790154Z Setting up libchromaprint1:amd64 (1.5.1-5) ...
2025-06-04T21:54:10.1832571Z Setting up libssh-gcrypt-4:amd64 (0.10.6-2build2) ...
2025-06-04T21:54:10.1861615Z Setting up libhwy1t64:amd64 (1.0.7-8.1build1) ...
2025-06-04T21:54:10.1889550Z Setting up libcairo-script-interpreter2:amd64 (1.18.0-3build1) ...
2025-06-04T21:54:10.1915191Z Setting up libfreeaptx0:amd64 (0.1.1-2build1) ...
2025-06-04T21:54:10.1943728Z Setting up libdvdread8t64:amd64 (6.1.3-1.1build1) ...
2025-06-04T21:54:10.1977249Z Setting up libudfread0:amd64 (1.1.2-1build1) ...
2025-06-04T21:54:10.2002440Z Setting up libmodplug1:amd64 (1:0.8.9.0-3build1) ...
2025-06-04T21:54:10.2029691Z Setting up libcdparanoia0:amd64 (3.10.2+debian-14build3) ...
2025-06-04T21:54:10.2064076Z Setting up libvo-amrwbenc0:amd64 (0.1.3-2build1) ...
2025-06-04T21:54:10.2098551Z Setting up libraw1394-11:amd64 (2.1.2-2build3) ...
2025-06-04T21:54:10.2129600Z Setting up libsbc1:amd64 (2.0-1build1) ...
2025-06-04T21:54:10.2159475Z Setting up libneon27t64:amd64 (0.33.0-1.1build3) ...
2025-06-04T21:54:10.2188263Z Setting up libtag1v5-vanilla:amd64 (1.13.1-1build1) ...
2025-06-04T21:54:10.2213428Z Setting up libharfbuzz-icu0:amd64 (8.3.0-2build2) ...
2025-06-04T21:54:10.2240552Z Setting up libopenni2-0:amd64 (2.2.0.33+dfsg-18) ...
2025-06-04T21:54:10.2431051Z Setting up libspeex1:amd64 (1.2.1-2ubuntu2.24.04.1) ...
2025-06-04T21:54:10.2471521Z Setting up libshine3:amd64 (3.1.1-2build1) ...
2025-06-04T21:54:10.2508558Z Setting up libcaca0:amd64 (0.99.beta20-4build2) ...
2025-06-04T21:54:10.2536898Z Setting up libvpl2 (2023.3.0-1build1) ...
2025-06-04T21:54:10.2566175Z Setting up libv4lconvert0t64:amd64 (1.26.1-4build3) ...
2025-06-04T21:54:10.2593232Z Setting up libx264-164:amd64 (2:0.164.3108+git31e19f9-1) ...
2025-06-04T21:54:10.2687936Z Setting up libtwolame0:amd64 (0.4.0-2build3) ...
2025-06-04T21:54:10.2715900Z Setting up libmbedcrypto7t64:amd64 (2.28.8-1) ...
2025-06-04T21:54:10.2756058Z Setting up libwoff1:amd64 (1.0.2-2build1) ...
2025-06-04T21:54:10.2785608Z Setting up liblc3-1:amd64 (1.0.4-3build1) ...
2025-06-04T21:54:10.2824572Z Setting up libqrencode4:amd64 (4.1.1-1build2) ...
2025-06-04T21:54:10.2859451Z Setting up libhyphen0:amd64 (2.8.8-7build3) ...
2025-06-04T21:54:10.2890294Z Setting up libgsm1:amd64 (1.0.22-1build1) ...
2025-06-04T21:54:10.2936923Z Setting up libvisual-0.4-0:amd64 (0.4.2-2build1) ...
2025-06-04T21:54:10.2969912Z Setting up libsoxr0:amd64 (0.1.3-4build3) ...
2025-06-04T21:54:10.3005319Z Setting up libzix-0-0:amd64 (0.4.2-2build1) ...
2025-06-04T21:54:10.3035920Z Setting up libcodec2-1.2:amd64 (1.2.0-2build1) ...
2025-06-04T21:54:10.3063872Z Setting up libsrtp2-1:amd64 (2.5.0-3build1) ...
2025-06-04T21:54:10.3097320Z Setting up libmysofa1:amd64 (1.3.2+dfsg-2ubuntu2) ...
2025-06-04T21:54:10.3131972Z Setting up libraptor2-0:amd64 (2.0.16-3ubuntu0.1) ...
2025-06-04T21:54:10.3158074Z Setting up libldacbt-enc2:amd64 (2.0.2.3+git20200429+ed310a0-4ubuntu2) ...
2025-06-04T21:54:10.3190866Z Setting up fonts-wqy-zenhei (0.9.45-8) ...
2025-06-04T21:54:10.3338213Z Setting up libwebrtc-audio-processing1:amd64 (0.3.1-0ubuntu6) ...
2025-06-04T21:54:10.3372341Z Setting up fonts-freefont-ttf (20211204+svn4273-2) ...
2025-06-04T21:54:10.3415014Z Setting up libevent-2.1-7t64:amd64 (2.1.12-stable-9ubuntu2) ...
2025-06-04T21:54:10.3452022Z Setting up libsvtav1enc1d1:amd64 (1.7.0+dfsg-2build1) ...
2025-06-04T21:54:10.3494899Z Setting up libsoup-3.0-common (3.4.4-5ubuntu0.4) ...
2025-06-04T21:54:10.3541098Z Setting up libmpg123-0t64:amd64 (1.32.5-1ubuntu1.1) ...
2025-06-04T21:54:10.3587673Z Setting up libcjson1:amd64 (1.7.17-1) ...
2025-06-04T21:54:10.3631138Z Setting up libxvidcore4:amd64 (2:1.3.7-1build1) ...
2025-06-04T21:54:10.3677285Z Setting up libmpcdec6:amd64 (2:0.1~r495-2build1) ...
2025-06-04T21:54:10.3727315Z Setting up libmjpegutils-2.1-0t64:amd64 (1:2.1.0+debian-8.1build1) ...
2025-06-04T21:54:10.3788016Z Setting up librav1e0:amd64 (0.7.1-2) ...
2025-06-04T21:54:10.3816677Z Setting up liborc-0.4-0t64:amd64 (1:0.4.38-1ubuntu0.1) ...
2025-06-04T21:54:10.3852529Z Setting up libxcb-xkb1:amd64 (1.15-1ubuntu2) ...
2025-06-04T21:54:10.3894762Z Setting up libvo-aacenc0:amd64 (0.1.3-2build1) ...
2025-06-04T21:54:10.3926752Z Setting up librist4:amd64 (0.2.10+dfsg-2) ...
2025-06-04T21:54:10.3954605Z Setting up libglib2.0-0t64:amd64 (2.80.0-6ubuntu3.4) ...
2025-06-04T21:54:10.4385780Z Setting up libblas3:amd64 (3.12.0-3build1.1) ...
2025-06-04T21:54:10.4451635Z update-alternatives: using /usr/lib/x86_64-linux-gnu/blas/libblas.so.3 to provide /usr/lib/x86_64-linux-gnu/libblas.so.3 (libblas.so.3-x86_64-linux-gnu) in auto mode
2025-06-04T21:54:10.4472481Z Setting up libegl-mesa0:amd64 (24.2.8-1ubuntu1~24.04.1) ...
2025-06-04T21:54:10.4504674Z Setting up libsoundtouch1:amd64 (2.3.2+ds1-1build1) ...
2025-06-04T21:54:10.4551750Z Setting up libglib2.0-data (2.80.0-6ubuntu3.4) ...
2025-06-04T21:54:10.4583211Z Setting up libplacebo338:amd64 (6.338.2-2build1) ...
2025-06-04T21:54:10.4611735Z Setting up libgles2:amd64 (1.7.0-1build1) ...
2025-06-04T21:54:10.4651090Z Setting up fonts-tlwg-loma-otf (1:0.7.3-1) ...
2025-06-04T21:54:10.4691696Z Setting up libva2:amd64 (2.20.0-2build1) ...
2025-06-04T21:54:10.4734133Z Setting up libspa-0.2-modules:amd64 (1.0.5-1ubuntu3) ...
2025-06-04T21:54:10.4764505Z Setting up libzxing3:amd64 (2.2.1-3) ...
2025-06-04T21:54:10.4800555Z Setting up xfonts-encodings (1:1.0.5-0ubuntu2) ...
2025-06-04T21:54:10.4830320Z Setting up libopus0:amd64 (1.4-1build1) ...
2025-06-04T21:54:10.4891479Z Setting up libfaad2:amd64 (2.11.1-1build1) ...
2025-06-04T21:54:10.4924619Z Setting up libxkbcommon-x11-0:amd64 (1.6.0-1build1) ...
2025-06-04T21:54:10.4972148Z Setting up libdc1394-25:amd64 (2.2.6-4build1) ...
2025-06-04T21:54:10.5005914Z Setting up libimath-3-1-29t64:amd64 (3.1.9-3.1ubuntu2) ...
2025-06-04T21:54:10.5042945Z Setting up libunibreak5:amd64 (5.1-2build1) ...
2025-06-04T21:54:10.5094128Z Setting up libdv4t64:amd64 (1.0.0-17.1build1) ...
2025-06-04T21:54:10.5133872Z Setting up gir1.2-glib-2.0:amd64 (2.80.0-6ubuntu3.4) ...
2025-06-04T21:54:10.5167099Z Setting up libjxl0.7:amd64 (0.7.0-10.2ubuntu6) ...
2025-06-04T21:54:10.5201930Z Setting up libopenh264-7:amd64 (2.4.1+dfsg-1) ...
2025-06-04T21:54:10.5241403Z Setting up libltc11:amd64 (1.3.2-1build1) ...
2025-06-04T21:54:10.5277574Z Setting up libx265-199:amd64 (3.5-2build1) ...
2025-06-04T21:54:10.5312805Z Setting up libv4l-0t64:amd64 (1.26.1-4build3) ...
2025-06-04T21:54:10.5351155Z Setting up libavtp0:amd64 (0.2.0-1build1) ...
2025-06-04T21:54:10.5389824Z Setting up libsndio7.0:amd64 (1.9.0-0.3build3) ...
2025-06-04T21:54:10.5428889Z Setting up libdirectfb-1.7-7t64:amd64 (1.7.7-11.1ubuntu2) ...
2025-06-04T21:54:10.5461423Z Setting up libspandsp2t64:amd64 (0.0.6+dfsg-2.1build1) ...
2025-06-04T21:54:10.5611096Z Setting up libvidstab1.1:amd64 (1.1.0-2build1) ...
2025-06-04T21:54:10.5636723Z Setting up libvpx9:amd64 (1.14.0-1ubuntu2.2) ...
2025-06-04T21:54:10.5668850Z Setting up libsrt1.5-gnutls:amd64 (1.5.3-1build2) ...
2025-06-04T21:54:10.5699066Z Setting up libtag1v5:amd64 (1.13.1-1build1) ...
2025-06-04T21:54:10.5722094Z Setting up libflite1:amd64 (2.2-6build3) ...
2025-06-04T21:54:10.5754219Z Setting up libdav1d7:amd64 (1.4.1-1build1) ...
2025-06-04T21:54:10.5781806Z Setting up libva-drm2:amd64 (2.20.0-2build1) ...
2025-06-04T21:54:10.5809416Z Setting up fonts-ipafont-gothic (00303-21ubuntu1) ...
2025-06-04T21:54:10.5894976Z update-alternatives: using /usr/share/fonts/opentype/ipafont-gothic/ipag.ttf to provide /usr/share/fonts/truetype/fonts-japanese-gothic.ttf (fonts-japanese-gothic.ttf) in auto mode
2025-06-04T21:54:10.5912914Z Setting up ocl-icd-libopencl1:amd64 (2.3.2-1build1) ...
2025-06-04T21:54:10.5939556Z Setting up libasyncns0:amd64 (0.8-6build4) ...
2025-06-04T21:54:10.5991707Z Setting up libwildmidi2:amd64 (0.4.3-1build3) ...
2025-06-04T21:54:10.6020181Z Setting up libvdpau1:amd64 (1.5-2build1) ...
2025-06-04T21:54:10.6066251Z Setting up libwavpack1:amd64 (5.6.0-1build1) ...
2025-06-04T21:54:10.6095081Z Setting up libbs2b0:amd64 (3.1.0+dfsg-7build1) ...
2025-06-04T21:54:10.6122719Z Setting up libtheora0:amd64 (1.1.1+dfsg.1-16.1build3) ...
2025-06-04T21:54:10.6152772Z Setting up libegl1:amd64 (1.7.0-1build1) ...
2025-06-04T21:54:10.6185595Z Setting up libdecor-0-0:amd64 (0.2.2-1build2) ...
2025-06-04T21:54:10.6212236Z Setting up libdca0:amd64 (0.0.7-2build1) ...
2025-06-04T21:54:10.6244325Z Setting up libzimg2:amd64 (3.0.5+ds1-1build1) ...
2025-06-04T21:54:10.6275157Z Setting up libopenal-data (1:1.23.1-4build1) ...
2025-06-04T21:54:10.6312735Z Setting up libabsl20220623t64:amd64 (20220623.1-3.1ubuntu3.2) ...
2025-06-04T21:54:10.6350009Z Setting up libflac12t64:amd64 (1.4.3+ds-2.1ubuntu2) ...
2025-06-04T21:54:10.6378417Z Setting up libgtk-4-common (4.14.2+ds-1ubuntu3) ...
2025-06-04T21:54:10.6405790Z Setting up libmpeg2encpp-2.1-0t64:amd64 (1:2.1.0+debian-8.1build1) ...
2025-06-04T21:54:10.6436180Z Setting up glib-networking-common (2.80.0-1build1) ...
2025-06-04T21:54:10.6471308Z Setting up libmfx1:amd64 (22.5.4-1) ...
2025-06-04T21:54:10.6496634Z Setting up libbluray2:amd64 (1:1.3.4-1build1) ...
2025-06-04T21:54:10.6526330Z Setting up libsamplerate0:amd64 (0.2.2-4build1) ...
2025-06-04T21:54:10.6551732Z Setting up timgm6mb-soundfont (1.3-5) ...
2025-06-04T21:54:10.6642552Z update-alternatives: using /usr/share/sounds/sf2/TimGM6mb.sf2 to provide /usr/share/sounds/sf2/default-GM.sf2 (default-GM.sf2) in auto mode
2025-06-04T21:54:10.6685700Z update-alternatives: using /usr/share/sounds/sf2/TimGM6mb.sf2 to provide /usr/share/sounds/sf3/default-GM.sf3 (default-GM.sf3) in auto mode
2025-06-04T21:54:10.6705344Z Setting up libva-x11-2:amd64 (2.20.0-2build1) ...
2025-06-04T21:54:10.6736658Z Setting up libyuv0:amd64 (0.0~git202401110.af6ac82-1) ...
2025-06-04T21:54:10.6765525Z Setting up libmplex2-2.1-0t64:amd64 (1:2.1.0+debian-8.1build1) ...
2025-06-04T21:54:10.6796837Z Setting up libpipewire-0.3-0t64:amd64 (1.0.5-1ubuntu3) ...
2025-06-04T21:54:10.6829673Z Setting up libopenmpt0t64:amd64 (0.7.3-1.1build3) ...
2025-06-04T21:54:10.6862856Z Setting up libzvbi-common (0.2.42-2) ...
2025-06-04T21:54:10.6894777Z Setting up libsecret-common (0.21.4-1build3) ...
2025-06-04T21:54:10.6931249Z Setting up libmp3lame0:amd64 (3.100-6build1) ...
2025-06-04T21:54:10.6962156Z Setting up libgraphene-1.0-0:amd64 (1.10.8-3build2) ...
2025-06-04T21:54:10.6995673Z Setting up libvorbisenc2:amd64 (1.3.7-1build3) ...
2025-06-04T21:54:10.7031399Z Setting up libdvdnav4:amd64 (6.1.1-3build1) ...
2025-06-04T21:54:10.7068335Z Setting up fonts-unifont (1:15.1.01-1build1) ...
2025-06-04T21:54:10.7129915Z Setting up libaa1:amd64 (1.4p5-51.1) ...
2025-06-04T21:54:10.7171352Z Setting up libiec61883-0:amd64 (1.2.0-6build1) ...
2025-06-04T21:54:10.7205486Z Setting up libserd-0-0:amd64 (0.32.2-1) ...
2025-06-04T21:54:10.7235321Z Setting up libavc1394-0:amd64 (0.5.4-5build3) ...
2025-06-04T21:54:10.7277164Z Setting up session-migration (0.3.9build1) ...
2025-06-04T21:54:10.8337291Z Created symlink /etc/systemd/user/graphical-session-pre.target.wants/session-migration.service → /usr/lib/systemd/user/session-migration.service.
2025-06-04T21:54:10.8337886Z 
2025-06-04T21:54:10.8366885Z Setting up liblapack3:amd64 (3.12.0-3build1.1) ...
2025-06-04T21:54:10.8434478Z update-alternatives: using /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3 to provide /usr/lib/x86_64-linux-gnu/liblapack.so.3 (liblapack.so.3-x86_64-linux-gnu) in auto mode
2025-06-04T21:54:10.8457823Z Setting up libproxy1v5:amd64 (0.5.4-4build1) ...
2025-06-04T21:54:10.8485673Z Setting up libzvbi0t64:amd64 (0.2.42-2) ...
2025-06-04T21:54:10.8517383Z Setting up liblrdf0:amd64 (0.6.1-4build1) ...
2025-06-04T21:54:10.8553854Z Setting up libmanette-0.2-0:amd64 (0.2.7-1build2) ...
2025-06-04T21:54:10.8583122Z Setting up libglib2.0-bin (2.80.0-6ubuntu3.4) ...
2025-06-04T21:54:10.8611266Z Setting up libzbar0t64:amd64 (0.23.93-4build3) ...
2025-06-04T21:54:10.8657821Z Setting up libgstreamer-plugins-base1.0-0:amd64 (1.24.2-1ubuntu0.2) ...
2025-06-04T21:54:10.8701039Z Setting up libavutil58:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:10.8731963Z Setting up libopenal1:amd64 (1:1.23.1-4build1) ...
2025-06-04T21:54:10.8783208Z Setting up xfonts-utils (1:7.7+6build3) ...
2025-06-04T21:54:10.8848928Z Setting up librsvg2-2:amd64 (2.58.0+dfsg-1build1) ...
2025-06-04T21:54:10.8879439Z Setting up libsecret-1-0:amd64 (0.21.4-1build3) ...
2025-06-04T21:54:10.8910230Z Setting up libgstreamer-plugins-good1.0-0:amd64 (1.24.2-1ubuntu1.1) ...
2025-06-04T21:54:10.8945623Z Setting up libgstreamer-gl1.0-0:amd64 (1.24.2-1ubuntu0.2) ...
2025-06-04T21:54:10.8979721Z Setting up gstreamer1.0-plugins-base:amd64 (1.24.2-1ubuntu0.2) ...
2025-06-04T21:54:10.9014736Z Setting up libass9:amd64 (1:0.17.1-2build1) ...
2025-06-04T21:54:10.9049513Z Setting up libswresample4:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:10.9080186Z Setting up libopenexr-3-1-30:amd64 (3.1.5-5.1build3) ...
2025-06-04T21:54:10.9126270Z Setting up libshout3:amd64 (2.4.6-1build2) ...
2025-06-04T21:54:10.9164571Z Setting up libgav1-1:amd64 (0.18.0-1build3) ...
2025-06-04T21:54:10.9202551Z Setting up libavcodec60:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:10.9246857Z Setting up librubberband2:amd64 (3.3.0+dfsg-2build1) ...
2025-06-04T21:54:10.9282081Z Setting up libjack-jackd2-0:amd64 (1.9.21~dfsg-3ubuntu3) ...
2025-06-04T21:54:10.9329296Z Setting up libsord-0-0:amd64 (0.16.16-2build1) ...
2025-06-04T21:54:10.9386416Z Setting up xfonts-cyrillic (1:1.0.5+nmu1) ...
2025-06-04T21:54:10.9838235Z Setting up libpostproc57:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:10.9882438Z Setting up libsratom-0-0:amd64 (0.6.16-1build1) ...
2025-06-04T21:54:10.9916150Z Setting up libgtk-4-1:amd64 (4.14.2+ds-1ubuntu3) ...
2025-06-04T21:54:11.3562379Z Setting up libsndfile1:amd64 (1.2.2-1ubuntu5.24.04.1) ...
2025-06-04T21:54:11.3598980Z Setting up liblilv-0-0:amd64 (0.24.22-1build1) ...
2025-06-04T21:54:11.3638914Z Setting up libinstpatch-1.0-2:amd64 (1.1.6-1build2) ...
2025-06-04T21:54:11.3676930Z Setting up xfonts-scalable (1:1.0.3-1.3) ...
2025-06-04T21:54:11.3997973Z Setting up libswscale7:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:11.4050283Z Setting up gsettings-desktop-schemas (46.1-0ubuntu1) ...
2025-06-04T21:54:11.4220560Z Setting up glib-networking-services (2.80.0-1build1) ...
2025-06-04T21:54:11.4267314Z Setting up libavif16:amd64 (1.0.4-1ubuntu3) ...
2025-06-04T21:54:11.4306705Z Setting up libpulse0:amd64 (1:16.1+dfsg1-2ubuntu10.1) ...
2025-06-04T21:54:11.4406072Z Setting up libavformat60:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:11.4445081Z Setting up libsphinxbase3t64:amd64 (0.8+5prealpha+1-17build2) ...
2025-06-04T21:54:11.4491538Z Setting up glib-networking:amd64 (2.80.0-1build1) ...
2025-06-04T21:54:11.4527205Z Setting up libsdl2-2.0-0:amd64 (2.30.0+dfsg-1ubuntu3.1) ...
2025-06-04T21:54:11.4565667Z Setting up libfluidsynth3:amd64 (2.3.4-1build3) ...
2025-06-04T21:54:11.4613566Z Setting up libsoup-3.0-0:amd64 (3.4.4-5ubuntu0.4) ...
2025-06-04T21:54:11.4650628Z Setting up libpocketsphinx3:amd64 (0.8.0+real5prealpha+1-15ubuntu5) ...
2025-06-04T21:54:11.4704793Z Setting up libgssdp-1.6-0:amd64 (1.6.3-1build3) ...
2025-06-04T21:54:11.4741626Z Setting up gstreamer1.0-plugins-good:amd64 (1.24.2-1ubuntu1.1) ...
2025-06-04T21:54:11.4775631Z Setting up libgupnp-1.6-0:amd64 (1.6.6-1build3) ...
2025-06-04T21:54:11.4819526Z Setting up libavfilter9:amd64 (7:6.1.1-3ubuntu5) ...
2025-06-04T21:54:11.4861502Z Setting up libgupnp-igd-1.6-0:amd64 (1.6.0-3build3) ...
2025-06-04T21:54:11.4924751Z Setting up gstreamer1.0-libav:amd64 (1.24.1-1build1) ...
2025-06-04T21:54:11.4985010Z Setting up libnice10:amd64 (0.1.21-2build3) ...
2025-06-04T21:54:11.5030209Z Setting up libgstreamer-plugins-bad1.0-0:amd64 (1.24.2-1ubuntu4) ...
2025-06-04T21:54:11.5068457Z Setting up gstreamer1.0-plugins-bad:amd64 (1.24.2-1ubuntu4) ...
2025-06-04T21:54:11.5117175Z Processing triggers for libc-bin (2.39-0ubuntu8.4) ...
2025-06-04T21:54:11.5419996Z Processing triggers for man-db (2.12.0-4build2) ...
2025-06-04T21:54:17.4517601Z Processing triggers for fontconfig (2.15.0-1.1ubuntu2) ...
2025-06-04T21:54:18.1001976Z 
2025-06-04T21:54:18.1002613Z Running kernel seems to be up-to-date.
2025-06-04T21:54:18.1002920Z 
2025-06-04T21:54:18.1494046Z Restarting services...
2025-06-04T21:54:18.1494591Z  systemctl restart packagekit.service php8.3-fpm.service polkit.service udisks2.service
2025-06-04T21:54:18.2868163Z 
2025-06-04T21:54:18.2869069Z Service restarts being deferred:
2025-06-04T21:54:18.2870421Z  systemctl restart ModemManager.service
2025-06-04T21:54:18.2871264Z  systemctl restart hosted-compute-agent.service
2025-06-04T21:54:18.2873324Z  systemctl restart networkd-dispatcher.service
2025-06-04T21:54:18.2873654Z 
2025-06-04T21:54:18.2873882Z No containers need to be restarted.
2025-06-04T21:54:18.2874146Z 
2025-06-04T21:54:18.2874412Z No user sessions are running outdated binaries.
2025-06-04T21:54:18.2874715Z 
2025-06-04T21:54:18.2875151Z No VM guests are running outdated hypervisor (qemu) binaries on this host.
2025-06-04T21:54:19.1775964Z Downloading Chromium 136.0.7103.25 (playwright build v1169) from https://cdn.playwright.dev/dbazure/download/playwright/builds/chromium/1169/chromium-linux.zip
2025-06-04T21:54:19.3328328Z |                                                                                |   0% of 167.7 MiB
2025-06-04T21:54:19.4400258Z |■■■■■■■■                                                                        |  10% of 167.7 MiB
2025-06-04T21:54:19.5197017Z |■■■■■■■■■■■■■■■■                                                                |  20% of 167.7 MiB
2025-06-04T21:54:19.6007657Z |■■■■■■■■■■■■■■■■■■■■■■■■                                                        |  30% of 167.7 MiB
2025-06-04T21:54:19.6784504Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                                |  40% of 167.7 MiB
2025-06-04T21:54:19.7512985Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                        |  50% of 167.7 MiB
2025-06-04T21:54:19.8396166Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                |  60% of 167.7 MiB
2025-06-04T21:54:19.9102717Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                        |  70% of 167.7 MiB
2025-06-04T21:54:20.0100637Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                |  80% of 167.7 MiB
2025-06-04T21:54:20.0864192Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■        |  90% of 167.7 MiB
2025-06-04T21:54:20.1588342Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■| 100% of 167.7 MiB
2025-06-04T21:54:23.1175155Z Chromium 136.0.7103.25 (playwright build v1169) downloaded to /home/runner/.cache/ms-playwright/chromium-1169
2025-06-04T21:54:23.1177980Z Downloading Chromium Headless Shell 136.0.7103.25 (playwright build v1169) from https://cdn.playwright.dev/dbazure/download/playwright/builds/chromium/1169/chromium-headless-shell-linux.zip
2025-06-04T21:54:23.2594549Z |                                                                                |   0% of 101.4 MiB
2025-06-04T21:54:23.4247304Z |■■■■■■■■                                                                        |  10% of 101.4 MiB
2025-06-04T21:54:23.4843276Z |■■■■■■■■■■■■■■■■                                                                |  20% of 101.4 MiB
2025-06-04T21:54:23.5437552Z |■■■■■■■■■■■■■■■■■■■■■■■■                                                        |  30% of 101.4 MiB
2025-06-04T21:54:23.5947117Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                                |  40% of 101.4 MiB
2025-06-04T21:54:23.6484736Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                        |  50% of 101.4 MiB
2025-06-04T21:54:23.6952665Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                |  60% of 101.4 MiB
2025-06-04T21:54:23.7392795Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                        |  70% of 101.4 MiB
2025-06-04T21:54:23.7750794Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                |  80% of 101.4 MiB
2025-06-04T21:54:23.8713601Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■        |  90% of 101.4 MiB
2025-06-04T21:54:23.9181324Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■| 100% of 101.4 MiB
2025-06-04T21:54:25.6174937Z Chromium Headless Shell 136.0.7103.25 (playwright build v1169) downloaded to /home/runner/.cache/ms-playwright/chromium_headless_shell-1169
2025-06-04T21:54:25.6176648Z Downloading Firefox 137.0 (playwright build v1482) from https://cdn.playwright.dev/dbazure/download/playwright/builds/firefox/1482/firefox-ubuntu-24.04.zip
2025-06-04T21:54:25.7605990Z |                                                                                |   0% of 91 MiB
2025-06-04T21:54:25.8206970Z |■■■■■■■■                                                                        |  10% of 91 MiB
2025-06-04T21:54:25.8732560Z |■■■■■■■■■■■■■■■■                                                                |  20% of 91 MiB
2025-06-04T21:54:25.9145765Z |■■■■■■■■■■■■■■■■■■■■■■■■                                                        |  30% of 91 MiB
2025-06-04T21:54:25.9470308Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                                |  40% of 91 MiB
2025-06-04T21:54:25.9884502Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                        |  50% of 91 MiB
2025-06-04T21:54:26.0296761Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                |  60% of 91 MiB
2025-06-04T21:54:26.0681124Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                        |  70% of 91 MiB
2025-06-04T21:54:26.1046149Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                |  80% of 91 MiB
2025-06-04T21:54:26.1353651Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■        |  90% of 91 MiB
2025-06-04T21:54:26.1708031Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■| 100% of 91 MiB
2025-06-04T21:54:27.6745289Z Firefox 137.0 (playwright build v1482) downloaded to /home/runner/.cache/ms-playwright/firefox-1482
2025-06-04T21:54:27.6748093Z Downloading Webkit 18.4 (playwright build v2158) from https://cdn.playwright.dev/dbazure/download/playwright/builds/webkit/2158/webkit-ubuntu-24.04.zip
2025-06-04T21:54:27.8197660Z |                                                                                |   0% of 93.5 MiB
2025-06-04T21:54:27.8837063Z |■■■■■■■■                                                                        |  10% of 93.5 MiB
2025-06-04T21:54:27.9354019Z |■■■■■■■■■■■■■■■■                                                                |  20% of 93.5 MiB
2025-06-04T21:54:27.9806982Z |■■■■■■■■■■■■■■■■■■■■■■■■                                                        |  30% of 93.5 MiB
2025-06-04T21:54:28.0204576Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                                |  40% of 93.5 MiB
2025-06-04T21:54:28.0601728Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                        |  50% of 93.5 MiB
2025-06-04T21:54:28.0921210Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                |  60% of 93.5 MiB
2025-06-04T21:54:28.1284697Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                        |  70% of 93.5 MiB
2025-06-04T21:54:28.1813025Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                |  80% of 93.5 MiB
2025-06-04T21:54:28.2322161Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■        |  90% of 93.5 MiB
2025-06-04T21:54:28.3401884Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■| 100% of 93.5 MiB
2025-06-04T21:54:29.9540758Z Webkit 18.4 (playwright build v2158) downloaded to /home/runner/.cache/ms-playwright/webkit-2158
2025-06-04T21:54:29.9544123Z Downloading FFMPEG playwright build v1011 from https://cdn.playwright.dev/dbazure/download/playwright/builds/ffmpeg/1011/ffmpeg-linux.zip
2025-06-04T21:54:30.0941351Z |                                                                                |   0% of 2.3 MiB
2025-06-04T21:54:30.0981365Z |■■■■■■■■                                                                        |  10% of 2.3 MiB
2025-06-04T21:54:30.0997857Z |■■■■■■■■■■■■■■■■                                                                |  20% of 2.3 MiB
2025-06-04T21:54:30.1018941Z |■■■■■■■■■■■■■■■■■■■■■■■■                                                        |  30% of 2.3 MiB
2025-06-04T21:54:30.1035214Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                                |  40% of 2.3 MiB
2025-06-04T21:54:30.1047523Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                        |  50% of 2.3 MiB
2025-06-04T21:54:30.1064109Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                                |  60% of 2.3 MiB
2025-06-04T21:54:30.1078536Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                        |  70% of 2.3 MiB
2025-06-04T21:54:30.1096130Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■                |  80% of 2.3 MiB
2025-06-04T21:54:30.1106695Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■        |  90% of 2.3 MiB
2025-06-04T21:54:30.1119803Z |■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■| 100% of 2.3 MiB
2025-06-04T21:54:30.1638287Z FFMPEG playwright build v1011 downloaded to /home/runner/.cache/ms-playwright/ffmpeg-1011
2025-06-04T21:54:30.7492940Z ##[group]Run pnpm test --pool=threads --poolOptions.threads.minThreads=0 --poolOptions.threads.maxThreads=3
2025-06-04T21:54:30.7493691Z [36;1mpnpm test --pool=threads --poolOptions.threads.minThreads=0 --poolOptions.threads.maxThreads=3[0m
2025-06-04T21:54:30.7545924Z shell: /usr/bin/bash -e {0}
2025-06-04T21:54:30.7546193Z env:
2025-06-04T21:54:30.7546463Z   PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
2025-06-04T21:54:30.7546804Z   REDIS_URL: redis://localhost:6379
2025-06-04T21:54:30.7547098Z   REDIS_KEY_PREFIX: test:
2025-06-04T21:54:30.7547323Z   VITEST_TIMEOUT: 30000
2025-06-04T21:54:30.7547533Z   SKIP_REDIS_TESTS: true
2025-06-04T21:54:30.7547747Z   SKIP_FHE_TESTS: true
2025-06-04T21:54:30.7547965Z   SKIP_BROWSER_COMPAT_TESTS: true
2025-06-04T21:54:30.7548204Z   NODE_ENV: test
2025-06-04T21:54:30.7548412Z   SKIP_PERFORMANCE_TESTS: true
2025-06-04T21:54:30.7548655Z   SKIP_CRYPTO_ROTATION_TEST: true
2025-06-04T21:54:30.7548886Z ##[endgroup]
2025-06-04T21:54:31.0382289Z 
2025-06-04T21:54:31.0383044Z > pixelated@0.0.1 test /home/runner/work/pixelated/pixelated
2025-06-04T21:54:31.0384054Z > vitest --pool\=threads --poolOptions.threads.minThreads\=0 --poolOptions.threads.maxThreads\=3
2025-06-04T21:54:31.0384528Z 
2025-06-04T21:54:31.5836800Z 
2025-06-04T21:54:31.5838953Z [1m[46m RUN [49m[22m [36mv3.1.4 [39m[90m/home/runner/work/pixelated/pixelated[39m
2025-06-04T21:54:31.5840046Z 
2025-06-04T21:54:33.4495811Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mInitialization[2m > [22m[2mshould initialize with default configuration
2025-06-04T21:54:33.4502710Z [22m[39m[2025-06-04T21:54:33.446Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4508018Z [2025-06-04T21:54:33.448Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4510569Z   config: {
2025-06-04T21:54:33.4512930Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4516068Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4516761Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4517376Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4518010Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4518700Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4519721Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4520853Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4521281Z   }
2025-06-04T21:54:33.4521559Z }
2025-06-04T21:54:33.4521715Z 
2025-06-04T21:54:33.4523790Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mInitialization[2m > [22m[2mshould initialize with default configuration
2025-06-04T21:54:33.4526110Z [22m[39m[2025-06-04T21:54:33.448Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4527314Z [2025-06-04T21:54:33.448Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4528036Z   config: {
2025-06-04T21:54:33.4528606Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4529505Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4530182Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4530789Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4531382Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4532062Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4532771Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4533410Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4533831Z   }
2025-06-04T21:54:33.4534107Z }
2025-06-04T21:54:33.4534281Z 
2025-06-04T21:54:33.4536831Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mInitialization[2m > [22m[2mshould merge provided configuration with defaults
2025-06-04T21:54:33.4539499Z [22m[39m[2025-06-04T21:54:33.450Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4540715Z [2025-06-04T21:54:33.450Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4554671Z   config: {
2025-06-04T21:54:33.4555425Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4556178Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4556807Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4557352Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4557903Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4558531Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4559424Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4560031Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4560436Z   }
2025-06-04T21:54:33.4560712Z }
2025-06-04T21:54:33.4560867Z 
2025-06-04T21:54:33.4574984Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mInitialization[2m > [22m[2mshould merge provided configuration with defaults
2025-06-04T21:54:33.4580006Z [22m[39m[2025-06-04T21:54:33.451Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4583142Z [2025-06-04T21:54:33.451Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4583860Z   config: {
2025-06-04T21:54:33.4584423Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4585128Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4585786Z     predictionHorizon: [33m60[39m,
2025-06-04T21:54:33.4586366Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4586940Z     confidenceThreshold: [33m0.8[39m,
2025-06-04T21:54:33.4587617Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4588344Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4589008Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4589651Z   }
2025-06-04T21:54:33.4589928Z }
2025-06-04T21:54:33.4590093Z 
2025-06-04T21:54:33.4592198Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mInitialization[2m > [22m[2mshould create service using factory function
2025-06-04T21:54:33.4594858Z [22m[39m[2025-06-04T21:54:33.452Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4596110Z [2025-06-04T21:54:33.452Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4596798Z   config: {
2025-06-04T21:54:33.4597354Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4598044Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4598675Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4599461Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4600047Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4600730Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4601465Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4602127Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4602536Z   }
2025-06-04T21:54:33.4602801Z }
2025-06-04T21:54:33.4602958Z 
2025-06-04T21:54:33.4605025Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mInitialization[2m > [22m[2mshould create service using factory function
2025-06-04T21:54:33.4607379Z [22m[39m[2025-06-04T21:54:33.452Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4608576Z [2025-06-04T21:54:33.452Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4609716Z   config: {
2025-06-04T21:54:33.4610274Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4610962Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4611605Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4612183Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4612781Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4613471Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4614208Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4614871Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4615276Z   }
2025-06-04T21:54:33.4615547Z }
2025-06-04T21:54:33.4615706Z 
2025-06-04T21:54:33.4617993Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould generate comprehensive treatment outcome predictions
2025-06-04T21:54:33.4620694Z [22m[39m[2025-06-04T21:54:33.454Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4621906Z [2025-06-04T21:54:33.454Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4622601Z   config: {
2025-06-04T21:54:33.4623161Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4623875Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4624510Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4625090Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4625689Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4626378Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4627095Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4627754Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4628173Z   }
2025-06-04T21:54:33.4628452Z }
2025-06-04T21:54:33.4628606Z 
2025-06-04T21:54:33.4631144Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould generate comprehensive treatment outcome predictions
2025-06-04T21:54:33.4633509Z [22m[39m[2025-06-04T21:54:33.457Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.4634331Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.4635010Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.4635673Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.4636357Z }
2025-06-04T21:54:33.4636522Z 
2025-06-04T21:54:33.4675131Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould generate goal achievement predictions with proper structure
2025-06-04T21:54:33.4681045Z [22m[39m[2025-06-04T21:54:33.459Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4682608Z [2025-06-04T21:54:33.459Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4683452Z   config: {
2025-06-04T21:54:33.4683992Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4685435Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4686281Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4687028Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4687790Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4688643Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4689873Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4690640Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4691167Z   }
2025-06-04T21:54:33.4691413Z }
2025-06-04T21:54:33.4691691Z 
2025-06-04T21:54:33.4694642Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould generate goal achievement predictions with proper structure
2025-06-04T21:54:33.4698540Z [22m[39m[2025-06-04T21:54:33.460Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.4699627Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.4700299Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.4700915Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.4701285Z }
2025-06-04T21:54:33.4701435Z 
2025-06-04T21:54:33.4703589Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould generate symptom reduction predictions
2025-06-04T21:54:33.4705952Z [22m[39m[2025-06-04T21:54:33.461Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4707101Z [2025-06-04T21:54:33.461Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4707768Z   config: {
2025-06-04T21:54:33.4708255Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4708878Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4709626Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4710144Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4710659Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4711254Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4711865Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4712426Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4712793Z   }
2025-06-04T21:54:33.4713029Z }
2025-06-04T21:54:33.4713176Z 
2025-06-04T21:54:33.4715178Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould generate symptom reduction predictions
2025-06-04T21:54:33.4717212Z [22m[39m[2025-06-04T21:54:33.461Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.4717923Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.4718500Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.4719057Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.4719546Z }
2025-06-04T21:54:33.4719690Z 
2025-06-04T21:54:33.4721646Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould generate engagement predictions
2025-06-04T21:54:33.4726869Z [22m[39m[2025-06-04T21:54:33.462Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4728433Z [2025-06-04T21:54:33.462Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4730917Z   config: {
2025-06-04T21:54:33.4732517Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4734274Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4735971Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4738450Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4741357Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4743962Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4746779Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4750745Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4751190Z   }
2025-06-04T21:54:33.4753313Z }
2025-06-04T21:54:33.4753472Z 
2025-06-04T21:54:33.4760670Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould generate engagement predictions
2025-06-04T21:54:33.4767485Z [22m[39m[2025-06-04T21:54:33.463Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.4770776Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.4772720Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.4773581Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.4774153Z }
2025-06-04T21:54:33.4774308Z 
2025-06-04T21:54:33.4777156Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould include model information in predictions
2025-06-04T21:54:33.4779661Z [22m[39m[2025-06-04T21:54:33.463Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4780801Z [2025-06-04T21:54:33.463Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4781419Z   config: {
2025-06-04T21:54:33.4781893Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4782506Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4783069Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4783584Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4784103Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4784702Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4785330Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4785891Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4786261Z   }
2025-06-04T21:54:33.4786506Z }
2025-06-04T21:54:33.4786648Z 
2025-06-04T21:54:33.4788725Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould include model information in predictions
2025-06-04T21:54:33.4791046Z [22m[39m[2025-06-04T21:54:33.464Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.4791848Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.4792455Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.4793054Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.4793440Z }
2025-06-04T21:54:33.4793587Z 
2025-06-04T21:54:33.4795304Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould handle empty session data gracefully
2025-06-04T21:54:33.4796575Z [22m[39m[2025-06-04T21:54:33.464Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4797494Z [2025-06-04T21:54:33.464Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4797877Z   config: {
2025-06-04T21:54:33.4798162Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4798521Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4798849Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4799397Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4799719Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4800075Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4800433Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4800749Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4800972Z   }
2025-06-04T21:54:33.4801121Z }
2025-06-04T21:54:33.4801208Z 
2025-06-04T21:54:33.4802327Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mTreatment Outcome Prediction[2m > [22m[2mshould handle empty session data gracefully
2025-06-04T21:54:33.4803493Z [22m[39m[2025-06-04T21:54:33.464Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.4803909Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.4804263Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.4804603Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.4804815Z }
2025-06-04T21:54:33.4804901Z 
2025-06-04T21:54:33.4806099Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould generate challenge predictions
2025-06-04T21:54:33.4807316Z [22m[39m[2025-06-04T21:54:33.465Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4807958Z [2025-06-04T21:54:33.465Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4808326Z   config: {
2025-06-04T21:54:33.4808631Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4809398Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4809999Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4810534Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4811056Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4811651Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4812274Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4812864Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4813251Z   }
2025-06-04T21:54:33.4813500Z }
2025-06-04T21:54:33.4813642Z 
2025-06-04T21:54:33.4815617Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould generate challenge predictions
2025-06-04T21:54:33.4818162Z [22m[39m[2025-06-04T21:54:33.466Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.4818958Z 
2025-06-04T21:54:33.4821147Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould predict different challenge types
2025-06-04T21:54:33.4823338Z [22m[39m[2025-06-04T21:54:33.467Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4824515Z [2025-06-04T21:54:33.467Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4825171Z   config: {
2025-06-04T21:54:33.4825657Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4826316Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4826910Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4827431Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4827958Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4828780Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4829599Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4830183Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4830565Z   }
2025-06-04T21:54:33.4830807Z }
2025-06-04T21:54:33.4830956Z 
2025-06-04T21:54:33.4832800Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould predict different challenge types
2025-06-04T21:54:33.4834229Z [22m[39m[2025-06-04T21:54:33.468Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.4834667Z 
2025-06-04T21:54:33.4835815Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould include challenge details and intervention plans
2025-06-04T21:54:33.4837066Z [22m[39m[2025-06-04T21:54:33.469Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4837706Z [2025-06-04T21:54:33.469Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4838083Z   config: {
2025-06-04T21:54:33.4838349Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4838706Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4839453Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4839809Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4840117Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4840460Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4840825Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4841160Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4841394Z   }
2025-06-04T21:54:33.4841543Z }
2025-06-04T21:54:33.4841634Z 
2025-06-04T21:54:33.4842774Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould include challenge details and intervention plans
2025-06-04T21:54:33.4844195Z [22m[39m[2025-06-04T21:54:33.469Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.4844643Z 
2025-06-04T21:54:33.4845703Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould assess challenge impact correctly
2025-06-04T21:54:33.4846896Z [22m[39m[2025-06-04T21:54:33.471Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4847536Z [2025-06-04T21:54:33.471Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4847916Z   config: {
2025-06-04T21:54:33.4848181Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4848538Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4848866Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4849289Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4849595Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4849944Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4850309Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4850627Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4850843Z   }
2025-06-04T21:54:33.4850991Z }
2025-06-04T21:54:33.4851084Z 
2025-06-04T21:54:33.4852141Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould assess challenge impact correctly
2025-06-04T21:54:33.4853509Z [22m[39m[2025-06-04T21:54:33.471Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.4854071Z 
2025-06-04T21:54:33.4855218Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould provide prevention strategies and intervention plans
2025-06-04T21:54:33.4856467Z [22m[39m[2025-06-04T21:54:33.473Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4857094Z [2025-06-04T21:54:33.473Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4857463Z   config: {
2025-06-04T21:54:33.4857726Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4858077Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4858415Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4858712Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4859020Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4859491Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4859849Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4860162Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4860380Z   }
2025-06-04T21:54:33.4860527Z }
2025-06-04T21:54:33.4860611Z 
2025-06-04T21:54:33.4861883Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mChallenge Prediction[2m > [22m[2mshould provide prevention strategies and intervention plans
2025-06-04T21:54:33.4863326Z [22m[39m[2025-06-04T21:54:33.474Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.4863764Z 
2025-06-04T21:54:33.4864840Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould generate comprehensive prediction reports
2025-06-04T21:54:33.4866036Z [22m[39m[2025-06-04T21:54:33.476Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.4866665Z [2025-06-04T21:54:33.476Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.4867032Z   config: {
2025-06-04T21:54:33.4867298Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.4867647Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.4868073Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.4868646Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.4869406Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.4870079Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.4870757Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.4871363Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.4871753Z   }
2025-06-04T21:54:33.4872025Z }
2025-06-04T21:54:33.4872173Z 
2025-06-04T21:54:33.5794055Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould generate comprehensive prediction reports
2025-06-04T21:54:33.5796781Z [22m[39m[2025-06-04T21:54:33.477Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.5797704Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5798469Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5799529Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.5799913Z }
2025-06-04T21:54:33.5800094Z 
2025-06-04T21:54:33.5802160Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould generate comprehensive prediction reports
2025-06-04T21:54:33.5804800Z [22m[39m[2025-06-04T21:54:33.477Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.5806022Z 
2025-06-04T21:54:33.5808084Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould generate comprehensive prediction reports
2025-06-04T21:54:33.5810394Z [22m[39m[2025-06-04T21:54:33.478Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.5811134Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5811775Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5812416Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.5813013Z   outcomePredictionCount: [33m3[39m,
2025-06-04T21:54:33.5813601Z   challengePredictionCount: [33m5[39m
2025-06-04T21:54:33.5814018Z }
2025-06-04T21:54:33.5814167Z 
2025-06-04T21:54:33.5816245Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould calculate overall prognosis correctly
2025-06-04T21:54:33.5818546Z [22m[39m[2025-06-04T21:54:33.479Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5819934Z [2025-06-04T21:54:33.479Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5820594Z   config: {
2025-06-04T21:54:33.5821312Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5821985Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5822588Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5823123Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5823669Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5824298Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5824956Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5825544Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5825933Z   }
2025-06-04T21:54:33.5826188Z }
2025-06-04T21:54:33.5826334Z 
2025-06-04T21:54:33.5828402Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould calculate overall prognosis correctly
2025-06-04T21:54:33.5830739Z [22m[39m[2025-06-04T21:54:33.479Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.5831462Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5832048Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5832611Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.5832955Z }
2025-06-04T21:54:33.5833092Z 
2025-06-04T21:54:33.5835053Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould calculate overall prognosis correctly
2025-06-04T21:54:33.5836981Z [22m[39m[2025-06-04T21:54:33.479Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.5837642Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5838218Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5838807Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.5839510Z   outcomePredictionCount: [33m3[39m,
2025-06-04T21:54:33.5840055Z   challengePredictionCount: [33m0[39m
2025-06-04T21:54:33.5840442Z }
2025-06-04T21:54:33.5840563Z 
2025-06-04T21:54:33.5842381Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould assess risk level appropriately
2025-06-04T21:54:33.5844628Z [22m[39m[2025-06-04T21:54:33.480Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5845799Z [2025-06-04T21:54:33.480Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5846718Z   config: {
2025-06-04T21:54:33.5847218Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5847872Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5848473Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5849020Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5849840Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5850492Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5851194Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5851796Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5852179Z   }
2025-06-04T21:54:33.5852435Z }
2025-06-04T21:54:33.5852589Z 
2025-06-04T21:54:33.5854555Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould assess risk level appropriately
2025-06-04T21:54:33.5857131Z [22m[39m[2025-06-04T21:54:33.480Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.5857922Z 
2025-06-04T21:54:33.5860148Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould assess risk level appropriately
2025-06-04T21:54:33.5862496Z [22m[39m[2025-06-04T21:54:33.480Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.5863277Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5863921Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5864568Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.5865154Z   outcomePredictionCount: [33m0[39m,
2025-06-04T21:54:33.5865736Z   challengePredictionCount: [33m5[39m
2025-06-04T21:54:33.5866150Z }
2025-06-04T21:54:33.5866306Z 
2025-06-04T21:54:33.5868353Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould generate treatment recommendations
2025-06-04T21:54:33.5870828Z [22m[39m[2025-06-04T21:54:33.481Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5872003Z [2025-06-04T21:54:33.481Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5872673Z   config: {
2025-06-04T21:54:33.5873152Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5873790Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5874382Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5874924Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5875460Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5876087Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5876745Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5877332Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5877721Z   }
2025-06-04T21:54:33.5877972Z }
2025-06-04T21:54:33.5878123Z 
2025-06-04T21:54:33.5880489Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould generate treatment recommendations
2025-06-04T21:54:33.5882651Z [22m[39m[2025-06-04T21:54:33.481Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.5883424Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5884052Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5884647Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.5885051Z }
2025-06-04T21:54:33.5885199Z 
2025-06-04T21:54:33.5887189Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould generate treatment recommendations
2025-06-04T21:54:33.5889526Z [22m[39m[2025-06-04T21:54:33.482Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.5890224Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5890814Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5891413Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.5891959Z   outcomePredictionCount: [33m3[39m,
2025-06-04T21:54:33.5892512Z   challengePredictionCount: [33m0[39m
2025-06-04T21:54:33.5892899Z }
2025-06-04T21:54:33.5893043Z 
2025-06-04T21:54:33.5895135Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould create monitoring plan and review schedule
2025-06-04T21:54:33.5897120Z [22m[39m[2025-06-04T21:54:33.483Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5898070Z [2025-06-04T21:54:33.483Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5898608Z   config: {
2025-06-04T21:54:33.5899055Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5899918Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5900485Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5901031Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5901809Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5902423Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5903098Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5903707Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5904125Z   }
2025-06-04T21:54:33.5904398Z }
2025-06-04T21:54:33.5904551Z 
2025-06-04T21:54:33.5906580Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould create monitoring plan and review schedule
2025-06-04T21:54:33.5908677Z [22m[39m[2025-06-04T21:54:33.486Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.5909427Z 
2025-06-04T21:54:33.5910563Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Reports[2m > [22m[2mshould create monitoring plan and review schedule
2025-06-04T21:54:33.5911706Z [22m[39m[2025-06-04T21:54:33.486Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.5912128Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5912486Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5912834Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.5913156Z   outcomePredictionCount: [33m0[39m,
2025-06-04T21:54:33.5913473Z   challengePredictionCount: [33m5[39m
2025-06-04T21:54:33.5913716Z }
2025-06-04T21:54:33.5913804Z 
2025-06-04T21:54:33.5914865Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Updates[2m > [22m[2mshould update predictions with new data
2025-06-04T21:54:33.5916060Z [22m[39m[2025-06-04T21:54:33.486Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5916705Z [2025-06-04T21:54:33.486Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5917079Z   config: {
2025-06-04T21:54:33.5917346Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5917691Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5918019Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5918317Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5918617Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5918954Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5919646Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5919973Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5920196Z   }
2025-06-04T21:54:33.5920342Z }
2025-06-04T21:54:33.5920428Z 
2025-06-04T21:54:33.5921479Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Updates[2m > [22m[2mshould update predictions with new data
2025-06-04T21:54:33.5922603Z [22m[39m[2025-06-04T21:54:33.487Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.5923023Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5923365Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5923704Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.5923913Z }
2025-06-04T21:54:33.5924003Z 
2025-06-04T21:54:33.5925052Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Updates[2m > [22m[2mshould update predictions with new data
2025-06-04T21:54:33.5926417Z [22m[39m[2025-06-04T21:54:33.487Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.5926856Z 
2025-06-04T21:54:33.5928008Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Updates[2m > [22m[2mshould update predictions with new data
2025-06-04T21:54:33.5929231Z [22m[39m[2025-06-04T21:54:33.488Z] INFO  [app]: Predictions updated with new data {
2025-06-04T21:54:33.5929647Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5929942Z   updatedPredictions: [33m3[39m,
2025-06-04T21:54:33.5930262Z   updatedChallengePredictions: [33m5[39m
2025-06-04T21:54:33.5930505Z }
2025-06-04T21:54:33.5930595Z 
2025-06-04T21:54:33.5931708Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Updates[2m > [22m[2mshould handle updates for non-existent client gracefully
2025-06-04T21:54:33.5933070Z [22m[39m[2025-06-04T21:54:33.489Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5933703Z [2025-06-04T21:54:33.489Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5934073Z   config: {
2025-06-04T21:54:33.5934348Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5934703Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5935025Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5935314Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5935611Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5935955Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5936312Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5936624Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5936843Z   }
2025-06-04T21:54:33.5936991Z }
2025-06-04T21:54:33.5937074Z 
2025-06-04T21:54:33.5938196Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mPrediction Updates[2m > [22m[2mshould handle updates for non-existent client gracefully
2025-06-04T21:54:33.5939444Z [22m[39m[2025-06-04T21:54:33.489Z] INFO  [app]: Predictions updated with new data {
2025-06-04T21:54:33.5939879Z   clientId: [32m'non-existent-client'[39m,
2025-06-04T21:54:33.5940195Z   updatedPredictions: [33m0[39m,
2025-06-04T21:54:33.5940512Z   updatedChallengePredictions: [33m0[39m
2025-06-04T21:54:33.5940750Z }
2025-06-04T21:54:33.5940835Z 
2025-06-04T21:54:33.5941878Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mError Handling[2m > [22m[2mshould handle invalid client ID gracefully
2025-06-04T21:54:33.5943185Z [22m[39m[2025-06-04T21:54:33.490Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5943821Z [2025-06-04T21:54:33.490Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5944192Z   config: {
2025-06-04T21:54:33.5944460Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5944813Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5945131Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5945434Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5945730Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5946070Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5946414Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5946729Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5946969Z   }
2025-06-04T21:54:33.5947122Z }
2025-06-04T21:54:33.5947204Z 
2025-06-04T21:54:33.5948276Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mError Handling[2m > [22m[2mshould handle invalid treatment plan ID gracefully
2025-06-04T21:54:33.5949691Z [22m[39m[2025-06-04T21:54:33.491Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5950470Z [2025-06-04T21:54:33.491Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5950858Z   config: {
2025-06-04T21:54:33.5951136Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5951493Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5951811Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5952111Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5952420Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5952788Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5953144Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5953461Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5953683Z   }
2025-06-04T21:54:33.5953829Z }
2025-06-04T21:54:33.5953912Z 
2025-06-04T21:54:33.5954921Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mError Handling[2m > [22m[2mshould handle empty goals array
2025-06-04T21:54:33.5956081Z [22m[39m[2025-06-04T21:54:33.491Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5956713Z [2025-06-04T21:54:33.491Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5957080Z   config: {
2025-06-04T21:54:33.5957339Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5957681Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5958006Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5958306Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5958600Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5958945Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5959411Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5975512Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5975775Z   }
2025-06-04T21:54:33.5975938Z }
2025-06-04T21:54:33.5976039Z 
2025-06-04T21:54:33.5977080Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mError Handling[2m > [22m[2mshould handle empty goals array
2025-06-04T21:54:33.5978195Z [22m[39m[2025-06-04T21:54:33.492Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.5978631Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.5979298Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5980229Z   predictionCount: [33m2[39m
2025-06-04T21:54:33.5980598Z }
2025-06-04T21:54:33.5980744Z 
2025-06-04T21:54:33.5982695Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mError Handling[2m > [22m[2mshould handle report generation for non-existent client
2025-06-04T21:54:33.5984948Z [22m[39m[2025-06-04T21:54:33.492Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.5986111Z [2025-06-04T21:54:33.492Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.5986782Z   config: {
2025-06-04T21:54:33.5987300Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.5987943Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.5988543Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.5989306Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.5989902Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.5990552Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.5991217Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.5991781Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.5992159Z   }
2025-06-04T21:54:33.5992411Z }
2025-06-04T21:54:33.5992555Z 
2025-06-04T21:54:33.5994833Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mError Handling[2m > [22m[2mshould handle report generation for non-existent client
2025-06-04T21:54:33.5996758Z [22m[39m[2025-06-04T21:54:33.492Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.5997526Z   clientId: [32m'non-existent-client'[39m,
2025-06-04T21:54:33.5998252Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.5998910Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.6000074Z   outcomePredictionCount: [33m0[39m,
2025-06-04T21:54:33.6000689Z   challengePredictionCount: [33m0[39m
2025-06-04T21:54:33.6001107Z }
2025-06-04T21:54:33.6001271Z 
2025-06-04T21:54:33.6003259Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mModel Performance[2m > [22m[2mshould have reasonable prediction accuracy
2025-06-04T21:54:33.6005395Z [22m[39m[2025-06-04T21:54:33.493Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6006516Z [2025-06-04T21:54:33.493Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6007167Z   config: {
2025-06-04T21:54:33.6007689Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6008383Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6009014Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6009806Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6010369Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.6011014Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6011675Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6012262Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6012651Z   }
2025-06-04T21:54:33.6012891Z }
2025-06-04T21:54:33.6013037Z 
2025-06-04T21:54:33.6014998Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mModel Performance[2m > [22m[2mshould have reasonable prediction accuracy
2025-06-04T21:54:33.6017011Z [22m[39m[2025-06-04T21:54:33.493Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.6017625Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6018143Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.6018637Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.6018954Z }
2025-06-04T21:54:33.6019313Z 
2025-06-04T21:54:33.6023992Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mModel Performance[2m > [22m[2mshould provide uncertainty quantification
2025-06-04T21:54:33.6027519Z [22m[39m[2025-06-04T21:54:33.494Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6028202Z [2025-06-04T21:54:33.494Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6028717Z   config: {
2025-06-04T21:54:33.6029028Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6029626Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6030100Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6030416Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6030721Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.6031075Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6031435Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6031763Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6031978Z   }
2025-06-04T21:54:33.6032130Z }
2025-06-04T21:54:33.6032222Z 
2025-06-04T21:54:33.6033281Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mModel Performance[2m > [22m[2mshould provide uncertainty quantification
2025-06-04T21:54:33.6034587Z [22m[39m[2025-06-04T21:54:33.495Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.6035029Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6035366Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.6035702Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.6035914Z }
2025-06-04T21:54:33.6035999Z 
2025-06-04T21:54:33.6037903Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mModel Performance[2m > [22m[2mshould identify meaningful key factors
2025-06-04T21:54:33.6040287Z [22m[39m[2025-06-04T21:54:33.495Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6041402Z [2025-06-04T21:54:33.495Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6042052Z   config: {
2025-06-04T21:54:33.6042863Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6043583Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6044270Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6044817Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6045364Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.6046001Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6046695Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6047298Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6047711Z   }
2025-06-04T21:54:33.6047973Z }
2025-06-04T21:54:33.6048114Z 
2025-06-04T21:54:33.6050349Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mModel Performance[2m > [22m[2mshould identify meaningful key factors
2025-06-04T21:54:33.6052735Z [22m[39m[2025-06-04T21:54:33.496Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.6053546Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6054195Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.6054835Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.6055191Z }
2025-06-04T21:54:33.6055330Z 
2025-06-04T21:54:33.6057293Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mConfiguration Options[2m > [22m[2mshould respect confidence threshold setting
2025-06-04T21:54:33.6059603Z [22m[39m[2025-06-04T21:54:33.500Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6061236Z [2025-06-04T21:54:33.500Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6061862Z   config: {
2025-06-04T21:54:33.6062342Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6062947Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6063548Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6064108Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6064664Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.6065329Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6066359Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6067007Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6067252Z   }
2025-06-04T21:54:33.6067408Z }
2025-06-04T21:54:33.6067497Z 
2025-06-04T21:54:33.6068603Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mConfiguration Options[2m > [22m[2mshould respect confidence threshold setting
2025-06-04T21:54:33.6070506Z [22m[39m[2025-06-04T21:54:33.502Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6071724Z [2025-06-04T21:54:33.502Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6072260Z   config: {
2025-06-04T21:54:33.6072677Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6073771Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6074351Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6074821Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6075302Z     confidenceThreshold: [33m0.3[39m,
2025-06-04T21:54:33.6075884Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6076468Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6077288Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6077671Z   }
2025-06-04T21:54:33.6077927Z }
2025-06-04T21:54:33.6078773Z [2025-06-04T21:54:33.502Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6079987Z [2025-06-04T21:54:33.502Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6080598Z   config: {
2025-06-04T21:54:33.6081065Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6081652Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6082191Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6082707Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6083214Z     confidenceThreshold: [33m0.9[39m,
2025-06-04T21:54:33.6083793Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6084406Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6085184Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6085562Z   }
2025-06-04T21:54:33.6085806Z }
2025-06-04T21:54:33.6085950Z 
2025-06-04T21:54:33.6087898Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mConfiguration Options[2m > [22m[2mshould respect confidence threshold setting
2025-06-04T21:54:33.6092415Z [22m[39m[2025-06-04T21:54:33.502Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.6093206Z 
2025-06-04T21:54:33.6095202Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mConfiguration Options[2m > [22m[2mshould respect confidence threshold setting
2025-06-04T21:54:33.6097595Z [22m[39m[2025-06-04T21:54:33.502Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m0[39m }
2025-06-04T21:54:33.6098340Z 
2025-06-04T21:54:33.6100414Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mConfiguration Options[2m > [22m[2mshould use correct prediction horizon
2025-06-04T21:54:33.6102795Z [22m[39m[2025-06-04T21:54:33.502Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6103870Z [2025-06-04T21:54:33.502Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6104500Z   config: {
2025-06-04T21:54:33.6104960Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6105582Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6106144Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6106656Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6107165Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.6107763Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6108385Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6108920Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6109458Z   }
2025-06-04T21:54:33.6109709Z }
2025-06-04T21:54:33.6109852Z 
2025-06-04T21:54:33.6111760Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mConfiguration Options[2m > [22m[2mshould use correct prediction horizon
2025-06-04T21:54:33.6113837Z [22m[39m[2025-06-04T21:54:33.503Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6115078Z [2025-06-04T21:54:33.503Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6115702Z   config: {
2025-06-04T21:54:33.6116164Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6116772Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6117334Z     predictionHorizon: [33m60[39m,
2025-06-04T21:54:33.6117861Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6118385Z     confidenceThreshold: [33m0.7[39m,
2025-06-04T21:54:33.6119005Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6119816Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6120365Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6120719Z   }
2025-06-04T21:54:33.6120956Z }
2025-06-04T21:54:33.6121102Z 
2025-06-04T21:54:33.6122995Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mComprehensiveOutcomePredictionService[2m > [22m[2mConfiguration Options[2m > [22m[2mshould use correct prediction horizon
2025-06-04T21:54:33.6125063Z [22m[39m[2025-06-04T21:54:33.503Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.6125816Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6126401Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.6126965Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.6127321Z }
2025-06-04T21:54:33.6127458Z 
2025-06-04T21:54:33.6128948Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould demonstrate end-to-end prediction workflow
2025-06-04T21:54:33.6130987Z [22m[39m[2025-06-04T21:54:33.505Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6132090Z [2025-06-04T21:54:33.505Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6132708Z   config: {
2025-06-04T21:54:33.6133171Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6133789Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6134349Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6134853Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6135377Z     confidenceThreshold: [33m0.6[39m,
2025-06-04T21:54:33.6135974Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6136592Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6137150Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6137735Z   }
2025-06-04T21:54:33.6137984Z }
2025-06-04T21:54:33.6138123Z 
2025-06-04T21:54:33.6139807Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould demonstrate end-to-end prediction workflow
2025-06-04T21:54:33.6141497Z [22m[39m[2025-06-04T21:54:33.506Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.6142206Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6142802Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.6143377Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.6143727Z }
2025-06-04T21:54:33.6143866Z 
2025-06-04T21:54:33.6145374Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould demonstrate end-to-end prediction workflow
2025-06-04T21:54:33.6147510Z [22m[39m[2025-06-04T21:54:33.506Z] INFO  [app]: Challenge predictions generated { clientId: [32m'client-123'[39m, predictionCount: [33m5[39m }
2025-06-04T21:54:33.6148260Z 
2025-06-04T21:54:33.6149919Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould demonstrate end-to-end prediction workflow
2025-06-04T21:54:33.6151562Z [22m[39m[2025-06-04T21:54:33.506Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.6152243Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6153014Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.6153660Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.6154210Z   outcomePredictionCount: [33m3[39m,
2025-06-04T21:54:33.6154780Z   challengePredictionCount: [33m5[39m
2025-06-04T21:54:33.6155179Z }
2025-06-04T21:54:33.6155323Z 
2025-06-04T21:54:33.6156839Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould demonstrate end-to-end prediction workflow
2025-06-04T21:54:33.6158505Z [22m[39m[2025-06-04T21:54:33.506Z] INFO  [app]: Predictions updated with new data {
2025-06-04T21:54:33.6159339Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6159860Z   updatedPredictions: [33m3[39m,
2025-06-04T21:54:33.6160419Z   updatedChallengePredictions: [33m5[39m
2025-06-04T21:54:33.6160822Z }
2025-06-04T21:54:33.6160962Z 
2025-06-04T21:54:33.6162438Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould demonstrate end-to-end prediction workflow
2025-06-04T21:54:33.6164056Z [22m[39m[2025-06-04T21:54:33.506Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.6164723Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6165320Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.6165894Z   reportType: [32m'summary'[39m,
2025-06-04T21:54:33.6166414Z   outcomePredictionCount: [33m3[39m,
2025-06-04T21:54:33.6166979Z   challengePredictionCount: [33m5[39m
2025-06-04T21:54:33.6167375Z }
2025-06-04T21:54:33.6167514Z 
2025-06-04T21:54:33.6169025Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle multiple clients and treatment plans
2025-06-04T21:54:33.6170999Z [22m[39m[2025-06-04T21:54:33.515Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6172096Z [2025-06-04T21:54:33.515Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6172727Z   config: {
2025-06-04T21:54:33.6173194Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6173808Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6174370Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6174880Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6175396Z     confidenceThreshold: [33m0.6[39m,
2025-06-04T21:54:33.6176192Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6176821Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6177372Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6177749Z   }
2025-06-04T21:54:33.6177995Z }
2025-06-04T21:54:33.6178139Z 
2025-06-04T21:54:33.6179801Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle multiple clients and treatment plans
2025-06-04T21:54:33.6182289Z [22m[39m[2025-06-04T21:54:33.515Z] INFO  [app]: Treatment outcome predictions generated { clientId: [32m'client-1'[39m, treatmentPlanId: [32m'plan-1'[39m, predictionCount: [33m3[39m }
2025-06-04T21:54:33.6183200Z 
2025-06-04T21:54:33.6184653Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle multiple clients and treatment plans
2025-06-04T21:54:33.6186723Z [22m[39m[2025-06-04T21:54:33.516Z] INFO  [app]: Treatment outcome predictions generated { clientId: [32m'client-2'[39m, treatmentPlanId: [32m'plan-2'[39m, predictionCount: [33m3[39m }
2025-06-04T21:54:33.6187306Z 
2025-06-04T21:54:33.6188153Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle multiple clients and treatment plans
2025-06-04T21:54:33.6189949Z [22m[39m[2025-06-04T21:54:33.516Z] INFO  [app]: Treatment outcome predictions generated { clientId: [32m'client-3'[39m, treatmentPlanId: [32m'plan-3'[39m, predictionCount: [33m3[39m }
2025-06-04T21:54:33.6190510Z 
2025-06-04T21:54:33.6191351Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle multiple clients and treatment plans
2025-06-04T21:54:33.6192268Z [22m[39m[2025-06-04T21:54:33.516Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.6192675Z   clientId: [32m'client-1'[39m,
2025-06-04T21:54:33.6192984Z   treatmentPlanId: [32m'plan-1'[39m,
2025-06-04T21:54:33.6193310Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.6193630Z   outcomePredictionCount: [33m3[39m,
2025-06-04T21:54:33.6193947Z   challengePredictionCount: [33m0[39m
2025-06-04T21:54:33.6194182Z }
2025-06-04T21:54:33.6194268Z 
2025-06-04T21:54:33.6195098Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle multiple clients and treatment plans
2025-06-04T21:54:33.6196014Z [22m[39m[2025-06-04T21:54:33.516Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.6196401Z   clientId: [32m'client-2'[39m,
2025-06-04T21:54:33.6196698Z   treatmentPlanId: [32m'plan-2'[39m,
2025-06-04T21:54:33.6197006Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.6197313Z   outcomePredictionCount: [33m3[39m,
2025-06-04T21:54:33.6197620Z   challengePredictionCount: [33m0[39m
2025-06-04T21:54:33.6197855Z }
2025-06-04T21:54:33.6197939Z 
2025-06-04T21:54:33.6198757Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould handle multiple clients and treatment plans
2025-06-04T21:54:33.6200227Z [22m[39m[2025-06-04T21:54:33.516Z] INFO  [app]: Prediction report generated {
2025-06-04T21:54:33.6200837Z   clientId: [32m'client-3'[39m,
2025-06-04T21:54:33.6201146Z   treatmentPlanId: [32m'plan-3'[39m,
2025-06-04T21:54:33.6201492Z   reportType: [32m'comprehensive'[39m,
2025-06-04T21:54:33.6201805Z   outcomePredictionCount: [33m3[39m,
2025-06-04T21:54:33.6202103Z   challengePredictionCount: [33m0[39m
2025-06-04T21:54:33.6202341Z }
2025-06-04T21:54:33.6202426Z 
2025-06-04T21:54:33.6203240Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould maintain prediction consistency over time
2025-06-04T21:54:33.6204408Z [22m[39m[2025-06-04T21:54:33.517Z] INFO  [app]: Prediction models initialized { modelCount: [33m3[39m }
2025-06-04T21:54:33.6205048Z [2025-06-04T21:54:33.517Z] INFO  [app]: Comprehensive Outcome Prediction Service initialized {
2025-06-04T21:54:33.6205412Z   config: {
2025-06-04T21:54:33.6205684Z     enableOutcomeForecasting: [33mtrue[39m,
2025-06-04T21:54:33.6206036Z     enableChallengePrediction: [33mtrue[39m,
2025-06-04T21:54:33.6206371Z     predictionHorizon: [33m90[39m,
2025-06-04T21:54:33.6206664Z     updateFrequency: [33m24[39m,
2025-06-04T21:54:33.6206967Z     confidenceThreshold: [33m0.6[39m,
2025-06-04T21:54:33.6207309Z     modelSelectionStrategy: [32m'ensemble'[39m,
2025-06-04T21:54:33.6207676Z     uncertaintyQuantification: [33mtrue[39m,
2025-06-04T21:54:33.6208008Z     realTimeUpdates: [33mtrue[39m
2025-06-04T21:54:33.6208226Z   }
2025-06-04T21:54:33.6208377Z }
2025-06-04T21:54:33.6208463Z 
2025-06-04T21:54:33.6209588Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould maintain prediction consistency over time
2025-06-04T21:54:33.6210615Z [22m[39m[2025-06-04T21:54:33.517Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.6211051Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6211399Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.6211735Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.6212106Z }
2025-06-04T21:54:33.6212200Z 
2025-06-04T21:54:33.6213043Z [90mstdout[2m | src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22m[2mIntegration Tests[2m > [22m[2mshould maintain prediction consistency over time
2025-06-04T21:54:33.6214017Z [22m[39m[2025-06-04T21:54:33.517Z] INFO  [app]: Treatment outcome predictions generated {
2025-06-04T21:54:33.6214437Z   clientId: [32m'client-123'[39m,
2025-06-04T21:54:33.6214781Z   treatmentPlanId: [32m'treatment-plan-456'[39m,
2025-06-04T21:54:33.6215113Z   predictionCount: [33m3[39m
2025-06-04T21:54:33.6215325Z }
2025-06-04T21:54:33.6215408Z 
2025-06-04T21:54:33.6216657Z  [31m❯[39m src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts [2m([22m[2m40 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 74[2mms[22m[39m
2025-06-04T21:54:33.6217901Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mInitialization[2m > [22mshould initialize with default configuration[32m 5[2mms[22m[39m
2025-06-04T21:54:33.6219034Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mInitialization[2m > [22mshould merge provided configuration with defaults[32m 2[2mms[22m[39m
2025-06-04T21:54:33.6221130Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mInitialization[2m > [22mshould create service using factory function[32m 2[2mms[22m[39m
2025-06-04T21:54:33.6223260Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mTreatment Outcome Prediction[2m > [22mshould generate comprehensive treatment outcome predictions[32m 5[2mms[22m[39m
2025-06-04T21:54:33.6225150Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mTreatment Outcome Prediction[2m > [22mshould generate goal achievement predictions with proper structure[32m 2[2mms[22m[39m
2025-06-04T21:54:33.6226434Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mTreatment Outcome Prediction[2m > [22mshould generate symptom reduction predictions[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6227603Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mTreatment Outcome Prediction[2m > [22mshould generate engagement predictions[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6228776Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mTreatment Outcome Prediction[2m > [22mshould include model information in predictions[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6230465Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mTreatment Outcome Prediction[2m > [22mshould handle empty session data gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6232548Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mChallenge Prediction[2m > [22mshould generate challenge predictions[32m 2[2mms[22m[39m
2025-06-04T21:54:33.6234654Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mChallenge Prediction[2m > [22mshould predict different challenge types[32m 2[2mms[22m[39m
2025-06-04T21:54:33.6237011Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mChallenge Prediction[2m > [22mshould include challenge details and intervention plans[32m 2[2mms[22m[39m
2025-06-04T21:54:33.6239356Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mChallenge Prediction[2m > [22mshould assess challenge impact correctly[32m 3[2mms[22m[39m
2025-06-04T21:54:33.6241542Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mChallenge Prediction[2m > [22mshould provide prevention strategies and intervention plans[32m 3[2mms[22m[39m
2025-06-04T21:54:33.6243785Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mPrediction Reports[2m > [22mshould generate comprehensive prediction reports[32m 3[2mms[22m[39m
2025-06-04T21:54:33.6245917Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mPrediction Reports[2m > [22mshould calculate overall prognosis correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6251587Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mPrediction Reports[2m > [22mshould assess risk level appropriately[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6253712Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mPrediction Reports[2m > [22mshould generate treatment recommendations[32m 2[2mms[22m[39m
2025-06-04T21:54:33.6255837Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mPrediction Reports[2m > [22mshould create monitoring plan and review schedule[32m 4[2mms[22m[39m
2025-06-04T21:54:33.6267972Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mPrediction Updates[2m > [22mshould update predictions with new data[32m 3[2mms[22m[39m
2025-06-04T21:54:33.6270929Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mPrediction Updates[2m > [22mshould handle updates for non-existent client gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6273565Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mError Handling[2m > [22mshould handle invalid client ID gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6276710Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mError Handling[2m > [22mshould handle invalid treatment plan ID gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6279457Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mError Handling[2m > [22mshould handle empty goals array[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6281938Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mError Handling[2m > [22mshould handle report generation for non-existent client[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6284618Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mModel Performance[2m > [22mshould have reasonable prediction accuracy[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6287112Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mModel Performance[2m > [22mshould provide uncertainty quantification[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6289641Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mModel Performance[2m > [22mshould identify meaningful key factors[32m 4[2mms[22m[39m
2025-06-04T21:54:33.6292245Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mConfiguration Options[2m > [22mshould respect confidence threshold setting[32m 3[2mms[22m[39m
2025-06-04T21:54:33.6294979Z    [32m✓[39m ComprehensiveOutcomePredictionService[2m > [22mConfiguration Options[2m > [22mshould use correct prediction horizon[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6297384Z    [32m✓[39m OutcomePredictionUtils[2m > [22mcalculatePredictionAccuracy[2m > [22mshould calculate prediction accuracy correctly[32m 0[2mms[22m[39m
2025-06-04T21:54:33.6299331Z    [32m✓[39m OutcomePredictionUtils[2m > [22mcalculatePredictionAccuracy[2m > [22mshould handle empty arrays[32m 0[2mms[22m[39m
2025-06-04T21:54:33.6307167Z    [32m✓[39m OutcomePredictionUtils[2m > [22mcalculatePredictionAccuracy[2m > [22mshould handle mismatched array lengths[32m 0[2mms[22m[39m
2025-06-04T21:54:33.6309514Z    [32m✓[39m OutcomePredictionUtils[2m > [22mgeneratePredictionSummary[2m > [22mshould generate comprehensive prediction summary[32m 0[2mms[22m[39m
2025-06-04T21:54:33.6311464Z    [32m✓[39m OutcomePredictionUtils[2m > [22mgeneratePredictionSummary[2m > [22mshould handle empty predictions array[32m 1[2mms[22m[39m
2025-06-04T21:54:33.6313389Z    [32m✓[39m OutcomePredictionUtils[2m > [22mgeneratePredictionSummary[2m > [22mshould categorize risk levels correctly[32m 0[2mms[22m[39m
2025-06-04T21:54:33.6315389Z    [32m✓[39m OutcomePredictionUtils[2m > [22mvalidateModelPerformance[2m > [22mshould validate model performance metrics[32m 0[2mms[22m[39m
2025-06-04T21:54:33.6317280Z [31m   [31m×[31m Integration Tests[2m > [22mshould demonstrate end-to-end prediction workflow[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:33.6318830Z [31m     → expected 1749074073506 to be greater than 1749074073506[39m
2025-06-04T21:54:33.6320316Z    [32m✓[39m Integration Tests[2m > [22mshould handle multiple clients and treatment plans[32m 2[2mms[22m[39m
2025-06-04T21:54:33.6321744Z    [32m✓[39m Integration Tests[2m > [22mshould maintain prediction consistency over time[32m 1[2mms[22m[39m
2025-06-04T21:54:33.7407680Z [90mstderr[2m | src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22m[2mEnhancedPatientModelService - applyBeliefReinforcement[2m > [22m[2mshould return changesMade: false if belief ID not found
2025-06-04T21:54:33.7410361Z [22m[39mBelief reinforcement: Belief ID "nonexistent" not found in model patient1.
2025-06-04T21:54:33.7410931Z 
2025-06-04T21:54:33.8034045Z  [31m❯[39m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts [2m([22m[2m37 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[32m 77[2mms[22m[39m
2025-06-04T21:54:33.8036645Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould correctly apply THERAPIST_CONFIRMATION and increase strength[32m 6[2mms[22m[39m
2025-06-04T21:54:33.8039044Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould correctly apply PATIENT_EVIDENCE and add new evidence[32m 2[2mms[22m[39m
2025-06-04T21:54:33.8041469Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould not add duplicate PATIENT_EVIDENCE text[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8043740Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould correctly apply CONSISTENT_EMOTION and add evidence[32m 0[2mms[22m[39m
2025-06-04T21:54:33.8045839Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould cap belief strength at 10[32m 0[2mms[22m[39m
2025-06-04T21:54:33.8047765Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould cap belief strength at 0[32m 0[2mms[22m[39m
2025-06-04T21:54:33.8050032Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould use custom strengthIncrement if provided[32m 0[2mms[22m[39m
2025-06-04T21:54:33.8052826Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould return changesMade: false if no actual change in strength or evidence occurs (e.g. max strength, existing evidence, zero increment)[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8055619Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould do nothing and return changesMade: false if beliefId is not found[32m 4[2mms[22m[39m
2025-06-04T21:54:33.8058816Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould add evidence for CONSISTENT_EMOTION even if emotionalContext is empty array if default strengthIncrement applies[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8093111Z    [32m✓[39m EnhancedPatientModelService - applyBeliefReinforcement[2m > [22mshould return changesMade: false if belief ID not found[32m 2[2mms[22m[39m
2025-06-04T21:54:33.8095448Z    [32m✓[39m EnhancedPatientModelService - Belief Challenging[2m > [22mshould correctly apply THERAPIST_COUNTER_EVIDENCE and decrease strength[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8097771Z    [32m✓[39m EnhancedPatientModelService - Belief Challenging[2m > [22mshould correctly apply PATIENT_EXPRESSES_DOUBT and decrease strength[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8100397Z    [32m✓[39m EnhancedPatientModelService - Belief Challenging[2m > [22mshould correctly apply PATIENT_RECALLS_CONTRADICTORY_EXPERIENCE[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8102508Z    [32m✓[39m EnhancedPatientModelService - Belief Challenging[2m > [22mshould not reduce belief strength below 0[32m 0[2mms[22m[39m
2025-06-04T21:54:33.8105103Z    [32m✓[39m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mextractBeliefKeywords[2m > [22mshould extract keywords from belief text and domains[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8107616Z    [32m✓[39m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mextractBeliefKeywords[2m > [22mshould filter out stop words and short words[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8110367Z    [32m✓[39m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mcalculateBeliefRelevance[2m > [22mshould calculate high relevance for matching keywords[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8112993Z    [32m✓[39m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mcalculateBeliefRelevance[2m > [22mshould calculate low relevance for non-matching content[32m 0[2mms[22m[39m
2025-06-04T21:54:33.8115979Z [31m   [31m×[31m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mdetectTherapistChallenge[2m > [22mshould detect therapist challenges with high confidence patterns[39m[32m 13[2mms[22m[39m
2025-06-04T21:54:33.8117639Z [31m     → expected null to be truthy[39m
2025-06-04T21:54:33.8127831Z [31m   [31m×[31m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mdetectTherapistChallenge[2m > [22mshould detect evidence-based challenges[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8129739Z [31m     → expected null to be truthy[39m
2025-06-04T21:54:33.8131545Z    [32m✓[39m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mdetectTherapistChallenge[2m > [22mshould not detect challenges in irrelevant utterances[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8134155Z    [32m✓[39m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mdetectPatientDoubtOrContradiction[2m > [22mshould detect patient expressions of doubt[32m 3[2mms[22m[39m
2025-06-04T21:54:33.8136793Z    [32m✓[39m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mdetectPatientDoubtOrContradiction[2m > [22mshould detect contradictory experiences[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8140031Z [31m   [31m×[31m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mdetectPatientDoubtOrContradiction[2m > [22mshould handle multiple beliefs and select the most relevant[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8141740Z [31m     → expected null to be truthy[39m
2025-06-04T21:54:33.8143124Z    [32m✓[39m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould extract belief keywords correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8145299Z [31m   [31m×[31m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould calculate belief relevance accurately[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8147079Z [31m     → expected 0.5 to be greater than 0.5[39m
2025-06-04T21:54:33.8148847Z [31m   [31m×[31m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould detect therapist challenges with enhanced patterns[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8150466Z [31m     → expected null to be truthy[39m
2025-06-04T21:54:33.8152157Z [31m   [31m×[31m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould detect patient doubt with enhanced patterns[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8153517Z [31m     → expected null to be truthy[39m
2025-06-04T21:54:33.8155379Z [31m   [31m×[31m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould detect patient contradictory experiences with enhanced patterns[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8156882Z [31m     → expected null to be truthy[39m
2025-06-04T21:54:33.8158358Z    [32m✓[39m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould not detect challenges in neutral utterances[32m 2[2mms[22m[39m
2025-06-04T21:54:33.8160869Z [31m   [31m×[31m EnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould prioritize beliefs with higher relevance[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8162216Z [31m     → expected null to be truthy[39m
2025-06-04T21:54:33.8164312Z [31m   [31m×[31m EnhancedPatientModelService - Therapeutic Progress Tracking[2m > [22mshould track insights when beliefs are significantly challenged[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8165839Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:54:33.8167641Z [31m   [31m×[31m EnhancedPatientModelService - Therapeutic Progress Tracking[2m > [22mshould update resistance level based on patient responses[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:33.8169617Z [31m     → Invalid Chai property: slice. Did you mean "which"?[39m
2025-06-04T21:54:33.8171693Z [31m   [31m×[31m EnhancedPatientModelService - Therapeutic Progress Tracking[2m > [22mshould advance change readiness when insights are gained with low resistance[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:33.8173358Z [31m     → expected contemplation to be preparation[39m
2025-06-04T21:54:33.8174854Z    [32m✓[39m EnhancedPatientModelService - Therapeutic Progress Tracking[2m > [22mshould create session progress log entries[32m 0[2mms[22m[39m
2025-06-04T21:54:33.8177321Z [31m   [31m×[31m EnhancedPatientModelService - Integration Tests[2m > [22mshould process a complete therapeutic turn with reinforcement and challenge[39m[32m 16[2mms[22m[39m
2025-06-04T21:54:33.8179012Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T21:54:34.2558570Z  [31m❯[39m src/components/admin/bias-detection/BiasDashboard.test.tsx [2m([22m[2m59 tests[22m[2m | [22m[31m59 failed[39m[2m)[22m[32m 155[2mms[22m[39m
2025-06-04T21:54:34.2562648Z [31m   [31m×[31m BiasDashboard[2m > [22mrenders loading state initially[39m[32m 51[2mms[22m[39m
2025-06-04T21:54:34.2565674Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2568746Z [31m   [31m×[31m BiasDashboard[2m > [22mrenders dashboard data after loading[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:34.2571837Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2590589Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles WebSocket connection[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:34.2591821Z [31m     → mockWebSocket.mockImplementation is not a function[39m
2025-06-04T21:54:34.2593092Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles WebSocket errors gracefully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2594245Z [31m     → mockWebSocket.mockImplementation is not a function[39m
2025-06-04T21:54:34.2595651Z [31m   [31m×[31m BiasDashboard[2m > [22mupdates data when receiving WebSocket messages[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2597342Z [31m     → mockWebSocket.mockImplementation is not a function[39m
2025-06-04T21:54:34.2598670Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles chart interactions correctly[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:34.2600143Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2601448Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles data updates with animations[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2602612Z [31m     → mockWebSocket.mockImplementation is not a function[39m
2025-06-04T21:54:34.2603973Z [31m   [31m×[31m BiasDashboard[2m > [22mcleans up WebSocket connection on unmount[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2605173Z [31m     → mockWebSocket.mockImplementation is not a function[39m
2025-06-04T21:54:34.2606352Z [31m   [31m×[31m BiasDashboard[2m > [22mrenders filtering controls[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:34.2607513Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2608832Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles time range filter changes[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:34.2610315Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2611840Z [31m   [31m×[31m BiasDashboard[2m > [22mshows custom date inputs when custom time range is selected[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2613451Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2616056Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles bias score filter changes[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2617311Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2618603Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles alert level filter changes[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2620184Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2621642Z [31m   [31m×[31m BiasDashboard[2m > [22mclears all filters when clear button is clicked[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:34.2622888Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2624188Z [31m   [31m×[31m BiasDashboard[2m > [22mdisplays filter summary correctly[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:34.2625405Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2626810Z [31m   [31m×[31m BiasDashboard[2m > [22mupdates chart data when filters are applied[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:34.2628091Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2629835Z [31m   [31m×[31m BiasDashboard[2m > [22mshows no data message when filters exclude all data[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2631194Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2632538Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles custom date range input[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2633709Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2635021Z [31m   [31m×[31m BiasDashboard[2m > [22mrenders notification settings panel[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2636244Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2637576Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles notification settings changes[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2638809Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2640315Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles test notification sending[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2641527Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2642762Z [31m   [31m×[31m BiasDashboard[2m > [22mrenders alert management controls[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2644246Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2645468Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles individual alert actions[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:34.2646627Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2647881Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles bulk alert actions[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2649058Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2650645Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles alert selection and deselection[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:34.2651909Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2653144Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles alert notes addition[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2654336Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2655691Z [31m   [31m×[31m BiasDashboard[2m > [22mhandles alert escalation with notes[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2656929Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2658209Z [31m   [31m×[31m BiasDashboard[2m > [22mdisplays action history for alerts[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2660030Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2661391Z [31m   [31m×[31m BiasDashboard[2m > [22mcloses notification settings panel[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2662619Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2664351Z [31m   [31m×[31m BiasDashboard[2m > [22mData Export Functionality[2m > [22mopens export dialog when export button is clicked[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2665889Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2667521Z [31m   [31m×[31m BiasDashboard[2m > [22mData Export Functionality[2m > [22mallows format selection in export dialog[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2668986Z [31m     → Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T21:54:34.2670886Z [31m   [31m×[31m BiasDashboard[2m > [22mData Export Functionality[2m > [22mhandles export data functionality[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2672143Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2673721Z [31m   [31m×[31m BiasDashboard[2m > [22mData Export Functionality[2m > [22mcloses export dialog when cancel is clicked[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2691784Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2693296Z [31m   [31m×[31m BiasDashboard[2m > [22mData Export Functionality[2m > [22mvalidates date range in export dialog[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2694571Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2695903Z [31m   [31m×[31m BiasDashboard[2m > [22mResponsive Design[2m > [22madapts layout for mobile screens[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2697046Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2698433Z [31m   [31m×[31m BiasDashboard[2m > [22mResponsive Design[2m > [22madapts layout for tablet screens[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2699931Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2701280Z [31m   [31m×[31m BiasDashboard[2m > [22mResponsive Design[2m > [22mhandles window resize events[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2702402Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2703919Z [31m   [31m×[31m BiasDashboard[2m > [22mAccessibility Features[2m > [22mprovides skip links for keyboard navigation[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2705442Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2706907Z [31m   [31m×[31m BiasDashboard[2m > [22mAccessibility Features[2m > [22mhandles keyboard navigation shortcuts[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2708042Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2709772Z [31m   [31m×[31m BiasDashboard[2m > [22mAccessibility Features[2m > [22mprovides proper ARIA labels and descriptions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2711092Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2712493Z [31m   [31m×[31m BiasDashboard[2m > [22mAccessibility Features[2m > [22msupports high contrast mode[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2713676Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2715136Z [31m   [31m×[31m BiasDashboard[2m > [22mAccessibility Features[2m > [22mrespects reduced motion preferences[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2716405Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2717850Z [31m   [31m×[31m BiasDashboard[2m > [22mAccessibility Features[2m > [22mprovides screen reader announcements[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2719279Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2720963Z [31m   [31m×[31m BiasDashboard[2m > [22mAccessibility Features[2m > [22mmanages focus properly in dialogs[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2722179Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2723723Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mshows connection status indicators[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2725021Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2726576Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles connection errors with proper status[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2727927Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2729933Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles reconnection attempts with exponential backoff[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.2731335Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2732930Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22msends subscription message on connection[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2734206Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2735680Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mupdates subscription when filters change[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2736913Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2738369Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles heartbeat messages[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2739772Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2741246Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles real-time bias alert updates[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2742475Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2743968Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles real-time session updates[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2745202Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2746624Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles real-time metrics updates[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2747699Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2749006Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles manual reconnection[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2750102Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2751120Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mcleans up WebSocket connection properly[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2752012Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2753108Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles unknown message types gracefully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2753951Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2754956Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles malformed WebSocket messages[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2755793Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2756830Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mshows correct status during reconnection attempts[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2757698Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.2758991Z [31m   [31m×[31m BiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mdisables live updates when enableRealTimeUpdates is false[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.2760071Z [31m     → Target container is not a DOM element.[39m
2025-06-04T21:54:34.8633309Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Initialization[2m > [22m[2mshould initialize a new real-time session successfully
2025-06-04T21:54:34.8638315Z [22m[39m[2025-06-04T21:54:34.861Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.8640530Z 
2025-06-04T21:54:34.8646392Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Initialization[2m > [22m[2mshould initialize a new real-time session successfully
2025-06-04T21:54:34.8650680Z [22m[39m[2025-06-04T21:54:34.862Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.8652667Z 
2025-06-04T21:54:34.8654915Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Initialization[2m > [22m[2mshould initialize a new real-time session successfully
2025-06-04T21:54:34.8657904Z [22m[39m[2025-06-04T21:54:34.864Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.8660508Z 
2025-06-04T21:54:34.8680650Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Initialization[2m > [22m[2mshould initialize session without cognitive model
2025-06-04T21:54:34.8687614Z [22m[39m[2025-06-04T21:54:34.867Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.8688383Z 
2025-06-04T21:54:34.8696565Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Initialization[2m > [22m[2mshould initialize session without cognitive model
2025-06-04T21:54:34.8699770Z [22m[39m[2025-06-04T21:54:34.867Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-2","clientId":"test-client-2"}
2025-06-04T21:54:34.8700670Z 
2025-06-04T21:54:34.8702663Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Initialization[2m > [22m[2mshould initialize session without cognitive model
2025-06-04T21:54:34.8705876Z [22m[39m[2025-06-04T21:54:34.867Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-2"}
2025-06-04T21:54:34.8706695Z 
2025-06-04T21:54:34.8819624Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Initialization[2m > [22m[2mshould handle initialization errors gracefully
2025-06-04T21:54:34.8822158Z [22m[39m[2025-06-04T21:54:34.880Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.8825863Z 
2025-06-04T21:54:34.8831822Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Initialization[2m > [22m[2mshould handle initialization errors gracefully
2025-06-04T21:54:34.8834916Z [22m[39m[2025-06-04T21:54:34.881Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-3","clientId":"test-client-3"}
2025-06-04T21:54:34.8836329Z 
2025-06-04T21:54:34.8961773Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Initialization[2m > [22m[2mshould handle initialization errors gracefully
2025-06-04T21:54:34.8965152Z [22m[39m[2025-06-04T21:54:34.882Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-3"}
2025-06-04T21:54:34.8966598Z 
2025-06-04T21:54:34.8971891Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould process text message input successfully
2025-06-04T21:54:34.8974498Z [22m[39m[2025-06-04T21:54:34.888Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.8975299Z 
2025-06-04T21:54:34.8977296Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould process text message input successfully
2025-06-04T21:54:34.8980110Z [22m[39m[2025-06-04T21:54:34.888Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.8980951Z 
2025-06-04T21:54:34.8982803Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould process text message input successfully
2025-06-04T21:54:34.8985132Z [22m[39m[2025-06-04T21:54:34.888Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.8985921Z 
2025-06-04T21:54:34.8988122Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould detect crisis language and escalate appropriately
2025-06-04T21:54:34.8997236Z [22m[39m[2025-06-04T21:54:34.890Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.8998017Z 
2025-06-04T21:54:34.9000300Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould detect crisis language and escalate appropriately
2025-06-04T21:54:34.9013949Z [22m[39m[2025-06-04T21:54:34.890Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9015248Z 
2025-06-04T21:54:34.9017325Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould detect crisis language and escalate appropriately
2025-06-04T21:54:34.9020145Z [22m[39m[2025-06-04T21:54:34.891Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9021009Z 
2025-06-04T21:54:34.9022975Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould handle moderate risk scenarios
2025-06-04T21:54:34.9025512Z [22m[39m[2025-06-04T21:54:34.891Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9026320Z 
2025-06-04T21:54:34.9028265Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould handle moderate risk scenarios
2025-06-04T21:54:34.9041035Z [22m[39m[2025-06-04T21:54:34.891Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9045900Z 
2025-06-04T21:54:34.9048140Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould handle moderate risk scenarios
2025-06-04T21:54:34.9050959Z [22m[39m[2025-06-04T21:54:34.892Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9051803Z 
2025-06-04T21:54:34.9053772Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould update session context correctly
2025-06-04T21:54:34.9056266Z [22m[39m[2025-06-04T21:54:34.892Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9057082Z 
2025-06-04T21:54:34.9059014Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould update session context correctly
2025-06-04T21:54:34.9061896Z [22m[39m[2025-06-04T21:54:34.892Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9062837Z 
2025-06-04T21:54:34.9064868Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould update session context correctly
2025-06-04T21:54:34.9067397Z [22m[39m[2025-06-04T21:54:34.892Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9068224Z 
2025-06-04T21:54:34.9078572Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould handle non-existent session gracefully
2025-06-04T21:54:34.9081409Z [22m[39m[2025-06-04T21:54:34.893Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9082237Z 
2025-06-04T21:54:34.9084295Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould handle non-existent session gracefully
2025-06-04T21:54:34.9087005Z [22m[39m[2025-06-04T21:54:34.893Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9088251Z 
2025-06-04T21:54:34.9099921Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould handle non-existent session gracefully
2025-06-04T21:54:34.9102519Z [22m[39m[2025-06-04T21:54:34.894Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9103373Z 
2025-06-04T21:54:34.9105328Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mReal-Time Input Processing[2m > [22m[2mshould handle non-existent session gracefully
2025-06-04T21:54:34.9108271Z [22m[39m[2025-06-04T21:54:34.894Z] [ERROR] [real-time-intervention] Error processing real-time input {"error":"Session non-existent-session not found","sessionId":"non-existent-session"}
2025-06-04T21:54:34.9109624Z 
2025-06-04T21:54:34.9111457Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mRisk Assessment[2m > [22m[2mshould calculate risk levels correctly
2025-06-04T21:54:34.9113877Z [22m[39m[2025-06-04T21:54:34.895Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9114677Z 
2025-06-04T21:54:34.9116801Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mRisk Assessment[2m > [22m[2mshould calculate risk levels correctly
2025-06-04T21:54:34.9150566Z [22m[39m[2025-06-04T21:54:34.895Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9151484Z 
2025-06-04T21:54:34.9153278Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mRisk Assessment[2m > [22m[2mshould calculate risk levels correctly
2025-06-04T21:54:34.9155600Z [22m[39m[2025-06-04T21:54:34.895Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9156351Z 
2025-06-04T21:54:34.9158129Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mRisk Assessment[2m > [22m[2mshould consider historical risk factors
2025-06-04T21:54:34.9160498Z [22m[39m[2025-06-04T21:54:34.897Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9161200Z 
2025-06-04T21:54:34.9162896Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mRisk Assessment[2m > [22m[2mshould consider historical risk factors
2025-06-04T21:54:34.9165390Z [22m[39m[2025-06-04T21:54:34.897Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9166277Z 
2025-06-04T21:54:34.9168124Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mRisk Assessment[2m > [22m[2mshould consider historical risk factors
2025-06-04T21:54:34.9170842Z [22m[39m[2025-06-04T21:54:34.897Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9171684Z 
2025-06-04T21:54:34.9173857Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Generation[2m > [22m[2mshould generate appropriate interventions for different risk levels
2025-06-04T21:54:34.9176421Z [22m[39m[2025-06-04T21:54:34.898Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9177498Z 
2025-06-04T21:54:34.9224150Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Generation[2m > [22m[2mshould generate appropriate interventions for different risk levels
2025-06-04T21:54:34.9227082Z [22m[39m[2025-06-04T21:54:34.899Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9227959Z 
2025-06-04T21:54:34.9230325Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Generation[2m > [22m[2mshould generate appropriate interventions for different risk levels
2025-06-04T21:54:34.9233008Z [22m[39m[2025-06-04T21:54:34.899Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9233779Z 
2025-06-04T21:54:34.9235670Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Generation[2m > [22m[2mshould respect maximum interventions per session
2025-06-04T21:54:34.9238098Z [22m[39m[2025-06-04T21:54:34.900Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9238812Z 
2025-06-04T21:54:34.9241389Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Generation[2m > [22m[2mshould respect maximum interventions per session
2025-06-04T21:54:34.9244024Z [22m[39m[2025-06-04T21:54:34.900Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9244891Z 
2025-06-04T21:54:34.9246748Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Generation[2m > [22m[2mshould respect maximum interventions per session
2025-06-04T21:54:34.9261719Z [22m[39m[2025-06-04T21:54:34.900Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9262615Z 
2025-06-04T21:54:34.9264554Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould provide accurate session status
2025-06-04T21:54:34.9266829Z [22m[39m[2025-06-04T21:54:34.901Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9267567Z 
2025-06-04T21:54:34.9269429Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould provide accurate session status
2025-06-04T21:54:34.9271611Z [22m[39m[2025-06-04T21:54:34.901Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9272123Z 
2025-06-04T21:54:34.9273088Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould provide accurate session status
2025-06-04T21:54:34.9274377Z [22m[39m[2025-06-04T21:54:34.901Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9274817Z 
2025-06-04T21:54:34.9275800Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould end session and generate comprehensive summary
2025-06-04T21:54:34.9277311Z [22m[39m[2025-06-04T21:54:34.902Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9277718Z 
2025-06-04T21:54:34.9278698Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould end session and generate comprehensive summary
2025-06-04T21:54:34.9281208Z [22m[39m[2025-06-04T21:54:34.902Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9282110Z 
2025-06-04T21:54:34.9284048Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould end session and generate comprehensive summary
2025-06-04T21:54:34.9286561Z [22m[39m[2025-06-04T21:54:34.902Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9299012Z 
2025-06-04T21:54:34.9301282Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould end session and generate comprehensive summary
2025-06-04T21:54:34.9303681Z [22m[39m[2025-06-04T21:54:34.902Z] [INFO] [real-time-intervention] Ending real-time session {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9304683Z 
2025-06-04T21:54:34.9306605Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould end session and generate comprehensive summary
2025-06-04T21:54:34.9309276Z [22m[39m[2025-06-04T21:54:34.903Z] [INFO] [real-time-intervention] Real-time session ended successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9310053Z 
2025-06-04T21:54:34.9311933Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould handle ending non-existent session
2025-06-04T21:54:34.9314367Z [22m[39m[2025-06-04T21:54:34.904Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9315116Z 
2025-06-04T21:54:34.9316960Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould handle ending non-existent session
2025-06-04T21:54:34.9319735Z [22m[39m[2025-06-04T21:54:34.904Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9320618Z 
2025-06-04T21:54:34.9322481Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould handle ending non-existent session
2025-06-04T21:54:34.9324916Z [22m[39m[2025-06-04T21:54:34.904Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9325699Z 
2025-06-04T21:54:34.9327498Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Management[2m > [22m[2mshould handle ending non-existent session
2025-06-04T21:54:34.9330543Z [22m[39m[2025-06-04T21:54:34.904Z] [ERROR] [real-time-intervention] Error ending real-time session {"error":"Session non-existent-session not found","sessionId":"non-existent-session"}
2025-06-04T21:54:34.9331588Z 
2025-06-04T21:54:34.9333613Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Effectiveness Tracking[2m > [22m[2mshould update intervention effectiveness
2025-06-04T21:54:34.9336382Z [22m[39m[2025-06-04T21:54:34.904Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9337157Z 
2025-06-04T21:54:34.9339377Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Effectiveness Tracking[2m > [22m[2mshould update intervention effectiveness
2025-06-04T21:54:34.9342082Z [22m[39m[2025-06-04T21:54:34.905Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9342984Z 
2025-06-04T21:54:34.9345009Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Effectiveness Tracking[2m > [22m[2mshould update intervention effectiveness
2025-06-04T21:54:34.9347608Z [22m[39m[2025-06-04T21:54:34.905Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9348400Z 
2025-06-04T21:54:34.9350470Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Effectiveness Tracking[2m > [22m[2mshould update intervention effectiveness
2025-06-04T21:54:34.9353963Z [22m[39m[2025-06-04T21:54:34.905Z] [ERROR] [real-time-intervention] Error updating intervention effectiveness {"error":"Intervention test-intervention not found","sessionId":"test-session-1","interventionId":"test-intervention"}
2025-06-04T21:54:34.9355325Z 
2025-06-04T21:54:34.9357316Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Effectiveness Tracking[2m > [22m[2mshould handle updating non-existent intervention
2025-06-04T21:54:34.9359997Z [22m[39m[2025-06-04T21:54:34.906Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9360793Z 
2025-06-04T21:54:34.9362869Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Effectiveness Tracking[2m > [22m[2mshould handle updating non-existent intervention
2025-06-04T21:54:34.9365525Z [22m[39m[2025-06-04T21:54:34.906Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9366403Z 
2025-06-04T21:54:34.9368476Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Effectiveness Tracking[2m > [22m[2mshould handle updating non-existent intervention
2025-06-04T21:54:34.9371248Z [22m[39m[2025-06-04T21:54:34.906Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9372081Z 
2025-06-04T21:54:34.9374138Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mIntervention Effectiveness Tracking[2m > [22m[2mshould handle updating non-existent intervention
2025-06-04T21:54:34.9377648Z [22m[39m[2025-06-04T21:54:34.906Z] [ERROR] [real-time-intervention] Error updating intervention effectiveness {"error":"Intervention non-existent-intervention not found","sessionId":"test-session-1","interventionId":"non-existent-intervention"}
2025-06-04T21:54:34.9379268Z 
2025-06-04T21:54:34.9381237Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mCommunication Pattern Detection[2m > [22m[2mshould detect crisis language patterns
2025-06-04T21:54:34.9383693Z [22m[39m[2025-06-04T21:54:34.907Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9384755Z 
2025-06-04T21:54:34.9386680Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mCommunication Pattern Detection[2m > [22m[2mshould detect crisis language patterns
2025-06-04T21:54:34.9389540Z [22m[39m[2025-06-04T21:54:34.907Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9390454Z 
2025-06-04T21:54:34.9392356Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mCommunication Pattern Detection[2m > [22m[2mshould detect crisis language patterns
2025-06-04T21:54:34.9394825Z [22m[39m[2025-06-04T21:54:34.907Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9395658Z 
2025-06-04T21:54:34.9397536Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mCommunication Pattern Detection[2m > [22m[2mshould detect engagement patterns
2025-06-04T21:54:34.9400112Z [22m[39m[2025-06-04T21:54:34.908Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9400884Z 
2025-06-04T21:54:34.9402998Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mCommunication Pattern Detection[2m > [22m[2mshould detect engagement patterns
2025-06-04T21:54:34.9405613Z [22m[39m[2025-06-04T21:54:34.908Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9406497Z 
2025-06-04T21:54:34.9408455Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mCommunication Pattern Detection[2m > [22m[2mshould detect engagement patterns
2025-06-04T21:54:34.9411476Z [22m[39m[2025-06-04T21:54:34.908Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9412296Z 
2025-06-04T21:54:34.9414086Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Phase Detection[2m > [22m[2mshould detect crisis phase
2025-06-04T21:54:34.9416385Z [22m[39m[2025-06-04T21:54:34.908Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9417168Z 
2025-06-04T21:54:34.9418938Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Phase Detection[2m > [22m[2mshould detect crisis phase
2025-06-04T21:54:34.9421668Z [22m[39m[2025-06-04T21:54:34.908Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9422553Z 
2025-06-04T21:54:34.9424306Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Phase Detection[2m > [22m[2mshould detect crisis phase
2025-06-04T21:54:34.9426683Z [22m[39m[2025-06-04T21:54:34.909Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9427495Z 
2025-06-04T21:54:34.9429675Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Phase Detection[2m > [22m[2mshould transition through session phases based on time
2025-06-04T21:54:34.9432124Z [22m[39m[2025-06-04T21:54:34.909Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9433149Z 
2025-06-04T21:54:34.9435168Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Phase Detection[2m > [22m[2mshould transition through session phases based on time
2025-06-04T21:54:34.9437804Z [22m[39m[2025-06-04T21:54:34.909Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9438696Z 
2025-06-04T21:54:34.9440886Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mRealTimeInterventionEngine[2m > [22m[2mSession Phase Detection[2m > [22m[2mshould transition through session phases based on time
2025-06-04T21:54:34.9443419Z [22m[39m[2025-06-04T21:54:34.909Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9444252Z 
2025-06-04T21:54:34.9446244Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mUtility Functions[2m > [22m[2mcreateRealTimeInterventionEngine[2m > [22m[2mshould create engine with all dependencies
2025-06-04T21:54:34.9448587Z [22m[39m[2025-06-04T21:54:34.912Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9449525Z 
2025-06-04T21:54:34.9451418Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle emotion analysis failures gracefully
2025-06-04T21:54:34.9453621Z [22m[39m[2025-06-04T21:54:34.912Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9454361Z 
2025-06-04T21:54:34.9455921Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle emotion analysis failures gracefully
2025-06-04T21:54:34.9458232Z [22m[39m[2025-06-04T21:54:34.912Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9459269Z 
2025-06-04T21:54:34.9460860Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle emotion analysis failures gracefully
2025-06-04T21:54:34.9463076Z [22m[39m[2025-06-04T21:54:34.912Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9463866Z 
2025-06-04T21:54:34.9465507Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle emotion analysis failures gracefully
2025-06-04T21:54:34.9468004Z [22m[39m[2025-06-04T21:54:34.912Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9468946Z 
2025-06-04T21:54:34.9470665Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9472858Z [22m[39m[2025-06-04T21:54:34.913Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9473607Z 
2025-06-04T21:54:34.9475167Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9477527Z [22m[39m[2025-06-04T21:54:34.913Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9478379Z 
2025-06-04T21:54:34.9480543Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9482753Z [22m[39m[2025-06-04T21:54:34.913Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9483532Z 
2025-06-04T21:54:34.9485068Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9487462Z [22m[39m[2025-06-04T21:54:34.913Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9488395Z 
2025-06-04T21:54:34.9490184Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9492647Z [22m[39m[2025-06-04T21:54:34.913Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9493571Z 
2025-06-04T21:54:34.9495180Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9497865Z [22m[39m[2025-06-04T21:54:34.913Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9498832Z 
2025-06-04T21:54:34.9500756Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9503396Z [22m[39m[2025-06-04T21:54:34.914Z] [ERROR] [real-time-intervention] Error updating session context {"error":"Cannot read properties of null (reading 'length')","sessionId":"test-session-1"}
2025-06-04T21:54:34.9504500Z 
2025-06-04T21:54:34.9506095Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9508631Z [22m[39m[2025-06-04T21:54:34.914Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9509746Z 
2025-06-04T21:54:34.9511347Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9514312Z [22m[39m[2025-06-04T21:54:34.914Z] [ERROR] [real-time-intervention] Error updating session context {"error":"Cannot read properties of undefined (reading 'length')","sessionId":"test-session-1"}
2025-06-04T21:54:34.9515516Z 
2025-06-04T21:54:34.9517392Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty or invalid input content
2025-06-04T21:54:34.9520385Z [22m[39m[2025-06-04T21:54:34.914Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9521532Z 
2025-06-04T21:54:34.9523236Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle concurrent session operations
2025-06-04T21:54:34.9525749Z [22m[39m[2025-06-04T21:54:34.916Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9526662Z 
2025-06-04T21:54:34.9528325Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle concurrent session operations
2025-06-04T21:54:34.9531388Z [22m[39m[2025-06-04T21:54:34.916Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9532513Z 
2025-06-04T21:54:34.9534181Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle concurrent session operations
2025-06-04T21:54:34.9536682Z [22m[39m[2025-06-04T21:54:34.916Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9537575Z 
2025-06-04T21:54:34.9539547Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle concurrent session operations
2025-06-04T21:54:34.9542245Z [22m[39m[2025-06-04T21:54:34.917Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9544372Z [2025-06-04T21:54:34.917Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9572571Z [2025-06-04T21:54:34.917Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9574563Z [2025-06-04T21:54:34.917Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9576502Z [2025-06-04T21:54:34.917Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9577409Z 
2025-06-04T21:54:34.9579367Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mGoal Management[2m > [22m[2mshould create a new goal successfully
2025-06-04T21:54:34.9582068Z [22m[39m[2025-06-04T21:54:34.916Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074915_fokk7kopw","userId":"user123"}
2025-06-04T21:54:34.9582983Z 
2025-06-04T21:54:34.9584731Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mGoal Management[2m > [22m[2mshould update goal progress correctly
2025-06-04T21:54:34.9587218Z [22m[39m[2025-06-04T21:54:34.920Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074920_dar5eslff","userId":"user123"}
2025-06-04T21:54:34.9588092Z 
2025-06-04T21:54:34.9589966Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle very long session durations
2025-06-04T21:54:34.9592182Z [22m[39m[2025-06-04T21:54:34.921Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9592966Z 
2025-06-04T21:54:34.9594501Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle very long session durations
2025-06-04T21:54:34.9596831Z [22m[39m[2025-06-04T21:54:34.921Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9597730Z 
2025-06-04T21:54:34.9599565Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle very long session durations
2025-06-04T21:54:34.9601799Z [22m[39m[2025-06-04T21:54:34.921Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9602904Z 
2025-06-04T21:54:34.9604497Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle very long session durations
2025-06-04T21:54:34.9606906Z [22m[39m[2025-06-04T21:54:34.921Z] [ERROR] [real-time-intervention] Error performing risk assessment {"error":"Emotion analysis failed","sessionId":"test-session-1"}
2025-06-04T21:54:34.9607857Z 
2025-06-04T21:54:34.9609858Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mGoal Management[2m > [22m[2mshould update goal progress correctly
2025-06-04T21:54:34.9612293Z [22m[39m[2025-06-04T21:54:34.921Z] [INFO] [treatment-planning-service] Goal progress updated {"goalId":"tp_1749074074920_dar5eslff","newProgress":50}
2025-06-04T21:54:34.9613123Z 
2025-06-04T21:54:34.9614688Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle malformed cognitive model data
2025-06-04T21:54:34.9616850Z [22m[39m[2025-06-04T21:54:34.921Z] [INFO] [real-time-intervention] RealTimeInterventionEngine initialized with advanced features
2025-06-04T21:54:34.9617615Z 
2025-06-04T21:54:34.9619950Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle malformed cognitive model data
2025-06-04T21:54:34.9622975Z [22m[39m[2025-06-04T21:54:34.922Z] [INFO] [real-time-intervention] Initializing real-time session {"sessionId":"test-session-1","clientId":"test-client-1"}
2025-06-04T21:54:34.9624997Z [2025-06-04T21:54:34.922Z] [ERROR] [real-time-intervention] Error establishing emotional baseline {"error":"model.coreBeliefs is not iterable","clientId":"test-client-1"}
2025-06-04T21:54:34.9625994Z 
2025-06-04T21:54:34.9627620Z [90mstderr[2m | src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle malformed cognitive model data
2025-06-04T21:54:34.9630312Z [22m[39m[2025-06-04T21:54:34.922Z] [INFO] [real-time-intervention] Real-time session initialized successfully {"sessionId":"test-session-1"}
2025-06-04T21:54:34.9631177Z 
2025-06-04T21:54:34.9633040Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mGoal Management[2m > [22m[2mshould mark goal as achieved when progress reaches 100%
2025-06-04T21:54:34.9635672Z [22m[39m[2025-06-04T21:54:34.923Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074923_nw8fhwpo8","userId":"user123"}
2025-06-04T21:54:34.9636546Z 
2025-06-04T21:54:34.9638350Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mGoal Management[2m > [22m[2mshould mark goal as achieved when progress reaches 100%
2025-06-04T21:54:34.9641081Z [22m[39m[2025-06-04T21:54:34.923Z] [INFO] [treatment-planning-service] Goal progress updated {"goalId":"tp_1749074074923_nw8fhwpo8","newProgress":100}
2025-06-04T21:54:34.9641943Z 
2025-06-04T21:54:34.9643744Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mGoal Management[2m > [22m[2mshould retrieve user goals with optional status filter
2025-06-04T21:54:34.9646234Z [22m[39m[2025-06-04T21:54:34.925Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074925_zmhistwcp","userId":"user123"}
2025-06-04T21:54:34.9647049Z 
2025-06-04T21:54:34.9648804Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mGoal Management[2m > [22m[2mshould retrieve user goals with optional status filter
2025-06-04T21:54:34.9651307Z [22m[39m[2025-06-04T21:54:34.925Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074925_imj5oiqnb","userId":"user123"}
2025-06-04T21:54:34.9652585Z 
2025-06-04T21:54:34.9654420Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTreatment Plan Management[2m > [22m[2mshould create a comprehensive treatment plan
2025-06-04T21:54:34.9657020Z [22m[39m[2025-06-04T21:54:34.929Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074929_8ixq41wck","clientId":"client123"}
2025-06-04T21:54:34.9657912Z 
2025-06-04T21:54:34.9660016Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTreatment Plan Management[2m > [22m[2mshould generate automated treatment plan from assessment
2025-06-04T21:54:34.9662670Z [22m[39m[2025-06-04T21:54:34.931Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074931_phms318x4","userId":"client123"}
2025-06-04T21:54:34.9663588Z 
2025-06-04T21:54:34.9665501Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTreatment Plan Management[2m > [22m[2mshould generate automated treatment plan from assessment
2025-06-04T21:54:34.9668411Z [22m[39m[2025-06-04T21:54:34.932Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074932_e8dxvtsi3","userId":"client123"}
2025-06-04T21:54:34.9669546Z 
2025-06-04T21:54:34.9671474Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTreatment Plan Management[2m > [22m[2mshould generate automated treatment plan from assessment
2025-06-04T21:54:34.9674056Z [22m[39m[2025-06-04T21:54:34.933Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074933_ci999dcyn","clientId":"client123"}
2025-06-04T21:54:34.9674939Z 
2025-06-04T21:54:34.9676761Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTreatment Plan Management[2m > [22m[2mshould retrieve treatment plan by ID
2025-06-04T21:54:34.9679664Z [22m[39m[2025-06-04T21:54:34.934Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074934_1qspbm88y","clientId":"client123"}
2025-06-04T21:54:34.9680565Z 
2025-06-04T21:54:34.9682614Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mSession Documentation Integration[2m > [22m[2mshould integrate session documentation with treatment plan
2025-06-04T21:54:34.9685261Z [22m[39m[2025-06-04T21:54:34.935Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074935_4iq60mwk3","userId":"client123"}
2025-06-04T21:54:34.9686171Z 
2025-06-04T21:54:34.9688202Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mSession Documentation Integration[2m > [22m[2mshould integrate session documentation with treatment plan
2025-06-04T21:54:34.9691194Z [22m[39m[2025-06-04T21:54:34.936Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074935_6faa50onn","userId":"client123"}
2025-06-04T21:54:34.9692087Z 
2025-06-04T21:54:34.9694085Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mSession Documentation Integration[2m > [22m[2mshould integrate session documentation with treatment plan
2025-06-04T21:54:34.9696710Z [22m[39m[2025-06-04T21:54:34.936Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074936_swn3321d4","clientId":"client123"}
2025-06-04T21:54:34.9697572Z 
2025-06-04T21:54:34.9699809Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mSession Documentation Integration[2m > [22m[2mshould integrate session documentation with treatment plan
2025-06-04T21:54:34.9703166Z [22m[39m[2025-06-04T21:54:34.937Z] [INFO] [treatment-planning-service] Session documentation integrated with treatment plan {"sessionId":"session123","treatmentPlanId":"tp_1749074074936_swn3321d4"}
2025-06-04T21:54:34.9704321Z 
2025-06-04T21:54:34.9706331Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mSession Documentation Integration[2m > [22m[2mshould generate progress updates from session content
2025-06-04T21:54:34.9709064Z [22m[39m[2025-06-04T21:54:34.938Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074938_gvjhuzvk5","userId":"client123"}
2025-06-04T21:54:34.9710262Z 
2025-06-04T21:54:34.9712281Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mSession Documentation Integration[2m > [22m[2mshould generate progress updates from session content
2025-06-04T21:54:34.9714969Z [22m[39m[2025-06-04T21:54:34.939Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074938_m3plj9f0u","clientId":"client123"}
2025-06-04T21:54:34.9715822Z 
2025-06-04T21:54:34.9717986Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mSession Documentation Integration[2m > [22m[2mshould generate progress updates from session content
2025-06-04T21:54:34.9721469Z [22m[39m[2025-06-04T21:54:34.939Z] [INFO] [treatment-planning-service] Session documentation integrated with treatment plan {"sessionId":"session123","treatmentPlanId":"tp_1749074074938_m3plj9f0u"}
2025-06-04T21:54:34.9722617Z 
2025-06-04T21:54:34.9723948Z  [31m❯[39m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts [2m([22m[2m30 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 63[2mms[22m[39m
2025-06-04T21:54:34.9726148Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mSession Initialization[2m > [22mshould initialize a new real-time session successfully[32m 7[2mms[22m[39m
2025-06-04T21:54:34.9728516Z [31m   [31m×[31m RealTimeInterventionEngine[2m > [22mSession Initialization[2m > [22mshould initialize session without cognitive model[39m[32m 14[2mms[22m[39m
2025-06-04T21:54:34.9730694Z [31m     → expected [ { type: 'neutral', …(2) }, …(2) ] to deep equally contain ObjectContaining {"emotion": "neutral"}[39m
2025-06-04T21:54:34.9732723Z [31m   [31m×[31m RealTimeInterventionEngine[2m > [22mSession Initialization[2m > [22mshould handle initialization errors gracefully[39m[32m 8[2mms[22m[39m
2025-06-04T21:54:34.9734469Z [31m     → promise resolved "{ sessionId: 'test-session-3', …(7) }" instead of rejecting[39m
2025-06-04T21:54:34.9736154Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mReal-Time Input Processing[2m > [22mshould process text message input successfully[32m 2[2mms[22m[39m
2025-06-04T21:54:34.9738624Z [31m   [31m×[31m RealTimeInterventionEngine[2m > [22mReal-Time Input Processing[2m > [22mshould detect crisis language and escalate appropriately[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9740278Z [31m     → expected minimal to be critical[39m
2025-06-04T21:54:34.9741941Z [31m   [31m×[31m RealTimeInterventionEngine[2m > [22mReal-Time Input Processing[2m > [22mshould handle moderate risk scenarios[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9743249Z [31m     → expected minimal to be moderate[39m
2025-06-04T21:54:34.9744676Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mReal-Time Input Processing[2m > [22mshould update session context correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9746657Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mReal-Time Input Processing[2m > [22mshould handle non-existent session gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9749007Z [31m   [31m×[31m RealTimeInterventionEngine[2m > [22mRisk Assessment[2m > [22mshould calculate risk levels correctly[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.9750626Z [31m     → expected minimal to be low[39m
2025-06-04T21:54:34.9752132Z [31m   [31m×[31m RealTimeInterventionEngine[2m > [22mRisk Assessment[2m > [22mshould consider historical risk factors[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:34.9753318Z [31m     → expected false to be true[39m
2025-06-04T21:54:34.9754825Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mIntervention Generation[2m > [22mshould generate appropriate interventions for different risk levels[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9757044Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mIntervention Generation[2m > [22mshould respect maximum interventions per session[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9759033Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mSession Management[2m > [22mshould provide accurate session status[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9761287Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mSession Management[2m > [22mshould end session and generate comprehensive summary[32m 2[2mms[22m[39m
2025-06-04T21:54:34.9763252Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mSession Management[2m > [22mshould handle ending non-existent session[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9765797Z [31m   [31m×[31m RealTimeInterventionEngine[2m > [22mIntervention Effectiveness Tracking[2m > [22mshould update intervention effectiveness[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9767324Z [31m     → expected undefined to equal [object Object][39m
2025-06-04T21:54:34.9769003Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mIntervention Effectiveness Tracking[2m > [22mshould handle updating non-existent intervention[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9771491Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mCommunication Pattern Detection[2m > [22mshould detect crisis language patterns[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9773458Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mCommunication Pattern Detection[2m > [22mshould detect engagement patterns[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9775352Z    [32m✓[39m RealTimeInterventionEngine[2m > [22mSession Phase Detection[2m > [22mshould detect crisis phase[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9789008Z [31m   [31m×[31m RealTimeInterventionEngine[2m > [22mSession Phase Detection[2m > [22mshould transition through session phases based on time[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9790661Z [31m     → expected opening to be working[39m
2025-06-04T21:54:34.9792152Z    [32m✓[39m Utility Functions[2m > [22mperformQuickRiskAssessment[2m > [22mshould perform quick risk assessment for normal content[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9794241Z [31m   [31m×[31m Utility Functions[2m > [22mperformQuickRiskAssessment[2m > [22mshould detect high-risk content[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9795437Z [31m     → expected minimal to be critical[39m
2025-06-04T21:54:34.9796825Z    [32m✓[39m Utility Functions[2m > [22mperformQuickRiskAssessment[2m > [22mshould handle analysis errors gracefully[32m 0[2mms[22m[39m
2025-06-04T21:54:34.9798792Z    [32m✓[39m Utility Functions[2m > [22mcreateRealTimeInterventionEngine[2m > [22mshould create engine with all dependencies[32m 0[2mms[22m[39m
2025-06-04T21:54:34.9801033Z    [32m✓[39m Edge Cases and Error Handling[2m > [22mshould handle emotion analysis failures gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9802594Z    [32m✓[39m Edge Cases and Error Handling[2m > [22mshould handle empty or invalid input content[32m 2[2mms[22m[39m
2025-06-04T21:54:34.9804114Z    [32m✓[39m Edge Cases and Error Handling[2m > [22mshould handle concurrent session operations[32m 3[2mms[22m[39m
2025-06-04T21:54:34.9806164Z [31m   [31m×[31m Edge Cases and Error Handling[2m > [22mshould handle very long session durations[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:34.9807259Z [31m     → expected undefined to be closing[39m
2025-06-04T21:54:34.9808500Z    [32m✓[39m Edge Cases and Error Handling[2m > [22mshould handle malformed cognitive model data[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9811371Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTreatment Plan Reporting[2m > [22m[2mshould generate comprehensive treatment plan report
2025-06-04T21:54:34.9814032Z [22m[39m[2025-06-04T21:54:34.953Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074953_1lqa2yve6","userId":"client123"}
2025-06-04T21:54:34.9814927Z 
2025-06-04T21:54:34.9816728Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTreatment Plan Reporting[2m > [22m[2mshould generate comprehensive treatment plan report
2025-06-04T21:54:34.9819504Z [22m[39m[2025-06-04T21:54:34.953Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074953_nxftf80se","userId":"client123"}
2025-06-04T21:54:34.9820366Z 
2025-06-04T21:54:34.9822541Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTreatment Plan Reporting[2m > [22m[2mshould generate comprehensive treatment plan report
2025-06-04T21:54:34.9825120Z [22m[39m[2025-06-04T21:54:34.953Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074953_pv2t00yme","clientId":"client123"}
2025-06-04T21:54:34.9826007Z 
2025-06-04T21:54:34.9827934Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTreatment Plan Reporting[2m > [22m[2mshould handle report generation for non-existent plan
2025-06-04T21:54:34.9830858Z [22m[39m[2025-06-04T21:54:34.955Z] [ERROR] [treatment-planning-service] Failed to generate treatment plan report {"error":{},"planId":"non-existent-id"}
2025-06-04T21:54:34.9831767Z 
2025-06-04T21:54:34.9833618Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mOutcome Forecasting[2m > [22m[2mshould generate outcome forecasts for treatment plan
2025-06-04T21:54:34.9836108Z [22m[39m[2025-06-04T21:54:34.957Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074957_uw9kkzhbx","userId":"client123"}
2025-06-04T21:54:34.9836977Z 
2025-06-04T21:54:34.9838838Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mOutcome Forecasting[2m > [22m[2mshould generate outcome forecasts for treatment plan
2025-06-04T21:54:34.9841600Z [22m[39m[2025-06-04T21:54:34.957Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074957_nagzpjhut","userId":"client123"}
2025-06-04T21:54:34.9842509Z 
2025-06-04T21:54:34.9844351Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mOutcome Forecasting[2m > [22m[2mshould generate outcome forecasts for treatment plan
2025-06-04T21:54:34.9846890Z [22m[39m[2025-06-04T21:54:34.958Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074958_zhr8muygm","clientId":"client123"}
2025-06-04T21:54:34.9847746Z 
2025-06-04T21:54:34.9849687Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mRisk Assessment[2m > [22m[2mshould generate risk assessments for treatment plan
2025-06-04T21:54:34.9852206Z [22m[39m[2025-06-04T21:54:34.959Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074959_4rkf6xorq","userId":"client123"}
2025-06-04T21:54:34.9853396Z 
2025-06-04T21:54:34.9855168Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mRisk Assessment[2m > [22m[2mshould generate risk assessments for treatment plan
2025-06-04T21:54:34.9857691Z [22m[39m[2025-06-04T21:54:34.959Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074959_hs35ajo85","userId":"client123"}
2025-06-04T21:54:34.9858544Z 
2025-06-04T21:54:34.9860645Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mRisk Assessment[2m > [22m[2mshould generate risk assessments for treatment plan
2025-06-04T21:54:34.9863181Z [22m[39m[2025-06-04T21:54:34.959Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074959_jd0nth890","clientId":"client123"}
2025-06-04T21:54:34.9864042Z 
2025-06-04T21:54:34.9865923Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mRisk Assessment[2m > [22m[2mshould assess lower risk for clients with fewer risk factors
2025-06-04T21:54:34.9868483Z [22m[39m[2025-06-04T21:54:34.961Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074961_txdfr47if","userId":"client123"}
2025-06-04T21:54:34.9870096Z 
2025-06-04T21:54:34.9872154Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mRisk Assessment[2m > [22m[2mshould assess lower risk for clients with fewer risk factors
2025-06-04T21:54:34.9874778Z [22m[39m[2025-06-04T21:54:34.961Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074961_5jxnvdvsw","userId":"client123"}
2025-06-04T21:54:34.9875666Z 
2025-06-04T21:54:34.9877488Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mRisk Assessment[2m > [22m[2mshould assess lower risk for clients with fewer risk factors
2025-06-04T21:54:34.9880346Z [22m[39m[2025-06-04T21:54:34.961Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074961_l7xm551qc","clientId":"client123"}
2025-06-04T21:54:34.9881241Z 
2025-06-04T21:54:34.9883033Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTemplate System[2m > [22m[2mshould use anxiety template for anxiety diagnosis
2025-06-04T21:54:34.9885490Z [22m[39m[2025-06-04T21:54:34.962Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074962_2ik6oq491","userId":"client123"}
2025-06-04T21:54:34.9886374Z 
2025-06-04T21:54:34.9888171Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTemplate System[2m > [22m[2mshould use anxiety template for anxiety diagnosis
2025-06-04T21:54:34.9890846Z [22m[39m[2025-06-04T21:54:34.962Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074962_ym7vou9dz","userId":"client123"}
2025-06-04T21:54:34.9891727Z 
2025-06-04T21:54:34.9893463Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTemplate System[2m > [22m[2mshould use anxiety template for anxiety diagnosis
2025-06-04T21:54:34.9895950Z [22m[39m[2025-06-04T21:54:34.962Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074962_mwwa88y8a","clientId":"client123"}
2025-06-04T21:54:34.9896804Z 
2025-06-04T21:54:34.9898578Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTemplate System[2m > [22m[2mshould use depression template for depression diagnosis
2025-06-04T21:54:34.9901267Z [22m[39m[2025-06-04T21:54:34.963Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074963_3v6p9lwxq","userId":"client123"}
2025-06-04T21:54:34.9902458Z 
2025-06-04T21:54:34.9904296Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTemplate System[2m > [22m[2mshould use depression template for depression diagnosis
2025-06-04T21:54:34.9906868Z [22m[39m[2025-06-04T21:54:34.964Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074964_r43syuwsf","userId":"client123"}
2025-06-04T21:54:34.9907728Z 
2025-06-04T21:54:34.9909776Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTemplate System[2m > [22m[2mshould use depression template for depression diagnosis
2025-06-04T21:54:34.9912356Z [22m[39m[2025-06-04T21:54:34.964Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074964_6u3ai3c5x","clientId":"client123"}
2025-06-04T21:54:34.9913232Z 
2025-06-04T21:54:34.9915032Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTemplate System[2m > [22m[2mshould generate generic plan when no template matches
2025-06-04T21:54:34.9917847Z [22m[39m[2025-06-04T21:54:34.965Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074965_o44fnlef2","userId":"client123"}
2025-06-04T21:54:34.9918749Z 
2025-06-04T21:54:34.9920795Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mTemplate System[2m > [22m[2mshould generate generic plan when no template matches
2025-06-04T21:54:34.9923366Z [22m[39m[2025-06-04T21:54:34.965Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074965_732kmelgf","clientId":"client123"}
2025-06-04T21:54:34.9924266Z 
2025-06-04T21:54:34.9925953Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mError Handling[2m > [22m[2mshould handle goal creation errors gracefully
2025-06-04T21:54:34.9930063Z [22m[39m[2025-06-04T21:54:34.966Z] [ERROR] [treatment-planning-service] Failed to create goal {"error":{},"goalData":{"userId":"user123","title":"Test Goal","description":"Test description","status":"active","priority":"medium","category":"Test","startDate":"2025-06-04T21:54:34.966Z","barriers":[],"supportingFactors":[]}}
2025-06-04T21:54:34.9931708Z 
2025-06-04T21:54:34.9933508Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mError Handling[2m > [22m[2mshould handle progress update errors gracefully
2025-06-04T21:54:34.9935926Z [22m[39m[2025-06-04T21:54:34.967Z] [ERROR] [treatment-planning-service] Failed to update goal progress {"error":{},"goalId":"non-existent-goal"}
2025-06-04T21:54:34.9936768Z 
2025-06-04T21:54:34.9938616Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mError Handling[2m > [22m[2mshould handle treatment plan creation errors gracefully
2025-06-04T21:54:34.9945508Z [22m[39m[2025-06-04T21:54:34.968Z] [ERROR] [treatment-planning-service] Failed to create treatment plan {"error":{},"planData":{"clientId":"client123","therapistId":"therapist456","planName":"Test Plan","description":"Test description","status":"active","lastReviewDate":"2025-06-04T21:54:34.968Z","nextReviewDate":"2025-06-04T21:54:34.968Z","primaryDiagnosis":["test"],"secondaryDiagnosis":[],"treatmentGoals":[],"interventions":[],"clientStrengths":[],"riskFactors":[],"protectiveFactors":[],"treatmentHistory":[],"outcomeMeasures":[],"progressIndicators":[],"planRationale":"Test rationale","expectedDuration":12,"reviewFrequency":4,"dischargeCriteria":[]}}
2025-06-04T21:54:34.9949367Z 
2025-06-04T21:54:34.9951216Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mError Handling[2m > [22m[2mshould handle session integration errors gracefully
2025-06-04T21:54:34.9954011Z [22m[39m[2025-06-04T21:54:34.968Z] [ERROR] [treatment-planning-service] Failed to integrate session documentation {"error":{},"sessionId":"session123","treatmentPlanId":"non-existent-plan"}
2025-06-04T21:54:34.9955081Z 
2025-06-04T21:54:34.9956975Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mData Persistence[2m > [22m[2mshould persist and retrieve goals correctly
2025-06-04T21:54:34.9959692Z [22m[39m[2025-06-04T21:54:34.969Z] [INFO] [treatment-planning-service] Goal created successfully {"goalId":"tp_1749074074969_kcp5w7ryo","userId":"user123"}
2025-06-04T21:54:34.9960556Z 
2025-06-04T21:54:34.9962411Z [90mstderr[2m | src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22m[2mTreatmentPlanningService[2m > [22m[2mData Persistence[2m > [22m[2mshould persist and retrieve treatment plans correctly
2025-06-04T21:54:34.9964944Z [22m[39m[2025-06-04T21:54:34.970Z] [INFO] [treatment-planning-service] Treatment plan created {"planId":"tp_1749074074970_dvihlq3xl","clientId":"client123"}
2025-06-04T21:54:34.9965816Z 
2025-06-04T21:54:34.9967308Z  [31m❯[39m src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts [2m([22m[2m24 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 58[2mms[22m[39m
2025-06-04T21:54:34.9969444Z    [32m✓[39m TreatmentPlanningService[2m > [22mGoal Management[2m > [22mshould create a new goal successfully[32m 7[2mms[22m[39m
2025-06-04T21:54:34.9971247Z    [32m✓[39m TreatmentPlanningService[2m > [22mGoal Management[2m > [22mshould update goal progress correctly[32m 2[2mms[22m[39m
2025-06-04T21:54:34.9973161Z    [32m✓[39m TreatmentPlanningService[2m > [22mGoal Management[2m > [22mshould mark goal as achieved when progress reaches 100%[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9975156Z    [32m✓[39m TreatmentPlanningService[2m > [22mGoal Management[2m > [22mshould retrieve user goals with optional status filter[32m 4[2mms[22m[39m
2025-06-04T21:54:34.9977208Z    [32m✓[39m TreatmentPlanningService[2m > [22mTreatment Plan Management[2m > [22mshould create a comprehensive treatment plan[32m 2[2mms[22m[39m
2025-06-04T21:54:34.9979648Z    [32m✓[39m TreatmentPlanningService[2m > [22mTreatment Plan Management[2m > [22mshould generate automated treatment plan from assessment[32m 4[2mms[22m[39m
2025-06-04T21:54:34.9981752Z    [32m✓[39m TreatmentPlanningService[2m > [22mTreatment Plan Management[2m > [22mshould retrieve treatment plan by ID[32m 1[2mms[22m[39m
2025-06-04T21:54:34.9997680Z    [32m✓[39m TreatmentPlanningService[2m > [22mTreatment Plan Management[2m > [22mshould return null for non-existent treatment plan[32m 0[2mms[22m[39m
2025-06-04T21:54:35.0000163Z    [32m✓[39m TreatmentPlanningService[2m > [22mSession Documentation Integration[2m > [22mshould integrate session documentation with treatment plan[32m 3[2mms[22m[39m
2025-06-04T21:54:35.0002725Z [31m   [31m×[31m TreatmentPlanningService[2m > [22mSession Documentation Integration[2m > [22mshould generate progress updates from session content[39m[32m 15[2mms[22m[39m
2025-06-04T21:54:35.0004214Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:54:35.0005731Z    [32m✓[39m TreatmentPlanningService[2m > [22mTreatment Plan Reporting[2m > [22mshould generate comprehensive treatment plan report[32m 2[2mms[22m[39m
2025-06-04T21:54:35.0007887Z    [32m✓[39m TreatmentPlanningService[2m > [22mTreatment Plan Reporting[2m > [22mshould handle report generation for non-existent plan[32m 2[2mms[22m[39m
2025-06-04T21:54:35.0010556Z [31m   [31m×[31m TreatmentPlanningService[2m > [22mOutcome Forecasting[2m > [22mshould generate outcome forecasts for treatment plan[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:35.0012212Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:54:35.0013601Z    [32m✓[39m TreatmentPlanningService[2m > [22mRisk Assessment[2m > [22mshould generate risk assessments for treatment plan[32m 2[2mms[22m[39m
2025-06-04T21:54:35.0015614Z    [32m✓[39m TreatmentPlanningService[2m > [22mRisk Assessment[2m > [22mshould assess lower risk for clients with fewer risk factors[32m 1[2mms[22m[39m
2025-06-04T21:54:35.0017800Z [31m   [31m×[31m TreatmentPlanningService[2m > [22mTemplate System[2m > [22mshould use anxiety template for anxiety diagnosis[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:35.0019317Z [31m     → expected undefined to be defined[39m
2025-06-04T21:54:35.0020968Z [31m   [31m×[31m TreatmentPlanningService[2m > [22mTemplate System[2m > [22mshould use depression template for depression diagnosis[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:35.0022296Z [31m     → expected undefined to be defined[39m
2025-06-04T21:54:35.0023718Z    [32m✓[39m TreatmentPlanningService[2m > [22mTemplate System[2m > [22mshould generate generic plan when no template matches[32m 1[2mms[22m[39m
2025-06-04T21:54:35.0025620Z    [32m✓[39m TreatmentPlanningService[2m > [22mError Handling[2m > [22mshould handle goal creation errors gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:35.0027747Z    [32m✓[39m TreatmentPlanningService[2m > [22mError Handling[2m > [22mshould handle progress update errors gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:35.0029935Z    [32m✓[39m TreatmentPlanningService[2m > [22mError Handling[2m > [22mshould handle treatment plan creation errors gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:35.0031910Z    [32m✓[39m TreatmentPlanningService[2m > [22mError Handling[2m > [22mshould handle session integration errors gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:35.0033760Z    [32m✓[39m TreatmentPlanningService[2m > [22mData Persistence[2m > [22mshould persist and retrieve goals correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:35.0035719Z    [32m✓[39m TreatmentPlanningService[2m > [22mData Persistence[2m > [22mshould persist and retrieve treatment plans correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4737999Z  [31m❯[39m src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts [2m([22m[2m36 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 45[2mms[22m[39m
2025-06-04T21:54:35.4740539Z    [32m✓[39m CopingStrategyResponseService[2m > [22mCoping Strategy Selection[2m > [22mshould select appropriate coping strategies based on stress level[32m 3[2mms[22m[39m
2025-06-04T21:54:35.4742848Z    [32m✓[39m CopingStrategyResponseService[2m > [22mCoping Strategy Selection[2m > [22mshould consider social support availability in strategy selection[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4745025Z    [32m✓[39m CopingStrategyResponseService[2m > [22mCoping Strategy Selection[2m > [22mshould avoid contraindicated strategies[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4747162Z    [32m✓[39m CopingStrategyResponseService[2m > [22mCoping Strategy Selection[2m > [22mshould consider past effectiveness when enabled[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4749496Z    [32m✓[39m CopingStrategyResponseService[2m > [22mCoping Strategy Selection[2m > [22mshould limit number of strategies based on options[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4751425Z    [32m✓[39m CopingStrategyResponseService[2m > [22mResponse Text Generation[2m > [22mshould generate contextual response text[32m 3[2mms[22m[39m
2025-06-04T21:54:35.4753880Z    [32m✓[39m CopingStrategyResponseService[2m > [22mResponse Text Generation[2m > [22mshould adapt response text to situation[32m 2[2mms[22m[39m
2025-06-04T21:54:35.4756105Z    [32m✓[39m CopingStrategyResponseService[2m > [22mResponse Text Generation[2m > [22mshould include secondary strategy when multiple strategies available[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4757864Z [31m   [31m×[31m CopingStrategyResponseService[2m > [22mResponse Text Generation[2m > [22mshould handle cases with no effective strategies[39m[32m 14[2mms[22m[39m
2025-06-04T21:54:35.4758823Z [31m     → expected 'When I\'m stressed about crisis situa…' to contain 'don\'t know what to do'[39m
2025-06-04T21:54:35.4760096Z    [32m✓[39m CopingStrategyResponseService[2m > [22mDefensive Mechanisms[2m > [22mshould apply defensive mechanisms for high-stress situations[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4761381Z [31m   [31m×[31m CopingStrategyResponseService[2m > [22mDefensive Mechanisms[2m > [22mshould apply relationship-specific defensive mechanisms[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:35.4762105Z [31m     → expected false to be true[39m
2025-06-04T21:54:35.4762898Z    [32m✓[39m CopingStrategyResponseService[2m > [22mDefensive Mechanisms[2m > [22mshould apply deflection for high-resistance patients[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4764025Z    [32m✓[39m CopingStrategyResponseService[2m > [22mDefensive Mechanisms[2m > [22mshould not include defensive mechanisms when disabled[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4765121Z    [32m✓[39m CopingStrategyResponseService[2m > [22mContextual Adaptations[2m > [22mshould adapt for public environment constraints[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4766448Z [31m   [31m×[31m CopingStrategyResponseService[2m > [22mContextual Adaptations[2m > [22mshould acknowledge lack of social support[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4767132Z [31m     → expected false to be true[39m
2025-06-04T21:54:35.4767886Z    [32m✓[39m CopingStrategyResponseService[2m > [22mContextual Adaptations[2m > [22mshould acknowledge past ineffective attempts[32m 1[2mms[22m[39m
2025-06-04T21:54:35.4768950Z    [32m✓[39m CopingStrategyResponseService[2m > [22mContextual Adaptations[2m > [22mshould acknowledge cognitive limitations[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4771230Z    [32m✓[39m CopingStrategyResponseService[2m > [22mTherapeutic Opportunities Identification[2m > [22mshould identify opportunities for maladaptive coping[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4773900Z [31m   [31m×[31m CopingStrategyResponseService[2m > [22mTherapeutic Opportunities Identification[2m > [22mshould identify opportunities for high stress with low effective coping[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:35.4775715Z [31m     → expected [ Array(2) ] to include 'Introduce stress management techniques'[39m
2025-06-04T21:54:35.4777513Z    [32m✓[39m CopingStrategyResponseService[2m > [22mTherapeutic Opportunities Identification[2m > [22mshould identify opportunities for social support deficits[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4780143Z    [32m✓[39m CopingStrategyResponseService[2m > [22mTherapeutic Opportunities Identification[2m > [22mshould identify opportunities for cognitive capacity issues[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4782483Z    [32m✓[39m CopingStrategyResponseService[2m > [22mEffectiveness Prediction[2m > [22mshould predict lower effectiveness for high-resistance patients[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4784666Z    [32m✓[39m CopingStrategyResponseService[2m > [22mEffectiveness Prediction[2m > [22mshould predict lower effectiveness for high stress situations[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4787129Z    [32m✓[39m CopingStrategyResponseService[2m > [22mEffectiveness Prediction[2m > [22mshould predict lower effectiveness for impaired cognitive capacity with high-load strategies[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4789647Z    [32m✓[39m CopingStrategyResponseService[2m > [22mEffectiveness Prediction[2m > [22mshould predict adaptive potential based on strategy type[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4791910Z    [32m✓[39m CopingStrategyResponseService[2m > [22mFollow-up Recommendations[2m > [22mshould recommend foundation building for low short-term effectiveness[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4794476Z    [32m✓[39m CopingStrategyResponseService[2m > [22mFollow-up Recommendations[2m > [22mshould recommend addressing beliefs for low long-term effectiveness[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4796701Z    [32m✓[39m CopingStrategyResponseService[2m > [22mFollow-up Recommendations[2m > [22mshould recommend alliance building for high-resistance patients[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4798913Z    [32m✓[39m CopingStrategyResponseService[2m > [22mFollow-up Recommendations[2m > [22mshould recommend awareness building for low insight patients[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4801118Z    [32m✓[39m CopingStrategyResponseService[2m > [22mIntegration and Utility Functions[2m > [22mshould work with the utility function[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4803026Z    [32m✓[39m CopingStrategyResponseService[2m > [22mIntegration and Utility Functions[2m > [22mshould handle different stress levels in utility function[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4805099Z    [32m✓[39m CopingStrategyResponseService[2m > [22mIntegration and Utility Functions[2m > [22mshould provide consistent service instance[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4807170Z    [32m✓[39m CopingStrategyResponseService[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle empty situation gracefully[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4809637Z    [32m✓[39m CopingStrategyResponseService[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle minimal cognitive model[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4811669Z    [32m✓[39m CopingStrategyResponseService[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle extreme criteria values[32m 0[2mms[22m[39m
2025-06-04T21:54:35.4813687Z    [32m✓[39m CopingStrategyResponseService[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle malformed options gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:36.4873795Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts
2025-06-04T21:54:36.4874893Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.4876988Z 
2025-06-04T21:54:36.4935655Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mComprehensive Insights Generation[2m > [22m[2mshould generate complete insights with all focus areas
2025-06-04T21:54:36.4939538Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.4939966Z 
2025-06-04T21:54:36.5053123Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mComprehensive Insights Generation[2m > [22m[2mshould generate complete insights with all focus areas
2025-06-04T21:54:36.5055378Z [22m[39mError generating insights: TypeError: Cannot read properties of undefined (reading 'some')
2025-06-04T21:54:36.5056810Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:962:28
2025-06-04T21:54:36.5057703Z     at Array.filter (<anonymous>)
2025-06-04T21:54:36.5059645Z     at PatientPsiInsightsService.analyzeInterventionEffectiveness [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:961:39[90m)[39m
2025-06-04T21:54:36.5062348Z     at PatientPsiInsightsService.generateTherapeuticInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:555:12[90m)[39m
2025-06-04T21:54:36.5064849Z     at PatientPsiInsightsService.generateFreshInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:590:14[90m)[39m
2025-06-04T21:54:36.5067315Z     at PatientPsiInsightsService.generateInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:210:35[90m)[39m
2025-06-04T21:54:36.5069613Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:253:38
2025-06-04T21:54:36.5072130Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:36.5074373Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:36.5076588Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:36.5077593Z 
2025-06-04T21:54:36.5082529Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mComprehensive Insights Generation[2m > [22m[2mshould respect focus area filtering
2025-06-04T21:54:36.5084558Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5085108Z 
2025-06-04T21:54:36.5128752Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mComprehensive Insights Generation[2m > [22m[2mshould handle caching correctly
2025-06-04T21:54:36.5131933Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mComprehensive Insights Generation[2m > [22m[2mshould handle caching correctly
2025-06-04T21:54:36.5134677Z [22m[39mError generating insights: TypeError: Cannot read properties of undefined (reading 'some')
2025-06-04T21:54:36.5135828Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5138467Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:962:28
2025-06-04T21:54:36.5139412Z 
2025-06-04T21:54:36.5141669Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mBelief Distribution Analysis[2m > [22m[2mshould analyze belief distribution correctly
2025-06-04T21:54:36.5145290Z     at Array.filter (<anonymous>)
2025-06-04T21:54:36.5147095Z     at PatientPsiInsightsService.analyzeInterventionEffectiveness [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:961:39[90m)[39m
2025-06-04T21:54:36.5149999Z     at PatientPsiInsightsService.generateTherapeuticInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:555:12[90m)[39m
2025-06-04T21:54:36.5152506Z     at PatientPsiInsightsService.generateFreshInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:590:14[90m)[39m
2025-06-04T21:54:36.5154938Z     at PatientPsiInsightsService.generateInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:210:35[90m)[39m
2025-06-04T21:54:36.5164507Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:294:39
2025-06-04T21:54:36.5166643Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:36.5173792Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:36.5176087Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:36.5177051Z 
2025-06-04T21:54:36.5177507Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5177865Z 
2025-06-04T21:54:36.5179799Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mBelief Distribution Analysis[2m > [22m[2mshould handle empty model list
2025-06-04T21:54:36.5181747Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5182103Z 
2025-06-04T21:54:36.5183897Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mEmotional Pattern Analysis[2m > [22m[2mshould analyze emotional patterns correctly
2025-06-04T21:54:36.5185615Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5185987Z 
2025-06-04T21:54:36.5202446Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mCommunication Style Analysis[2m > [22m[2mshould analyze communication styles correctly
2025-06-04T21:54:36.5206092Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5209065Z 
2025-06-04T21:54:36.5214501Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mDistortion Pattern Analysis[2m > [22m[2mshould analyze distortion patterns correctly
2025-06-04T21:54:36.5221929Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5222304Z 
2025-06-04T21:54:36.5232088Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mTherapeutic Insights Generation[2m > [22m[2mshould generate therapeutic insights correctly
2025-06-04T21:54:36.5237972Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5238643Z 
2025-06-04T21:54:36.5245376Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mDataset Quality Metrics[2m > [22m[2mshould calculate complexity correctly
2025-06-04T21:54:36.5247235Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5250378Z 
2025-06-04T21:54:36.5261575Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mDataset Quality Metrics[2m > [22m[2mshould calculate complexity correctly
2025-06-04T21:54:36.5263854Z [22m[39mError generating insights: TypeError: Cannot read properties of undefined (reading 'some')
2025-06-04T21:54:36.5266428Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:962:28
2025-06-04T21:54:36.5267331Z     at Array.filter (<anonymous>)
2025-06-04T21:54:36.5269046Z     at PatientPsiInsightsService.analyzeInterventionEffectiveness [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:961:39[90m)[39m
2025-06-04T21:54:36.5271889Z     at PatientPsiInsightsService.generateTherapeuticInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:555:12[90m)[39m
2025-06-04T21:54:36.5274439Z     at PatientPsiInsightsService.generateFreshInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:590:14[90m)[39m
2025-06-04T21:54:36.5276873Z     at PatientPsiInsightsService.generateInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:210:35[90m)[39m
2025-06-04T21:54:36.5278689Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:488:32
2025-06-04T21:54:36.5284482Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:36.5286608Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:36.5288892Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:36.5290021Z 
2025-06-04T21:54:36.5291694Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mDataset Quality Metrics[2m > [22m[2mshould calculate diversity score correctly
2025-06-04T21:54:36.5293906Z [22m[39mError generating insights: TypeError: Cannot read properties of undefined (reading 'some')
2025-06-04T21:54:36.5295276Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:962:28
2025-06-04T21:54:36.5296110Z     at Array.filter (<anonymous>)
2025-06-04T21:54:36.5297761Z     at PatientPsiInsightsService.analyzeInterventionEffectiveness [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:961:39[90m)[39m
2025-06-04T21:54:36.5300836Z     at PatientPsiInsightsService.generateTherapeuticInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:555:12[90m)[39m
2025-06-04T21:54:36.5303257Z     at PatientPsiInsightsService.generateFreshInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:590:14[90m)[39m
2025-06-04T21:54:36.5305544Z     at PatientPsiInsightsService.generateInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:210:35[90m)[39m
2025-06-04T21:54:36.5307441Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:501:32
2025-06-04T21:54:36.5310069Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:36.5312170Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:36.5316156Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:36.5325987Z 
2025-06-04T21:54:36.5327685Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mDataset Quality Metrics[2m > [22m[2mshould calculate quality score correctly
2025-06-04T21:54:36.5329847Z [22m[39mError generating insights: TypeError: Cannot read properties of undefined (reading 'some')
2025-06-04T21:54:36.5331222Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:962:28
2025-06-04T21:54:36.5332086Z     at Array.filter (<anonymous>)
2025-06-04T21:54:36.5333819Z     at PatientPsiInsightsService.analyzeInterventionEffectiveness [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:961:39[90m)[39m
2025-06-04T21:54:36.5336415Z     at PatientPsiInsightsService.generateTherapeuticInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:555:12[90m)[39m
2025-06-04T21:54:36.5338875Z     at PatientPsiInsightsService.generateFreshInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:590:14[90m)[39m
2025-06-04T21:54:36.5341472Z     at PatientPsiInsightsService.generateInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:210:35[90m)[39m
2025-06-04T21:54:36.5343497Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:513:32
2025-06-04T21:54:36.5345498Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:36.5347667Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:36.5350107Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:36.5351402Z 
2025-06-04T21:54:36.5353171Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mDataset Quality Metrics[2m > [22m[2mshould calculate diversity score correctly
2025-06-04T21:54:36.5354824Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5355196Z 
2025-06-04T21:54:36.5356910Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mDataset Quality Metrics[2m > [22m[2mshould calculate quality score correctly
2025-06-04T21:54:36.5358547Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5358916Z 
2025-06-04T21:54:36.5360918Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle models with minimal data
2025-06-04T21:54:36.5362975Z [22m[39mError generating insights: TypeError: Cannot read properties of undefined (reading 'some')
2025-06-04T21:54:36.5364456Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:962:28
2025-06-04T21:54:36.5365326Z     at Array.filter (<anonymous>)
2025-06-04T21:54:36.5367328Z     at PatientPsiInsightsService.analyzeInterventionEffectiveness [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:961:39[90m)[39m
2025-06-04T21:54:36.5370236Z     at PatientPsiInsightsService.generateTherapeuticInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:555:12[90m)[39m
2025-06-04T21:54:36.5372773Z     at PatientPsiInsightsService.generateFreshInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:590:14[90m)[39m
2025-06-04T21:54:36.5375193Z     at PatientPsiInsightsService.generateInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:210:35[90m)[39m
2025-06-04T21:54:36.5377131Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:572:38
2025-06-04T21:54:36.5379381Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:36.5381577Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:36.5383772Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:36.5384772Z 
2025-06-04T21:54:36.5386494Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle empty model array
2025-06-04T21:54:36.5388109Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5388473Z 
2025-06-04T21:54:36.5390440Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle models with minimal data
2025-06-04T21:54:36.5392066Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5392427Z 
2025-06-04T21:54:36.5394172Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle invalid options gracefully
2025-06-04T21:54:36.5395777Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5396141Z 
2025-06-04T21:54:36.5398931Z  [32m✓[39m src/lib/ai/bias-detection/cache.test.ts [2m([22m[2m41 tests[22m[2m)[22m[33m 439[2mms[22m[39m
2025-06-04T21:54:36.5402689Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mUtility Functions[2m > [22m[2mshould generate quick insights with simplified options
2025-06-04T21:54:36.5404683Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5405304Z 
2025-06-04T21:54:36.5419680Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mPerformance and Caching[2m > [22m[2mshould cache results and improve performance on subsequent calls
2025-06-04T21:54:36.5423009Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mPerformance and Caching[2m > [22m[2mshould cache results and improve performance on subsequent calls
2025-06-04T21:54:36.5424692Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5425075Z 
2025-06-04T21:54:36.5460558Z [22m[39mError generating insights: TypeError: Cannot read properties of undefined (reading 'some')
2025-06-04T21:54:36.5462008Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:962:28
2025-06-04T21:54:36.5462893Z     at Array.filter (<anonymous>)
2025-06-04T21:54:36.5465028Z     at PatientPsiInsightsService.analyzeInterventionEffectiveness [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:961:39[90m)[39m
2025-06-04T21:54:36.5467729Z     at PatientPsiInsightsService.generateTherapeuticInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:555:12[90m)[39m
2025-06-04T21:54:36.5470485Z     at PatientPsiInsightsService.generateFreshInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:590:14[90m)[39m
2025-06-04T21:54:36.5472940Z     at PatientPsiInsightsService.generateInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:210:35[90m)[39m
2025-06-04T21:54:36.5474956Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:615:39
2025-06-04T21:54:36.5476975Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:36.5483608Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:36.5485889Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:36.5486894Z 
2025-06-04T21:54:36.5488639Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mPerformance and Caching[2m > [22m[2mshould handle large datasets efficiently
2025-06-04T21:54:36.5490518Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5490889Z 
2025-06-04T21:54:36.5497375Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mPerformance and Caching[2m > [22m[2mshould handle large datasets efficiently
2025-06-04T21:54:36.5513807Z [22m[39mError generating insights: TypeError: Cannot read properties of undefined (reading 'some')
2025-06-04T21:54:36.5515353Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:962:28
2025-06-04T21:54:36.5516194Z     at Array.filter (<anonymous>)
2025-06-04T21:54:36.5517883Z     at PatientPsiInsightsService.analyzeInterventionEffectiveness [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:961:39[90m)[39m
2025-06-04T21:54:36.5521010Z     at PatientPsiInsightsService.generateTherapeuticInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:555:12[90m)[39m
2025-06-04T21:54:36.5523321Z     at PatientPsiInsightsService.generateFreshInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:590:14[90m)[39m
2025-06-04T21:54:36.5525596Z     at PatientPsiInsightsService.generateInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:210:35[90m)[39m
2025-06-04T21:54:36.5529041Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:646:38
2025-06-04T21:54:36.5531077Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:36.5532852Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:36.5534928Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:36.5535609Z 
2025-06-04T21:54:36.5537367Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mStatistical Accuracy[2m > [22m[2mshould calculate accurate statistical measures
2025-06-04T21:54:36.5538513Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5538722Z 
2025-06-04T21:54:36.5540086Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mStatistical Accuracy[2m > [22m[2mshould maintain data consistency across analyses
2025-06-04T21:54:36.5541388Z [22m[39mError generating insights: TypeError: Cannot read properties of undefined (reading 'some')
2025-06-04T21:54:36.5542585Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:962:28
2025-06-04T21:54:36.5543452Z     at Array.filter (<anonymous>)
2025-06-04T21:54:36.5545098Z     at PatientPsiInsightsService.analyzeInterventionEffectiveness [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:961:39[90m)[39m
2025-06-04T21:54:36.5547661Z     at PatientPsiInsightsService.generateTherapeuticInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:555:12[90m)[39m
2025-06-04T21:54:36.5550325Z     at PatientPsiInsightsService.generateFreshInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:590:14[90m)[39m
2025-06-04T21:54:36.5552645Z     at PatientPsiInsightsService.generateInsights [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-insights.ts:210:35[90m)[39m
2025-06-04T21:54:36.5554666Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:678:38
2025-06-04T21:54:36.5556618Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:36.5558686Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:36.5560889Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:36.5562728Z 
2025-06-04T21:54:36.5564400Z [90mstdout[2m | src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22m[2mPatientPsiInsightsService[2m > [22m[2mStatistical Accuracy[2m > [22m[2mshould maintain data consistency across analyses
2025-06-04T21:54:36.5566247Z [22m[39mPatient-Psi Insights Service initialized
2025-06-04T21:54:36.5566587Z 
2025-06-04T21:54:36.5567601Z  [31m❯[39m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 61[2mms[22m[39m
2025-06-04T21:54:36.5570003Z [31m   [31m×[31m PatientPsiInsightsService[2m > [22mComprehensive Insights Generation[2m > [22mshould generate complete insights with all focus areas[39m[32m 14[2mms[22m[39m
2025-06-04T21:54:36.5571731Z [31m     → Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T21:54:36.5573257Z    [32m✓[39m PatientPsiInsightsService[2m > [22mComprehensive Insights Generation[2m > [22mshould respect focus area filtering[32m 3[2mms[22m[39m
2025-06-04T21:54:36.5575162Z [31m   [31m×[31m PatientPsiInsightsService[2m > [22mComprehensive Insights Generation[2m > [22mshould handle caching correctly[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:36.5576669Z [31m     → Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T21:54:36.5578203Z    [32m✓[39m PatientPsiInsightsService[2m > [22mBelief Distribution Analysis[2m > [22mshould analyze belief distribution correctly[32m 3[2mms[22m[39m
2025-06-04T21:54:36.5580084Z    [32m✓[39m PatientPsiInsightsService[2m > [22mBelief Distribution Analysis[2m > [22mshould handle empty model list[32m 1[2mms[22m[39m
2025-06-04T21:54:36.5582292Z [31m   [31m×[31m PatientPsiInsightsService[2m > [22mEmotional Pattern Analysis[2m > [22mshould analyze emotional patterns correctly[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:36.5583426Z [31m     → expected undefined to be defined[39m
2025-06-04T21:54:36.5584719Z    [32m✓[39m PatientPsiInsightsService[2m > [22mCommunication Style Analysis[2m > [22mshould analyze communication styles correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:36.5586552Z    [32m✓[39m PatientPsiInsightsService[2m > [22mDistortion Pattern Analysis[2m > [22mshould analyze distortion patterns correctly[32m 2[2mms[22m[39m
2025-06-04T21:54:36.5588685Z [31m   [31m×[31m PatientPsiInsightsService[2m > [22mTherapeutic Insights Generation[2m > [22mshould generate therapeutic insights correctly[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:36.5590211Z [31m     → Cannot read properties of undefined (reading 'some')[39m
2025-06-04T21:54:36.5591417Z    [32m✓[39m PatientPsiInsightsService[2m > [22mDataset Quality Metrics[2m > [22mshould calculate complexity correctly[32m 2[2mms[22m[39m
2025-06-04T21:54:36.5593080Z    [32m✓[39m PatientPsiInsightsService[2m > [22mDataset Quality Metrics[2m > [22mshould calculate diversity score correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:36.5594860Z    [32m✓[39m PatientPsiInsightsService[2m > [22mDataset Quality Metrics[2m > [22mshould calculate quality score correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:36.5596268Z    [32m✓[39m PatientPsiInsightsService[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle empty model array[32m 1[2mms[22m[39m
2025-06-04T21:54:36.5597728Z [31m   [31m×[31m PatientPsiInsightsService[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle models with minimal data[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:36.5598626Z [31m     → Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T21:54:36.5599832Z    [32m✓[39m PatientPsiInsightsService[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle invalid options gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:36.5600903Z    [32m✓[39m PatientPsiInsightsService[2m > [22mUtility Functions[2m > [22mshould generate quick insights with simplified options[32m 8[2mms[22m[39m
2025-06-04T21:54:36.5602147Z [31m   [31m×[31m PatientPsiInsightsService[2m > [22mPerformance and Caching[2m > [22mshould cache results and improve performance on subsequent calls[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:36.5603306Z [31m     → Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T21:54:36.5604268Z [31m   [31m×[31m PatientPsiInsightsService[2m > [22mPerformance and Caching[2m > [22mshould handle large datasets efficiently[39m[32m 8[2mms[22m[39m
2025-06-04T21:54:36.5605126Z [31m     → Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T21:54:36.5606001Z    [32m✓[39m PatientPsiInsightsService[2m > [22mStatistical Accuracy[2m > [22mshould calculate accurate statistical measures[32m 1[2mms[22m[39m
2025-06-04T21:54:36.5607135Z [31m   [31m×[31m PatientPsiInsightsService[2m > [22mStatistical Accuracy[2m > [22mshould maintain data consistency across analyses[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:36.5608018Z [31m     → Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T21:54:37.1106236Z  [32m✓[39m src/tests/crypto.test.ts [2m([22m[2m22 tests[22m[2m | [22m[33m4 skipped[39m[2m)[22m[32m 22[2mms[22m[39m
2025-06-04T21:54:37.6863198Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts
2025-06-04T21:54:37.6868832Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.6869466Z 
2025-06-04T21:54:37.6938209Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mResponse Context Building[2m > [22m[2mshould build comprehensive response context
2025-06-04T21:54:37.6940230Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.6940599Z 
2025-06-04T21:54:37.6993386Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mResponse Context Building[2m > [22m[2mshould include session progression details
2025-06-04T21:54:37.6995801Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.6996795Z 
2025-06-04T21:54:37.7004235Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mResponse Context Building[2m > [22m[2mshould handle empty conversation history
2025-06-04T21:54:37.7005971Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7007530Z 
2025-06-04T21:54:37.7027389Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mResponse Enhancement[2m > [22m[2mshould enhance basic response with contextual information
2025-06-04T21:54:37.7034892Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7035283Z 
2025-06-04T21:54:37.7046688Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mResponse Enhancement[2m > [22m[2mshould apply history-based modifications when relevant
2025-06-04T21:54:37.7048838Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7051431Z 
2025-06-04T21:54:37.7062495Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mResponse Enhancement[2m > [22m[2mshould acknowledge high-impact recent events
2025-06-04T21:54:37.7064533Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7065571Z 
2025-06-04T21:54:37.7073038Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mResponse Enhancement[2m > [22m[2mshould track belief evolution over time
2025-06-04T21:54:37.7075083Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7080585Z 
2025-06-04T21:54:37.7085802Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mResponse Enhancement[2m > [22m[2mshould respect relevance threshold filtering
2025-06-04T21:54:37.7087826Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7089405Z 
2025-06-04T21:54:37.7096300Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mResponse Enhancement[2m > [22m[2mshould disable specific enhancement types when requested
2025-06-04T21:54:37.7097981Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7099434Z 
2025-06-04T21:54:37.7139917Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mConversation Pattern Analysis[2m > [22m[2mshould analyze conversation patterns correctly
2025-06-04T21:54:37.7141701Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7142048Z 
2025-06-04T21:54:37.7143903Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mConversation Pattern Analysis[2m > [22m[2mshould extract recurring themes from patient messages
2025-06-04T21:54:37.7145625Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7145971Z 
2025-06-04T21:54:37.7148031Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mConversation Pattern Analysis[2m > [22m[2mshould calculate engagement level based on message content
2025-06-04T21:54:37.7150354Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7150755Z 
2025-06-04T21:54:37.7158456Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mConversation Pattern Analysis[2m > [22m[2mshould identify resistance patterns in patient responses
2025-06-04T21:54:37.7160508Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7160873Z 
2025-06-04T21:54:37.7162721Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mTherapeutic Impact Assessment[2m > [22m[2mshould calculate therapeutic impact metrics
2025-06-04T21:54:37.7164438Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7164800Z 
2025-06-04T21:54:37.7180176Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mTherapeutic Impact Assessment[2m > [22m[2mshould extract contextual cues from modifications
2025-06-04T21:54:37.7181978Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7182341Z 
2025-06-04T21:54:37.7184281Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mIntegration and Performance[2m > [22m[2mshould integrate modifications naturally into response
2025-06-04T21:54:37.7186076Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7186453Z 
2025-06-04T21:54:37.7191029Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mIntegration and Performance[2m > [22m[2mshould limit number of modifications to avoid overwhelming
2025-06-04T21:54:37.7194275Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7194986Z 
2025-06-04T21:54:37.7197163Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mIntegration and Performance[2m > [22m[2mshould handle error cases gracefully
2025-06-04T21:54:37.7199388Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7201169Z 
2025-06-04T21:54:37.7305363Z [90mstderr[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mIntegration and Performance[2m > [22m[2mshould handle error cases gracefully
2025-06-04T21:54:37.7308059Z [22m[39mError enhancing response: TypeError: Cannot read properties of undefined (reading 'recurringThemes')
2025-06-04T21:54:37.7310379Z     at ContextualResponseService.applyHistoryContext [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/ContextualResponseService.ts:408:40[90m)[39m
2025-06-04T21:54:37.7333661Z     at ContextualResponseService.enhanceResponse [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/ContextualResponseService.ts:250:40[90m)[39m
2025-06-04T21:54:37.7335891Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/__tests__/ContextualResponseService.test.ts:653:17
2025-06-04T21:54:37.7338081Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:37.7340628Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:37.7342865Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:37.7344046Z     at new Promise (<anonymous>)
2025-06-04T21:54:37.7346069Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:37.7348687Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:37.7351405Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:37.7352508Z 
2025-06-04T21:54:37.7354406Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mUtility Functions[2m > [22m[2mshould provide quick contextual enhancement utility
2025-06-04T21:54:37.7356156Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7356537Z 
2025-06-04T21:54:37.7358370Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mUtility Functions[2m > [22m[2mshould work with minimal conversation history
2025-06-04T21:54:37.7365799Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7366183Z 
2025-06-04T21:54:37.7368021Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle models with minimal data
2025-06-04T21:54:37.7369956Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7370345Z 
2025-06-04T21:54:37.7372338Z [90mstdout[2m | src/lib/ai/services/__tests__/ContextualResponseService.test.ts[2m > [22m[2mContextualResponseService[2m > [22m[2mEdge Cases and Error Handling[2m > [22m[2mshould handle very long conversation histories efficiently
2025-06-04T21:54:37.7374303Z [22m[39mContextual Response Service initialized
2025-06-04T21:54:37.7374678Z 
2025-06-04T21:54:37.7383453Z  [32m✓[39m src/lib/ai/services/__tests__/ContextualResponseService.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 41[2mms[22m[39m
2025-06-04T21:54:37.9723016Z  [32m✓[39m src/lib/ai/bias-detection/utils.test.ts [2m([22m[2m48 tests[22m[2m)[22m[32m 254[2mms[22m[39m
2025-06-04T21:54:38.1921707Z  [32m✓[39m src/lib/ai/bias-detection/audit.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 25[2mms[22m[39m
2025-06-04T21:54:38.7132686Z [2m9:54:38 PM[22m [33m[1m[vite][22m[39m [33m[2m(client)[22m[39m [33mwarning: [33mThis assignment will throw because "fheService" is an import[33m
2025-06-04T21:54:38.7138454Z 125|        performOperation: vi.fn().mockResolvedValue('fhe_result')
2025-06-04T21:54:38.7143119Z 126|      };
2025-06-04T21:54:38.7147325Z 127|      (fheService as any) = mockFheService;
2025-06-04T21:54:38.7151660Z    |       ^
2025-06-04T21:54:38.7155134Z 128|  
2025-06-04T21:54:38.7158932Z 129|      // Create engine instance
2025-06-04T21:54:38.7159864Z [39m
2025-06-04T21:54:38.7162106Z   Plugin: [35mvite:esbuild[39m
2025-06-04T21:54:38.7163349Z   File: [36m/home/runner/work/pixelated/pixelated/src/lib/ai/emotions/EmotionDetectionEngine.test.ts[39m
2025-06-04T21:54:39.0721856Z  [31m❯[39m src/lib/ai/emotions/EmotionDetectionEngine.test.ts [2m([22m[2m34 tests[22m[2m | [22m[31m34 failed[39m[2m)[22m[32m 73[2mms[22m[39m
2025-06-04T21:54:39.0731564Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mConstructor and Initialization[2m > [22mshould initialize with default options[39m[32m 16[2mms[22m[39m
2025-06-04T21:54:39.0734344Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0736796Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mConstructor and Initialization[2m > [22mshould initialize with custom options[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:39.0740655Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0747015Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mConstructor and Initialization[2m > [22mshould log initialization[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:39.0750733Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0753532Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould analyze emotion successfully[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:39.0754880Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0756469Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould handle empty text input[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0757878Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0759700Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould handle null or undefined text[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:39.0761095Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0762625Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould sanitize HTML input[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0763959Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0765655Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould use secure processing when enabled[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:39.0767060Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0768728Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould handle provider errors gracefully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0770411Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0772167Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould filter emotions below confidence threshold[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0773694Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0775363Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould handle different languages[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:39.0776778Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0778472Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould process batch emotions successfully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0810653Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0812292Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould handle empty batch input[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0813710Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0815383Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould split large batches appropriately[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0816763Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0818338Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould handle batch processing errors[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0819972Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0821602Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould use adaptive batch sizing when enabled[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0823091Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0824715Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mCaching Functionality[2m > [22mshould cache analysis results when enabled[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0826500Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0828194Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mCaching Functionality[2m > [22mshould bypass cache when disabled[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0829826Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0831363Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mCaching Functionality[2m > [22mshould respect cache TTL[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0832741Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0834347Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mPerformance Monitoring[2m > [22mshould log performance metrics[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0835704Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0837456Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mPerformance Monitoring[2m > [22mshould track batch processing performance[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0838932Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0840788Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mRisk Factor Detection[2m > [22mshould detect high-risk emotional states[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0842149Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0843944Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mRisk Factor Detection[2m > [22mshould provide appropriate recommendations for risk factors[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0845497Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0847265Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mContextual Factor Analysis[2m > [22mshould identify contextual factors affecting emotions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0848804Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0850694Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mContextual Factor Analysis[2m > [22mshould handle multiple contextual factors[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0852118Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0853750Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle provider unavailability[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0855174Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0857444Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle FHE service unavailability when secure processing is enabled[39m[32m 7[2mms[22m[39m
2025-06-04T21:54:39.0859041Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0860895Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle very long text input[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:39.0862352Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0864038Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle special characters and emojis[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:39.0865490Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0867129Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle network timeouts gracefully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0868651Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0870453Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould validate emotion data structure[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:39.0871995Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0873551Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mConfiguration and Options[2m > [22mshould respect sensitivity settings[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0874857Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0876444Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mConfiguration and Options[2m > [22mshould handle different confidence thresholds[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:39.0877796Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.0879565Z [31m   [31m×[31m EmotionDetectionEngine[2m > [22mConfiguration and Options[2m > [22mshould handle optional features being disabled[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.0880958Z [31m     → Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T21:54:39.1578841Z  [32m✓[39m src/lib/ai/services/__tests__/CommunicationStyleService.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 33[2mms[22m[39m
2025-06-04T21:54:39.3230597Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould validate minimal patient model structure
2025-06-04T21:54:39.3232360Z [22m[39mError parsing Patient-Psi model: ZodError: [
2025-06-04T21:54:39.3232853Z   {
2025-06-04T21:54:39.3233154Z     "code": "invalid_type",
2025-06-04T21:54:39.3233527Z     "expected": "array",
2025-06-04T21:54:39.3233895Z     "received": "undefined",
2025-06-04T21:54:39.3234723Z     "path": [
2025-06-04T21:54:39.3235037Z       "relevantHistory"
2025-06-04T21:54:39.3235349Z     ],
2025-06-04T21:54:39.3235630Z     "message": "Required"
2025-06-04T21:54:39.3235954Z   },
2025-06-04T21:54:39.3236200Z   {
2025-06-04T21:54:39.3236467Z     "code": "invalid_type",
2025-06-04T21:54:39.3236821Z     "expected": "array",
2025-06-04T21:54:39.3237179Z     "received": "undefined",
2025-06-04T21:54:39.3237532Z     "path": [
2025-06-04T21:54:39.3237832Z       "coreBeliefs"
2025-06-04T21:54:39.3238131Z     ],
2025-06-04T21:54:39.3238426Z     "message": "Required"
2025-06-04T21:54:39.3238745Z   },
2025-06-04T21:54:39.3238986Z   {
2025-06-04T21:54:39.3239446Z     "code": "invalid_type",
2025-06-04T21:54:39.3239809Z     "expected": "array",
2025-06-04T21:54:39.3240158Z     "received": "undefined",
2025-06-04T21:54:39.3240505Z     "path": [
2025-06-04T21:54:39.3240816Z       "intermediateBeliefs"
2025-06-04T21:54:39.3241160Z     ],
2025-06-04T21:54:39.3241454Z     "message": "Required"
2025-06-04T21:54:39.3241778Z   },
2025-06-04T21:54:39.3242027Z   {
2025-06-04T21:54:39.3242308Z     "code": "invalid_type",
2025-06-04T21:54:39.3242676Z     "expected": "array",
2025-06-04T21:54:39.3243027Z     "received": "undefined",
2025-06-04T21:54:39.3243378Z     "path": [
2025-06-04T21:54:39.3243688Z       "copingStrategies"
2025-06-04T21:54:39.3244017Z     ],
2025-06-04T21:54:39.3244291Z     "message": "Required"
2025-06-04T21:54:39.3244617Z   },
2025-06-04T21:54:39.3244876Z   {
2025-06-04T21:54:39.3245165Z     "code": "invalid_type",
2025-06-04T21:54:39.3245523Z     "expected": "string",
2025-06-04T21:54:39.3245885Z     "received": "undefined",
2025-06-04T21:54:39.3246253Z     "path": [
2025-06-04T21:54:39.3246551Z       "situation"
2025-06-04T21:54:39.3246844Z     ],
2025-06-04T21:54:39.3247139Z     "message": "Required"
2025-06-04T21:54:39.3247470Z   },
2025-06-04T21:54:39.3247722Z   {
2025-06-04T21:54:39.3247996Z     "code": "invalid_type",
2025-06-04T21:54:39.3248364Z     "expected": "array",
2025-06-04T21:54:39.3248730Z     "received": "undefined",
2025-06-04T21:54:39.3249235Z     "path": [
2025-06-04T21:54:39.3249560Z       "automaticThoughts"
2025-06-04T21:54:39.3249898Z     ],
2025-06-04T21:54:39.3250178Z     "message": "Required"
2025-06-04T21:54:39.3250511Z   },
2025-06-04T21:54:39.3250757Z   {
2025-06-04T21:54:39.3251035Z     "code": "invalid_type",
2025-06-04T21:54:39.3251404Z     "expected": "array",
2025-06-04T21:54:39.3251771Z     "received": "undefined",
2025-06-04T21:54:39.3252362Z     "path": [
2025-06-04T21:54:39.3252667Z       "emotions"
2025-06-04T21:54:39.3252950Z     ],
2025-06-04T21:54:39.3253232Z     "message": "Required"
2025-06-04T21:54:39.3253535Z   },
2025-06-04T21:54:39.3253774Z   {
2025-06-04T21:54:39.3254041Z     "code": "invalid_type",
2025-06-04T21:54:39.3254389Z     "expected": "array",
2025-06-04T21:54:39.3254720Z     "received": "undefined",
2025-06-04T21:54:39.3255063Z     "path": [
2025-06-04T21:54:39.3255347Z       "behaviors"
2025-06-04T21:54:39.3255645Z     ],
2025-06-04T21:54:39.3255912Z     "message": "Required"
2025-06-04T21:54:39.3256227Z   },
2025-06-04T21:54:39.3256475Z   {
2025-06-04T21:54:39.3256745Z     "code": "invalid_type",
2025-06-04T21:54:39.3257117Z     "expected": "array",
2025-06-04T21:54:39.3257466Z     "received": "undefined",
2025-06-04T21:54:39.3257811Z     "path": [
2025-06-04T21:54:39.3258122Z       "conversationalStyles"
2025-06-04T21:54:39.3258475Z     ],
2025-06-04T21:54:39.3258757Z     "message": "Required"
2025-06-04T21:54:39.3289344Z   },
2025-06-04T21:54:39.3289747Z   {
2025-06-04T21:54:39.3290059Z     "code": "invalid_type",
2025-06-04T21:54:39.3290450Z     "expected": "string",
2025-06-04T21:54:39.3290811Z     "received": "undefined",
2025-06-04T21:54:39.3291177Z     "path": [
2025-06-04T21:54:39.3291483Z       "demographics",
2025-06-04T21:54:39.3291813Z       "familyStatus"
2025-06-04T21:54:39.3292111Z     ],
2025-06-04T21:54:39.3292391Z     "message": "Required"
2025-06-04T21:54:39.3292715Z   },
2025-06-04T21:54:39.3293244Z   {
2025-06-04T21:54:39.3293520Z     "code": "invalid_type",
2025-06-04T21:54:39.3293889Z     "expected": "object",
2025-06-04T21:54:39.3294243Z     "received": "undefined",
2025-06-04T21:54:39.3294598Z     "path": [
2025-06-04T21:54:39.3294879Z       "diagnosis"
2025-06-04T21:54:39.3295169Z     ],
2025-06-04T21:54:39.3295446Z     "message": "Required"
2025-06-04T21:54:39.3295770Z   }
2025-06-04T21:54:39.3296016Z ]
2025-06-04T21:54:39.3297594Z     at Object.get error [as error] [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/zod@3.25.32/node_modules/[4mzod[24m/dist/esm/v3/types.js:51:31[90m)[39m
2025-06-04T21:54:39.3300040Z     at ZodObject.parse [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/zod@3.25.32/node_modules/[4mzod[24m/dist/esm/v3/types.js:126:22[90m)[39m
2025-06-04T21:54:39.3302213Z     at PatientPsiParser.parsePatientPsiModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-parser.ts:246:56[90m)[39m
2025-06-04T21:54:39.3304107Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:72:40
2025-06-04T21:54:39.3306033Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:39.3320682Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:39.3322815Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:39.3323961Z     at new Promise (<anonymous>)
2025-06-04T21:54:39.3389465Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:39.3392196Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m {
2025-06-04T21:54:39.3393415Z   issues: [
2025-06-04T21:54:39.3393711Z     {
2025-06-04T21:54:39.3394175Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3394788Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3395684Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3396290Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3396827Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3397237Z     },
2025-06-04T21:54:39.3397523Z     {
2025-06-04T21:54:39.3398002Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3398541Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3399286Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3399843Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3400345Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3400754Z     },
2025-06-04T21:54:39.3401025Z     {
2025-06-04T21:54:39.3401469Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3402031Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3402578Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3403139Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3403688Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3404117Z     },
2025-06-04T21:54:39.3404406Z     {
2025-06-04T21:54:39.3404862Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3405397Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3405945Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3406499Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3407025Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3407403Z     },
2025-06-04T21:54:39.3407675Z     {
2025-06-04T21:54:39.3408102Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3408608Z       expected: [32m'string'[39m,
2025-06-04T21:54:39.3409576Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3410080Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3410552Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3410934Z     },
2025-06-04T21:54:39.3411181Z     {
2025-06-04T21:54:39.3411572Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3412078Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3412579Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3413090Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3413587Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3413977Z     },
2025-06-04T21:54:39.3414247Z     {
2025-06-04T21:54:39.3414660Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3415196Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3415721Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3416237Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3416703Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3417067Z     },
2025-06-04T21:54:39.3417314Z     {
2025-06-04T21:54:39.3417700Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3418181Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3418720Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3438151Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3438778Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3439489Z     },
2025-06-04T21:54:39.3439788Z     {
2025-06-04T21:54:39.3440263Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3440883Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3441478Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3442031Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3442551Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3442960Z     },
2025-06-04T21:54:39.3443226Z     {
2025-06-04T21:54:39.3443646Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3444226Z       expected: [32m'string'[39m,
2025-06-04T21:54:39.3444800Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3445374Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3445895Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3446298Z     },
2025-06-04T21:54:39.3446591Z     {
2025-06-04T21:54:39.3447031Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3447605Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3448164Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3448739Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3449507Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3450194Z     }
2025-06-04T21:54:39.3450505Z   ],
2025-06-04T21:54:39.3451015Z   addIssue: [36m[Function (anonymous)][39m,
2025-06-04T21:54:39.3451685Z   addIssues: [36m[Function (anonymous)][39m,
2025-06-04T21:54:39.3452161Z   errors: [
2025-06-04T21:54:39.3452448Z     {
2025-06-04T21:54:39.3452911Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3453476Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3453993Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3454553Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3455091Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3455499Z     },
2025-06-04T21:54:39.3455782Z     {
2025-06-04T21:54:39.3456235Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3456806Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3457377Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3457931Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3458460Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3458890Z     },
2025-06-04T21:54:39.3459365Z     {
2025-06-04T21:54:39.3459841Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3460406Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3460955Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3461484Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3461987Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3462365Z     },
2025-06-04T21:54:39.3462631Z     {
2025-06-04T21:54:39.3463023Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3463974Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3464566Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3465138Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3465660Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3466074Z     },
2025-06-04T21:54:39.3466347Z     {
2025-06-04T21:54:39.3466812Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3467406Z       expected: [32m'string'[39m,
2025-06-04T21:54:39.3468000Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3468558Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3469423Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3469869Z     },
2025-06-04T21:54:39.3470148Z     {
2025-06-04T21:54:39.3470615Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3471183Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3471751Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3472309Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3472841Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3473231Z     },
2025-06-04T21:54:39.3473511Z     {
2025-06-04T21:54:39.3473970Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3474545Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3475092Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3475647Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3476205Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3476626Z     },
2025-06-04T21:54:39.3476889Z     {
2025-06-04T21:54:39.3477376Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3477971Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3478566Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3479383Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3480075Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3480473Z     },
2025-06-04T21:54:39.3480747Z     {
2025-06-04T21:54:39.3481181Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3481755Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3482347Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3482913Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3483438Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3483842Z     },
2025-06-04T21:54:39.3484123Z     {
2025-06-04T21:54:39.3484573Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3485168Z       expected: [32m'string'[39m,
2025-06-04T21:54:39.3485725Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3486581Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3487195Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3487616Z     },
2025-06-04T21:54:39.3487887Z     {
2025-06-04T21:54:39.3488324Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3488898Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3489675Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3490125Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3490622Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3491052Z     }
2025-06-04T21:54:39.3491325Z   ]
2025-06-04T21:54:39.3491578Z }
2025-06-04T21:54:39.3491730Z 
2025-06-04T21:54:39.3493231Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould validate minimal patient model structure
2025-06-04T21:54:39.3494819Z [22m[39mTest failed: JestExtendError: expected null to be null
2025-06-04T21:54:39.3496682Z     at Proxy.expectWrapper [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+expect@3.1.4/node_modules/[4m@vitest[24m/expect/dist/index.js:1655:12[90m)[39m
2025-06-04T21:54:39.3499448Z     at Proxy.<anonymous> [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+expect@3.1.4/node_modules/[4m@vitest[24m/expect/dist/index.js:944:14[90m)[39m
2025-06-04T21:54:39.3501921Z     at Proxy.methodWrapper [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/chai@5.2.0/node_modules/[4mchai[24m/chai.js:1618:25[90m)[39m
2025-06-04T21:54:39.3504192Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:73:31
2025-06-04T21:54:39.3506298Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:20 {
2025-06-04T21:54:39.3507503Z   actual: [90mundefined[39m,
2025-06-04T21:54:39.3507997Z   expected: [90mundefined[39m
2025-06-04T21:54:39.3508356Z }
2025-06-04T21:54:39.3508501Z 
2025-06-04T21:54:39.3510376Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould handle batch normalization of multiple models
2025-06-04T21:54:39.3512205Z [22m[39mFailed to normalize model patient-1: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3512778Z 
2025-06-04T21:54:39.3514315Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould handle batch normalization of multiple models
2025-06-04T21:54:39.3516164Z [22m[39mFailed to normalize model patient-2: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3516697Z 
2025-06-04T21:54:39.3518189Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould handle batch normalization of multiple models
2025-06-04T21:54:39.3519986Z [22m[39mBatch normalization completed with 2 errors: [
2025-06-04T21:54:39.3520478Z   {
2025-06-04T21:54:39.3520909Z     modelId: [32m'patient-1'[39m,
2025-06-04T21:54:39.3521929Z     error: [32m'Normalization failed for model patient-1: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3522693Z   },
2025-06-04T21:54:39.3522963Z   {
2025-06-04T21:54:39.3523381Z     modelId: [32m'patient-2'[39m,
2025-06-04T21:54:39.3524374Z     error: [32m'Normalization failed for model patient-2: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3525134Z   }
2025-06-04T21:54:39.3525381Z ]
2025-06-04T21:54:39.3525513Z 
2025-06-04T21:54:39.3527020Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould handle batch normalization of multiple models
2025-06-04T21:54:39.3528618Z [22m[39mBatch test failed: JestExtendError: expected 0 to be 2
2025-06-04T21:54:39.3533447Z     at Proxy.expectWrapper [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+expect@3.1.4/node_modules/[4m@vitest[24m/expect/dist/index.js:1655:12[90m)[39m
2025-06-04T21:54:39.3536700Z     at Proxy.<anonymous> [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+expect@3.1.4/node_modules/[4m@vitest[24m/expect/dist/index.js:944:14[90m)[39m
2025-06-04T21:54:39.3541293Z     at Proxy.methodWrapper [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/chai@5.2.0/node_modules/[4mchai[24m/chai.js:1618:25[90m)[39m
2025-06-04T21:54:39.3543309Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:160:40
2025-06-04T21:54:39.3545288Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:20 {
2025-06-04T21:54:39.3546501Z   actual: [90mundefined[39m,
2025-06-04T21:54:39.3547016Z   expected: [90mundefined[39m
2025-06-04T21:54:39.3547391Z }
2025-06-04T21:54:39.3547541Z 
2025-06-04T21:54:39.3548908Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould handle incomplete data gracefully
2025-06-04T21:54:39.3550541Z [22m[39mError parsing Patient-Psi model: ZodError: [
2025-06-04T21:54:39.3551025Z   {
2025-06-04T21:54:39.3551327Z     "code": "invalid_type",
2025-06-04T21:54:39.3551969Z     "expected": "array",
2025-06-04T21:54:39.3552344Z     "received": "undefined",
2025-06-04T21:54:39.3552708Z     "path": [
2025-06-04T21:54:39.3553022Z       "relevantHistory"
2025-06-04T21:54:39.3553348Z     ],
2025-06-04T21:54:39.3553638Z     "message": "Required"
2025-06-04T21:54:39.3553970Z   },
2025-06-04T21:54:39.3554229Z   {
2025-06-04T21:54:39.3554515Z     "code": "invalid_type",
2025-06-04T21:54:39.3554889Z     "expected": "array",
2025-06-04T21:54:39.3555245Z     "received": "undefined",
2025-06-04T21:54:39.3555601Z     "path": [
2025-06-04T21:54:39.3555900Z       "coreBeliefs"
2025-06-04T21:54:39.3556191Z     ],
2025-06-04T21:54:39.3556470Z     "message": "Required"
2025-06-04T21:54:39.3556806Z   },
2025-06-04T21:54:39.3558086Z   {
2025-06-04T21:54:39.3558384Z     "code": "invalid_type",
2025-06-04T21:54:39.3558748Z     "expected": "array",
2025-06-04T21:54:39.3559257Z     "received": "undefined",
2025-06-04T21:54:39.3559610Z     "path": [
2025-06-04T21:54:39.3559911Z       "intermediateBeliefs"
2025-06-04T21:54:39.3560249Z     ],
2025-06-04T21:54:39.3560531Z     "message": "Required"
2025-06-04T21:54:39.3560848Z   },
2025-06-04T21:54:39.3561096Z   {
2025-06-04T21:54:39.3561363Z     "code": "invalid_type",
2025-06-04T21:54:39.3561718Z     "expected": "array",
2025-06-04T21:54:39.3562061Z     "received": "undefined",
2025-06-04T21:54:39.3562397Z     "path": [
2025-06-04T21:54:39.3562688Z       "copingStrategies"
2025-06-04T21:54:39.3563013Z     ],
2025-06-04T21:54:39.3563351Z     "message": "Required"
2025-06-04T21:54:39.3563680Z   },
2025-06-04T21:54:39.3563922Z   {
2025-06-04T21:54:39.3564195Z     "code": "invalid_type",
2025-06-04T21:54:39.3564548Z     "expected": "string",
2025-06-04T21:54:39.3564902Z     "received": "undefined",
2025-06-04T21:54:39.3565242Z     "path": [
2025-06-04T21:54:39.3565530Z       "situation"
2025-06-04T21:54:39.3565816Z     ],
2025-06-04T21:54:39.3566094Z     "message": "Required"
2025-06-04T21:54:39.3567354Z   },
2025-06-04T21:54:39.3567619Z   {
2025-06-04T21:54:39.3567916Z     "code": "invalid_type",
2025-06-04T21:54:39.3568281Z     "expected": "array",
2025-06-04T21:54:39.3568624Z     "received": "undefined",
2025-06-04T21:54:39.3568976Z     "path": [
2025-06-04T21:54:39.3569464Z       "automaticThoughts"
2025-06-04T21:54:39.3570599Z     ],
2025-06-04T21:54:39.3570882Z     "message": "Required"
2025-06-04T21:54:39.3571200Z   },
2025-06-04T21:54:39.3571438Z   {
2025-06-04T21:54:39.3571708Z     "code": "invalid_type",
2025-06-04T21:54:39.3572255Z     "expected": "array",
2025-06-04T21:54:39.3572602Z     "received": "undefined",
2025-06-04T21:54:39.3572942Z     "path": [
2025-06-04T21:54:39.3573215Z       "emotions"
2025-06-04T21:54:39.3573488Z     ],
2025-06-04T21:54:39.3573756Z     "message": "Required"
2025-06-04T21:54:39.3574070Z   },
2025-06-04T21:54:39.3574316Z   {
2025-06-04T21:54:39.3574598Z     "code": "invalid_type",
2025-06-04T21:54:39.3574961Z     "expected": "array",
2025-06-04T21:54:39.3575325Z     "received": "undefined",
2025-06-04T21:54:39.3575714Z     "path": [
2025-06-04T21:54:39.3576015Z       "behaviors"
2025-06-04T21:54:39.3576325Z     ],
2025-06-04T21:54:39.3576616Z     "message": "Required"
2025-06-04T21:54:39.3576947Z   },
2025-06-04T21:54:39.3577197Z   {
2025-06-04T21:54:39.3577468Z     "code": "invalid_type",
2025-06-04T21:54:39.3577855Z     "expected": "array",
2025-06-04T21:54:39.3578228Z     "received": "undefined",
2025-06-04T21:54:39.3578593Z     "path": [
2025-06-04T21:54:39.3578919Z       "conversationalStyles"
2025-06-04T21:54:39.3579571Z     ],
2025-06-04T21:54:39.3580836Z     "message": "Required"
2025-06-04T21:54:39.3581229Z   },
2025-06-04T21:54:39.3581509Z   {
2025-06-04T21:54:39.3581807Z     "code": "invalid_type",
2025-06-04T21:54:39.3582186Z     "expected": "object",
2025-06-04T21:54:39.3582563Z     "received": "undefined",
2025-06-04T21:54:39.3582943Z     "path": [
2025-06-04T21:54:39.3583263Z       "demographics"
2025-06-04T21:54:39.3583593Z     ],
2025-06-04T21:54:39.3583892Z     "message": "Required"
2025-06-04T21:54:39.3584500Z   },
2025-06-04T21:54:39.3584763Z   {
2025-06-04T21:54:39.3585046Z     "code": "invalid_type",
2025-06-04T21:54:39.3585411Z     "expected": "object",
2025-06-04T21:54:39.3585774Z     "received": "undefined",
2025-06-04T21:54:39.3586134Z     "path": [
2025-06-04T21:54:39.3586434Z       "diagnosis"
2025-06-04T21:54:39.3586724Z     ],
2025-06-04T21:54:39.3587012Z     "message": "Required"
2025-06-04T21:54:39.3587352Z   }
2025-06-04T21:54:39.3587610Z ]
2025-06-04T21:54:39.3589384Z     at Object.get error [as error] [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/zod@3.25.32/node_modules/[4mzod[24m/dist/esm/v3/types.js:51:31[90m)[39m
2025-06-04T21:54:39.3591659Z     at ZodObject.parse [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/zod@3.25.32/node_modules/[4mzod[24m/dist/esm/v3/types.js:126:22[90m)[39m
2025-06-04T21:54:39.3593790Z     at PatientPsiParser.parsePatientPsiModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-parser.ts:246:56[90m)[39m
2025-06-04T21:54:39.3595644Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:182:41
2025-06-04T21:54:39.3597567Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:39.3599815Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:39.3604136Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:39.3605283Z     at new Promise (<anonymous>)
2025-06-04T21:54:39.3606914Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:39.3609492Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m {
2025-06-04T21:54:39.3610660Z   issues: [
2025-06-04T21:54:39.3610943Z     {
2025-06-04T21:54:39.3611375Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3611896Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3612640Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3613188Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3613685Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3614065Z     },
2025-06-04T21:54:39.3614317Z     {
2025-06-04T21:54:39.3614726Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3615256Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3615778Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3616284Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3616784Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3617181Z     },
2025-06-04T21:54:39.3618391Z     {
2025-06-04T21:54:39.3618919Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3619633Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3620146Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3620645Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3621121Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3621491Z     },
2025-06-04T21:54:39.3621749Z     {
2025-06-04T21:54:39.3622124Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3622661Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3623192Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3623700Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3624196Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3624581Z     },
2025-06-04T21:54:39.3624843Z     {
2025-06-04T21:54:39.3625250Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3626012Z       expected: [32m'string'[39m,
2025-06-04T21:54:39.3626467Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3626958Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3627458Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3627840Z     },
2025-06-04T21:54:39.3628115Z     {
2025-06-04T21:54:39.3629569Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3630235Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3630804Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3631355Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3631878Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3632281Z     },
2025-06-04T21:54:39.3632562Z     {
2025-06-04T21:54:39.3633003Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3633552Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3634082Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3634609Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3635101Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3635470Z     },
2025-06-04T21:54:39.3635740Z     {
2025-06-04T21:54:39.3636172Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3650037Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3650635Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3651230Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3651787Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3652190Z     },
2025-06-04T21:54:39.3652472Z     {
2025-06-04T21:54:39.3652919Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3653434Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3653974Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3654518Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3655028Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3655424Z     },
2025-06-04T21:54:39.3655710Z     {
2025-06-04T21:54:39.3656154Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3656736Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3657242Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3657825Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3658363Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3658755Z     },
2025-06-04T21:54:39.3659026Z     {
2025-06-04T21:54:39.3668218Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3668758Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3669463Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3669958Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3670669Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3671044Z     }
2025-06-04T21:54:39.3671297Z   ],
2025-06-04T21:54:39.3671725Z   addIssue: [36m[Function (anonymous)][39m,
2025-06-04T21:54:39.3672365Z   addIssues: [36m[Function (anonymous)][39m,
2025-06-04T21:54:39.3672815Z   errors: [
2025-06-04T21:54:39.3673093Z     {
2025-06-04T21:54:39.3673508Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3674034Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3674552Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3675070Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3675554Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3675923Z     },
2025-06-04T21:54:39.3676175Z     {
2025-06-04T21:54:39.3676571Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3677085Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3677662Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3678176Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3678667Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3679046Z     },
2025-06-04T21:54:39.3679488Z     {
2025-06-04T21:54:39.3679886Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3680383Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3680893Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3681382Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3681859Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3682225Z     },
2025-06-04T21:54:39.3682478Z     {
2025-06-04T21:54:39.3683069Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3683580Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3684087Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3684588Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3685061Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3685423Z     },
2025-06-04T21:54:39.3685673Z     {
2025-06-04T21:54:39.3686059Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3686549Z       expected: [32m'string'[39m,
2025-06-04T21:54:39.3687053Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3687553Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3688041Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3688426Z     },
2025-06-04T21:54:39.3688679Z     {
2025-06-04T21:54:39.3689535Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3690103Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3690622Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3691119Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3691618Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3691991Z     },
2025-06-04T21:54:39.3692241Z     {
2025-06-04T21:54:39.3692633Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3693141Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3693648Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3694151Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3694624Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3695004Z     },
2025-06-04T21:54:39.3695265Z     {
2025-06-04T21:54:39.3695648Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3696166Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3696701Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3697167Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3697590Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3697914Z     },
2025-06-04T21:54:39.3698139Z     {
2025-06-04T21:54:39.3698488Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3698945Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3699583Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3700029Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3700459Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3700794Z     },
2025-06-04T21:54:39.3701026Z     {
2025-06-04T21:54:39.3701384Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3701853Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3702315Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3703045Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3703508Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3703859Z     },
2025-06-04T21:54:39.3704109Z     {
2025-06-04T21:54:39.3704475Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3704914Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3705355Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3705793Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3706214Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3706541Z     }
2025-06-04T21:54:39.3706766Z   ]
2025-06-04T21:54:39.3706996Z }
2025-06-04T21:54:39.3707126Z 
2025-06-04T21:54:39.3710057Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould handle incomplete data gracefully
2025-06-04T21:54:39.3711800Z [22m[39mFailed to normalize model incomplete-patient: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3712376Z 
2025-06-04T21:54:39.3713774Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould generate appropriate conversion statistics
2025-06-04T21:54:39.3715136Z [22m[39mError parsing Patient-Psi model: ZodError: [
2025-06-04T21:54:39.3715590Z   {
2025-06-04T21:54:39.3715875Z     "code": "invalid_type",
2025-06-04T21:54:39.3716241Z     "expected": "array",
2025-06-04T21:54:39.3716588Z     "received": "undefined",
2025-06-04T21:54:39.3716937Z     "path": [
2025-06-04T21:54:39.3717449Z       "relevantHistory"
2025-06-04T21:54:39.3717785Z     ],
2025-06-04T21:54:39.3718060Z     "message": "Required"
2025-06-04T21:54:39.3718390Z   },
2025-06-04T21:54:39.3718649Z   {
2025-06-04T21:54:39.3718930Z     "code": "invalid_type",
2025-06-04T21:54:39.3719451Z     "expected": "array",
2025-06-04T21:54:39.3719807Z     "received": "undefined",
2025-06-04T21:54:39.3720164Z     "path": [
2025-06-04T21:54:39.3720462Z       "coreBeliefs"
2025-06-04T21:54:39.3720770Z     ],
2025-06-04T21:54:39.3721081Z     "message": "Required"
2025-06-04T21:54:39.3721423Z   },
2025-06-04T21:54:39.3721686Z   {
2025-06-04T21:54:39.3721981Z     "code": "invalid_type",
2025-06-04T21:54:39.3722380Z     "expected": "array",
2025-06-04T21:54:39.3722738Z     "received": "undefined",
2025-06-04T21:54:39.3723121Z     "path": [
2025-06-04T21:54:39.3723450Z       "intermediateBeliefs"
2025-06-04T21:54:39.3723836Z     ],
2025-06-04T21:54:39.3724158Z     "message": "Required"
2025-06-04T21:54:39.3724531Z   },
2025-06-04T21:54:39.3724801Z   {
2025-06-04T21:54:39.3725118Z     "code": "invalid_type",
2025-06-04T21:54:39.3725517Z     "expected": "array",
2025-06-04T21:54:39.3725895Z     "received": "undefined",
2025-06-04T21:54:39.3726263Z     "path": [
2025-06-04T21:54:39.3726633Z       "copingStrategies"
2025-06-04T21:54:39.3726988Z     ],
2025-06-04T21:54:39.3727291Z     "message": "Required"
2025-06-04T21:54:39.3727627Z   },
2025-06-04T21:54:39.3727888Z   {
2025-06-04T21:54:39.3728198Z     "code": "invalid_type",
2025-06-04T21:54:39.3728572Z     "expected": "string",
2025-06-04T21:54:39.3728932Z     "received": "undefined",
2025-06-04T21:54:39.3760929Z     "path": [
2025-06-04T21:54:39.3761270Z       "situation"
2025-06-04T21:54:39.3761599Z     ],
2025-06-04T21:54:39.3761901Z     "message": "Required"
2025-06-04T21:54:39.3762250Z   },
2025-06-04T21:54:39.3762527Z   {
2025-06-04T21:54:39.3762820Z     "code": "invalid_type",
2025-06-04T21:54:39.3763200Z     "expected": "array",
2025-06-04T21:54:39.3763670Z     "received": "undefined",
2025-06-04T21:54:39.3764055Z     "path": [
2025-06-04T21:54:39.3764383Z       "automaticThoughts"
2025-06-04T21:54:39.3764729Z     ],
2025-06-04T21:54:39.3765032Z     "message": "Required"
2025-06-04T21:54:39.3765372Z   },
2025-06-04T21:54:39.3765638Z   {
2025-06-04T21:54:39.3765922Z     "code": "invalid_type",
2025-06-04T21:54:39.3766301Z     "expected": "array",
2025-06-04T21:54:39.3766665Z     "received": "undefined",
2025-06-04T21:54:39.3767034Z     "path": [
2025-06-04T21:54:39.3767631Z       "emotions"
2025-06-04T21:54:39.3767966Z     ],
2025-06-04T21:54:39.3768261Z     "message": "Required"
2025-06-04T21:54:39.3768592Z   },
2025-06-04T21:54:39.3768846Z   {
2025-06-04T21:54:39.3769318Z     "code": "invalid_type",
2025-06-04T21:54:39.3769707Z     "expected": "array",
2025-06-04T21:54:39.3770071Z     "received": "undefined",
2025-06-04T21:54:39.3770421Z     "path": [
2025-06-04T21:54:39.3770730Z       "behaviors"
2025-06-04T21:54:39.3771033Z     ],
2025-06-04T21:54:39.3771347Z     "message": "Required"
2025-06-04T21:54:39.3771680Z   },
2025-06-04T21:54:39.3771944Z   {
2025-06-04T21:54:39.3772238Z     "code": "invalid_type",
2025-06-04T21:54:39.3772611Z     "expected": "array",
2025-06-04T21:54:39.3772972Z     "received": "undefined",
2025-06-04T21:54:39.3773330Z     "path": [
2025-06-04T21:54:39.3773660Z       "conversationalStyles"
2025-06-04T21:54:39.3774020Z     ],
2025-06-04T21:54:39.3774304Z     "message": "Required"
2025-06-04T21:54:39.3774602Z   },
2025-06-04T21:54:39.3774856Z   {
2025-06-04T21:54:39.3775129Z     "code": "invalid_type",
2025-06-04T21:54:39.3775480Z     "expected": "object",
2025-06-04T21:54:39.3775825Z     "received": "undefined",
2025-06-04T21:54:39.3776157Z     "path": [
2025-06-04T21:54:39.3776431Z       "demographics"
2025-06-04T21:54:39.3776715Z     ],
2025-06-04T21:54:39.3776974Z     "message": "Required"
2025-06-04T21:54:39.3777288Z   },
2025-06-04T21:54:39.3777525Z   {
2025-06-04T21:54:39.3777789Z     "code": "invalid_type",
2025-06-04T21:54:39.3778342Z     "expected": "object",
2025-06-04T21:54:39.3778674Z     "received": "undefined",
2025-06-04T21:54:39.3779012Z     "path": [
2025-06-04T21:54:39.3779472Z       "diagnosis"
2025-06-04T21:54:39.3779748Z     ],
2025-06-04T21:54:39.3780022Z     "message": "Required"
2025-06-04T21:54:39.3780329Z   }
2025-06-04T21:54:39.3780574Z ]
2025-06-04T21:54:39.3782131Z     at Object.get error [as error] [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/zod@3.25.32/node_modules/[4mzod[24m/dist/esm/v3/types.js:51:31[90m)[39m
2025-06-04T21:54:39.3784325Z     at ZodObject.parse [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/zod@3.25.32/node_modules/[4mzod[24m/dist/esm/v3/types.js:126:22[90m)[39m
2025-06-04T21:54:39.3786351Z     at PatientPsiParser.parsePatientPsiModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-parser.ts:246:56[90m)[39m
2025-06-04T21:54:39.3788137Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:217:41
2025-06-04T21:54:39.3790146Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:39.3792154Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:39.3794110Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:39.3795155Z     at new Promise (<anonymous>)
2025-06-04T21:54:39.3796666Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:39.3798902Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m {
2025-06-04T21:54:39.3800489Z   issues: [
2025-06-04T21:54:39.3800767Z     {
2025-06-04T21:54:39.3801199Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3801739Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3802274Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3802793Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3803523Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3803947Z     },
2025-06-04T21:54:39.3804223Z     {
2025-06-04T21:54:39.3804654Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3805169Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3805702Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3806227Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3806699Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3807012Z     },
2025-06-04T21:54:39.3807287Z     {
2025-06-04T21:54:39.3807676Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3808178Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3808676Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3809341Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3809806Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3810175Z     },
2025-06-04T21:54:39.3810406Z     {
2025-06-04T21:54:39.3810763Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3811234Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3811746Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3812252Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3812799Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3813203Z     },
2025-06-04T21:54:39.3813454Z     {
2025-06-04T21:54:39.3813871Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3814321Z       expected: [32m'string'[39m,
2025-06-04T21:54:39.3814772Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3815459Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3815867Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3816199Z     },
2025-06-04T21:54:39.3816444Z     {
2025-06-04T21:54:39.3816842Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3817344Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3817845Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3818331Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3818788Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3819876Z     },
2025-06-04T21:54:39.3820146Z     {
2025-06-04T21:54:39.3820538Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3821041Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3821530Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3821997Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3822458Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3822802Z     },
2025-06-04T21:54:39.3823047Z     {
2025-06-04T21:54:39.3823421Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3823905Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3824374Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3824841Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3825289Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3825620Z     },
2025-06-04T21:54:39.3825855Z     {
2025-06-04T21:54:39.3826230Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3826698Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3827333Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3827824Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3828269Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3828621Z     },
2025-06-04T21:54:39.3828842Z     {
2025-06-04T21:54:39.3829408Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3829897Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3830380Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3830860Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3831317Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3831682Z     },
2025-06-04T21:54:39.3831922Z     {
2025-06-04T21:54:39.3832305Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3832788Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3833269Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3833750Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3834188Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3834531Z     }
2025-06-04T21:54:39.3834776Z   ],
2025-06-04T21:54:39.3835400Z   addIssue: [36m[Function (anonymous)][39m,
2025-06-04T21:54:39.3836007Z   addIssues: [36m[Function (anonymous)][39m,
2025-06-04T21:54:39.3836413Z   errors: [
2025-06-04T21:54:39.3836679Z     {
2025-06-04T21:54:39.3837062Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3837553Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3838040Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3838512Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3839020Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3839611Z     },
2025-06-04T21:54:39.3839878Z     {
2025-06-04T21:54:39.3840299Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3840796Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3841305Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3841800Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3842262Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3842626Z     },
2025-06-04T21:54:39.3842873Z     {
2025-06-04T21:54:39.3843259Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3843753Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3844242Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3844715Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3845172Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3845527Z     },
2025-06-04T21:54:39.3845774Z     {
2025-06-04T21:54:39.3846159Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3846648Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3847375Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3847885Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3848353Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3848701Z     },
2025-06-04T21:54:39.3848954Z     {
2025-06-04T21:54:39.3850102Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3850638Z       expected: [32m'string'[39m,
2025-06-04T21:54:39.3851152Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3851642Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3852147Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3852535Z     },
2025-06-04T21:54:39.3852800Z     {
2025-06-04T21:54:39.3853201Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3853734Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3854267Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3854783Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3855265Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3855645Z     },
2025-06-04T21:54:39.3855915Z     {
2025-06-04T21:54:39.3856322Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3856837Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3857359Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3857867Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3858361Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3858739Z     },
2025-06-04T21:54:39.3859001Z     {
2025-06-04T21:54:39.3859601Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3860103Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3860579Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3861051Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3861507Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3861872Z     },
2025-06-04T21:54:39.3862114Z     {
2025-06-04T21:54:39.3862500Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3862988Z       expected: [32m'array'[39m,
2025-06-04T21:54:39.3863531Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3864022Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3864473Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3864822Z     },
2025-06-04T21:54:39.3865071Z     {
2025-06-04T21:54:39.3865448Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3865977Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3866745Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3888159Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3888701Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3889531Z     },
2025-06-04T21:54:39.3889834Z     {
2025-06-04T21:54:39.3890276Z       code: [32m'invalid_type'[39m,
2025-06-04T21:54:39.3890813Z       expected: [32m'object'[39m,
2025-06-04T21:54:39.3891362Z       received: [32m'undefined'[39m,
2025-06-04T21:54:39.3891852Z       path: [36m[Array][39m,
2025-06-04T21:54:39.3892279Z       message: [32m'Required'[39m
2025-06-04T21:54:39.3892599Z     }
2025-06-04T21:54:39.3892836Z   ]
2025-06-04T21:54:39.3893082Z }
2025-06-04T21:54:39.3893228Z 
2025-06-04T21:54:39.3894609Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould generate appropriate conversion statistics
2025-06-04T21:54:39.3896302Z [22m[39mFailed to normalize model stats-patient: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3896877Z 
2025-06-04T21:54:39.3898360Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mshould generate appropriate conversion statistics
2025-06-04T21:54:39.3900672Z [22m[39mStats test failed: Error: Normalization failed for model stats-patient: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3902723Z     at PatientPsiIntegration.normalizeModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/patient-psi-integration.ts:269:13[90m)[39m
2025-06-04T21:54:39.3904762Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:219:7
2025-06-04T21:54:39.3907042Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:20
2025-06-04T21:54:39.3908019Z 
2025-06-04T21:54:39.3910258Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mError Handling[2m > [22m[2mshould handle parser errors gracefully
2025-06-04T21:54:39.3912081Z [22m[39mFailed to normalize model error-test: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3912625Z 
2025-06-04T21:54:39.3914237Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mError Handling[2m > [22m[2mshould handle indexer errors gracefully
2025-06-04T21:54:39.3916133Z [22m[39mFailed to normalize model indexer-error-test: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3916751Z 
2025-06-04T21:54:39.3918566Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mError Handling[2m > [22m[2mshould handle malformed data with descriptive error messages
2025-06-04T21:54:39.3920697Z [22m[39mFailed to normalize model undefined: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3921273Z 
2025-06-04T21:54:39.3923075Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mError Handling[2m > [22m[2mshould handle malformed data with descriptive error messages
2025-06-04T21:54:39.3925044Z [22m[39mFailed to normalize model invalid-strength: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3925598Z 
2025-06-04T21:54:39.3927232Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mError Handling[2m > [22m[2mshould handle batch processing with mixed success/failure
2025-06-04T21:54:39.3929056Z [22m[39mFailed to normalize model batch-success-1: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3929773Z 
2025-06-04T21:54:39.3931359Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mError Handling[2m > [22m[2mshould handle batch processing with mixed success/failure
2025-06-04T21:54:39.3933378Z [22m[39mFailed to normalize model batch-failure-1: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3933928Z 
2025-06-04T21:54:39.3935547Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mError Handling[2m > [22m[2mshould handle batch processing with mixed success/failure
2025-06-04T21:54:39.3937336Z [22m[39mFailed to normalize model batch-success-2: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3937873Z 
2025-06-04T21:54:39.3939675Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mError Handling[2m > [22m[2mshould handle batch processing with mixed success/failure
2025-06-04T21:54:39.3941191Z [22m[39mBatch normalization completed with 3 errors: [
2025-06-04T21:54:39.3941651Z   {
2025-06-04T21:54:39.3942065Z     modelId: [32m'batch-success-1'[39m,
2025-06-04T21:54:39.3943107Z     error: [32m'Normalization failed for model batch-success-1: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3943845Z   },
2025-06-04T21:54:39.3944088Z   {
2025-06-04T21:54:39.3944494Z     modelId: [32m'batch-failure-1'[39m,
2025-06-04T21:54:39.3945495Z     error: [32m'Normalization failed for model batch-failure-1: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3946211Z   },
2025-06-04T21:54:39.3946440Z   {
2025-06-04T21:54:39.3946835Z     modelId: [32m'batch-success-2'[39m,
2025-06-04T21:54:39.3947840Z     error: [32m'Normalization failed for model batch-success-2: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3948775Z   }
2025-06-04T21:54:39.3949028Z ]
2025-06-04T21:54:39.3949342Z 
2025-06-04T21:54:39.3951030Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mConcurrent Operations[2m > [22m[2mshould handle multiple concurrent normalization requests
2025-06-04T21:54:39.3952922Z [22m[39mFailed to normalize model concurrent-patient-0: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3954061Z Failed to normalize model concurrent-patient-1: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3955484Z Failed to normalize model concurrent-patient-2: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3956126Z Failed to normalize model concurrent-patient-3: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3956754Z Failed to normalize model concurrent-patient-4: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3957079Z 
2025-06-04T21:54:39.3958101Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mConcurrent Operations[2m > [22m[2mshould handle concurrent batch operations without race conditions
2025-06-04T21:54:39.3959463Z [22m[39mFailed to normalize model batch1-patient-0: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3960258Z Failed to normalize model batch2-patient-0: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3960777Z 
2025-06-04T21:54:39.3962489Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mConcurrent Operations[2m > [22m[2mshould handle concurrent batch operations without race conditions
2025-06-04T21:54:39.3964520Z [22m[39mFailed to normalize model batch1-patient-1: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3965604Z Failed to normalize model batch2-patient-1: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3966121Z 
2025-06-04T21:54:39.3967962Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mConcurrent Operations[2m > [22m[2mshould handle concurrent batch operations without race conditions
2025-06-04T21:54:39.3970210Z [22m[39mFailed to normalize model batch1-patient-2: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3971565Z Failed to normalize model batch2-patient-2: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3972413Z Batch normalization completed with 3 errors: [
2025-06-04T21:54:39.3972859Z   {
2025-06-04T21:54:39.3973328Z     modelId: [32m'batch1-patient-0'[39m,
2025-06-04T21:54:39.3974373Z     error: [32m'Normalization failed for model batch1-patient-0: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3975160Z   },
2025-06-04T21:54:39.3975431Z   {
2025-06-04T21:54:39.3975855Z     modelId: [32m'batch1-patient-1'[39m,
2025-06-04T21:54:39.3976929Z     error: [32m'Normalization failed for model batch1-patient-1: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3977676Z   },
2025-06-04T21:54:39.3977924Z   {
2025-06-04T21:54:39.3978338Z     modelId: [32m'batch1-patient-2'[39m,
2025-06-04T21:54:39.3979574Z     error: [32m'Normalization failed for model batch1-patient-2: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3980331Z   }
2025-06-04T21:54:39.3980580Z ]
2025-06-04T21:54:39.3980989Z Batch normalization completed with 3 errors: [
2025-06-04T21:54:39.3981418Z   {
2025-06-04T21:54:39.3981838Z     modelId: [32m'batch2-patient-0'[39m,
2025-06-04T21:54:39.3982869Z     error: [32m'Normalization failed for model batch2-patient-0: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3983599Z   },
2025-06-04T21:54:39.3983836Z   {
2025-06-04T21:54:39.3984233Z     modelId: [32m'batch2-patient-1'[39m,
2025-06-04T21:54:39.3985510Z     error: [32m'Normalization failed for model batch2-patient-1: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3986232Z   },
2025-06-04T21:54:39.3986462Z   {
2025-06-04T21:54:39.3986852Z     modelId: [32m'batch2-patient-2'[39m,
2025-06-04T21:54:39.3987849Z     error: [32m'Normalization failed for model batch2-patient-2: Model completeness 0.25 below required 0.7'[39m
2025-06-04T21:54:39.3988580Z   }
2025-06-04T21:54:39.3988812Z ]
2025-06-04T21:54:39.3988962Z 
2025-06-04T21:54:39.3990824Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mConcurrent Operations[2m > [22m[2mshould maintain data integrity under high concurrent load
2025-06-04T21:54:39.3992733Z [22m[39mFailed to normalize model load-test-0: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3993763Z Failed to normalize model load-test-1: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3994735Z Failed to normalize model load-test-2: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3995665Z Failed to normalize model load-test-3: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3996650Z Failed to normalize model load-test-4: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3997652Z Failed to normalize model load-test-5: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3998652Z Failed to normalize model load-test-6: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.3999826Z Failed to normalize model load-test-7: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4000795Z Failed to normalize model load-test-8: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4001757Z Failed to normalize model load-test-9: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4002733Z Failed to normalize model load-test-10: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4003712Z Failed to normalize model load-test-11: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4004692Z Failed to normalize model load-test-12: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4005664Z Failed to normalize model load-test-13: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4006634Z Failed to normalize model load-test-14: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4007811Z Failed to normalize model load-test-15: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4008798Z Failed to normalize model load-test-16: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4009925Z Failed to normalize model load-test-17: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4010915Z Failed to normalize model load-test-18: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4011894Z Failed to normalize model load-test-19: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4012389Z 
2025-06-04T21:54:39.4014232Z [90mstderr[2m | src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22m[2mPatientPsiIntegration[2m > [22m[2mConcurrent Operations[2m > [22m[2mshould handle mixed concurrent success and failure scenarios
2025-06-04T21:54:39.4016240Z [22m[39mFailed to normalize model concurrent-success-0: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4017413Z Failed to normalize model concurrent-success-1: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4018550Z Failed to normalize model concurrent-success-2: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4019805Z Failed to normalize model concurrent-failure-0: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4020846Z Failed to normalize model concurrent-failure-1: Model completeness 0.25 below required 0.7
2025-06-04T21:54:39.4021359Z 
2025-06-04T21:54:39.4022478Z  [31m❯[39m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 80[2mms[22m[39m
2025-06-04T21:54:39.4024327Z    [32m✓[39m PatientPsiIntegration[2m > [22mshould initialize with default configuration[32m 4[2mms[22m[39m
2025-06-04T21:54:39.4025965Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mshould validate minimal patient model structure[39m[32m 35[2mms[22m[39m
2025-06-04T21:54:39.4027008Z [31m     → expected null to be null[39m
2025-06-04T21:54:39.4028334Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mshould handle batch normalization of multiple models[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:39.4029520Z [31m     → expected 0 to be 2[39m
2025-06-04T21:54:39.4030534Z    [32m✓[39m PatientPsiIntegration[2m > [22mshould handle incomplete data gracefully[32m 3[2mms[22m[39m
2025-06-04T21:54:39.4032143Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mshould generate appropriate conversion statistics[39m[32m 6[2mms[22m[39m
2025-06-04T21:54:39.4033667Z [31m     → Normalization failed for model stats-patient: Model completeness 0.25 below required 0.7[39m
2025-06-04T21:54:39.4035356Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mError Handling[2m > [22mshould handle parser errors gracefully[39m[32m 7[2mms[22m[39m
2025-06-04T21:54:39.4037013Z [31m     → expected 'Normalization failed for model error-…' to contain 'Parser failed: Invalid data structure'[39m
2025-06-04T21:54:39.4038753Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mError Handling[2m > [22mshould handle indexer errors gracefully[39m[32m 7[2mms[22m[39m
2025-06-04T21:54:39.4040466Z [31m     → expected 'Normalization failed for model indexe…' to contain 'Database connection lost'[39m
2025-06-04T21:54:39.4042264Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mError Handling[2m > [22mshould handle malformed data with descriptive error messages[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:39.4043887Z [31m     → expected 'Cannot read properties of null (readi…' to contain 'Normalization failed'[39m
2025-06-04T21:54:39.4045439Z    [32m✓[39m PatientPsiIntegration[2m > [22mError Handling[2m > [22mshould handle batch processing with mixed success/failure[32m 2[2mms[22m[39m
2025-06-04T21:54:39.4047521Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mConcurrent Operations[2m > [22mshould handle multiple concurrent normalization requests[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.4049572Z [31m     → Normalization failed for model concurrent-patient-0: Model completeness 0.25 below required 0.7[39m
2025-06-04T21:54:39.4051541Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mConcurrent Operations[2m > [22mshould handle concurrent batch operations without race conditions[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:39.4052759Z [31m     → expected 0 to be 3[39m
2025-06-04T21:54:39.4054320Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mConcurrent Operations[2m > [22mshould maintain data integrity under high concurrent load[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:39.4055980Z [31m     → Normalization failed for model load-test-0: Model completeness 0.25 below required 0.7[39m
2025-06-04T21:54:39.4057842Z [31m   [31m×[31m PatientPsiIntegration[2m > [22mConcurrent Operations[2m > [22mshould handle mixed concurrent success and failure scenarios[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:39.4059255Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:54:40.1490712Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mInitialization[2m > [22m[2mshould initialize with default configuration
2025-06-04T21:54:40.1493042Z [22m[39m[2025-06-04T21:54:40.147Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1493881Z   config: {
2025-06-04T21:54:40.1494316Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1494888Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1495403Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1496298Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1496868Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1497432Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1497963Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1498466Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1499008Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1499807Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1500407Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1501013Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1501570Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1502130Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1502690Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1503354Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1504013Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1504448Z   }
2025-06-04T21:54:40.1504735Z }
2025-06-04T21:54:40.1504893Z 
2025-06-04T21:54:40.1519874Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mInitialization[2m > [22m[2mshould initialize with default configuration
2025-06-04T21:54:40.1522480Z [22m[39m[2025-06-04T21:54:40.150Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1523530Z   config: {
2025-06-04T21:54:40.1524261Z     maxQueryTimeMs: [33m200[39m,
2025-06-04T21:54:40.1525020Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1525714Z     batchSize: [33m50[39m,
2025-06-04T21:54:40.1526387Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1527131Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1527873Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1528557Z     maxCacheSize: [33m10000[39m,
2025-06-04T21:54:40.1529378Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1530110Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1530851Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1531640Z     enablePerformanceMonitoring: [33mtrue[39m,
2025-06-04T21:54:40.1532391Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1533082Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1533953Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1534596Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1535527Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1536208Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1536646Z   }
2025-06-04T21:54:40.1536925Z }
2025-06-04T21:54:40.1537720Z [2025-06-04T21:54:40.150Z] INFO  [PerformanceOptimizationEngine]: Performance monitoring started
2025-06-04T21:54:40.1538337Z 
2025-06-04T21:54:40.1542713Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mInitialization[2m > [22m[2mshould merge provided configuration with defaults
2025-06-04T21:54:40.1545298Z [22m[39m[2025-06-04T21:54:40.153Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1546316Z   config: {
2025-06-04T21:54:40.1546948Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1547679Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1548380Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1549289Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1550045Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1550788Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1551524Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1552192Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1552881Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1553618Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1554293Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1588109Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1588742Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1589600Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1590209Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1590871Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1591556Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1592029Z   }
2025-06-04T21:54:40.1592311Z }
2025-06-04T21:54:40.1592466Z 
2025-06-04T21:54:40.1594459Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mInitialization[2m > [22m[2mshould merge provided configuration with defaults
2025-06-04T21:54:40.1596908Z [22m[39m[2025-06-04T21:54:40.155Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1597764Z   config: {
2025-06-04T21:54:40.1598281Z     maxQueryTimeMs: [33m150[39m,
2025-06-04T21:54:40.1598925Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1599659Z     batchSize: [33m50[39m,
2025-06-04T21:54:40.1600161Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1600730Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1601321Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1601906Z     maxCacheSize: [33m10000[39m,
2025-06-04T21:54:40.1602466Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1603067Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1603757Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1604450Z     enablePerformanceMonitoring: [33mtrue[39m,
2025-06-04T21:54:40.1605114Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1605691Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1606275Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1606889Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1607540Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1608207Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1608625Z   }
2025-06-04T21:54:40.1608899Z }
2025-06-04T21:54:40.1609919Z [2025-06-04T21:54:40.156Z] INFO  [PerformanceOptimizationEngine]: Performance monitoring started
2025-06-04T21:54:40.1610542Z 
2025-06-04T21:54:40.1612825Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mInitialization[2m > [22m[2mshould create engine using factory function
2025-06-04T21:54:40.1615269Z [22m[39m[2025-06-04T21:54:40.156Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1616154Z   config: {
2025-06-04T21:54:40.1616638Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1617269Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1617842Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1618387Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1619004Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1619892Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1652383Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1652958Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1653546Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1654181Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1654887Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1655560Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1656093Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1656647Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1657213Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1657812Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1658423Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1658856Z   }
2025-06-04T21:54:40.1659299Z }
2025-06-04T21:54:40.1659429Z 
2025-06-04T21:54:40.1661199Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mInitialization[2m > [22m[2mshould create engine using factory function
2025-06-04T21:54:40.1663820Z [22m[39m[2025-06-04T21:54:40.157Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1664687Z   config: {
2025-06-04T21:54:40.1665184Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1665811Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1666378Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1666939Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1667597Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1668240Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1668802Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1669506Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1670003Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1670611Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1671288Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1671912Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1672467Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1673056Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1673672Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1674306Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1674980Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1675445Z   }
2025-06-04T21:54:40.1675713Z }
2025-06-04T21:54:40.1675863Z 
2025-06-04T21:54:40.1678065Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mDatabase Query Optimization[2m > [22m[2mshould optimize comparative analytics queries with caching
2025-06-04T21:54:40.1680805Z [22m[39m[2025-06-04T21:54:40.158Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1681721Z   config: {
2025-06-04T21:54:40.1682209Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1682845Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1683413Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1683955Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1684578Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1685211Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1686016Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1686603Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1687188Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1687836Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1688534Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1689428Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1690022Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1690593Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1691190Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1691816Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1692460Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1692885Z   }
2025-06-04T21:54:40.1693151Z }
2025-06-04T21:54:40.1693306Z 
2025-06-04T21:54:40.1695317Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mDatabase Query Optimization[2m > [22m[2mshould handle query optimization errors gracefully
2025-06-04T21:54:40.1697691Z [22m[39m[2025-06-04T21:54:40.164Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1698501Z   config: {
2025-06-04T21:54:40.1698948Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1699752Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1700298Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1700827Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1701688Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1702290Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1702885Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1703499Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1704056Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1704658Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1705307Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1727284Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1727952Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1728545Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1729410Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1730084Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1730749Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1731214Z   }
2025-06-04T21:54:40.1731492Z }
2025-06-04T21:54:40.1731648Z 
2025-06-04T21:54:40.1738232Z [90mstderr[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mDatabase Query Optimization[2m > [22m[2mshould handle query optimization errors gracefully
2025-06-04T21:54:40.1772671Z [22m[39m[2025-06-04T21:54:40.165Z] ERROR [PerformanceOptimizationEngine]: Error in optimized query execution {
2025-06-04T21:54:40.1773653Z   queryType: [32m'technique'[39m,
2025-06-04T21:54:40.1774257Z   identifier: [32m'test-technique'[39m,
2025-06-04T21:54:40.1774710Z   error: Error: Query failed
2025-06-04T21:54:40.1780395Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:223:28
2025-06-04T21:54:40.1785117Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:40.1787414Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:40.1789883Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:40.1791117Z       at new Promise (<anonymous>)
2025-06-04T21:54:40.1793260Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:40.1795821Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:40.1798340Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.1801067Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.1803663Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.1804857Z }
2025-06-04T21:54:40.1805007Z 
2025-06-04T21:54:40.1807132Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mDatabase Query Optimization[2m > [22m[2mshould apply different cache TTL based on query type
2025-06-04T21:54:40.1809878Z [22m[39m[2025-06-04T21:54:40.175Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1810763Z   config: {
2025-06-04T21:54:40.1811548Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1812170Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1812716Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1813261Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1813862Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1814454Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1815002Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1815528Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1816072Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1816675Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1817332Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1817961Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1818561Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1821086Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1821768Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1822416Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1823061Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1823489Z   }
2025-06-04T21:54:40.1823763Z }
2025-06-04T21:54:40.1823911Z 
2025-06-04T21:54:40.1826007Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mDatabase Query Optimization[2m > [22m[2mshould enable query batching for supported query types
2025-06-04T21:54:40.1828507Z [22m[39m[2025-06-04T21:54:40.176Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1830930Z   config: {
2025-06-04T21:54:40.1831420Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1832062Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1832599Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1833119Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1833725Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1834347Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1834915Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1835453Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1836028Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1836618Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1837286Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1837922Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1838724Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1839533Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1840102Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1840681Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1841262Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1841678Z   }
2025-06-04T21:54:40.1841939Z }
2025-06-04T21:54:40.1842084Z 
2025-06-04T21:54:40.1844054Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mAdvanced Caching Strategy[2m > [22m[2mshould cache common patterns with optimization
2025-06-04T21:54:40.1846505Z [22m[39m[2025-06-04T21:54:40.177Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1847323Z   config: {
2025-06-04T21:54:40.1847780Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1848404Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1848949Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1859384Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1860030Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1882303Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1882894Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1883401Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1883922Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1884611Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1885600Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1886241Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1886798Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1887353Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1888015Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1888633Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1889459Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1889916Z   }
2025-06-04T21:54:40.1890195Z }
2025-06-04T21:54:40.1890352Z 
2025-06-04T21:54:40.1892310Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mAdvanced Caching Strategy[2m > [22m[2mshould cache common patterns with optimization
2025-06-04T21:54:40.1894518Z [22m[39m[2025-06-04T21:54:40.177Z] DEBUG [PerformanceOptimizationEngine]: Cached common patterns {
2025-06-04T21:54:40.1895473Z   patternType: [32m'cross-session'[39m,
2025-06-04T21:54:40.1896046Z   clientId: [32m'test-client'[39m,
2025-06-04T21:54:40.1896593Z   patternCount: [33m2[39m,
2025-06-04T21:54:40.1897098Z   optimizedCount: [33m2[39m
2025-06-04T21:54:40.1897483Z }
2025-06-04T21:54:40.1897639Z 
2025-06-04T21:54:40.1899838Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mAdvanced Caching Strategy[2m > [22m[2mshould cache high-value patterns in Redis
2025-06-04T21:54:40.1902268Z [22m[39m[2025-06-04T21:54:40.178Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1903127Z   config: {
2025-06-04T21:54:40.1903662Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1904283Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1904832Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1905343Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1905979Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1906574Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1907133Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1907645Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1908194Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1908803Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1930559Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1931488Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1932107Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1932672Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1933258Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1933848Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1934480Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1934932Z   }
2025-06-04T21:54:40.1935198Z }
2025-06-04T21:54:40.1935354Z 
2025-06-04T21:54:40.1941338Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mAdvanced Caching Strategy[2m > [22m[2mshould cache high-value patterns in Redis
2025-06-04T21:54:40.1947409Z [22m[39m[2025-06-04T21:54:40.179Z] DEBUG [PerformanceOptimizationEngine]: Cached common patterns {
2025-06-04T21:54:40.1948369Z   patternType: [32m'cross-session'[39m,
2025-06-04T21:54:40.1949015Z   clientId: [32m'test-client'[39m,
2025-06-04T21:54:40.1949755Z   patternCount: [33m3[39m,
2025-06-04T21:54:40.1950212Z   optimizedCount: [33m3[39m
2025-06-04T21:54:40.1950570Z }
2025-06-04T21:54:40.1950720Z 
2025-06-04T21:54:40.1968408Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mAdvanced Caching Strategy[2m > [22m[2mshould cache emotion analysis with intelligent TTL
2025-06-04T21:54:40.1970867Z [22m[39m[2025-06-04T21:54:40.182Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1971993Z   config: {
2025-06-04T21:54:40.1972453Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.1973001Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1973485Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.1973943Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.1974460Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.1974950Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.1975449Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.1975921Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.1976424Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.1976988Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.1977582Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.1978176Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.1978683Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.1990658Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.1991370Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.1992012Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.1992652Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.1993099Z   }
2025-06-04T21:54:40.1993362Z }
2025-06-04T21:54:40.1993518Z 
2025-06-04T21:54:40.1995543Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mAdvanced Caching Strategy[2m > [22m[2mshould retrieve cached emotion analysis
2025-06-04T21:54:40.1997899Z [22m[39m[2025-06-04T21:54:40.183Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.1998773Z   config: {
2025-06-04T21:54:40.1999450Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2000099Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2000646Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2001178Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2001784Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2002373Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2002816Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2003227Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2003798Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2004407Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2005071Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2005969Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2006578Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2007138Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2007727Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2008345Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2008981Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2009624Z   }
2025-06-04T21:54:40.2009902Z }
2025-06-04T21:54:40.2010055Z 
2025-06-04T21:54:40.2012096Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mAdvanced Caching Strategy[2m > [22m[2mshould return null for non-cached emotion analysis
2025-06-04T21:54:40.2014500Z [22m[39m[2025-06-04T21:54:40.184Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2015396Z   config: {
2025-06-04T21:54:40.2015898Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2016506Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2017066Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2017612Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2018209Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2018810Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2019717Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2020249Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2020811Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2021665Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2022325Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2022957Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2023520Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2024088Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2024718Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2025368Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2025995Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2026429Z   }
2025-06-04T21:54:40.2026700Z }
2025-06-04T21:54:40.2026856Z 
2025-06-04T21:54:40.2028875Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mAdvanced Caching Strategy[2m > [22m[2mshould handle Redis cache fallback for emotion analysis
2025-06-04T21:54:40.2031463Z [22m[39m[2025-06-04T21:54:40.185Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2032313Z   config: {
2025-06-04T21:54:40.2032757Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2033357Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2033895Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2034420Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2035014Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2035610Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2036171Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2036691Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2037241Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2037849Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2038478Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2039339Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2039916Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2040477Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2041079Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2041698Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2042315Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2042750Z   }
2025-06-04T21:54:40.2043016Z }
2025-06-04T21:54:40.2043173Z 
2025-06-04T21:54:40.2045356Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Monitoring and Reporting[2m > [22m[2mshould generate performance report
2025-06-04T21:54:40.2047707Z [22m[39m[2025-06-04T21:54:40.186Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2048555Z   config: {
2025-06-04T21:54:40.2049014Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2049960Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2050529Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2051049Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2051602Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2052168Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2052728Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2053254Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2053800Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2054399Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2055068Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2055669Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2056252Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2056830Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2057391Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2057980Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2058561Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2058987Z   }
2025-06-04T21:54:40.2059694Z }
2025-06-04T21:54:40.2059855Z 
2025-06-04T21:54:40.2061838Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Monitoring and Reporting[2m > [22m[2mshould auto-tune performance parameters
2025-06-04T21:54:40.2081997Z [22m[39m[2025-06-04T21:54:40.188Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2082873Z   config: {
2025-06-04T21:54:40.2083377Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2084012Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2084579Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2085114Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2085709Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2086313Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2086905Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2087427Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2087988Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2088588Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2089459Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2090140Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2090749Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2091304Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2091887Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2092545Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2093188Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2093618Z   }
2025-06-04T21:54:40.2093882Z }
2025-06-04T21:54:40.2094040Z 
2025-06-04T21:54:40.2096075Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Monitoring and Reporting[2m > [22m[2mshould auto-tune performance parameters
2025-06-04T21:54:40.2098544Z [22m[39m[2025-06-04T21:54:40.188Z] INFO  [PerformanceOptimizationEngine]: Increased cache size { newSize: [33m1200[39m }
2025-06-04T21:54:40.2099489Z 
2025-06-04T21:54:40.2101543Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Monitoring and Reporting[2m > [22m[2mshould auto-tune performance parameters
2025-06-04T21:54:40.2104798Z [22m[39m[2025-06-04T21:54:40.189Z] INFO  [PerformanceOptimizationEngine]: Performance auto-tuning complete { cacheHitRate: [33m0[39m, avgResponseTime: [33m0[39m, improvements: [33m0[39m }
2025-06-04T21:54:40.2105909Z 
2025-06-04T21:54:40.2107904Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Monitoring and Reporting[2m > [22m[2mshould optimize benchmark queries
2025-06-04T21:54:40.2110479Z [22m[39m[2025-06-04T21:54:40.189Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2111337Z   config: {
2025-06-04T21:54:40.2111815Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2112452Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2113020Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2113554Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2114147Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2114776Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2115349Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2115873Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2116412Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2117015Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2117698Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2118345Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2118904Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2119971Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2120571Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2121209Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2121845Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2122273Z   }
2025-06-04T21:54:40.2122542Z }
2025-06-04T21:54:40.2122699Z 
2025-06-04T21:54:40.2124681Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Monitoring and Reporting[2m > [22m[2mshould optimize benchmark queries
2025-06-04T21:54:40.2126996Z [22m[39m[2025-06-04T21:54:40.190Z] INFO  [PerformanceOptimizationEngine]: Optimizing benchmark database queries
2025-06-04T21:54:40.2128498Z [2025-06-04T21:54:40.190Z] INFO  [PerformanceOptimizationEngine]: Creating materialized views for performance optimization
2025-06-04T21:54:40.2129454Z 
2025-06-04T21:54:40.2131471Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Monitoring and Reporting[2m > [22m[2mshould optimize benchmark queries
2025-06-04T21:54:40.2133830Z [22m[39m[2025-06-04T21:54:40.190Z] INFO  [PerformanceOptimizationEngine]: Optimizing database connection pooling
2025-06-04T21:54:40.2134514Z 
2025-06-04T21:54:40.2136491Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Monitoring and Reporting[2m > [22m[2mshould optimize benchmark queries
2025-06-04T21:54:40.2139337Z [22m[39m[2025-06-04T21:54:40.190Z] INFO  [PerformanceOptimizationEngine]: Benchmark query optimization complete { indexRecommendations: [33m0[39m }
2025-06-04T21:54:40.2140246Z 
2025-06-04T21:54:40.2142163Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mCache Management[2m > [22m[2mshould implement LRU eviction when cache is full
2025-06-04T21:54:40.2144526Z [22m[39m[2025-06-04T21:54:40.191Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2145391Z   config: {
2025-06-04T21:54:40.2145865Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2146489Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2147047Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2147777Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2148427Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2149036Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2149820Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2150333Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2150876Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2151481Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2152168Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2152820Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2153376Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2153946Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2154524Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2155123Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2155935Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2156378Z   }
2025-06-04T21:54:40.2156635Z }
2025-06-04T21:54:40.2156796Z 
2025-06-04T21:54:40.2158714Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mCache Management[2m > [22m[2mshould implement LRU eviction when cache is full
2025-06-04T21:54:40.2161250Z [22m[39m[2025-06-04T21:54:40.193Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2162111Z   config: {
2025-06-04T21:54:40.2162590Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2163459Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2164027Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2164563Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2165157Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2165754Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2166316Z     maxCacheSize: [33m2[39m,
2025-06-04T21:54:40.2166843Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2167382Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2168001Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2168662Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2169530Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2170118Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2170673Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2171252Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2171879Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2172538Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2172972Z   }
2025-06-04T21:54:40.2173236Z }
2025-06-04T21:54:40.2173390Z 
2025-06-04T21:54:40.2175248Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mCache Management[2m > [22m[2mshould handle cache expiration correctly
2025-06-04T21:54:40.2177580Z [22m[39m[2025-06-04T21:54:40.194Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2178412Z   config: {
2025-06-04T21:54:40.2178815Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2179619Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2180146Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2180669Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2181281Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2181873Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2182431Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2182956Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2183530Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2184164Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2184822Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2185452Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2186020Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2186825Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2187446Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2188077Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2188721Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2189337Z   }
2025-06-04T21:54:40.2189616Z }
2025-06-04T21:54:40.2189782Z 
2025-06-04T21:54:40.2191701Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mCache Management[2m > [22m[2mshould handle cache expiration correctly
2025-06-04T21:54:40.2194055Z [22m[39m[2025-06-04T21:54:40.195Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2194924Z   config: {
2025-06-04T21:54:40.2195410Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2196016Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2196552Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2197107Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2197749Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2198349Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2198915Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2199680Z     defaultTTL: [33m0.001[39m,
2025-06-04T21:54:40.2200279Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2200593Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2200952Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2201470Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2201753Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2202026Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2202334Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2202656Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2203123Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2203257Z   }
2025-06-04T21:54:40.2203380Z }
2025-06-04T21:54:40.2203395Z 
2025-06-04T21:54:40.2205336Z [90mstderr[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Utilities[2m > [22m[2mshould measure execution time accurately
2025-06-04T21:54:40.2206253Z [22m[39m[2025-06-04T21:54:40.216Z] ERROR [PerformanceOptimizationEngine]: Error executing query batch {
2025-06-04T21:54:40.2206594Z   batchKey: [32m'batch:technique'[39m,
2025-06-04T21:54:40.2206758Z   error: Error: Query failed
2025-06-04T21:54:40.2207859Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:223:28
2025-06-04T21:54:40.2209366Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:40.2210666Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:40.2211935Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:40.2212160Z       at new Promise (<anonymous>)
2025-06-04T21:54:40.2213597Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:40.2215009Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:40.2216377Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.2217965Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.2219588Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.2219734Z }
2025-06-04T21:54:40.2219748Z 
2025-06-04T21:54:40.2221669Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Utilities[2m > [22m[2mshould measure execution time accurately
2025-06-04T21:54:40.2222713Z [22m[39m[2025-06-04T21:54:40.205Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2222856Z   config: {
2025-06-04T21:54:40.2223148Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2223487Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2223722Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2224014Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2224337Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2224615Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2224875Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2225113Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2225399Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2225691Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2226296Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2226600Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2226876Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2227165Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2227455Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2227770Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2228087Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2228206Z   }
2025-06-04T21:54:40.2228337Z }
2025-06-04T21:54:40.2228351Z 
2025-06-04T21:54:40.2580222Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Utilities[2m > [22m[2mshould create debounced function
2025-06-04T21:54:40.2581335Z [22m[39m[2025-06-04T21:54:40.256Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.2581537Z   config: {
2025-06-04T21:54:40.2581863Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.2582200Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2582440Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.2582726Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.2583045Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.2583336Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.2583612Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.2583888Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.2584264Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.2584690Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.2585111Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.2585737Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.2586143Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.2586497Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.2615326Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.2615805Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.2616135Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.2616268Z   }
2025-06-04T21:54:40.2616395Z }
2025-06-04T21:54:40.2616410Z 
2025-06-04T21:54:40.3200107Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Utilities[2m > [22m[2mshould create throttled function
2025-06-04T21:54:40.3203225Z [22m[39m[2025-06-04T21:54:40.319Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.3205172Z   config: {
2025-06-04T21:54:40.3205649Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.3206247Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.3206813Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.3207328Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.3207901Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.3208488Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.3209016Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.3209713Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.3210223Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.3210773Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.3211388Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.3211986Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.3212561Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.3213150Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.3213753Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.3214370Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.3215022Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.3215470Z   }
2025-06-04T21:54:40.3215769Z }
2025-06-04T21:54:40.3215929Z 
2025-06-04T21:54:40.3819961Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mError Handling[2m > [22m[2mshould handle Redis connection errors gracefully
2025-06-04T21:54:40.3826910Z [22m[39m[2025-06-04T21:54:40.380Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.3827741Z   config: {
2025-06-04T21:54:40.3828163Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.3828730Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.3829456Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.3830000Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.3830611Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.3831204Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.3831765Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.3832273Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.3834312Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.3834959Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.3835655Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.3836260Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.3836859Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.3837435Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.3838032Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.3838676Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.3839532Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.3839995Z   }
2025-06-04T21:54:40.3841343Z }
2025-06-04T21:54:40.3841572Z 
2025-06-04T21:54:40.3843664Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mError Handling[2m > [22m[2mshould handle caching errors without affecting main functionality
2025-06-04T21:54:40.3849719Z [22m[39m[2025-06-04T21:54:40.382Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.3850656Z   config: {
2025-06-04T21:54:40.3851172Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.3851811Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.3852388Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.3852953Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.3853575Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.3854207Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.3854806Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.3855733Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.3856372Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.3857000Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.3857689Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.3858336Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.3858911Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.3859797Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.3860433Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.3861091Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.3861744Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.3862185Z   }
2025-06-04T21:54:40.3862438Z }
2025-06-04T21:54:40.3862598Z 
2025-06-04T21:54:40.3864572Z [90mstderr[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mError Handling[2m > [22m[2mshould handle Redis connection errors gracefully
2025-06-04T21:54:40.3866921Z [22m[39m[2025-06-04T21:54:40.381Z] ERROR [PerformanceOptimizationEngine]: Error retrieving cached emotion analysis {
2025-06-04T21:54:40.3867866Z   error: Error: Redis connection failed
2025-06-04T21:54:40.3869450Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:512:33
2025-06-04T21:54:40.3871594Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:40.3874123Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:40.3876341Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:40.3877590Z       at new Promise (<anonymous>)
2025-06-04T21:54:40.3883714Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:40.3910448Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:40.3920126Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.3922642Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.3925113Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.3926325Z }
2025-06-04T21:54:40.3926497Z 
2025-06-04T21:54:40.3928414Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mError Handling[2m > [22m[2mshould handle auto-tuning errors gracefully
2025-06-04T21:54:40.3930961Z [22m[39m[2025-06-04T21:54:40.384Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.3931849Z   config: {
2025-06-04T21:54:40.3932343Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.3932943Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.3933457Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.3934284Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.3934870Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.3935729Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.3936296Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.3936787Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.3937307Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.3937897Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.3938549Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.3939344Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.3940294Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.3940899Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.3941515Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.3942162Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.3942759Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.3943209Z   }
2025-06-04T21:54:40.3943469Z }
2025-06-04T21:54:40.3943617Z 
2025-06-04T21:54:40.3945916Z [90mstderr[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mError Handling[2m > [22m[2mshould handle caching errors without affecting main functionality
2025-06-04T21:54:40.3948166Z [22m[39m[2025-06-04T21:54:40.383Z] ERROR [PerformanceOptimizationEngine]: Error caching emotion analysis {
2025-06-04T21:54:40.3948980Z   error: Error: Redis write failed
2025-06-04T21:54:40.3950463Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:520:33
2025-06-04T21:54:40.3952853Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:40.3955046Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:40.3957964Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:40.3959313Z       at new Promise (<anonymous>)
2025-06-04T21:54:40.3960945Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:40.3962964Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:40.3964293Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.3965559Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.3966851Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.3967868Z }
2025-06-04T21:54:40.3967965Z 
2025-06-04T21:54:40.3968964Z [90mstderr[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mError Handling[2m > [22m[2mshould handle auto-tuning errors gracefully
2025-06-04T21:54:40.3970411Z [22m[39m[2025-06-04T21:54:40.384Z] ERROR [PerformanceOptimizationEngine]: Error in performance auto-tuning {
2025-06-04T21:54:40.3970903Z   error: Error: Report generation failed
2025-06-04T21:54:40.3971636Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:532:28
2025-06-04T21:54:40.3972983Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:40.3974157Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:40.3975286Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:40.3975905Z       at new Promise (<anonymous>)
2025-06-04T21:54:40.3976802Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:40.3978091Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:40.3979470Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.3980730Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.3981978Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.3982740Z }
2025-06-04T21:54:40.3982830Z 
2025-06-04T21:54:40.3984540Z [90mstderr[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould integrate with existing emotion detection caching
2025-06-04T21:54:40.4010426Z [22m[39m[2025-06-04T21:54:40.387Z] ERROR [PerformanceOptimizationEngine]: Error caching emotion analysis {
2025-06-04T21:54:40.4011280Z   error: Error: Redis write failed
2025-06-04T21:54:40.4012629Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:520:33
2025-06-04T21:54:40.4014680Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:40.4016675Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:40.4018720Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:40.4020024Z       at new Promise (<anonymous>)
2025-06-04T21:54:40.4021646Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:40.4023999Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:40.4026362Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.4028696Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.4031436Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.4032600Z }
2025-06-04T21:54:40.4032751Z 
2025-06-04T21:54:40.4034709Z [90mstderr[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould provide comprehensive optimization for full workflow
2025-06-04T21:54:40.4036872Z [22m[39m[2025-06-04T21:54:40.389Z] ERROR [PerformanceOptimizationEngine]: Error caching emotion analysis {
2025-06-04T21:54:40.4037663Z   error: Error: Redis write failed
2025-06-04T21:54:40.4038904Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:520:33
2025-06-04T21:54:40.4067121Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:40.4069500Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:40.4071798Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:40.4072937Z       at new Promise (<anonymous>)
2025-06-04T21:54:40.4074561Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:40.4077108Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:40.4080110Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.4082483Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.4084848Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:40.4085989Z }
2025-06-04T21:54:40.4086163Z 
2025-06-04T21:54:40.4088106Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Targets[2m > [22m[2mshould achieve sub-500ms response time for optimized queries
2025-06-04T21:54:40.4090543Z [22m[39m[2025-06-04T21:54:40.385Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.4091338Z   config: {
2025-06-04T21:54:40.4091771Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.4092348Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4092883Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.4093409Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.4093991Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.4094564Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.4095109Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.4095593Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.4096120Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.4096743Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.4097406Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.4098034Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.4098584Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.4099503Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.4100115Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.4100976Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4101655Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.4102076Z   }
2025-06-04T21:54:40.4102327Z }
2025-06-04T21:54:40.4102476Z 
2025-06-04T21:54:40.4104423Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mPerformance Targets[2m > [22m[2mshould maintain high cache hit rate with repeated queries
2025-06-04T21:54:40.4106723Z [22m[39m[2025-06-04T21:54:40.385Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.4107589Z   config: {
2025-06-04T21:54:40.4108034Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.4108669Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4109389Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.4109917Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.4110512Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.4111108Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.4111650Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.4112154Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.4112677Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.4113245Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.4113852Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.4114449Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.4114971Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.4115749Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.4116300Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.4116873Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4117471Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.4117885Z   }
2025-06-04T21:54:40.4118139Z }
2025-06-04T21:54:40.4118282Z 
2025-06-04T21:54:40.4120411Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould integrate with existing emotion detection caching
2025-06-04T21:54:40.4122527Z [22m[39m[2025-06-04T21:54:40.387Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.4123010Z   config: {
2025-06-04T21:54:40.4123267Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.4123595Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4123882Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.4124176Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.4124498Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.4124813Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.4125107Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.4125389Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.4125693Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.4126021Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.4126378Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.4126713Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.4127007Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.4127303Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.4127615Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.4127936Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4128269Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.4128510Z   }
2025-06-04T21:54:40.4128665Z }
2025-06-04T21:54:40.4128750Z 
2025-06-04T21:54:40.4130425Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould integrate with pattern recognition optimization
2025-06-04T21:54:40.4131720Z [22m[39m[2025-06-04T21:54:40.388Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.4132182Z   config: {
2025-06-04T21:54:40.4132578Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.4132914Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4133196Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.4133477Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.4133791Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.4134105Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.4134480Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.4134993Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.4135552Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.4136147Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.4136803Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.4137418Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.4137970Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.4138509Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.4139253Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.4139872Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4140502Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.4140920Z   }
2025-06-04T21:54:40.4141187Z }
2025-06-04T21:54:40.4141333Z 
2025-06-04T21:54:40.4143312Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould integrate with pattern recognition optimization
2025-06-04T21:54:40.4145698Z [22m[39m[2025-06-04T21:54:40.388Z] DEBUG [PerformanceOptimizationEngine]: Cached common patterns {
2025-06-04T21:54:40.4146563Z   patternType: [32m'trend'[39m,
2025-06-04T21:54:40.4147184Z   clientId: [32m'integration-test-client'[39m,
2025-06-04T21:54:40.4147753Z   patternCount: [33m1[39m,
2025-06-04T21:54:40.4148197Z   optimizedCount: [33m1[39m
2025-06-04T21:54:40.4148562Z }
2025-06-04T21:54:40.4148714Z 
2025-06-04T21:54:40.4150944Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould provide comprehensive optimization for full workflow
2025-06-04T21:54:40.4153326Z [22m[39m[2025-06-04T21:54:40.388Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.4154154Z   config: {
2025-06-04T21:54:40.4154566Z     maxQueryTimeMs: [33m100[39m,
2025-06-04T21:54:40.4155126Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4155638Z     batchSize: [33m10[39m,
2025-06-04T21:54:40.4156134Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.4156694Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.4157258Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.4157777Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:40.4158265Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.4158775Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.4159506Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.4160123Z     enablePerformanceMonitoring: [33mfalse[39m,
2025-06-04T21:54:40.4160692Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.4161188Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.4161689Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.4162217Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.4162784Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4163366Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.4163780Z   }
2025-06-04T21:54:40.4164026Z }
2025-06-04T21:54:40.4164174Z 
2025-06-04T21:54:40.4166108Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould provide comprehensive optimization for full workflow
2025-06-04T21:54:40.4168221Z [22m[39m[2025-06-04T21:54:40.389Z] DEBUG [PerformanceOptimizationEngine]: Cached common patterns {
2025-06-04T21:54:40.4169435Z   patternType: [32m'cross-session'[39m,
2025-06-04T21:54:40.4170034Z   clientId: [32m'workflow-client'[39m,
2025-06-04T21:54:40.4170515Z   patternCount: [33m2[39m,
2025-06-04T21:54:40.4170946Z   optimizedCount: [33m2[39m
2025-06-04T21:54:40.4171293Z }
2025-06-04T21:54:40.4171433Z 
2025-06-04T21:54:40.4173335Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould provide comprehensive optimization for full workflow
2025-06-04T21:54:40.4175758Z [22m[39m[2025-06-04T21:54:40.389Z] INFO  [PerformanceOptimizationEngine]: Optimizing benchmark database queries
2025-06-04T21:54:40.4177250Z [2025-06-04T21:54:40.389Z] INFO  [PerformanceOptimizationEngine]: Creating materialized views for performance optimization
2025-06-04T21:54:40.4177976Z 
2025-06-04T21:54:40.4185427Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould provide comprehensive optimization for full workflow
2025-06-04T21:54:40.4187844Z [22m[39m[2025-06-04T21:54:40.389Z] INFO  [PerformanceOptimizationEngine]: Optimizing database connection pooling
2025-06-04T21:54:40.4188501Z 
2025-06-04T21:54:40.4190682Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould provide comprehensive optimization for full workflow
2025-06-04T21:54:40.4193489Z [22m[39m[2025-06-04T21:54:40.389Z] INFO  [PerformanceOptimizationEngine]: Benchmark query optimization complete { indexRecommendations: [33m0[39m }
2025-06-04T21:54:40.4194360Z 
2025-06-04T21:54:40.4196475Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould provide comprehensive optimization for full workflow
2025-06-04T21:54:40.4198831Z [22m[39m[2025-06-04T21:54:40.390Z] INFO  [PerformanceOptimizationEngine]: Increased cache size { newSize: [33m1200[39m }
2025-06-04T21:54:40.4199695Z 
2025-06-04T21:54:40.4201591Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformanceOptimizationEngine[2m > [22m[2mIntegration Tests[2m > [22m[2mshould provide comprehensive optimization for full workflow
2025-06-04T21:54:40.4204562Z [22m[39m[2025-06-04T21:54:40.390Z] INFO  [PerformanceOptimizationEngine]: Performance auto-tuning complete { cacheHitRate: [33m0[39m, avgResponseTime: [33m0[39m, improvements: [33m0[39m }
2025-06-04T21:54:40.4205615Z 
2025-06-04T21:54:40.4207348Z [90mstdout[2m | src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22m[2mPerformance Optimization Integration[2m > [22m[2mshould demonstrate end-to-end performance improvement
2025-06-04T21:54:40.4209755Z [22m[39m[2025-06-04T21:54:40.390Z] INFO  [PerformanceOptimizationEngine]: Performance Optimization Engine initialized {
2025-06-04T21:54:40.4210603Z   config: {
2025-06-04T21:54:40.4211043Z     maxQueryTimeMs: [33m200[39m,
2025-06-04T21:54:40.4211613Z     enableQueryOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4212116Z     batchSize: [33m50[39m,
2025-06-04T21:54:40.4212600Z     connectionPoolSize: [33m10[39m,
2025-06-04T21:54:40.4213177Z     enableAdvancedCaching: [33mtrue[39m,
2025-06-04T21:54:40.4213736Z     cacheHitRateTarget: [33m0.8[39m,
2025-06-04T21:54:40.4214238Z     maxCacheSize: [33m10000[39m,
2025-06-04T21:54:40.4214698Z     defaultTTL: [33m3600[39m,
2025-06-04T21:54:40.4215191Z     targetResponseTimeMs: [33m500[39m,
2025-06-04T21:54:40.4215739Z     maxConcurrentRequests: [33m100[39m,
2025-06-04T21:54:40.4216335Z     enablePerformanceMonitoring: [33mtrue[39m,
2025-06-04T21:54:40.4216892Z     patternCacheTTL: [33m7200[39m,
2025-06-04T21:54:40.4217602Z     emotionCacheTTL: [33m1800[39m,
2025-06-04T21:54:40.4218139Z     benchmarkCacheTTL: [33m14400[39m,
2025-06-04T21:54:40.4218687Z     enableQueryBatching: [33mtrue[39m,
2025-06-04T21:54:40.4219467Z     enableIndexOptimization: [33mtrue[39m,
2025-06-04T21:54:40.4220053Z     enableMaterializedViews: [33mtrue[39m
2025-06-04T21:54:40.4220450Z   }
2025-06-04T21:54:40.4220697Z }
2025-06-04T21:54:40.4221429Z [2025-06-04T21:54:40.390Z] INFO  [PerformanceOptimizationEngine]: Performance monitoring started
2025-06-04T21:54:40.4221977Z 
2025-06-04T21:54:40.4223232Z  [31m❯[39m src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts [2m([22m[2m30 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 248[2mms[22m[39m
2025-06-04T21:54:40.4225170Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mInitialization[2m > [22mshould initialize with default configuration[32m 7[2mms[22m[39m
2025-06-04T21:54:40.4227032Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mInitialization[2m > [22mshould merge provided configuration with defaults[32m 4[2mms[22m[39m
2025-06-04T21:54:40.4228900Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mInitialization[2m > [22mshould create engine using factory function[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4231073Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mDatabase Query Optimization[2m > [22mshould optimize comparative analytics queries with caching[32m 5[2mms[22m[39m
2025-06-04T21:54:40.4233192Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mDatabase Query Optimization[2m > [22mshould handle query optimization errors gracefully[32m 11[2mms[22m[39m
2025-06-04T21:54:40.4235472Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mDatabase Query Optimization[2m > [22mshould apply different cache TTL based on query type[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4237569Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mDatabase Query Optimization[2m > [22mshould enable query batching for supported query types[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4239752Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mAdvanced Caching Strategy[2m > [22mshould cache common patterns with optimization[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4241913Z [31m   [31m×[31m PerformanceOptimizationEngine[2m > [22mAdvanced Caching Strategy[2m > [22mshould cache high-value patterns in Redis[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:40.4243231Z [31m     → expected "spy" to be called at least once[39m
2025-06-04T21:54:40.4244715Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mAdvanced Caching Strategy[2m > [22mshould cache emotion analysis with intelligent TTL[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4246663Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mAdvanced Caching Strategy[2m > [22mshould retrieve cached emotion analysis[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4248614Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mAdvanced Caching Strategy[2m > [22mshould return null for non-cached emotion analysis[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4250807Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mAdvanced Caching Strategy[2m > [22mshould handle Redis cache fallback for emotion analysis[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4252822Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mPerformance Monitoring and Reporting[2m > [22mshould generate performance report[32m 2[2mms[22m[39m
2025-06-04T21:54:40.4254829Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mPerformance Monitoring and Reporting[2m > [22mshould auto-tune performance parameters[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4257026Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mPerformance Monitoring and Reporting[2m > [22mshould optimize benchmark queries[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4259345Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mCache Management[2m > [22mshould implement LRU eviction when cache is full[32m 4[2mms[22m[39m
2025-06-04T21:54:40.4261188Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mCache Management[2m > [22mshould handle cache expiration correctly[32m 11[2mms[22m[39m
2025-06-04T21:54:40.4263038Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mPerformance Utilities[2m > [22mshould measure execution time accurately[32m 51[2mms[22m[39m
2025-06-04T21:54:40.4264781Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mPerformance Utilities[2m > [22mshould create debounced function[32m 62[2mms[22m[39m
2025-06-04T21:54:40.4268673Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mPerformance Utilities[2m > [22mshould create throttled function[32m 62[2mms[22m[39m
2025-06-04T21:54:40.4270838Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mError Handling[2m > [22mshould handle Redis connection errors gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4272863Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mError Handling[2m > [22mshould handle caching errors without affecting main functionality[32m 2[2mms[22m[39m
2025-06-04T21:54:40.4274813Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mError Handling[2m > [22mshould handle auto-tuning errors gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4276814Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mPerformance Targets[2m > [22mshould achieve sub-500ms response time for optimized queries[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4278883Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mPerformance Targets[2m > [22mshould maintain high cache hit rate with repeated queries[32m 2[2mms[22m[39m
2025-06-04T21:54:40.4281415Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mIntegration Tests[2m > [22mshould integrate with existing emotion detection caching[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4283396Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mIntegration Tests[2m > [22mshould integrate with pattern recognition optimization[32m 1[2mms[22m[39m
2025-06-04T21:54:40.4285389Z    [32m✓[39m PerformanceOptimizationEngine[2m > [22mIntegration Tests[2m > [22mshould provide comprehensive optimization for full workflow[32m 2[2mms[22m[39m
2025-06-04T21:54:40.4287405Z [31m   [31m×[31m Performance Optimization Integration[2m > [22mshould demonstrate end-to-end performance improvement[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:40.4288550Z [31m     → expected 0 to be less than 0[39m
2025-06-04T21:54:40.5155809Z  [31m❯[39m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts [2m([22m[2m19 tests[22m[2m | [22m[31m19 failed[39m[2m)[22m[32m 29[2mms[22m[39m
2025-06-04T21:54:40.5160249Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mBelief Consistency Checking[2m > [22mshould assess belief alignment correctly[39m[32m 11[2mms[22m[39m
2025-06-04T21:54:40.5168195Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5170127Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mBelief Consistency Checking[2m > [22mshould detect inconsistencies in statements[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5171527Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5173516Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mBelief Consistency Checking[2m > [22mshould provide consistency adjustments for misaligned statements[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5175286Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5177126Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mStatement Memory System[2m > [22mshould record and retrieve statements correctly[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5178676Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5181100Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mStatement Memory System[2m > [22mshould maintain statement history across sessions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5182728Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5184596Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mContradiction Avoidance System[2m > [22mshould generate consistent responses[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5186184Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5188037Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mContradiction Avoidance System[2m > [22mshould validate response consistency[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5189798Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5191888Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mContradiction Avoidance System[2m > [22mshould provide alternative responses when consistency is low[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5193644Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5195468Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mCognitive Coherence Tracking[2m > [22mshould assess overall model coherence[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5196885Z [31m     → service.assessModelCoherence is not a function[39m
2025-06-04T21:54:40.5198561Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mCognitive Coherence Tracking[2m > [22mshould generate coherence reports[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5200390Z [31m     → service.generateModelCoherenceReport is not a function[39m
2025-06-04T21:54:40.5202150Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mCognitive Coherence Tracking[2m > [22mshould track coherence evolution over time[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5203744Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5205642Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mIntegration Tests[2m > [22mshould maintain consistency across multiple interactions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5207289Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5209374Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mIntegration Tests[2m > [22mshould handle belief conflicts appropriately[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5211078Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5212949Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mIntegration Tests[2m > [22mshould adapt to therapeutic context changes[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5214865Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5216610Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mError Handling[2m > [22mshould handle missing model gracefully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5218095Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5220002Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mError Handling[2m > [22mshould handle invalid input gracefully[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:40.5221508Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5223040Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mError Handling[2m > [22mshould handle coherence assessment errors gracefully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5223836Z [31m     → service.assessModelCoherence is not a function[39m
2025-06-04T21:54:40.5224734Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mPerformance Tests[2m > [22mshould process multiple requests efficiently[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:40.5225588Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:40.5226792Z [31m   [31m×[31m CognitiveConsistencyEngine[2m > [22mPerformance Tests[2m > [22mshould handle large statement histories efficiently[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:40.5227656Z [31m     → service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T21:54:41.5902316Z [90mstderr[2m | src/tests/ai/crisis-detection.test.ts
2025-06-04T21:54:41.5903469Z [22m[39mUsing mock Supabase client for development. This should not be used in production.
2025-06-04T21:54:41.5904601Z Using mock Supabase client for development. This should not be used in production.
2025-06-04T21:54:41.5905118Z 
2025-06-04T21:54:41.5905567Z [90mstdout[2m | src/tests/ai/crisis-detection.test.ts
2025-06-04T21:54:41.5906403Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:54:41.5906921Z   SSR: [32m''[39m,
2025-06-04T21:54:41.5907359Z   VITEST_WORKER_ID: [32m'21'[39m,
2025-06-04T21:54:41.5907804Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:54:41.5908422Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:41.5909917Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:41.5911125Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:41.5911809Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:54:41.5912398Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:54:41.5913207Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:54:41.5917839Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:54:41.5921131Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:54:41.5921991Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:54:41.5922746Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:54:41.5923189Z   VITEST: [32m'true'[39m,
2025-06-04T21:54:41.5923681Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:54:41.5924312Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:54:41.5925451Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:41.5926437Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:54:41.5927065Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:54:41.5927811Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:54:41.5928452Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:54:41.5929259Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:54:41.5929948Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:54:41.5930505Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:54:41.5931174Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:54:41.5931951Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:54:41.5932688Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:54:41.5933300Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:54:41.5934386Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:41.5935311Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:54:41.5935834Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:54:41.5936586Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:54:41.5937616Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:54:41.5938261Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:54:41.5938881Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:54:41.5939596Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:54:41.5940044Z   MODE: [32m'test'[39m,
2025-06-04T21:54:41.5940656Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:41.5941351Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:54:41.5941846Z   CI: [32m'true'[39m,
2025-06-04T21:54:41.5942345Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:54:41.5942896Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:54:41.5943410Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:54:41.5944121Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:41.5944896Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:41.5945540Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:54:41.5946223Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:54:41.5946754Z   PROD: [32m''[39m,
2025-06-04T21:54:41.5947322Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:54:41.5947926Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:54:41.5948420Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:54:41.5949015Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:54:41.5949736Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:54:41.5950955Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:41.5952015Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:54:41.5952576Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:54:41.5953076Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:54:41.5953645Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:54:41.5954399Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:54:41.5955002Z   USER: [32m'runner'[39m,
2025-06-04T21:54:41.5955438Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:54:41.5955830Z   SHLVL: [32m'1'[39m,
2025-06-04T21:54:41.5956300Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:54:41.5957019Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:41.5957805Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:54:41.5958949Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:41.5959985Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:54:41.5960438Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:54:41.5960884Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:54:41.5961383Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:54:41.5962083Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:54:41.5962898Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:54:41.5963567Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:54:41.5964240Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:54:41.5964833Z   VITEST_POOL_ID: [32m'1'[39m,
2025-06-04T21:54:41.5965455Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:41.5966301Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:54:41.5966956Z   DEV: [32m'1'[39m,
2025-06-04T21:54:41.5967407Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:54:41.5967922Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:54:41.5968407Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:54:41.5968992Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:54:41.5969979Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:54:41.5970996Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:54:41.5971689Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:54:41.5972273Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:54:41.5973017Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:41.5973723Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:54:41.5974208Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:54:41.5974810Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:54:41.5975364Z   TEST: [32m'true'[39m,
2025-06-04T21:54:41.5975800Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:54:41.5976480Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:54:41.5977114Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:54:41.5977586Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:54:41.5978090Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:54:41.5979455Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:54:41.5980941Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:54:41.5981775Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:54:41.5982266Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:54:41.5982765Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:54:41.5983201Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:54:41.5983689Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:54:41.5985210Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:54:41.5986247Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:41.5986745Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:54:41.5987582Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:54:41.5988503Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:54:41.5988991Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:54:41.5989946Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:54:41.5990773Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:54:41.5991369Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:54:41.5991961Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:41.5992567Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:54:41.5993140Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:54:41.5993798Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:54:41.5994519Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:54:41.5995279Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:41.5995985Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:54:41.5996816Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:41.5997682Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:54:41.5998374Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:54:41.6004744Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:54:41.6009610Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:54:41.6010284Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:54:41.6011080Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:41.6011709Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:54:41.6012210Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:54:41.6013014Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:54:41.6013825Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:41.6014554Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:41.6015529Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:54:41.6016512Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:54:41.6017178Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:54:41.6017908Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:41.6068956Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:54:41.6070781Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:54:41.6078362Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:54:41.6079000Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:54:41.6079911Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:41.6080893Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:54:41.6082169Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:54:41.6082768Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:54:41.6083332Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:54:41.6084005Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:54:41.6084751Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:54:41.6085234Z }
2025-06-04T21:54:41.6085382Z 
2025-06-04T21:54:41.6173443Z [90mstderr[2m | src/tests/ai/crisis-detection.test.ts[2m > [22m[2mcrisisDetectionService[2m > [22m[2mdetectCrisis[2m > [22m[2mshould handle invalid JSON responses
2025-06-04T21:54:41.6175162Z [22m[39m[2025-06-04T21:54:41.615Z] [ERROR] [crisis-detection] Error parsing crisis detection result: {}
2025-06-04T21:54:41.6175725Z 
2025-06-04T21:54:41.6451157Z  [31m❯[39m src/tests/ai/crisis-detection.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 35[2mms[22m[39m
2025-06-04T21:54:41.6453339Z [31m   [31m×[31m crisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould detect high-risk crisis correctly[39m[32m 14[2mms[22m[39m
2025-06-04T21:54:41.6454842Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:41.6457104Z [31m   [31m×[31m crisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould detect medium-risk crisis correctly[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:41.6458545Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:41.6460314Z [31m   [31m×[31m crisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould detect low-risk crisis correctly[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:41.6461562Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:41.6464582Z [31m   [31m×[31m crisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould correctly identify non-crisis text[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:41.6465859Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:41.6467134Z    [32m✓[39m crisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould handle invalid JSON responses[32m 3[2mms[22m[39m
2025-06-04T21:54:41.6468647Z    [32m✓[39m crisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould handle AI service errors[32m 1[2mms[22m[39m
2025-06-04T21:54:41.6470854Z [31m   [31m×[31m crisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould respect sensitivity level[39m[32m 8[2mms[22m[39m
2025-06-04T21:54:41.6472270Z [31m     → expected "spy" to be called with arguments: [ { …(2) }, ObjectContaining{…} ][90m
2025-06-04T21:54:41.6472771Z 
2025-06-04T21:54:41.6472899Z Received: 
2025-06-04T21:54:41.6473061Z 
2025-06-04T21:54:41.6473250Z [1m  1st spy call:
2025-06-04T21:54:41.6473442Z 
2025-06-04T21:54:41.6473614Z [22m[2m  [[22m
2025-06-04T21:54:41.6473941Z [31m+   [[90m
2025-06-04T21:54:41.6474260Z [2m      {[22m
2025-06-04T21:54:41.6474868Z [32m-     "asymmetricMatch": [Function asymmetricMatch],[90m
2025-06-04T21:54:41.6475592Z [32m-     "toString": [Function toString],[90m
2025-06-04T21:54:41.6477804Z [31m+       "content": "You are a mental health assessment assistant specializing in crisis detection. Analyze the message for indicators of crisis, including self-harm, suicidal ideation, harm to others, and severe psychological distress.[90m
2025-06-04T21:54:41.6479411Z [31m+[90m
2025-06-04T21:54:41.6479974Z [31m+ The current sensitivity level is set to: HIGH[90m
2025-06-04T21:54:41.6480485Z [31m+[90m
2025-06-04T21:54:41.6480969Z [31m+ Respond in valid JSON format with:[90m
2025-06-04T21:54:41.6481792Z [31m+ - isCrisis: boolean indicating if there is a crisis concern[90m
2025-06-04T21:54:41.6482768Z [31m+ - confidence: number from 0-1 indicating confidence in assessment[90m
2025-06-04T21:54:41.6484076Z [31m+ - category: optional string categorizing the type of crisis (e.g., \"self-harm\", \"suicide\", \"abuse\")[90m
2025-06-04T21:54:41.6485219Z [31m+ - severity: \"none\", \"low\", \"medium\", \"high\", or \"severe\"[90m
2025-06-04T21:54:41.6486401Z [31m+ - recommendedAction: optional string with recommended next steps[90m
2025-06-04T21:54:41.6487009Z [31m+[90m
2025-06-04T21:54:41.6487902Z [31m+ Be extremely cautious about false negatives - if there's ambiguity, lean toward safety.",[90m
2025-06-04T21:54:41.6488681Z [31m+       "name": "",[90m
2025-06-04T21:54:41.6489323Z [31m+       "role": "system",[90m
2025-06-04T21:54:41.6489792Z [2m      },[22m
2025-06-04T21:54:41.6490281Z [32m-   ObjectContaining {[90m
2025-06-04T21:54:41.6490759Z [31m+     {[90m
2025-06-04T21:54:41.6491496Z [31m+       "content": "I'm feeling really anxious about everything.",[90m
2025-06-04T21:54:41.6492160Z [31m+       "name": "",[90m
2025-06-04T21:54:41.6492699Z [31m+       "role": "user",[90m
2025-06-04T21:54:41.6493173Z [31m+     },[90m
2025-06-04T21:54:41.6493531Z [31m+   ],[90m
2025-06-04T21:54:41.6493849Z [31m+   {[90m
2025-06-04T21:54:41.6494335Z [2m      "model": "test-model",[22m
2025-06-04T21:54:41.6494745Z [2m    },[22m
2025-06-04T21:54:41.6495080Z [2m  ][22m
2025-06-04T21:54:41.6495422Z [31m[90m
2025-06-04T21:54:41.6495595Z 
2025-06-04T21:54:41.6495846Z Number of calls: [1m1[22m
2025-06-04T21:54:41.6496265Z [31m[39m
2025-06-04T21:54:41.6497584Z [31m   [31m×[31m crisisDetectionService[2m > [22mdetectBatch[2m > [22mshould analyze multiple texts in parallel[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:41.6498783Z [31m     → expected low to be none[39m
2025-06-04T21:54:41.6500366Z    [32m✓[39m crisisDetectionService[2m > [22mdetectBatch[2m > [22mshould handle errors in batch processing[32m 1[2mms[22m[39m
2025-06-04T21:54:41.6502248Z [31m   [31m×[31m crisisDetectionService[2m > [22mconstructor[2m > [22mshould use default model if not provided[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:41.6503621Z [31m     → Cannot read properties of undefined (reading 'model')[39m
2025-06-04T21:54:41.6505206Z [31m   [31m×[31m crisisDetectionService[2m > [22mconstructor[2m > [22mshould use custom system prompt if provided[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:41.6506690Z [31m     → Cannot read properties of undefined (reading 'defaultPrompt')[39m
2025-06-04T21:54:41.6917746Z [90mstderr[2m | src/lib/ai/emotions/__tests__/EmotionAnalyzer.test.ts[2m > [22m[2mEmotionAnalyzer[2m > [22m[2mshould handle errors during analysis gracefully
2025-06-04T21:54:41.6920804Z [22m[39mError analyzing text: Error: Language model unavailable
2025-06-04T21:54:41.6922298Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/EmotionAnalyzer.test.ts:391:26
2025-06-04T21:54:41.6924321Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:41.6926555Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:41.6928798Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:41.6930214Z     at new Promise (<anonymous>)
2025-06-04T21:54:41.6931964Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:41.6934434Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:41.6936793Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:41.6942415Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:41.6945266Z     at runFiles [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1561:3[90m)[39m
2025-06-04T21:54:41.6946370Z 
2025-06-04T21:54:41.6965718Z  [32m✓[39m src/lib/ai/emotions/__tests__/EmotionAnalyzer.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 30[2mms[22m[39m
2025-06-04T21:54:42.0001507Z  [31m❯[39m src/pages/api/bias-detection/export.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 615[2mms[22m[39m
2025-06-04T21:54:42.0003879Z [31m   [31m×[31m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould export data as JSON format by default[39m[32m 17[2mms[22m[39m
2025-06-04T21:54:42.0005451Z [31m     → expected "spy" to be called with arguments: [ …(2) ][90m
2025-06-04T21:54:42.0006061Z 
2025-06-04T21:54:42.0006582Z Number of calls: [1m0[22m
2025-06-04T21:54:42.0007604Z [31m[39m
2025-06-04T21:54:42.0009880Z    [32m✓[39m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould export data as CSV format when specified[32m 3[2mms[22m[39m
2025-06-04T21:54:42.0011981Z    [32m✓[39m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould export data as PDF format when specified[32m 3[2mms[22m[39m
2025-06-04T21:54:42.0016192Z    [32m✓[39m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle custom time range parameter[32m 3[2mms[22m[39m
2025-06-04T21:54:42.0019486Z    [32m✓[39m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle includeDetails parameter[32m 2[2mms[22m[39m
2025-06-04T21:54:42.0021743Z [31m   [31m×[31m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle multiple parameters[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:42.0023243Z [31m     → expected "spy" to be called with arguments: [ …(2) ][90m
2025-06-04T21:54:42.0023664Z 
2025-06-04T21:54:42.0023909Z Number of calls: [1m0[22m
2025-06-04T21:54:42.0024336Z [31m[39m
2025-06-04T21:54:42.0026283Z [31m   [31m×[31m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle bias detection engine errors[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:42.0027728Z [31m     → expected undefined to be false[39m
2025-06-04T21:54:42.0029898Z [31m   [31m×[31m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle invalid format parameter gracefully[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:42.0031255Z [31m     → expected 400 to be 200[39m
2025-06-04T21:54:42.0032834Z    [32m✓[39m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould generate appropriate filename for each format[32m 4[2mms[22m[39m
2025-06-04T21:54:42.0035065Z    [33m[2m✓[22m[39m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle large dataset exports [33m 455[2mms[22m[39m
2025-06-04T21:54:42.0037369Z [31m   [31m×[31m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle export timeout scenarios[39m[32m 103[2mms[22m[39m
2025-06-04T21:54:42.0038701Z [31m     → expected undefined to be false[39m
2025-06-04T21:54:42.0040631Z [31m   [31m×[31m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould log export completion with metrics[39m[32m 6[2mms[22m[39m
2025-06-04T21:54:42.0042180Z [31m     → expected "spy" to be called with arguments: [ …(2) ][90m
2025-06-04T21:54:42.0042620Z 
2025-06-04T21:54:42.0042894Z Number of calls: [1m0[22m
2025-06-04T21:54:42.0043647Z [31m[39m
2025-06-04T21:54:42.0044925Z    [32m✓[39m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle concurrent export requests[32m 3[2mms[22m[39m
2025-06-04T21:54:42.0046922Z    [32m✓[39m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle empty dataset exports[32m 1[2mms[22m[39m
2025-06-04T21:54:42.0048952Z    [32m✓[39m Bias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould validate time range parameter values[32m 6[2mms[22m[39m
2025-06-04T21:54:42.6994161Z  [31m❯[39m src/lib/ai/bias-detection/config.test.ts [2m([22m[2m32 tests[22m[2m | [22m[31m32 failed[39m[2m)[22m[32m 32[2mms[22m[39m
2025-06-04T21:54:42.7000768Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mSingleton Pattern[2m > [22mshould return the same instance when called multiple times[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:42.7006458Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7013802Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7015698Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mSingleton Pattern[2m > [22mshould initialize with default configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7017353Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7018326Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7020482Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Loading[2m > [22mshould load default configuration when no environment variables are set[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7022122Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7023113Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7024914Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Loading[2m > [22mshould override defaults with environment variables[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7026506Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7027396Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7029682Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Loading[2m > [22mshould handle invalid environment variable values gracefully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7031279Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7032264Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7033951Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return thresholds configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7035347Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7036223Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7037942Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return layer weights configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7039757Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7040795Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7042544Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return python service configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7044034Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7059862Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7062321Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return cache configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7064813Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7066458Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7068801Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return security configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7070877Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7072394Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7074782Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return performance configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7076693Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7078035Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7080426Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return ML toolkit configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7082359Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7083875Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7086528Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return logging configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7088640Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7089951Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7092461Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Updates[2m > [22mshould update configuration successfully with valid data[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7094746Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7096197Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7098507Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Updates[2m > [22mshould throw error when updating with invalid data[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7100438Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7101716Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7103696Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Updates[2m > [22mshould preserve unchanged configuration sections[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7105491Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7106519Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7108326Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Validation[2m > [22mshould return no errors for valid configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7110253Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7111256Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7113085Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Validation[2m > [22mshould detect validation errors in configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7114610Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7115626Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7117878Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mProduction Readiness Check[2m > [22mshould identify missing production requirements[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7119868Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7120845Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7122798Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mProduction Readiness Check[2m > [22mshould pass production readiness check with proper configuration[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7124453Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7125447Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7127186Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mProduction Readiness Check[2m > [22mshould warn about debug logging in production[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7128723Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7130050Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7131743Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Summary[2m > [22mshould provide configuration summary[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7133157Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7134140Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7136246Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Summary[2m > [22mshould include only summary information for ML toolkits[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7137828Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7138821Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7140814Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mConfiguration Reload[2m > [22mshould reload configuration from environment variables[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7142388Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7143406Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7145165Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mUtility Functions[2m > [22mshould provide configuration through utility functions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7146731Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7147807Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7149877Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mEnvironment Variable Parsing[2m > [22mshould parse boolean environment variables correctly[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7151481Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7152472Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7154321Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mEnvironment Variable Parsing[2m > [22mshould parse numeric environment variables correctly[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7156202Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7157217Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7159281Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mEnvironment Variable Parsing[2m > [22mshould parse float environment variables correctly[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7160900Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7161878Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7163678Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mLayer Weights Validation[2m > [22mshould accept valid layer weights that sum to 1.0[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7165239Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7166516Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7168596Z [31m   [31m×[31m BiasDetectionConfigManager[2m > [22mLayer Weights Validation[2m > [22mshould accept layer weights that do not sum to 1.0 (normalization can be done elsewhere)[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7170541Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7171544Z [31m     → Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T21:54:42.7172996Z [31m   [31m×[31m Configuration Integration[2m > [22mshould work with the exported singleton instance[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:42.7174315Z [31m     → Cannot read properties of undefined (reading 'getConfig')[39m
2025-06-04T21:54:42.7175757Z [31m   [31m×[31m Configuration Integration[2m > [22mshould maintain state across multiple calls[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:42.7177091Z [31m     → Cannot read properties of undefined (reading 'getConfig')[39m
2025-06-04T21:54:42.8167702Z [90mstderr[2m | src/lib/services/redis/__tests__/RedisService.integration.test.ts[2m > [22m[2mRedisService Integration Tests
2025-06-04T21:54:42.8168980Z [22m[39m[2025-06-04T21:54:42.812Z] [INFO] Connected to Redis
2025-06-04T21:54:42.8169549Z 
2025-06-04T21:54:42.8215041Z  [31m❯[39m src/lib/services/redis/__tests__/RedisService.integration.test.ts [2m([22m[2m22 tests[22m[2m | [22m[33m22 skipped[39m[2m)[22m[32m 28[2mms[22m[39m
2025-06-04T21:54:42.8217385Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mCache Service Integration[2m > [22mshould work with cache invalidation patterns
2025-06-04T21:54:42.8219829Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mCache Service Integration[2m > [22mshould handle TTL-based cache expiration
2025-06-04T21:54:42.8222049Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mSession Management Integration[2m > [22mshould handle session lifecycle
2025-06-04T21:54:42.8224299Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mSession Management Integration[2m > [22mshould handle concurrent session operations
2025-06-04T21:54:42.8226432Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mAnalytics Integration[2m > [22mshould track event counts
2025-06-04T21:54:42.8228518Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mAnalytics Integration[2m > [22mshould store and retrieve event details
2025-06-04T21:54:42.8230892Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mPattern Recognition Integration[2m > [22mshould store and match patterns
2025-06-04T21:54:42.8233132Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mError Recovery Integration[2m > [22mshould handle connection interruptions gracefully
2025-06-04T21:54:42.8235321Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mError Recovery Integration[2m > [22mshould maintain data integrity during reconnection
2025-06-04T21:54:42.8237485Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mService Integration[2m > [22mCross-Service Integration[2m > [22mshould handle complex multi-service scenarios
2025-06-04T21:54:42.8259348Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mconnection pool[2m > [22mshould maintain connection pool within limits
2025-06-04T21:54:42.8260741Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mconnection pool[2m > [22mshould handle connection failures gracefully
2025-06-04T21:54:42.8261681Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mconnection pool[2m > [22mshould recover from temporary connection issues
2025-06-04T21:54:42.8262889Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mdata persistence[2m > [22mshould persist data between connections
2025-06-04T21:54:42.8263742Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mdata persistence[2m > [22mshould handle TTL between connections
2025-06-04T21:54:42.8264704Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mconcurrent operations[2m > [22mshould handle multiple set operations concurrently
2025-06-04T21:54:42.8265635Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mconcurrent operations[2m > [22mshould handle mixed operations concurrently
2025-06-04T21:54:42.8266527Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mconcurrent operations[2m > [22mshould handle set operations concurrently
2025-06-04T21:54:42.8267351Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22merror recovery[2m > [22mshould retry failed operations
2025-06-04T21:54:42.8268169Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22merror recovery[2m > [22mshould handle multiple connection losses
2025-06-04T21:54:42.8268988Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mhealth checks[2m > [22mshould perform periodic health checks
2025-06-04T21:54:42.8270029Z    [2m[90m↓[39m[22m RedisService Integration Tests[2m > [22mhealth checks[2m > [22mshould detect unhealthy connections
2025-06-04T21:54:42.8271072Z [90mstderr[2m | ConsoleLogger.writeLog (/home/runner/work/pixelated/pixelated/src/lib/logging.ts:106:17)
2025-06-04T21:54:42.8271757Z [22m[39m[2025-06-04T21:54:42.823Z] [WARN] Redis connection closed
2025-06-04T21:54:42.8271993Z 
2025-06-04T21:54:43.3081972Z  [31m❯[39m src/pages/api/bias-detection/dashboard.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 173[2mms[22m[39m
2025-06-04T21:54:43.3086026Z [31m   [31m×[31m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould successfully return dashboard data with default parameters[39m[32m 19[2mms[22m[39m
2025-06-04T21:54:43.3088948Z [31m     → expected undefined to be true[39m
2025-06-04T21:54:43.3092066Z [31m   [31m×[31m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle custom time range parameter[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:43.3094560Z [31m     → expected undefined to be true[39m
2025-06-04T21:54:43.3096379Z [31m   [31m×[31m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle custom demographic filter parameter[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:43.3097797Z [31m     → expected undefined to be true[39m
2025-06-04T21:54:43.3099804Z [31m   [31m×[31m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle multiple query parameters[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:43.3101142Z [31m     → expected undefined to be true[39m
2025-06-04T21:54:43.3102829Z [31m   [31m×[31m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle bias detection engine errors[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:43.3104187Z [31m     → expected undefined to be false[39m
2025-06-04T21:54:43.3105904Z [31m   [31m×[31m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle empty dashboard data[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:43.3107262Z [31m     → expected undefined to be true[39m
2025-06-04T21:54:43.3108784Z    [32m✓[39m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould validate time range parameter values[32m 12[2mms[22m[39m
2025-06-04T21:54:43.3111314Z    [32m✓[39m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle invalid time range gracefully[32m 2[2mms[22m[39m
2025-06-04T21:54:43.3113968Z    [32m✓[39m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould set appropriate response headers[32m 2[2mms[22m[39m
2025-06-04T21:54:43.3116211Z    [32m✓[39m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle concurrent requests properly[32m 10[2mms[22m[39m
2025-06-04T21:54:43.3118645Z [31m   [31m×[31m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle large dataset responses[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:43.3120232Z [31m     → expected undefined to be true[39m
2025-06-04T21:54:43.3121991Z [31m   [31m×[31m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle network timeout scenarios[39m[32m 105[2mms[22m[39m
2025-06-04T21:54:43.3123430Z [31m     → expected undefined to be false[39m
2025-06-04T21:54:43.3125151Z [31m   [31m×[31m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould log performance metrics[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:43.3126441Z [31m     → expected undefined to be number[39m
2025-06-04T21:54:43.3128003Z    [32m✓[39m Bias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle malformed URL parameters[32m 2[2mms[22m[39m
2025-06-04T21:54:43.9534556Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService
2025-06-04T21:54:43.9535981Z [22m[39m⏩ SKIP: Redis connection verification
2025-06-04T21:54:43.9536360Z 
2025-06-04T21:54:43.9567083Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mconnection Management[2m > [22m[2mshould connect successfully
2025-06-04T21:54:43.9571279Z [22m[39m✅ PASS: should connect successfully
2025-06-04T21:54:43.9573549Z 
2025-06-04T21:54:43.9581549Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mconnection Management[2m > [22m[2mshould connect successfully
2025-06-04T21:54:43.9585139Z [22m[39m[2025-06-04T21:54:43.957Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9587025Z 
2025-06-04T21:54:43.9606176Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mconnection Management[2m > [22m[2mshould handle connection failures
2025-06-04T21:54:43.9607752Z [22m[39m✅ PASS: should handle connection failures
2025-06-04T21:54:43.9608121Z 
2025-06-04T21:54:43.9615831Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mconnection Management[2m > [22m[2mshould handle connection failures
2025-06-04T21:54:43.9617690Z [22m[39m[2025-06-04T21:54:43.961Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9619355Z 
2025-06-04T21:54:43.9623852Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mconnection Management[2m > [22m[2mshould handle disconnection
2025-06-04T21:54:43.9626006Z [22m[39m✅ PASS: should handle disconnection
2025-06-04T21:54:43.9626740Z 
2025-06-04T21:54:43.9633483Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mconnection Management[2m > [22m[2mshould handle disconnection
2025-06-04T21:54:43.9635091Z [22m[39m[2025-06-04T21:54:43.962Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9636523Z 
2025-06-04T21:54:43.9643283Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mconnection Management[2m > [22m[2mshould handle reconnection
2025-06-04T21:54:43.9645671Z [22m[39m✅ PASS: should handle reconnection
2025-06-04T21:54:43.9646531Z 
2025-06-04T21:54:43.9655850Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mconnection Management[2m > [22m[2mshould handle reconnection
2025-06-04T21:54:43.9658074Z [22m[39m[2025-06-04T21:54:43.964Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9658819Z 
2025-06-04T21:54:43.9679960Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mconnection Management[2m > [22m[2mshould maintain connection pool
2025-06-04T21:54:43.9681802Z [22m[39m[2025-06-04T21:54:43.967Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9682249Z 
2025-06-04T21:54:43.9694297Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mkey-Value Operations[2m > [22m[2mshould set and get values
2025-06-04T21:54:43.9695574Z [22m[39m✅ PASS: should set and get values
2025-06-04T21:54:43.9695932Z 
2025-06-04T21:54:43.9712161Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mkey-Value Operations[2m > [22m[2mshould set and get values
2025-06-04T21:54:43.9714060Z [22m[39m[2025-06-04T21:54:43.970Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9714825Z 
2025-06-04T21:54:43.9796072Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mkey-Value Operations[2m > [22m[2mshould handle TTL
2025-06-04T21:54:43.9798415Z [22m[39m[2025-06-04T21:54:43.979Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9800064Z 
2025-06-04T21:54:43.9816168Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mkey-Value Operations[2m > [22m[2mshould delete keys
2025-06-04T21:54:43.9817972Z [22m[39m[2025-06-04T21:54:43.981Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9821221Z 
2025-06-04T21:54:43.9838912Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mkey-Value Operations[2m > [22m[2mshould check key existence
2025-06-04T21:54:43.9841019Z [22m[39m[2025-06-04T21:54:43.983Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9843894Z 
2025-06-04T21:54:43.9858614Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mkey-Value Operations[2m > [22m[2mshould increment values
2025-06-04T21:54:43.9860777Z [22m[39m[2025-06-04T21:54:43.985Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9865364Z 
2025-06-04T21:54:43.9878310Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mset Operations[2m > [22m[2mshould add and remove set members
2025-06-04T21:54:43.9880491Z [22m[39m[2025-06-04T21:54:43.987Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9885159Z 
2025-06-04T21:54:43.9895124Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mset Operations[2m > [22m[2mshould get set members
2025-06-04T21:54:43.9929637Z [22m[39m[2025-06-04T21:54:43.989Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:43.9956594Z 
2025-06-04T21:54:44.0032471Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2merror Handling[2m > [22m[2mshould handle invalid JSON
2025-06-04T21:54:44.0037539Z [22m[39m[2025-06-04T21:54:43.998Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:44.0039776Z 
2025-06-04T21:54:44.0041626Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2merror Handling[2m > [22m[2mshould handle operation timeouts
2025-06-04T21:54:44.0043944Z [22m[39m[2025-06-04T21:54:44.000Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:44.0044947Z 
2025-06-04T21:54:44.0063311Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mperformance[2m > [22m[2mshould handle concurrent operations
2025-06-04T21:54:44.0090357Z [22m[39m[2025-06-04T21:54:44.005Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:44.0091081Z 
2025-06-04T21:54:44.0092764Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mperformance[2m > [22m[2mshould maintain stable memory usage
2025-06-04T21:54:44.0094374Z [22m[39m✅ PASS: should maintain stable memory usage
2025-06-04T21:54:44.0094994Z 
2025-06-04T21:54:44.0096787Z [90mstdout[2m | src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22m[2mRedisService[2m > [22m[2mperformance[2m > [22m[2mshould maintain stable memory usage
2025-06-04T21:54:44.0098403Z [22m[39m[2025-06-04T21:54:44.008Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:44.0098846Z 
2025-06-04T21:54:44.0120595Z  [31m❯[39m src/lib/services/redis/__tests__/RedisService.test.ts [2m([22m[2m16 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 58[2mms[22m[39m
2025-06-04T21:54:44.0122703Z    [32m✓[39m RedisService[2m > [22mconnection Management[2m > [22mshould connect successfully[32m 5[2mms[22m[39m
2025-06-04T21:54:44.0124542Z    [32m✓[39m RedisService[2m > [22mconnection Management[2m > [22mshould handle connection failures[32m 3[2mms[22m[39m
2025-06-04T21:54:44.0126349Z    [32m✓[39m RedisService[2m > [22mconnection Management[2m > [22mshould handle disconnection[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0128235Z    [32m✓[39m RedisService[2m > [22mconnection Management[2m > [22mshould handle reconnection[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0130271Z    [32m✓[39m RedisService[2m > [22mconnection Management[2m > [22mshould maintain connection pool[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0132132Z    [32m✓[39m RedisService[2m > [22mkey-Value Operations[2m > [22mshould set and get values[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0134231Z [31m   [31m×[31m RedisService[2m > [22mkey-Value Operations[2m > [22mshould handle TTL[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:44.0135833Z [31m     → Cannot read properties of undefined (reading 'toBeNull')[39m
2025-06-04T21:54:44.0137425Z [31m   [31m×[31m RedisService[2m > [22mkey-Value Operations[2m > [22mshould delete keys[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0138795Z [31m     → expect(...).toBe is not a function[39m
2025-06-04T21:54:44.0140600Z [31m   [31m×[31m RedisService[2m > [22mkey-Value Operations[2m > [22mshould check key existence[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0142987Z [31m     → expect(...).toBe is not a function[39m
2025-06-04T21:54:44.0144315Z [31m   [31m×[31m RedisService[2m > [22mkey-Value Operations[2m > [22mshould increment values[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0145416Z [31m     → expect(...).toBe is not a function[39m
2025-06-04T21:54:44.0146735Z [31m   [31m×[31m RedisService[2m > [22mset Operations[2m > [22mshould add and remove set members[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0147935Z [31m     → expect(...).toEqual is not a function[39m
2025-06-04T21:54:44.0149436Z [31m   [31m×[31m RedisService[2m > [22mset Operations[2m > [22mshould get set members[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0150587Z [31m     → expect.arrayContaining is not a function[39m
2025-06-04T21:54:44.0151917Z [31m   [31m×[31m RedisService[2m > [22merror Handling[2m > [22mshould handle invalid JSON[39m[32m 10[2mms[22m[39m
2025-06-04T21:54:44.0153173Z [31m     → expect(...).toBeInstanceOf is not a function[39m
2025-06-04T21:54:44.0154545Z [31m   [31m×[31m RedisService[2m > [22merror Handling[2m > [22mshould handle operation timeouts[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:44.0155754Z [31m     → expect(...).toBeInstanceOf is not a function[39m
2025-06-04T21:54:44.0157154Z [31m   [31m×[31m RedisService[2m > [22mperformance[2m > [22mshould handle concurrent operations[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:44.0158618Z [31m     → expect(...).toBe is not a function[39m
2025-06-04T21:54:44.0160020Z    [32m✓[39m RedisService[2m > [22mperformance[2m > [22mshould maintain stable memory usage[32m 2[2mms[22m[39m
2025-06-04T21:54:45.1352583Z [90mstdout[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration
2025-06-04T21:54:45.1354068Z [22m[39m[2025-06-04T21:54:45.133Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:45.1354548Z 
2025-06-04T21:54:45.1545296Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mevent Tracking[2m > [22m[2mshould track individual events
2025-06-04T21:54:45.1550736Z [22m[39m[2025-06-04T21:54:45.153Z] [INFO] Connected to Redis
2025-06-04T21:54:45.1551138Z 
2025-06-04T21:54:45.1577170Z [90mstdout[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mevent Tracking[2m > [22m[2mshould track individual events
2025-06-04T21:54:45.1582562Z [22m[39m[2025-06-04T21:54:45.156Z] INFO  [app]: Cleaned up 1 test keys
2025-06-04T21:54:45.1583035Z 
2025-06-04T21:54:45.1622998Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mevent Tracking[2m > [22m[2mshould handle concurrent event tracking
2025-06-04T21:54:45.1624649Z [22m[39m[2025-06-04T21:54:45.161Z] [INFO] Connected to Redis
2025-06-04T21:54:45.1625437Z 
2025-06-04T21:54:45.1672287Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mevent Tracking[2m > [22m[2mshould maintain event order
2025-06-04T21:54:45.1675432Z [22m[39m[2025-06-04T21:54:45.166Z] [INFO] Connected to Redis
2025-06-04T21:54:45.1676255Z 
2025-06-04T21:54:45.1752937Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mmetrics Tracking[2m > [22m[2mshould track metrics over time
2025-06-04T21:54:45.1760049Z [22m[39m[2025-06-04T21:54:45.174Z] [INFO] Connected to Redis
2025-06-04T21:54:45.1760727Z 
2025-06-04T21:54:45.1839042Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mmetrics Tracking[2m > [22m[2mshould maintain metric history
2025-06-04T21:54:45.1840858Z [22m[39m[2025-06-04T21:54:45.183Z] [INFO] Connected to Redis
2025-06-04T21:54:45.1841287Z 
2025-06-04T21:54:45.1864289Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mmetrics Tracking[2m > [22m[2mshould handle metric expiration
2025-06-04T21:54:45.1866849Z [22m[39m[2025-06-04T21:54:45.185Z] [INFO] Connected to Redis
2025-06-04T21:54:45.1869428Z 
2025-06-04T21:54:45.1891394Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mreal-time Analytics[2m > [22m[2mshould track active users
2025-06-04T21:54:45.1894282Z [22m[39m[2025-06-04T21:54:45.188Z] [INFO] Connected to Redis
2025-06-04T21:54:45.1894675Z 
2025-06-04T21:54:45.1967805Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mreal-time Analytics[2m > [22m[2mshould handle user session timeouts
2025-06-04T21:54:45.1969578Z [22m[39m[2025-06-04T21:54:45.196Z] [INFO] Connected to Redis
2025-06-04T21:54:45.1969981Z 
2025-06-04T21:54:45.2006710Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mreal-time Analytics[2m > [22m[2mshould track concurrent sessions
2025-06-04T21:54:45.2008354Z [22m[39m[2025-06-04T21:54:45.199Z] [INFO] Connected to Redis
2025-06-04T21:54:45.2008721Z 
2025-06-04T21:54:45.2041496Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2merror Handling[2m > [22m[2mshould handle Redis connection failures
2025-06-04T21:54:45.2043021Z [22m[39m[2025-06-04T21:54:45.203Z] [INFO] Connected to Redis
2025-06-04T21:54:45.2043251Z 
2025-06-04T21:54:45.2071618Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2merror Handling[2m > [22m[2mshould handle invalid metric values
2025-06-04T21:54:45.2073539Z [22m[39m[2025-06-04T21:54:45.206Z] [INFO] Connected to Redis
2025-06-04T21:54:45.2074180Z 
2025-06-04T21:54:45.2111305Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2merror Handling[2m > [22m[2mshould handle Redis memory limits
2025-06-04T21:54:45.2112869Z [22m[39m[2025-06-04T21:54:45.210Z] [INFO] Connected to Redis
2025-06-04T21:54:45.2113251Z 
2025-06-04T21:54:45.2143560Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mperformance[2m > [22m[2mshould handle high event throughput
2025-06-04T21:54:45.2145179Z [22m[39m[2025-06-04T21:54:45.213Z] [INFO] Connected to Redis
2025-06-04T21:54:45.2145557Z 
2025-06-04T21:54:45.2181145Z [90mstderr[2m | src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22m[2manalytics Integration[2m > [22m[2mperformance[2m > [22m[2mshould maintain performance with large datasets
2025-06-04T21:54:45.2182971Z [22m[39m[2025-06-04T21:54:45.217Z] [INFO] Connected to Redis
2025-06-04T21:54:45.2183230Z 
2025-06-04T21:54:45.2267304Z  [31m❯[39m src/lib/services/redis/__tests__/Analytics.integration.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m14 failed[39m[2m)[22m[32m 106[2mms[22m[39m
2025-06-04T21:54:45.2271498Z [31m   [31m×[31m analytics Integration[2m > [22mevent Tracking[2m > [22mshould track individual events[39m[32m 22[2mms[22m[39m
2025-06-04T21:54:45.2272856Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2273724Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2275185Z [31m   [31m×[31m analytics Integration[2m > [22mevent Tracking[2m > [22mshould handle concurrent event tracking[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:45.2276153Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2276645Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2277439Z [31m   [31m×[31m analytics Integration[2m > [22mevent Tracking[2m > [22mshould maintain event order[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:45.2278020Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2278478Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2279568Z [31m   [31m×[31m analytics Integration[2m > [22mmetrics Tracking[2m > [22mshould track metrics over time[39m[32m 11[2mms[22m[39m
2025-06-04T21:54:45.2280199Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2280668Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2281441Z [31m   [31m×[31m analytics Integration[2m > [22mmetrics Tracking[2m > [22mshould maintain metric history[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:45.2282004Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2282442Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2283230Z [31m   [31m×[31m analytics Integration[2m > [22mmetrics Tracking[2m > [22mshould handle metric expiration[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:45.2283821Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2284289Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2285081Z [31m   [31m×[31m analytics Integration[2m > [22mreal-time Analytics[2m > [22mshould track active users[39m[32m 8[2mms[22m[39m
2025-06-04T21:54:45.2285938Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2286502Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2287337Z [31m   [31m×[31m analytics Integration[2m > [22mreal-time Analytics[2m > [22mshould handle user session timeouts[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:45.2287946Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2288394Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2289430Z [31m   [31m×[31m analytics Integration[2m > [22mreal-time Analytics[2m > [22mshould track concurrent sessions[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:45.2290046Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2290513Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2291336Z [31m   [31m×[31m analytics Integration[2m > [22merror Handling[2m > [22mshould handle Redis connection failures[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:45.2291937Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2292382Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2293171Z [31m   [31m×[31m analytics Integration[2m > [22merror Handling[2m > [22mshould handle invalid metric values[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:45.2293758Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2294362Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2295185Z [31m   [31m×[31m analytics Integration[2m > [22merror Handling[2m > [22mshould handle Redis memory limits[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:45.2295765Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2296217Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2297009Z [31m   [31m×[31m analytics Integration[2m > [22mperformance[2m > [22mshould handle high event throughput[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:45.2297590Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2298043Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.2298889Z [31m   [31m×[31m analytics Integration[2m > [22mperformance[2m > [22mshould maintain performance with large datasets[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:45.2299751Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:45.2300215Z [31m     → Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T21:54:45.4660481Z  [31m❯[39m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts [2m([22m[2m26 tests[22m[2m | [22m[31m25 failed[39m[2m)[22m[32m 30[2mms[22m[39m
2025-06-04T21:54:45.4662563Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mInitialization[2m > [22mshould initialize with default configuration[39m[32m 11[2mms[22m[39m
2025-06-04T21:54:45.4663954Z [31m     → Cannot read properties of undefined (reading 'pythonServiceUrl')[39m
2025-06-04T21:54:45.4665370Z    [32m✓[39m BiasDetectionEngine[2m > [22mInitialization[2m > [22mshould initialize with custom configuration[32m 1[2mms[22m[39m
2025-06-04T21:54:45.4667277Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mInitialization[2m > [22mshould validate configuration parameters[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:45.4668500Z [31m     → expected [Function] to throw an error[39m
2025-06-04T21:54:45.4670149Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mSession Analysis[2m > [22mshould analyze session and return bias results[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:45.4671543Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4673036Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mSession Analysis[2m > [22mshould handle missing required fields[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:45.4674830Z [31m     → expected [Function] to throw error including 'Missing required session data' but got 'Bias Detection Engine not initialized…'[39m
2025-06-04T21:54:45.4677067Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mSession Analysis[2m > [22mshould apply HIPAA compliance when enabled[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:45.4678562Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4680418Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mSession Analysis[2m > [22mshould calculate correct alert levels[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4681258Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4682178Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mMulti-Layer Analysis[2m > [22mshould perform preprocessing layer analysis[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4682958Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4683803Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mMulti-Layer Analysis[2m > [22mshould perform model-level analysis[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4684554Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4685391Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mMulti-Layer Analysis[2m > [22mshould perform interactive analysis[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4686128Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4687194Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mMulti-Layer Analysis[2m > [22mshould perform evaluation layer analysis[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4688003Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4688874Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mDashboard Data[2m > [22mshould generate dashboard data[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4689891Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4690765Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mDashboard Data[2m > [22mshould filter dashboard data by time range[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4692209Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4693845Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mDashboard Data[2m > [22mshould filter dashboard data by demographics[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4695299Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4696771Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mReal-time Monitoring[2m > [22mshould start monitoring[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4698019Z [31m     → biasEngine.startMonitoring is not a function[39m
2025-06-04T21:54:45.4699650Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mReal-time Monitoring[2m > [22mshould stop monitoring[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4700927Z [31m     → biasEngine.startMonitoring is not a function[39m
2025-06-04T21:54:45.4702470Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mReal-time Monitoring[2m > [22mshould trigger alerts for high bias scores[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:45.4703835Z [31m     → biasEngine.startMonitoring is not a function[39m
2025-06-04T21:54:45.4705623Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mPerformance Requirements[2m > [22mshould complete analysis within 100ms for simple sessions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:45.4707244Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4708953Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mPerformance Requirements[2m > [22mshould handle concurrent sessions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:45.4710687Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4712406Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mError Handling[2m > [22mshould handle Python service errors gracefully[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4714138Z [31m     → Cannot read properties of undefined (reading 'analyze_session')[39m
2025-06-04T21:54:45.4715982Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mError Handling[2m > [22mshould provide fallback analysis when toolkits are unavailable[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4717532Z [31m     → Cannot read properties of undefined (reading 'analyze_session')[39m
2025-06-04T21:54:45.4719449Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mData Privacy and Security[2m > [22mshould mask sensitive demographic data[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4721008Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4722755Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mData Privacy and Security[2m > [22mshould create audit logs when enabled[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4724279Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4725958Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mData Privacy and Security[2m > [22mshould not create audit logs when disabled[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4727346Z [31m     → Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T21:54:45.4729318Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mIntegration with Existing Systems[2m > [22mshould integrate with session management system[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4730576Z [31m     → biasEngine.getSessionAnalysis is not a function[39m
2025-06-04T21:54:45.4732061Z [31m   [31m×[31m BiasDetectionEngine[2m > [22mIntegration with Existing Systems[2m > [22mshould provide metrics for analytics dashboard[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:45.4733237Z [31m     → biasEngine.getMetrics is not a function[39m
2025-06-04T21:54:46.0966794Z  [31m❯[39m src/tests/ai/intervention-analysis.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 13[2mms[22m[39m
2025-06-04T21:54:46.0969352Z [31m   [31m×[31m interventionAnalysisService[2m > [22manalyzeIntervention[2m > [22mshould analyze intervention effectiveness correctly[39m[32m 7[2mms[22m[39m
2025-06-04T21:54:46.0970808Z [31m     → Failed to parse intervention analysis result[39m
2025-06-04T21:54:46.0972366Z [31m   [31m×[31m interventionAnalysisService[2m > [22manalyzeIntervention[2m > [22mshould handle custom analysis prompt[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:46.0973623Z [31m     → Failed to parse intervention analysis result[39m
2025-06-04T21:54:46.0974780Z    [32m✓[39m interventionAnalysisService[2m > [22manalyzeIntervention[2m > [22mshould handle invalid JSON responses[32m 2[2mms[22m[39m
2025-06-04T21:54:46.0975804Z    [32m✓[39m interventionAnalysisService[2m > [22manalyzeIntervention[2m > [22mshould handle AI service errors[32m 0[2mms[22m[39m
2025-06-04T21:54:46.0976919Z [31m   [31m×[31m interventionAnalysisService[2m > [22manalyzeBatch[2m > [22mshould analyze multiple interventions in parallel[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:46.0977653Z [31m     → Failed to parse intervention analysis result[39m
2025-06-04T21:54:46.0978396Z    [32m✓[39m interventionAnalysisService[2m > [22manalyzeBatch[2m > [22mshould handle errors in batch processing[32m 0[2mms[22m[39m
2025-06-04T21:54:46.0979975Z [31m   [31m×[31m interventionAnalysisService[2m > [22mconstructor[2m > [22mshould use default model if not provided[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:46.0981424Z [31m     → Cannot read properties of undefined (reading 'model')[39m
2025-06-04T21:54:46.0983113Z [31m   [31m×[31m interventionAnalysisService[2m > [22mconstructor[2m > [22mshould use custom system prompt if provided[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:46.0984581Z [31m     → Cannot read properties of undefined (reading 'systemPrompt')[39m
2025-06-04T21:54:46.3573396Z  [31m❯[39m src/lib/ai/validation/__tests__/ContinuousValidationPipeline.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 29[2mms[22m[39m
2025-06-04T21:54:46.3575440Z    [32m✓[39m ContinuousValidationPipeline[2m > [22mgetInstance[2m > [22mshould return a singleton instance[32m 3[2mms[22m[39m
2025-06-04T21:54:46.3577271Z    [32m✓[39m ContinuousValidationPipeline[2m > [22mregisterValidationTest[2m > [22mshould register a validation test[32m 1[2mms[22m[39m
2025-06-04T21:54:46.3579292Z    [32m✓[39m ContinuousValidationPipeline[2m > [22mrunValidation[2m > [22mshould run all registered tests for a type[32m 1[2mms[22m[39m
2025-06-04T21:54:46.3581104Z    [32m✓[39m ContinuousValidationPipeline[2m > [22mrunValidation[2m > [22mshould handle errors in tests gracefully[32m 1[2mms[22m[39m
2025-06-04T21:54:46.3583157Z [31m   [31m×[31m ContinuousValidationPipeline[2m > [22mrunValidation[2m > [22mshould track performance metrics[39m[32m 18[2mms[22m[39m
2025-06-04T21:54:46.3584615Z [31m     → expected "spy" to be called with arguments: [ ObjectContaining{…} ][90m
2025-06-04T21:54:46.3585092Z 
2025-06-04T21:54:46.3585231Z Received: 
2025-06-04T21:54:46.3585405Z 
2025-06-04T21:54:46.3585623Z [1m  1st spy call:
2025-06-04T21:54:46.3585820Z 
2025-06-04T21:54:46.3586011Z [22m[2m  [[22m
2025-06-04T21:54:46.3586467Z [32m-   ObjectContaining {[90m
2025-06-04T21:54:46.3586893Z [31m+   {[90m
2025-06-04T21:54:46.3587689Z [31m+     "cached": false,[90m
2025-06-04T21:54:46.3588203Z [31m+     "input_tokens": 0,[90m
2025-06-04T21:54:46.3588632Z [31m+     "latency": 0,[90m
2025-06-04T21:54:46.3589256Z [2m      "model": "test-model",[22m
2025-06-04T21:54:46.3589886Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T21:54:46.3590459Z [32m-     "requestId": "123",[90m
2025-06-04T21:54:46.3590986Z [31m+     "optimized": false,[90m
2025-06-04T21:54:46.3591529Z [31m+     "output_tokens": 0,[90m
2025-06-04T21:54:46.3592081Z [31m+     "request_id": "123",[90m
2025-06-04T21:54:46.3592606Z [2m      "success": true,[22m
2025-06-04T21:54:46.3593129Z [31m+     "total_tokens": 0,[90m
2025-06-04T21:54:46.3593559Z [2m    },[22m
2025-06-04T21:54:46.3593901Z [2m  ][22m
2025-06-04T21:54:46.3594075Z 
2025-06-04T21:54:46.3594275Z [1m  2nd spy call:
2025-06-04T21:54:46.3594482Z 
2025-06-04T21:54:46.3594670Z [22m[2m  [[22m
2025-06-04T21:54:46.3595134Z [32m-   ObjectContaining {[90m
2025-06-04T21:54:46.3595577Z [31m+   {[90m
2025-06-04T21:54:46.3596039Z [31m+     "cached": false,[90m
2025-06-04T21:54:46.3596564Z [31m+     "input_tokens": 0,[90m
2025-06-04T21:54:46.3597061Z [31m+     "latency": 0,[90m
2025-06-04T21:54:46.3597600Z [2m      "model": "test-model",[22m
2025-06-04T21:54:46.3598342Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T21:54:46.3598998Z [32m-     "requestId": "123",[90m
2025-06-04T21:54:46.3599721Z [31m+     "optimized": false,[90m
2025-06-04T21:54:46.3600287Z [31m+     "output_tokens": 0,[90m
2025-06-04T21:54:46.3600856Z [31m+     "request_id": "test1",[90m
2025-06-04T21:54:46.3601402Z [2m      "success": true,[22m
2025-06-04T21:54:46.3601933Z [31m+     "total_tokens": 0,[90m
2025-06-04T21:54:46.3602368Z [2m    },[22m
2025-06-04T21:54:46.3602708Z [2m  ][22m
2025-06-04T21:54:46.3602881Z 
2025-06-04T21:54:46.3603080Z [1m  3rd spy call:
2025-06-04T21:54:46.3603281Z 
2025-06-04T21:54:46.3603475Z [22m[2m  [[22m
2025-06-04T21:54:46.3603963Z [32m-   ObjectContaining {[90m
2025-06-04T21:54:46.3604397Z [31m+   {[90m
2025-06-04T21:54:46.3604841Z [31m+     "cached": false,[90m
2025-06-04T21:54:46.3605377Z [31m+     "input_tokens": 0,[90m
2025-06-04T21:54:46.3605873Z [31m+     "latency": 0,[90m
2025-06-04T21:54:46.3606407Z [2m      "model": "test-model",[22m
2025-06-04T21:54:46.3607328Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T21:54:46.3608026Z [32m-     "requestId": "123",[90m
2025-06-04T21:54:46.3608846Z [32m-     "success": true,[90m
2025-06-04T21:54:46.3609553Z [31m+     "optimized": false,[90m
2025-06-04T21:54:46.3610101Z [31m+     "output_tokens": 0,[90m
2025-06-04T21:54:46.3610664Z [31m+     "request_id": "test2",[90m
2025-06-04T21:54:46.3611220Z [31m+     "success": false,[90m
2025-06-04T21:54:46.3611762Z [31m+     "total_tokens": 0,[90m
2025-06-04T21:54:46.3612192Z [2m    },[22m
2025-06-04T21:54:46.3612538Z [2m  ][22m
2025-06-04T21:54:46.3612720Z 
2025-06-04T21:54:46.3612929Z [1m  4th spy call:
2025-06-04T21:54:46.3613125Z 
2025-06-04T21:54:46.3613324Z [22m[2m  [[22m
2025-06-04T21:54:46.3613795Z [32m-   ObjectContaining {[90m
2025-06-04T21:54:46.3614217Z [31m+   {[90m
2025-06-04T21:54:46.3614667Z [31m+     "cached": false,[90m
2025-06-04T21:54:46.3615194Z [31m+     "input_tokens": 0,[90m
2025-06-04T21:54:46.3615681Z [31m+     "latency": 0,[90m
2025-06-04T21:54:46.3616214Z [2m      "model": "test-model",[22m
2025-06-04T21:54:46.3616954Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T21:54:46.3617638Z [32m-     "requestId": "123",[90m
2025-06-04T21:54:46.3618195Z [31m+     "optimized": false,[90m
2025-06-04T21:54:46.3618740Z [31m+     "output_tokens": 0,[90m
2025-06-04T21:54:46.3619459Z [31m+     "request_id": "test3",[90m
2025-06-04T21:54:46.3620016Z [2m      "success": true,[22m
2025-06-04T21:54:46.3620545Z [31m+     "total_tokens": 0,[90m
2025-06-04T21:54:46.3620963Z [2m    },[22m
2025-06-04T21:54:46.3621505Z [2m  ][22m
2025-06-04T21:54:46.3621701Z 
2025-06-04T21:54:46.3621910Z [1m  5th spy call:
2025-06-04T21:54:46.3622108Z 
2025-06-04T21:54:46.3622309Z [22m[2m  [[22m
2025-06-04T21:54:46.3622767Z [32m-   ObjectContaining {[90m
2025-06-04T21:54:46.3623200Z [31m+   {[90m
2025-06-04T21:54:46.3623644Z [31m+     "cached": false,[90m
2025-06-04T21:54:46.3624179Z [31m+     "input_tokens": 0,[90m
2025-06-04T21:54:46.3624661Z [31m+     "latency": 0,[90m
2025-06-04T21:54:46.3625193Z [2m      "model": "test-model",[22m
2025-06-04T21:54:46.3625930Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T21:54:46.3626590Z [32m-     "requestId": "123",[90m
2025-06-04T21:54:46.3627126Z [31m+     "optimized": false,[90m
2025-06-04T21:54:46.3627635Z [31m+     "output_tokens": 0,[90m
2025-06-04T21:54:46.3628175Z [31m+     "request_id": "123",[90m
2025-06-04T21:54:46.3628708Z [2m      "success": true,[22m
2025-06-04T21:54:46.3629442Z [31m+     "total_tokens": 0,[90m
2025-06-04T21:54:46.3629926Z [2m    },[22m
2025-06-04T21:54:46.3630279Z [2m  ][22m
2025-06-04T21:54:46.3630606Z [31m[90m
2025-06-04T21:54:46.3630767Z 
2025-06-04T21:54:46.3631015Z Number of calls: [1m5[22m
2025-06-04T21:54:46.3631421Z [31m[39m
2025-06-04T21:54:46.3632750Z    [32m✓[39m ContinuousValidationPipeline[2m > [22mgetValidationStats[2m > [22mshould calculate validation statistics correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:46.3634943Z    [32m✓[39m ContinuousValidationPipeline[2m > [22mdoesModelPassValidation[2m > [22mshould correctly determine if a model passes validation[32m 1[2mms[22m[39m
2025-06-04T21:54:46.3637103Z    [32m✓[39m ContinuousValidationPipeline[2m > [22mtestFactoryFunctions[2m > [22mshould create valid emotion detection tests[32m 1[2mms[22m[39m
2025-06-04T21:54:46.3639313Z    [32m✓[39m ContinuousValidationPipeline[2m > [22mtestFactoryFunctions[2m > [22mshould create valid pattern recognition tests[32m 1[2mms[22m[39m
2025-06-04T21:54:47.3033770Z [90mstdout[2m | src/lib/services/notification/__tests__/NotificationService.test.ts
2025-06-04T21:54:47.3038786Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:54:47.3044513Z   SSR: [32m''[39m,
2025-06-04T21:54:47.3045543Z   VITEST_WORKER_ID: [32m'35'[39m,
2025-06-04T21:54:47.3046028Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:54:47.3046636Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:47.3047913Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:47.3049876Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:47.3050599Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:54:47.3051201Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:54:47.3051993Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:54:47.3056665Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:54:47.3060955Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:54:47.3061997Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:54:47.3062948Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:54:47.3063600Z   VITEST: [32m'true'[39m,
2025-06-04T21:54:47.3064310Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:54:47.3065183Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:54:47.3067007Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:47.3068449Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:54:47.3069456Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:54:47.3070459Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:54:47.3071337Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:54:47.3072422Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:54:47.3073285Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:54:47.3073987Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:54:47.3074786Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:54:47.3075695Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:54:47.3076596Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:54:47.3077390Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:54:47.3078803Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:47.3089686Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:54:47.3090395Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:54:47.3091693Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:54:47.3092671Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:54:47.3093351Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:54:47.3094248Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:54:47.3095543Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:54:47.3096028Z   MODE: [32m'test'[39m,
2025-06-04T21:54:47.3096672Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:47.3097425Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:54:47.3097963Z   CI: [32m'true'[39m,
2025-06-04T21:54:47.3098512Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:54:47.3100253Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:54:47.3100865Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:54:47.3101643Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:47.3102470Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:47.3103234Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:54:47.3103988Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:54:47.3104543Z   PROD: [32m''[39m,
2025-06-04T21:54:47.3105450Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:54:47.3106094Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:54:47.3106638Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:54:47.3107271Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:54:47.3107853Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:54:47.3108954Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:47.3110213Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:54:47.3110844Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:54:47.3111398Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:54:47.3112031Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:54:47.3112817Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:54:47.3113410Z   USER: [32m'runner'[39m,
2025-06-04T21:54:47.3113853Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:54:47.3114244Z   SHLVL: [32m'1'[39m,
2025-06-04T21:54:47.3114699Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:54:47.3115427Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:47.3116236Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:54:47.3117370Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:47.3118555Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:54:47.3119342Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:54:47.3119840Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:54:47.3120392Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:54:47.3121091Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:54:47.3122000Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:54:47.3122741Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:54:47.3123499Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:54:47.3124148Z   VITEST_POOL_ID: [32m'3'[39m,
2025-06-04T21:54:47.3124835Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:47.3125756Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:54:47.3126416Z   DEV: [32m'1'[39m,
2025-06-04T21:54:47.3126988Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:54:47.3127549Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:54:47.3128104Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:54:47.3128757Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:54:47.3129903Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:54:47.3130768Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:54:47.3131465Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:54:47.3132108Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:54:47.3132952Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:47.3133676Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:54:47.3134167Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:54:47.3134784Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:54:47.3135372Z   TEST: [32m'true'[39m,
2025-06-04T21:54:47.3135864Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:54:47.3136561Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:54:47.3137213Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:54:47.3137716Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:54:47.3138229Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:54:47.3140177Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:54:47.3141651Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:54:47.3142846Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:54:47.3143373Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:54:47.3143919Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:54:47.3144388Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:54:47.3144901Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:54:47.3146265Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:54:47.3147549Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:47.3148186Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:54:47.3149436Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:54:47.3150386Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:54:47.3150886Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:54:47.3151664Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:54:47.3152512Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:54:47.3153169Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:54:47.3153793Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:47.3154428Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:54:47.3155007Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:54:47.3155950Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:54:47.3156702Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:54:47.3157377Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:47.3157968Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:54:47.3158757Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:47.3159737Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:54:47.3160302Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:54:47.3166175Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:54:47.3168867Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:54:47.3169472Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:54:47.3170189Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:47.3170834Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:54:47.3171333Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:54:47.3172115Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:54:47.3172883Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:47.3173579Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:47.3174533Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:54:47.3175472Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:54:47.3176142Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:54:47.3176804Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:47.3177991Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:54:47.3179064Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:54:47.3180290Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:54:47.3180893Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:54:47.3181567Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:47.3182373Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:54:47.3183147Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:54:47.3183776Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:54:47.3184378Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:54:47.3185087Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:54:47.3185870Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:54:47.3186379Z }
2025-06-04T21:54:47.3186537Z 
2025-06-04T21:54:47.3813607Z  [31m❯[39m src/tests/performance.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m2 failed[39m[2m | [22m[33m8 skipped[39m[2m)[22m[33m 2228[2mms[22m[39m
2025-06-04T21:54:47.3816710Z    [2m[90m↓[39m[22m performance Tests[2m > [22mcore Web Vitals[2m > [22mcore Web Vitals - 
2025-06-04T21:54:47.3825726Z    [2m[90m↓[39m[22m performance Tests[2m > [22mcore Web Vitals[2m > [22mfirst Input Delay - 
2025-06-04T21:54:47.3826900Z    [2m[90m↓[39m[22m performance Tests[2m > [22mcore Web Vitals[2m > [22mcore Web Vitals - 
2025-06-04T21:54:47.3828404Z    [2m[90m↓[39m[22m performance Tests[2m > [22mcore Web Vitals[2m > [22mfirst Input Delay - 
2025-06-04T21:54:47.3829843Z    [2m[90m↓[39m[22m performance Tests[2m > [22mcore Web Vitals[2m > [22mcore Web Vitals - 
2025-06-04T21:54:47.3831007Z    [2m[90m↓[39m[22m performance Tests[2m > [22mcore Web Vitals[2m > [22mfirst Input Delay - 
2025-06-04T21:54:47.3832155Z    [2m[90m↓[39m[22m performance Tests[2m > [22mcore Web Vitals[2m > [22mcore Web Vitals - 
2025-06-04T21:54:47.3833287Z    [2m[90m↓[39m[22m performance Tests[2m > [22mcore Web Vitals[2m > [22mfirst Input Delay - 
2025-06-04T21:54:47.3834495Z [31m   [31m×[31m performance Tests[2m > [22maPI Performance - [39m[32m 121[2mms[22m[39m
2025-06-04T21:54:47.3835433Z [31m     → page.evaluate: TypeError: Failed to fetch
2025-06-04T21:54:47.3836071Z     at eval (eval at evaluate (:313:29), <anonymous>:2:20)
2025-06-04T21:54:47.3836678Z     at UtilityScript.evaluate (<anonymous>:315:16)
2025-06-04T21:54:47.3837403Z     at UtilityScript.<anonymous> (<anonymous>:1:44)[39m
2025-06-04T21:54:47.3838474Z [31m   [31m×[31m performance Tests[2m > [22maPI Performance - [39m[32m 59[2mms[22m[39m
2025-06-04T21:54:47.3839623Z [31m     → page.evaluate: TypeError: Failed to fetch
2025-06-04T21:54:47.3840243Z     at eval (eval at evaluate (:313:29), <anonymous>:2:35)
2025-06-04T21:54:47.3840834Z     at UtilityScript.evaluate (<anonymous>:315:16)
2025-06-04T21:54:47.3841550Z     at UtilityScript.<anonymous> (<anonymous>:1:44)[39m
2025-06-04T21:54:47.3842517Z    [32m✓[39m performance Tests[2m > [22mperformance regression test[32m 1[2mms[22m[39m
2025-06-04T21:54:48.0433503Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould generate a response correctly
2025-06-04T21:54:48.0436100Z [22m[39m[2025-06-04T21:54:48.041Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0437174Z 
2025-06-04T21:54:48.0443204Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould generate a response correctly
2025-06-04T21:54:48.0445720Z [22m[39m[2025-06-04T21:54:48.043Z] [INFO] [phi-audit] Generating response from messages {"messageCount":1,"hasInstructions":false,"model":"test-model","action":"generate_response_from_messages"}
2025-06-04T21:54:48.0446728Z 
2025-06-04T21:54:48.0455085Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould generate a response correctly
2025-06-04T21:54:48.0458072Z [22m[39m[2025-06-04T21:54:48.044Z] [INFO] [phi-audit] Response generated successfully {"model":"test-model","promptTokens":70,"completionTokens":30,"totalTokens":100,"action":"generate_response_success"}
2025-06-04T21:54:48.0459354Z 
2025-06-04T21:54:48.0570456Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould use custom temperature when provided
2025-06-04T21:54:48.0577036Z [22m[39m[2025-06-04T21:54:48.056Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0584317Z 
2025-06-04T21:54:48.0588195Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould use custom temperature when provided
2025-06-04T21:54:48.0593491Z [22m[39m[2025-06-04T21:54:48.057Z] [INFO] [phi-audit] Generating response to conversation {"messageCount":1,"model":"test-model","temperature":0.2,"maxTokens":1024,"action":"generate_response_to_conversation"}
2025-06-04T21:54:48.0607785Z 
2025-06-04T21:54:48.0610028Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould use custom temperature when provided
2025-06-04T21:54:48.0612779Z [22m[39m[2025-06-04T21:54:48.057Z] [INFO] [phi-audit] Response to conversation generated successfully {"model":"test-model","tokensUsed":100,"action":"generate_response_to_conversation_success"}
2025-06-04T21:54:48.0628324Z 
2025-06-04T21:54:48.0630160Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould use custom max tokens when provided
2025-06-04T21:54:48.0632837Z [22m[39m[2025-06-04T21:54:48.061Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0633910Z 
2025-06-04T21:54:48.0635453Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould use custom max tokens when provided
2025-06-04T21:54:48.0638201Z [22m[39m[2025-06-04T21:54:48.061Z] [INFO] [phi-audit] Generating response to conversation {"messageCount":1,"model":"test-model","temperature":0.7,"maxTokens":500,"action":"generate_response_to_conversation"}
2025-06-04T21:54:48.0639466Z 
2025-06-04T21:54:48.0641060Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould use custom max tokens when provided
2025-06-04T21:54:48.0643741Z [22m[39m[2025-06-04T21:54:48.061Z] [INFO] [phi-audit] Response to conversation generated successfully {"model":"test-model","tokensUsed":100,"action":"generate_response_to_conversation_success"}
2025-06-04T21:54:48.0644814Z 
2025-06-04T21:54:48.0648933Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould use custom system prompt when provided
2025-06-04T21:54:48.0653132Z [22m[39m[2025-06-04T21:54:48.062Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0654770Z 
2025-06-04T21:54:48.0656632Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould use custom system prompt when provided
2025-06-04T21:54:48.0659738Z [22m[39m[2025-06-04T21:54:48.063Z] [INFO] [phi-audit] Generating response with specific instructions {"messageCount":1,"model":"test-model","action":"generate_response_with_instructions"}
2025-06-04T21:54:48.0669585Z [2025-06-04T21:54:48.063Z] [INFO] [phi-audit] Generating response to conversation {"messageCount":1,"model":"test-model","temperature":0.7,"maxTokens":1024,"action":"generate_response_to_conversation"}
2025-06-04T21:54:48.0672702Z 
2025-06-04T21:54:48.0674306Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould use custom system prompt when provided
2025-06-04T21:54:48.0676812Z [22m[39m[2025-06-04T21:54:48.063Z] [INFO] [phi-audit] Response to conversation generated successfully {"model":"test-model","tokensUsed":100,"action":"generate_response_to_conversation_success"}
2025-06-04T21:54:48.0677844Z 
2025-06-04T21:54:48.0684436Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould handle AI service errors
2025-06-04T21:54:48.0687003Z [22m[39m[2025-06-04T21:54:48.064Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0688056Z 
2025-06-04T21:54:48.0689665Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould handle AI service errors
2025-06-04T21:54:48.0692504Z [22m[39m[2025-06-04T21:54:48.064Z] [INFO] [phi-audit] Generating response from messages {"messageCount":1,"hasInstructions":false,"model":"test-model","action":"generate_response_from_messages"}
2025-06-04T21:54:48.0693595Z 
2025-06-04T21:54:48.0695141Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould handle conversation history correctly
2025-06-04T21:54:48.0697519Z [22m[39m[2025-06-04T21:54:48.066Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0698555Z 
2025-06-04T21:54:48.0722325Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould handle conversation history correctly
2025-06-04T21:54:48.0735248Z [22m[39m[2025-06-04T21:54:48.066Z] [INFO] [phi-audit] Generating response from messages {"messageCount":3,"hasInstructions":false,"model":"test-model","action":"generate_response_from_messages"}
2025-06-04T21:54:48.0736344Z 
2025-06-04T21:54:48.0737979Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponse[2m > [22m[2mshould handle conversation history correctly
2025-06-04T21:54:48.0740978Z [22m[39m[2025-06-04T21:54:48.067Z] [INFO] [phi-audit] Response generated successfully {"model":"test-model","promptTokens":120,"completionTokens":30,"totalTokens":150,"action":"generate_response_success"}
2025-06-04T21:54:48.0742111Z 
2025-06-04T21:54:48.0743951Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponseWithInstructions[2m > [22m[2mshould combine instructions with system prompt
2025-06-04T21:54:48.0746717Z [22m[39m[2025-06-04T21:54:48.067Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0747793Z 
2025-06-04T21:54:48.0749769Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponseWithInstructions[2m > [22m[2mshould combine instructions with system prompt
2025-06-04T21:54:48.0752638Z [22m[39m[2025-06-04T21:54:48.068Z] [INFO] [phi-audit] Generating response with specific instructions {"messageCount":1,"model":"test-model","action":"generate_response_with_instructions"}
2025-06-04T21:54:48.0755357Z [2025-06-04T21:54:48.068Z] [INFO] [phi-audit] Generating response to conversation {"messageCount":1,"model":"test-model","temperature":0.7,"maxTokens":1024,"action":"generate_response_to_conversation"}
2025-06-04T21:54:48.0756463Z 
2025-06-04T21:54:48.0758235Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateResponseWithInstructions[2m > [22m[2mshould combine instructions with system prompt
2025-06-04T21:54:48.0761232Z [22m[39m[2025-06-04T21:54:48.068Z] [INFO] [phi-audit] Response to conversation generated successfully {"model":"test-model","tokensUsed":120,"action":"generate_response_to_conversation_success"}
2025-06-04T21:54:48.0762317Z 
2025-06-04T21:54:48.0763891Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateStreamingResponse[2m > [22m[2mshould handle streaming responses correctly
2025-06-04T21:54:48.0766590Z [22m[39m[2025-06-04T21:54:48.068Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0767662Z 
2025-06-04T21:54:48.0769452Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateStreamingResponse[2m > [22m[2mshould handle streaming responses correctly
2025-06-04T21:54:48.0772449Z [22m[39m[2025-06-04T21:54:48.069Z] [INFO] [phi-audit] Generating streaming response {"messageCount":1,"model":"test-model","temperature":0.7,"maxTokens":1024,"action":"generate_streaming_response"}
2025-06-04T21:54:48.0773572Z 
2025-06-04T21:54:48.0775156Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateStreamingResponse[2m > [22m[2mshould handle streaming errors
2025-06-04T21:54:48.0799978Z [22m[39m[2025-06-04T21:54:48.071Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0801049Z 
2025-06-04T21:54:48.0805286Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mgenerateStreamingResponse[2m > [22m[2mshould handle streaming errors
2025-06-04T21:54:48.0808018Z [22m[39m[2025-06-04T21:54:48.072Z] [INFO] [phi-audit] Generating streaming response {"messageCount":1,"model":"test-model","temperature":0.7,"maxTokens":1024,"action":"generate_streaming_response"}
2025-06-04T21:54:48.0809285Z 
2025-06-04T21:54:48.0810821Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mconstructor[2m > [22m[2mshould use default model if not provided
2025-06-04T21:54:48.0813357Z [22m[39m[2025-06-04T21:54:48.077Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0814422Z 
2025-06-04T21:54:48.0815947Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mconstructor[2m > [22m[2mshould use default model if not provided
2025-06-04T21:54:48.0818746Z [22m[39m[2025-06-04T21:54:48.077Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"mistralai/Mixtral-8x7B-Instruct-v0.2","action":"initialize"}
2025-06-04T21:54:48.0820125Z 
2025-06-04T21:54:48.0821709Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mconstructor[2m > [22m[2mshould use default temperature if not provided
2025-06-04T21:54:48.0824290Z [22m[39m[2025-06-04T21:54:48.078Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0825329Z 
2025-06-04T21:54:48.0826879Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mconstructor[2m > [22m[2mshould use default temperature if not provided
2025-06-04T21:54:48.0833930Z [22m[39m[2025-06-04T21:54:48.078Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"mistralai/Mixtral-8x7B-Instruct-v0.2","action":"initialize"}
2025-06-04T21:54:48.0835146Z 
2025-06-04T21:54:48.0836737Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mconstructor[2m > [22m[2mshould use default max tokens if not provided
2025-06-04T21:54:48.0840247Z [22m[39m[2025-06-04T21:54:48.079Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0841341Z 
2025-06-04T21:54:48.0842868Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mconstructor[2m > [22m[2mshould use default max tokens if not provided
2025-06-04T21:54:48.0845638Z [22m[39m[2025-06-04T21:54:48.079Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"mistralai/Mixtral-8x7B-Instruct-v0.2","action":"initialize"}
2025-06-04T21:54:48.0846862Z 
2025-06-04T21:54:48.0848376Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mconstructor[2m > [22m[2mshould use custom system prompt if provided
2025-06-04T21:54:48.0851347Z [22m[39m[2025-06-04T21:54:48.079Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"test-model","action":"initialize"}
2025-06-04T21:54:48.0852440Z 
2025-06-04T21:54:48.0853911Z [90mstderr[2m | src/tests/ai/response-generation.test.ts[2m > [22m[2mresponseGenerationService[2m > [22m[2mconstructor[2m > [22m[2mshould use custom system prompt if provided
2025-06-04T21:54:48.0856629Z [22m[39m[2025-06-04T21:54:48.079Z] [INFO] [phi-audit] ResponseGenerationService initialized {"component":"ResponseGenerationService","model":"mistralai/Mixtral-8x7B-Instruct-v0.2","action":"initialize"}
2025-06-04T21:54:48.0857818Z 
2025-06-04T21:54:48.0858912Z  [31m❯[39m src/tests/ai/response-generation.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 41[2mms[22m[39m
2025-06-04T21:54:48.0861155Z [31m   [31m×[31m responseGenerationService[2m > [22mgenerateResponse[2m > [22mshould generate a response correctly[39m[32m 16[2mms[22m[39m
2025-06-04T21:54:48.0862525Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:48.0863932Z    [32m✓[39m responseGenerationService[2m > [22mgenerateResponse[2m > [22mshould use custom temperature when provided[32m 5[2mms[22m[39m
2025-06-04T21:54:48.0865843Z    [32m✓[39m responseGenerationService[2m > [22mgenerateResponse[2m > [22mshould use custom max tokens when provided[32m 2[2mms[22m[39m
2025-06-04T21:54:48.0867756Z    [32m✓[39m responseGenerationService[2m > [22mgenerateResponse[2m > [22mshould use custom system prompt when provided[32m 1[2mms[22m[39m
2025-06-04T21:54:48.0869804Z    [32m✓[39m responseGenerationService[2m > [22mgenerateResponse[2m > [22mshould handle AI service errors[32m 3[2mms[22m[39m
2025-06-04T21:54:48.0871640Z    [32m✓[39m responseGenerationService[2m > [22mgenerateResponse[2m > [22mshould handle conversation history correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:48.0873791Z    [32m✓[39m responseGenerationService[2m > [22mgenerateResponseWithInstructions[2m > [22mshould combine instructions with system prompt[32m 1[2mms[22m[39m
2025-06-04T21:54:48.0876134Z [31m   [31m×[31m responseGenerationService[2m > [22mgenerateStreamingResponse[2m > [22mshould handle streaming responses correctly[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:48.0877792Z [31m     → this.aiService.createChatCompletionStream is not a function[39m
2025-06-04T21:54:48.0880188Z [31m   [31m×[31m responseGenerationService[2m > [22mgenerateStreamingResponse[2m > [22mshould handle streaming errors[39m[32m 6[2mms[22m[39m
2025-06-04T21:54:48.0919572Z [31m     → expected [Function] to throw error including 'Streaming error' but got 'this.aiService.createChatCompletionSt…'[39m
2025-06-04T21:54:48.0921390Z    [32m✓[39m responseGenerationService[2m > [22mconstructor[2m > [22mshould use default model if not provided[32m 1[2mms[22m[39m
2025-06-04T21:54:48.0923268Z    [32m✓[39m responseGenerationService[2m > [22mconstructor[2m > [22mshould use default temperature if not provided[32m 1[2mms[22m[39m
2025-06-04T21:54:48.0925119Z    [32m✓[39m responseGenerationService[2m > [22mconstructor[2m > [22mshould use default max tokens if not provided[32m 1[2mms[22m[39m
2025-06-04T21:54:48.0926917Z    [32m✓[39m responseGenerationService[2m > [22mconstructor[2m > [22mshould use custom system prompt if provided[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4801855Z  [31m❯[39m src/lib/services/analytics/__tests__/AnalyticsService.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m15 failed[39m[2m)[22m[32m 43[2mms[22m[39m
2025-06-04T21:54:48.4803728Z [31m   [31m×[31m analyticsService[2m > [22mtrackEvent[2m > [22mshould track an event successfully[39m[32m 12[2mms[22m[39m
2025-06-04T21:54:48.4804843Z [31m     → crypto.randomUUID is not a function[39m
2025-06-04T21:54:48.4807344Z    [32m✓[39m analyticsService[2m > [22mtrackEvent[2m > [22mshould validate event data[32m 3[2mms[22m[39m
2025-06-04T21:54:48.4809039Z [31m   [31m×[31m analyticsService[2m > [22mtrackEvent[2m > [22mshould notify WebSocket subscribers[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:48.4810248Z [31m     → crypto.randomUUID is not a function[39m
2025-06-04T21:54:48.4811525Z [31m   [31m×[31m analyticsService[2m > [22mtrackMetric[2m > [22mshould track a metric successfully[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:48.4813225Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4814449Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4815141Z [39m
2025-06-04T21:54:48.4816195Z [31m   [31m×[31m analyticsService[2m > [22mtrackMetric[2m > [22mshould store metric tags[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4817871Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4819274Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4820018Z [39m
2025-06-04T21:54:48.4820958Z    [32m✓[39m analyticsService[2m > [22mtrackMetric[2m > [22mshould validate metric data[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4822545Z [31m   [31m×[31m analyticsService[2m > [22mprocessEvents[2m > [22mshould process queued events[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4824238Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4825450Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4826165Z [39m
2025-06-04T21:54:48.4827319Z [31m   [31m×[31m analyticsService[2m > [22mprocessEvents[2m > [22mshould handle empty queue[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4829066Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4830473Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4831205Z [39m
2025-06-04T21:54:48.4832379Z [31m   [31m×[31m analyticsService[2m > [22mprocessEvents[2m > [22mshould handle processing errors[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4834088Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4835611Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4836316Z [39m
2025-06-04T21:54:48.4837519Z [31m   [31m×[31m analyticsService[2m > [22mgetEvents[2m > [22mshould get events by type and time range[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4839472Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4840729Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4841449Z [39m
2025-06-04T21:54:48.4842650Z [31m   [31m×[31m analyticsService[2m > [22mgetEvents[2m > [22mshould handle time range and pagination[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4844329Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4845480Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4846084Z [39m
2025-06-04T21:54:48.4847092Z [31m   [31m×[31m analyticsService[2m > [22mgetMetrics[2m > [22mshould get metrics by name and time range[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4848484Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4849922Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4850515Z [39m
2025-06-04T21:54:48.4851458Z [31m   [31m×[31m analyticsService[2m > [22mgetMetrics[2m > [22mshould filter metrics by tags[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4852886Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4853921Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4854536Z [39m
2025-06-04T21:54:48.4855574Z [31m   [31m×[31m analyticsService[2m > [22mcleanup[2m > [22mshould clean up old events and metrics[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4857057Z [31m     → [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:48.4858145Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:48.4858749Z [39m
2025-06-04T21:54:48.4859903Z [31m   [31m×[31m analyticsService[2m > [22mcleanup[2m > [22mshould handle cleanup errors[39m[32m 6[2mms[22m[39m
2025-06-04T21:54:48.4861381Z [31m     → expected [Function] to throw error including 'Cleanup error' but got '[vitest] No "redis" export is defined…'[39m
2025-06-04T21:54:48.4863112Z [31m   [31m×[31m analyticsService[2m > [22mwebSocket integration[2m > [22mshould register and unregister WebSocket clients[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4864204Z [31m     → expected true to be false[39m
2025-06-04T21:54:48.4865511Z [31m   [31m×[31m analyticsService[2m > [22mwebSocket integration[2m > [22mshould notify only relevant subscribers[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:48.4866589Z [31m     → crypto.randomUUID is not a function[39m
2025-06-04T21:54:48.5191540Z [90mstdout[2m | src/lib/services/contact/__tests__/ContactService.test.ts
2025-06-04T21:54:48.5193131Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:54:48.5200024Z   SSR: [32m''[39m,
2025-06-04T21:54:48.5200566Z   VITEST_WORKER_ID: [32m'38'[39m,
2025-06-04T21:54:48.5201055Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:54:48.5201712Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:48.5203040Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:48.5204273Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:48.5205448Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:54:48.5206130Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:54:48.5207076Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:54:48.5211579Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:54:48.5214771Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:54:48.5215607Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:54:48.5216366Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:54:48.5216856Z   VITEST: [32m'true'[39m,
2025-06-04T21:54:48.5217375Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:54:48.5218030Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:54:48.5222485Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:48.5223558Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:54:48.5224489Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:54:48.5225360Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:54:48.5226104Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:54:48.5226848Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:54:48.5227599Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:54:48.5228194Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:54:48.5228899Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:54:48.5230035Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:54:48.5230821Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:54:48.5231467Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:54:48.5232633Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:48.5233649Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:54:48.5234258Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:54:48.5235099Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:54:48.5235898Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:54:48.5236549Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:54:48.5237223Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:54:48.5237889Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:54:48.5238391Z   MODE: [32m'test'[39m,
2025-06-04T21:54:48.5239067Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:48.5240087Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:54:48.5240609Z   CI: [32m'true'[39m,
2025-06-04T21:54:48.5241132Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:54:48.5241719Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:54:48.5242262Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:54:48.5243067Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:48.5244090Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:48.5244776Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:54:48.5245494Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:54:48.5246106Z   PROD: [32m''[39m,
2025-06-04T21:54:48.5246751Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:54:48.5247416Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:54:48.5248270Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:54:48.5248946Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:54:48.5249762Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:54:48.5250921Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:48.5252079Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:54:48.5252684Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:54:48.5253202Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:54:48.5253814Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:54:48.5254634Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:54:48.5255325Z   USER: [32m'runner'[39m,
2025-06-04T21:54:48.5255828Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:54:48.5256268Z   SHLVL: [32m'1'[39m,
2025-06-04T21:54:48.5256784Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:54:48.5257624Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:48.5258506Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:54:48.5262960Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:48.5263981Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:54:48.5264486Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:54:48.5265217Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:54:48.5265819Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:54:48.5266570Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:54:48.5267471Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:54:48.5268223Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:54:48.5269025Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:54:48.5269914Z   VITEST_POOL_ID: [32m'2'[39m,
2025-06-04T21:54:48.5270622Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:48.5271531Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:54:48.5272204Z   DEV: [32m'1'[39m,
2025-06-04T21:54:48.5272737Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:54:48.5273311Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:54:48.5273859Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:54:48.5274531Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:54:48.5275493Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:54:48.5276414Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:54:48.5277189Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:54:48.5277859Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:54:48.5278670Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:48.5279717Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:54:48.5280299Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:54:48.5281003Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:54:48.5281629Z   TEST: [32m'true'[39m,
2025-06-04T21:54:48.5282135Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:54:48.5282859Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:54:48.5283545Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:54:48.5284056Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:54:48.5284590Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:54:48.5285887Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:54:48.5287400Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:54:48.5288244Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:54:48.5289011Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:54:48.5289945Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:54:48.5290470Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:54:48.5290999Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:54:48.5292364Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:54:48.5293688Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:48.5294386Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:54:48.5295486Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:54:48.5296461Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:54:48.5296990Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:54:48.5297778Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:54:48.5298668Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:54:48.5299629Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:54:48.5300349Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:48.5301063Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:54:48.5301705Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:54:48.5302442Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:54:48.5303202Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:54:48.5304150Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:48.5304939Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:54:48.5305793Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:48.5306656Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:54:48.5307279Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:54:48.5313768Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:54:48.5318672Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:54:48.5319654Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:54:48.5320501Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:48.5321207Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:54:48.5321741Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:54:48.5322571Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:54:48.5323398Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:48.5324148Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:48.5325155Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:54:48.5326148Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:54:48.5326865Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:54:48.5327562Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:48.5328742Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:54:48.5330083Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:54:48.5330770Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:54:48.5331372Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:54:48.5332313Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:48.5333134Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:54:48.5333953Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:54:48.5334645Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:54:48.5335309Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:54:48.5336089Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:54:48.5336939Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:54:48.5337488Z }
2025-06-04T21:54:48.5337648Z 
2025-06-04T21:54:49.1645306Z [90mstderr[2m | src/lib/analytics/__tests__/breach-analytics.test.ts[2m > [22m[2mbreachAnalytics[2m > [22m[2mgenerateReport[2m > [22m[2mshould handle errors during report generation
2025-06-04T21:54:49.1647407Z [22m[39m2025-06-04T21:54:49.159Z ERROR  Failed to generate breach metrics: Error: Failed to fetch breaches
2025-06-04T21:54:49.1648961Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/analytics/__tests__/breach-analytics.test.ts:346:9
2025-06-04T21:54:49.1651186Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:49.1653801Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:49.1656086Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:49.1657256Z     at new Promise (<anonymous>)
2025-06-04T21:54:49.1658971Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:49.1661697Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:49.1664156Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1666607Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1669028Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1687043Z 2025-06-04T21:54:49.160Z ERROR  Failed to generate breach metrics: Error: Failed to fetch breaches
2025-06-04T21:54:49.1688597Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/analytics/__tests__/breach-analytics.test.ts:346:9
2025-06-04T21:54:49.1690756Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:49.1692984Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:49.1695209Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:49.1696447Z     at new Promise (<anonymous>)
2025-06-04T21:54:49.1698215Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:49.1701017Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:49.1703408Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1705856Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1708222Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1710200Z 2025-06-04T21:54:49.161Z ERROR  Failed to analyze breach trends: Error: Failed to fetch breaches
2025-06-04T21:54:49.1711703Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/analytics/__tests__/breach-analytics.test.ts:346:9
2025-06-04T21:54:49.1713702Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:49.1715812Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:49.1717976Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:49.1718962Z     at new Promise (<anonymous>)
2025-06-04T21:54:49.1720704Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:49.1723101Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:49.1725406Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1727587Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1730022Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1731597Z 2025-06-04T21:54:49.161Z ERROR  Failed to analyze breach trends: Error: Failed to fetch breaches
2025-06-04T21:54:49.1732847Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/analytics/__tests__/breach-analytics.test.ts:346:9
2025-06-04T21:54:49.1734039Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:49.1735191Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:49.1736337Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:49.1736963Z     at new Promise (<anonymous>)
2025-06-04T21:54:49.1737843Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:49.1739344Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:49.1741012Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1742663Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1743941Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1745399Z 2025-06-04T21:54:49.161Z ERROR  Failed to generate insights: Error: Failed to fetch breaches
2025-06-04T21:54:49.1746661Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/analytics/__tests__/breach-analytics.test.ts:346:9
2025-06-04T21:54:49.1748424Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:49.1750594Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:49.1752808Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:49.1753913Z     at new Promise (<anonymous>)
2025-06-04T21:54:49.1755497Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:49.1757801Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:49.1760169Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1762459Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1764707Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1766307Z 2025-06-04T21:54:49.161Z ERROR  Failed to generate analytics report: Error: Failed to fetch breaches
2025-06-04T21:54:49.1767664Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/analytics/__tests__/breach-analytics.test.ts:346:9
2025-06-04T21:54:49.1769646Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:49.1771697Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:49.1773743Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:49.1774853Z     at new Promise (<anonymous>)
2025-06-04T21:54:49.1776394Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:49.1778696Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:49.1781302Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1783587Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1785862Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1787448Z 2025-06-04T21:54:49.161Z ERROR  Failed to predict breaches: Error: Failed to fetch breaches
2025-06-04T21:54:49.1788855Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/analytics/__tests__/breach-analytics.test.ts:346:9
2025-06-04T21:54:49.1791042Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:49.1793190Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:49.1795614Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:49.1796849Z     at new Promise (<anonymous>)
2025-06-04T21:54:49.1798593Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:49.1801257Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:49.1803644Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1806055Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1808424Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.1809746Z 
2025-06-04T21:54:49.1810840Z  [31m❯[39m src/lib/analytics/__tests__/breach-analytics.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 25[2mms[22m[39m
2025-06-04T21:54:49.1812864Z [31m   [31m×[31m breachAnalytics[2m > [22mgenerateMetrics[2m > [22mshould generate breach metrics for the given timeframe[39m[32m 8[2mms[22m[39m
2025-06-04T21:54:49.1814247Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:49.1815529Z    [32m✓[39m breachAnalytics[2m > [22mgenerateMetrics[2m > [22mshould handle empty breach list[32m 1[2mms[22m[39m
2025-06-04T21:54:49.1817318Z [31m   [31m×[31m breachAnalytics[2m > [22manalyzeTrends[2m > [22mshould analyze breach trends over time[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:49.1818618Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:49.1820200Z [31m   [31m×[31m breachAnalytics[2m > [22mpredictBreaches[2m > [22mshould predict future breaches[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:49.1821481Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:49.1822887Z    [32m✓[39m breachAnalytics[2m > [22manalyzeRiskFactors[2m > [22mshould analyze risk factors and their trends[32m 1[2mms[22m[39m
2025-06-04T21:54:49.1825126Z    [32m✓[39m breachAnalytics[2m > [22mgenerateInsights[2m > [22mshould generate security insights based on metrics and trends[32m 1[2mms[22m[39m
2025-06-04T21:54:49.1827139Z    [32m✓[39m breachAnalytics[2m > [22mgenerateInsights[2m > [22mshould include notification effectiveness insights when below threshold[32m 1[2mms[22m[39m
2025-06-04T21:54:49.1829340Z    [32m✓[39m breachAnalytics[2m > [22mgenerateInsights[2m > [22mshould include compliance insights when below threshold[32m 1[2mms[22m[39m
2025-06-04T21:54:49.1831413Z [31m   [31m×[31m breachAnalytics[2m > [22mgenerateReport[2m > [22mshould generate a comprehensive analytics report[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:49.1832747Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:49.1834114Z    [32m✓[39m breachAnalytics[2m > [22mgenerateReport[2m > [22mshould handle errors during report generation[32m 5[2mms[22m[39m
2025-06-04T21:54:49.5631115Z [90mstderr[2m | src/lib/ai/emotions/__tests__/EmotionDetector.test.ts[2m > [22m[2mEmotionDetector[2m > [22m[2mshould handle errors gracefully during emotion detection
2025-06-04T21:54:49.5633157Z [22m[39mError detecting emotions from text: Error: LLM service unavailable
2025-06-04T21:54:49.5634752Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/EmotionDetector.test.ts:332:26
2025-06-04T21:54:49.5638328Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:49.5641035Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:49.5644439Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:49.5645661Z     at new Promise (<anonymous>)
2025-06-04T21:54:49.5647383Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:49.5650065Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:49.5652503Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.5663892Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:49.5666369Z     at runFiles [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1561:3[90m)[39m
2025-06-04T21:54:49.5667458Z 
2025-06-04T21:54:49.5668620Z  [31m❯[39m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 25[2mms[22m[39m
2025-06-04T21:54:49.5670481Z    [32m✓[39m EmotionDetector[2m > [22mshould create an instance of EmotionDetector[32m 3[2mms[22m[39m
2025-06-04T21:54:49.5672005Z [31m   [31m×[31m EmotionDetector[2m > [22mshould detect emotions from text input[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:49.5673160Z [31m     → expected undefined to be I am happy to see you![39m
2025-06-04T21:54:49.5674549Z [31m   [31m×[31m EmotionDetector[2m > [22mshould detect emotions from facial expression data[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:49.5676090Z [31m     → expected undefined to equal {"smile":0.85,"eyebrowPosition":"raised","mouthOpenness":0.2}[39m
2025-06-04T21:54:49.5677746Z    [32m✓[39m EmotionDetector[2m > [22mshould detect emotions from voice data[32m 4[2mms[22m[39m
2025-06-04T21:54:49.5679380Z    [32m✓[39m EmotionDetector[2m > [22mshould calculate overall sentiment from emotions[32m 1[2mms[22m[39m
2025-06-04T21:54:49.5680958Z [31m   [31m×[31m EmotionDetector[2m > [22mshould identify risk factors from emotions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:49.5682969Z [31m     → expected [object Object],[object Object] to equal ArrayContaining([{"sample":{"type":{"sample":{},"inverse":false},"severity":"high"},"inverse":false}])[39m
2025-06-04T21:54:49.5684834Z [31m   [31m×[31m EmotionDetector[2m > [22mshould store analysis results in the database[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:49.5685971Z [31m     → detector.storeAnalysis is not a function[39m
2025-06-04T21:54:49.5687261Z [31m   [31m×[31m EmotionDetector[2m > [22mshould handle empty emotion data gracefully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:49.5688318Z [31m     → expected undefined to be 0[39m
2025-06-04T21:54:49.5689781Z [31m   [31m×[31m EmotionDetector[2m > [22mshould combine emotions from multiple sources[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:49.5690988Z [31m     → detector.combineEmotionAnalyses is not a function[39m
2025-06-04T21:54:49.5692293Z [31m   [31m×[31m EmotionDetector[2m > [22mshould handle errors gracefully during emotion detection[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:49.5693660Z [31m     → expected [object Object] to equal [39m
2025-06-04T21:54:49.6771311Z  [31m❯[39m src/lib/ai/temporal/__tests__/quadrantTransitions.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 18[2mms[22m[39m
2025-06-04T21:54:49.6773194Z    [32m✓[39m quadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould return empty array for empty input[32m 2[2mms[22m[39m
2025-06-04T21:54:49.6775017Z    [32m✓[39m quadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould return empty array for single point[32m 0[2mms[22m[39m
2025-06-04T21:54:49.6776935Z    [32m✓[39m quadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould detect transition between quadrants[32m 2[2mms[22m[39m
2025-06-04T21:54:49.6778781Z    [32m✓[39m quadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould handle data with primaryVector format[32m 0[2mms[22m[39m
2025-06-04T21:54:49.6781214Z [31m   [31m×[31m quadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould handle data with valence instead of pleasure[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:49.6782217Z [31m     → expected [] to have a length of 1 but got +0[39m
2025-06-04T21:54:49.6783068Z    [32m✓[39m quadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould not detect transition for points in same quadrant[32m 0[2mms[22m[39m
2025-06-04T21:54:49.6784193Z    [32m✓[39m quadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould only detect transitions above minimum strength threshold[32m 1[2mms[22m[39m
2025-06-04T21:54:49.6785231Z    [32m✓[39m quadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould detect multiple transitions[32m 1[2mms[22m[39m
2025-06-04T21:54:49.6786472Z    [32m✓[39m quadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould assign higher strength to clinically significant transitions[32m 0[2mms[22m[39m
2025-06-04T21:54:49.6788467Z    [32m✓[39m quadrantTransitions[2m > [22manalyzeQuadrantTransitions[2m > [22mshould return empty array for empty input[32m 0[2mms[22m[39m
2025-06-04T21:54:49.6790586Z    [32m✓[39m quadrantTransitions[2m > [22manalyzeQuadrantTransitions[2m > [22mshould generate insights for a single transition[32m 0[2mms[22m[39m
2025-06-04T21:54:49.6792448Z    [32m✓[39m quadrantTransitions[2m > [22manalyzeQuadrantTransitions[2m > [22mshould identify recurring patterns[32m 0[2mms[22m[39m
2025-06-04T21:54:49.6794689Z    [32m✓[39m quadrantTransitions[2m > [22manalyzeQuadrantTransitions[2m > [22mshould detect emotional volatility[32m 0[2mms[22m[39m
2025-06-04T21:54:50.6704005Z  [31m❯[39m src/tests/ai/sentiment-analysis.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 17[2mms[22m[39m
2025-06-04T21:54:50.6707975Z [31m   [31m×[31m sentimentAnalysisService[2m > [22manalyzeSentiment[2m > [22mshould analyze sentiment correctly for positive text[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:50.6709545Z [31m     → Failed to parse sentiment analysis result[39m
2025-06-04T21:54:50.6711140Z [31m   [31m×[31m sentimentAnalysisService[2m > [22manalyzeSentiment[2m > [22mshould analyze sentiment correctly for negative text[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.6712200Z [31m     → Failed to parse sentiment analysis result[39m
2025-06-04T21:54:50.6713107Z [31m   [31m×[31m sentimentAnalysisService[2m > [22manalyzeSentiment[2m > [22mshould analyze sentiment correctly for neutral text[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.6713859Z [31m     → Failed to parse sentiment analysis result[39m
2025-06-04T21:54:50.6714589Z    [32m✓[39m sentimentAnalysisService[2m > [22manalyzeSentiment[2m > [22mshould handle invalid JSON responses[32m 2[2mms[22m[39m
2025-06-04T21:54:50.6715505Z    [32m✓[39m sentimentAnalysisService[2m > [22manalyzeSentiment[2m > [22mshould handle AI service errors[32m 1[2mms[22m[39m
2025-06-04T21:54:50.6716944Z [31m   [31m×[31m sentimentAnalysisService[2m > [22manalyzeBatch[2m > [22mshould analyze multiple texts in parallel[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.6717672Z [31m     → Failed to parse sentiment analysis result[39m
2025-06-04T21:54:50.6718389Z    [32m✓[39m sentimentAnalysisService[2m > [22manalyzeBatch[2m > [22mshould handle errors in batch processing[32m 1[2mms[22m[39m
2025-06-04T21:54:50.6719849Z [31m   [31m×[31m sentimentAnalysisService[2m > [22mconstructor[2m > [22mshould use default model if not provided[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.6721276Z [31m     → Cannot read properties of undefined (reading 'model')[39m
2025-06-04T21:54:50.6722908Z [31m   [31m×[31m sentimentAnalysisService[2m > [22mconstructor[2m > [22mshould use custom system prompt if provided[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.6724329Z [31m     → Cannot read properties of undefined (reading 'defaultPrompt')[39m
2025-06-04T21:54:50.7940613Z  [31m❯[39m src/lib/security/__tests__/dlp.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 30[2mms[22m[39m
2025-06-04T21:54:50.7942354Z    [32m✓[39m DLP Service[2m > [22mRule Management[2m > [22mshould add rules correctly[32m 3[2mms[22m[39m
2025-06-04T21:54:50.7944018Z    [32m✓[39m DLP Service[2m > [22mRule Management[2m > [22mshould update existing rules when adding with same ID[32m 1[2mms[22m[39m
2025-06-04T21:54:50.7945652Z    [32m✓[39m DLP Service[2m > [22mRule Management[2m > [22mshould remove rules correctly[32m 1[2mms[22m[39m
2025-06-04T21:54:50.7947765Z [31m   [31m×[31m DLP Service[2m > [22mContent Scanning[2m > [22mshould allow content with no triggered rules[39m[32m 11[2mms[22m[39m
2025-06-04T21:54:50.7949738Z [31m     → [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:50.7951247Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:50.7952382Z [39m
2025-06-04T21:54:50.7953885Z [31m   [31m×[31m DLP Service[2m > [22mContent Scanning[2m > [22mshould redact content when rules with REDACT action are triggered[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:50.7956071Z [31m     → [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:50.7957659Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:50.8014989Z [39m
2025-06-04T21:54:50.8016547Z [31m   [31m×[31m DLP Service[2m > [22mContent Scanning[2m > [22mshould block content when rules with BLOCK action are triggered[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.8018423Z [31m     → [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:50.8019922Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:50.8020733Z [39m
2025-06-04T21:54:50.8022080Z [31m   [31m×[31m DLP Service[2m > [22mContent Scanning[2m > [22mshould generate alerts for BLOCK_AND_ALERT actions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.8023891Z [31m     → [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:50.8025165Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:50.8025906Z [39m
2025-06-04T21:54:50.8027229Z [31m   [31m×[31m DLP Service[2m > [22mPHI Detection Integration[2m > [22mshould use PHI detection for scanning[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.8029014Z [31m     → [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:50.8030476Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:50.8031229Z [39m
2025-06-04T21:54:50.8032618Z    [32m✓[39m DLP Service[2m > [22mDefault Rules[2m > [22mshould have PHI detection rule by default[32m 1[2mms[22m[39m
2025-06-04T21:54:50.8034264Z    [32m✓[39m DLP Service[2m > [22mDefault Rules[2m > [22mshould have large data volume rule by default[32m 0[2mms[22m[39m
2025-06-04T21:54:50.8036056Z [31m   [31m×[31m DLP Service[2m > [22mDefault Rules[2m > [22mshould redact PHI in content with default rules[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.8037788Z [31m     → [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:50.8043168Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:50.8043917Z [39m
2025-06-04T21:54:50.8074300Z [31m   [31m×[31m DLP Service[2m > [22mDefault Rules[2m > [22mshould block large data exports that might contain PHI[39m[32m 4[2mms[22m[39m
2025-06-04T21:54:50.8076083Z [31m     → [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:50.8077235Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:50.8077908Z [39m
2025-06-04T21:54:50.8079250Z [31m   [31m×[31m DLP Service[2m > [22mAudit Logging[2m > [22mshould log allowed events with DLP_ALLOWED type[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.8080918Z [31m     → [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:50.8082440Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:50.8083096Z [39m
2025-06-04T21:54:50.8084081Z [31m   [31m×[31m DLP Service[2m > [22mAudit Logging[2m > [22mshould log blocked events with DLP_BLOCKED type[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:50.8085031Z [31m     → [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:54:50.8085711Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:54:50.8086074Z [39m
2025-06-04T21:54:51.3604609Z  [31m❯[39m src/lib/security/__tests__/security-scanning.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 19[2mms[22m[39m
2025-06-04T21:54:51.3608565Z [31m   [31m×[31m security Scanning Configuration[2m > [22mgitHub Workflow Configuration[2m > [22mshould have proper security scanning workflow configuration[39m[32m 13[2mms[22m[39m
2025-06-04T21:54:51.3613761Z [31m     → content.trim is not a function[39m
2025-06-04T21:54:51.3615654Z [31m   [31m×[31m security Scanning Configuration[2m > [22mgitleaks Configuration[2m > [22mshould have proper Gitleaks configuration with healthcare patterns[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.3617068Z [31m     → content.trim is not a function[39m
2025-06-04T21:54:51.3618938Z [31m   [31m×[31m security Scanning Configuration[2m > [22mcodeQL Configuration[2m > [22mshould have proper CodeQL configuration with EHR security queries[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.3620574Z [31m     → content.trim is not a function[39m
2025-06-04T21:54:51.3622171Z [31m   [31m×[31m security Scanning Configuration[2m > [22mcustom FHIR Security Queries[2m > [22mshould have proper FHIR security queries[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.3623504Z [31m     → content.trim is not a function[39m
2025-06-04T21:54:51.3624967Z    [32m✓[39m security Scanning Configuration[2m > [22msecurity Baseline[2m > [22mshould have proper security baseline configuration[32m 2[2mms[22m[39m
2025-06-04T21:54:51.7508432Z [90mstderr[2m | src/lib/ai/__tests__/performance-optimizations.test.ts
2025-06-04T21:54:51.7512506Z [22m[39m[2025-06-04T21:54:51.749Z] [INFO] HIPAA Audit logging service initialized
2025-06-04T21:54:51.7514998Z 
2025-06-04T21:54:51.7517393Z [90mstderr[2m | src/lib/ai/__tests__/performance-optimizations.test.ts
2025-06-04T21:54:51.7522636Z [22m[39m[2025-06-04T21:54:51.750Z] [INFO] [ai-performance] AI Performance monitoring initialized {"options":{"logToConsole":true,"createAuditLogs":false,"slowRequestThreshold":1000,"highTokenUsageThreshold":1000,"metricsStorage":"memory"}}
2025-06-04T21:54:51.7537986Z 
2025-06-04T21:54:51.9221843Z  [31m❯[39m src/lib/websocket/__tests__/server.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 14[2mms[22m[39m
2025-06-04T21:54:51.9223734Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould add new client on connection[39m[32m 7[2mms[22m[39m
2025-06-04T21:54:51.9226099Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:51.9228025Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle message events[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.9228676Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:51.9229756Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle encrypted messages with FHE[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.9230433Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:51.9231173Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle status updates[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.9231764Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:51.9232515Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle client disconnection[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.9233485Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:51.9234266Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle message parsing errors[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.9234880Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:51.9235649Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22mbroadcast methods[2m > [22mshould broadcast to specific session[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.9236258Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:51.9237611Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22mbroadcast methods[2m > [22mshould broadcast to all clients[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.9238793Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:51.9240450Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22merror handling[2m > [22mshould handle FHE initialization errors[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.9241608Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:51.9242982Z [31m   [31m×[31m therapyChatWebSocketServer[2m > [22merror handling[2m > [22mshould handle missing session ID[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:51.9244130Z [31m     → Invalid URL: undefined[39m
2025-06-04T21:54:52.3238635Z [90mstdout[2m | src/workers/__tests__/analytics-worker.test.ts
2025-06-04T21:54:52.3239717Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:54:52.3240311Z   SSR: [32m''[39m,
2025-06-04T21:54:52.3240743Z   VITEST_WORKER_ID: [32m'48'[39m,
2025-06-04T21:54:52.3241072Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:54:52.3241509Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:52.3242417Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:52.3243687Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:52.3244532Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:54:52.3245263Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:54:52.3246149Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:54:52.3251392Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:54:52.3254570Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:54:52.3255378Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:54:52.3256111Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:54:52.3256558Z   VITEST: [32m'true'[39m,
2025-06-04T21:54:52.3257059Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:54:52.3257742Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:54:52.3258872Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:52.3260066Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:54:52.3260725Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:54:52.3261491Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:54:52.3262153Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:54:52.3262850Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:54:52.3263555Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:54:52.3264140Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:54:52.3265076Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:54:52.3265875Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:54:52.3266641Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:54:52.3267258Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:54:52.3268363Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:52.3269484Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:54:52.3270080Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:54:52.3270868Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:54:52.3271666Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:54:52.3272308Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:54:52.3272948Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:54:52.3273522Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:54:52.3273908Z   MODE: [32m'test'[39m,
2025-06-04T21:54:52.3274279Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:52.3275009Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:54:52.3275506Z   CI: [32m'true'[39m,
2025-06-04T21:54:52.3275991Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:54:52.3276525Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:54:52.3276986Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:54:52.3277698Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:52.3278464Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:52.3279299Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:54:52.3280022Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:54:52.3280574Z   PROD: [32m''[39m,
2025-06-04T21:54:52.3281168Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:54:52.3281852Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:54:52.3282414Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:54:52.3283065Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:54:52.3283670Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:54:52.3284801Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:52.3286171Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:54:52.3286808Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:54:52.3287349Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:54:52.3287971Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:54:52.3288784Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:54:52.3289638Z   USER: [32m'runner'[39m,
2025-06-04T21:54:52.3290087Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:54:52.3290505Z   SHLVL: [32m'1'[39m,
2025-06-04T21:54:52.3291078Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:54:52.3291869Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:52.3292748Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:54:52.3293976Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:52.3294981Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:54:52.3295546Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:54:52.3296071Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:54:52.3296641Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:54:52.3297441Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:54:52.3298414Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:54:52.3299379Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:54:52.3300138Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:54:52.3301011Z   VITEST_POOL_ID: [32m'1'[39m,
2025-06-04T21:54:52.3301721Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:52.3302658Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:54:52.3303351Z   DEV: [32m'1'[39m,
2025-06-04T21:54:52.3303879Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:54:52.3304429Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:54:52.3305005Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:54:52.3305675Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:54:52.3306635Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:54:52.3307570Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:54:52.3308315Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:54:52.3308934Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:54:52.3309939Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:52.3310743Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:54:52.3311300Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:54:52.3311986Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:54:52.3312626Z   TEST: [32m'true'[39m,
2025-06-04T21:54:52.3313119Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:54:52.3313911Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:54:52.3314649Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:54:52.3315183Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:54:52.3315713Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:54:52.3316983Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:54:52.3318597Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:54:52.3319776Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:54:52.3320337Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:54:52.3320892Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:54:52.3321431Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:54:52.3321986Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:54:52.3323435Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:54:52.3325016Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:52.3325702Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:54:52.3326796Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:54:52.3327790Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:54:52.3328328Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:54:52.3329358Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:54:52.3330301Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:54:52.3331012Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:54:52.3331689Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:52.3332395Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:54:52.3333048Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:54:52.3333821Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:54:52.3334656Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:54:52.3335379Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:52.3336014Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:54:52.3336834Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:52.3337671Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:54:52.3338307Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:54:52.3345022Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:54:52.3350270Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:54:52.3350897Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:54:52.3351671Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:52.3352381Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:54:52.3352875Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:54:52.3353673Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:54:52.3354488Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:52.3355220Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:52.3356195Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:54:52.3357177Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:54:52.3357872Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:54:52.3358571Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:52.3359988Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:54:52.3361118Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:54:52.3361800Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:54:52.3362412Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:54:52.3363103Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:52.3363928Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:54:52.3364692Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:54:52.3365342Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:54:52.3365984Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:54:52.3367029Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:54:52.3367903Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:54:52.3368424Z }
2025-06-04T21:54:52.3368595Z 
2025-06-04T21:54:53.7253980Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Pattern Invalidation[2m > [22m[2mshould invalidate all keys matching a pattern
2025-06-04T21:54:53.7256108Z [22m[39m[2025-06-04T21:54:53.724Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7256568Z 
2025-06-04T21:54:53.7361247Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Pattern Invalidation[2m > [22m[2mshould invalidate all keys matching a pattern
2025-06-04T21:54:53.7363170Z [22m[39m[2025-06-04T21:54:53.735Z] [INFO] Connected to Redis
2025-06-04T21:54:53.7363562Z 
2025-06-04T21:54:53.7415341Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Pattern Invalidation[2m > [22m[2mshould handle concurrent pattern invalidations
2025-06-04T21:54:53.7416533Z [22m[39m[2025-06-04T21:54:53.740Z] [WARN] Redis connection closed
2025-06-04T21:54:53.7416782Z 
2025-06-04T21:54:53.7467820Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Pattern Invalidation[2m > [22m[2mshould handle concurrent pattern invalidations
2025-06-04T21:54:53.7470565Z [22m[39m[2025-06-04T21:54:53.746Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7471054Z 
2025-06-04T21:54:53.7507007Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Pattern Invalidation[2m > [22m[2mshould handle concurrent pattern invalidations
2025-06-04T21:54:53.7508948Z [22m[39m[2025-06-04T21:54:53.750Z] [INFO] Connected to Redis
2025-06-04T21:54:53.7509653Z 
2025-06-04T21:54:53.7539942Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Tag Invalidation[2m > [22m[2mshould invalidate keys by tag
2025-06-04T21:54:53.7541773Z [22m[39m[2025-06-04T21:54:53.753Z] [WARN] Redis connection closed
2025-06-04T21:54:53.7542218Z 
2025-06-04T21:54:53.7551732Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Tag Invalidation[2m > [22m[2mshould invalidate keys by tag
2025-06-04T21:54:53.7553640Z [22m[39m[2025-06-04T21:54:53.754Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7554088Z 
2025-06-04T21:54:53.7576593Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Tag Invalidation[2m > [22m[2mshould invalidate keys by tag
2025-06-04T21:54:53.7578386Z [22m[39m[2025-06-04T21:54:53.757Z] [INFO] Connected to Redis
2025-06-04T21:54:53.7578787Z 
2025-06-04T21:54:53.7604227Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Tag Invalidation[2m > [22m[2mshould handle multiple tags per key
2025-06-04T21:54:53.7607572Z [22m[39m[2025-06-04T21:54:53.759Z] [WARN] Redis connection closed
2025-06-04T21:54:53.7607986Z 
2025-06-04T21:54:53.7618411Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Tag Invalidation[2m > [22m[2mshould handle multiple tags per key
2025-06-04T21:54:53.7625692Z [22m[39m[2025-06-04T21:54:53.761Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7626152Z 
2025-06-04T21:54:53.7643551Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Tag Invalidation[2m > [22m[2mshould handle multiple tags per key
2025-06-04T21:54:53.7645744Z [22m[39m[2025-06-04T21:54:53.763Z] [INFO] Connected to Redis
2025-06-04T21:54:53.7646410Z 
2025-06-04T21:54:53.7672504Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Events[2m > [22m[2mshould emit invalidation events
2025-06-04T21:54:53.7673979Z [22m[39m[2025-06-04T21:54:53.766Z] [WARN] Redis connection closed
2025-06-04T21:54:53.7674227Z 
2025-06-04T21:54:53.7684227Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Events[2m > [22m[2mshould emit invalidation events
2025-06-04T21:54:53.7686118Z [22m[39m[2025-06-04T21:54:53.767Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7686594Z 
2025-06-04T21:54:53.7707283Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Events[2m > [22m[2mshould emit invalidation events
2025-06-04T21:54:53.7709002Z [22m[39m[2025-06-04T21:54:53.770Z] [INFO] Connected to Redis
2025-06-04T21:54:53.7709590Z 
2025-06-04T21:54:53.7737831Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Events[2m > [22m[2mshould handle invalidation event subscribers
2025-06-04T21:54:53.7741241Z [22m[39m[2025-06-04T21:54:53.773Z] [WARN] Redis connection closed
2025-06-04T21:54:53.7741685Z 
2025-06-04T21:54:53.7748779Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Events[2m > [22m[2mshould handle invalidation event subscribers
2025-06-04T21:54:53.7751317Z [22m[39m[2025-06-04T21:54:53.774Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7752096Z 
2025-06-04T21:54:53.7774633Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mcache Events[2m > [22m[2mshould handle invalidation event subscribers
2025-06-04T21:54:53.7776464Z [22m[39m[2025-06-04T21:54:53.776Z] [INFO] Connected to Redis
2025-06-04T21:54:53.7776862Z 
2025-06-04T21:54:53.7801181Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2merror Handling[2m > [22m[2mshould handle Redis connection failures during invalidation
2025-06-04T21:54:53.7803147Z [22m[39m[2025-06-04T21:54:53.779Z] [WARN] Redis connection closed
2025-06-04T21:54:53.7803569Z 
2025-06-04T21:54:53.7809969Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2merror Handling[2m > [22m[2mshould handle Redis connection failures during invalidation
2025-06-04T21:54:53.7812604Z [22m[39m[2025-06-04T21:54:53.780Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7813072Z 
2025-06-04T21:54:53.7829799Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2merror Handling[2m > [22m[2mshould handle Redis connection failures during invalidation
2025-06-04T21:54:53.7831693Z [22m[39m[2025-06-04T21:54:53.782Z] [INFO] Connected to Redis
2025-06-04T21:54:53.7832090Z 
2025-06-04T21:54:53.7851796Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2merror Handling[2m > [22m[2mshould handle Redis connection recovery
2025-06-04T21:54:53.7853736Z [22m[39m[2025-06-04T21:54:53.784Z] [WARN] Redis connection closed
2025-06-04T21:54:53.7854105Z 
2025-06-04T21:54:53.7862438Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2merror Handling[2m > [22m[2mshould handle Redis connection recovery
2025-06-04T21:54:53.7864162Z [22m[39m[2025-06-04T21:54:53.785Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7864585Z 
2025-06-04T21:54:53.7885833Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2merror Handling[2m > [22m[2mshould handle Redis connection recovery
2025-06-04T21:54:53.7887656Z [22m[39m[2025-06-04T21:54:53.788Z] [INFO] Connected to Redis
2025-06-04T21:54:53.7888046Z 
2025-06-04T21:54:53.7907728Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mperformance[2m > [22m[2mshould handle large-scale invalidations
2025-06-04T21:54:53.7909805Z [22m[39m[2025-06-04T21:54:53.790Z] [WARN] Redis connection closed
2025-06-04T21:54:53.7910237Z 
2025-06-04T21:54:53.7919443Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mperformance[2m > [22m[2mshould handle large-scale invalidations
2025-06-04T21:54:53.7922406Z [22m[39m[2025-06-04T21:54:53.791Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7923187Z 
2025-06-04T21:54:53.7949360Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mperformance[2m > [22m[2mshould handle large-scale invalidations
2025-06-04T21:54:53.7951161Z [22m[39m[2025-06-04T21:54:53.793Z] [INFO] Connected to Redis
2025-06-04T21:54:53.7951562Z 
2025-06-04T21:54:53.7970752Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mperformance[2m > [22m[2mshould maintain performance under concurrent load
2025-06-04T21:54:53.7973320Z [22m[39m[2025-06-04T21:54:53.796Z] [WARN] Redis connection closed
2025-06-04T21:54:53.7973737Z 
2025-06-04T21:54:53.7981529Z [90mstdout[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mperformance[2m > [22m[2mshould maintain performance under concurrent load
2025-06-04T21:54:53.7983917Z [22m[39m[2025-06-04T21:54:53.797Z] INFO  [app]: Redis connection verified
2025-06-04T21:54:53.7984672Z 
2025-06-04T21:54:53.8000696Z  [31m❯[39m src/lib/ai/__tests__/performance-optimizations.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 2043[2mms[22m[39m
2025-06-04T21:54:53.8007207Z    [32m✓[39m advanced performance optimizations[2m > [22mshould pass through requests to the underlying service[32m 7[2mms[22m[39m
2025-06-04T21:54:53.8043039Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration[2m > [22m[2mperformance[2m > [22m[2mshould maintain performance under concurrent load
2025-06-04T21:54:53.8044886Z [22m[39m[2025-06-04T21:54:53.799Z] [INFO] Connected to Redis
2025-06-04T21:54:53.8045261Z 
2025-06-04T21:54:53.8046227Z [31m   [31m×[31m advanced performance optimizations[2m > [22mshould track performance metrics[39m[33m 1019[2mms[22m[39m
2025-06-04T21:54:53.8047465Z [31m     → expected "spy" to be called 1 times, but got 0 times
2025-06-04T21:54:53.8047875Z 
2025-06-04T21:54:53.8048153Z Ignored nodes: comments, script, style
2025-06-04T21:54:53.8048668Z [36m<html>[31m
2025-06-04T21:54:53.8049025Z   [36m<head />[31m
2025-06-04T21:54:53.8049569Z   [36m<body />[31m
2025-06-04T21:54:53.8049968Z [36m</html>[31m[39m
2025-06-04T21:54:53.8051476Z [31m   [31m×[31m advanced performance optimizations[2m > [22mshould cache responses and return cached results[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:53.8053205Z [31m     → expected "spy" to be called 2 times, but got 3 times[39m
2025-06-04T21:54:53.8054239Z [31m   [31m×[31m advanced performance optimizations[2m > [22mshould optimize tokens for long conversations[39m[32m 8[2mms[22m[39m
2025-06-04T21:54:53.8055189Z [31m     → expected "spy" to be called with arguments: [ { …(2) }, ObjectContaining{…} ][90m
2025-06-04T21:54:53.8055496Z 
2025-06-04T21:54:53.8055598Z Received: 
2025-06-04T21:54:53.8055702Z 
2025-06-04T21:54:53.8055918Z [1m  1st spy call:
2025-06-04T21:54:53.8056039Z 
2025-06-04T21:54:53.8056147Z [22m[2m  [[22m
2025-06-04T21:54:53.8056349Z [31m+   [[90m
2025-06-04T21:54:53.8056550Z [2m      {[22m
2025-06-04T21:54:53.8056995Z [32m-     "asymmetricMatch": [Function asymmetricMatch],[90m
2025-06-04T21:54:53.8057453Z [32m-     "toString": [Function toString],[90m
2025-06-04T21:54:53.8057938Z [31m+       "content": "You are a helpful assistant.",[90m
2025-06-04T21:54:53.8058390Z [31m+       "name": "system",[90m
2025-06-04T21:54:53.8058699Z [31m+       "role": "system",[90m
2025-06-04T21:54:53.8058944Z [2m      },[22m
2025-06-04T21:54:53.8059457Z [32m-   ObjectContaining {[90m
2025-06-04T21:54:53.8059712Z [31m+   ],[90m
2025-06-04T21:54:53.8059903Z [31m+   {[90m
2025-06-04T21:54:53.8088156Z [2m      "model": "test-model",[22m
2025-06-04T21:54:53.8088856Z [31m+     "temperature": 1,[90m
2025-06-04T21:54:53.8089506Z [2m    },[22m
2025-06-04T21:54:53.8090155Z [2m  ][22m
2025-06-04T21:54:53.8090529Z [31m[90m
2025-06-04T21:54:53.8090710Z 
2025-06-04T21:54:53.8090965Z Number of calls: [1m1[22m
2025-06-04T21:54:53.8091402Z [31m[39m
2025-06-04T21:54:53.8092588Z [31m   [31m×[31m advanced performance optimizations[2m > [22mshould handle rate limiting[39m[33m 1003[2mms[22m[39m
2025-06-04T21:54:53.8093774Z [31m     → expected "spy" to be called 3 times, but got 0 times
2025-06-04T21:54:53.8094165Z 
2025-06-04T21:54:53.8094461Z Ignored nodes: comments, script, style
2025-06-04T21:54:53.8095164Z [36m<html>[31m
2025-06-04T21:54:53.8095537Z   [36m<head />[31m
2025-06-04T21:54:53.8095922Z   [36m<body />[31m
2025-06-04T21:54:53.8096324Z [36m</html>[31m[39m
2025-06-04T21:54:53.8097720Z [31m   [31m×[31m advanced performance optimizations[2m > [22mshould try fallback models when primary model fails[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:53.8099445Z [31m     → expected "spy" to be called with arguments: [ ObjectContaining{…} ][90m
2025-06-04T21:54:53.8099996Z 
2025-06-04T21:54:53.8100142Z Received: 
2025-06-04T21:54:53.8100328Z 
2025-06-04T21:54:53.8100597Z [1m  1st spy call:
2025-06-04T21:54:53.8100814Z 
2025-06-04T21:54:53.8101038Z [22m[2m  [[22m
2025-06-04T21:54:53.8101548Z [32m-   ObjectContaining {[90m
2025-06-04T21:54:53.8102339Z [32m-     "model": "fallback-model-1",[90m
2025-06-04T21:54:53.8102872Z [31m+   [[90m
2025-06-04T21:54:53.8103262Z [31m+     {[90m
2025-06-04T21:54:53.8103770Z [31m+       "content": "Hello",[90m
2025-06-04T21:54:53.8104346Z [31m+       "name": "user",[90m
2025-06-04T21:54:53.8104899Z [31m+       "role": "user",[90m
2025-06-04T21:54:53.8105405Z [31m+     },[90m
2025-06-04T21:54:53.8105813Z [31m+   ],[90m
2025-06-04T21:54:53.8106191Z [31m+   {[90m
2025-06-04T21:54:53.8106733Z [31m+     "model": "primary-model",[90m
2025-06-04T21:54:53.8107364Z [31m+     "temperature": 1,[90m
2025-06-04T21:54:53.8107805Z [2m    },[22m
2025-06-04T21:54:53.8108159Z [2m  ][22m
2025-06-04T21:54:53.8108524Z [31m[90m
2025-06-04T21:54:53.8108714Z 
2025-06-04T21:54:53.8108971Z Number of calls: [1m1[22m
2025-06-04T21:54:53.8110292Z [31m[39m
2025-06-04T21:54:53.8115329Z [90mstderr[2m | src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22m[2mcacheInvalidation Integration
2025-06-04T21:54:53.8117653Z [22m[39m[2025-06-04T21:54:53.811Z] [WARN] Redis connection closed
2025-06-04T21:54:53.8118569Z 
2025-06-04T21:54:53.8145626Z  [31m❯[39m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[32m 102[2mms[22m[39m
2025-06-04T21:54:53.8149954Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22mcache Pattern Invalidation[2m > [22mshould invalidate all keys matching a pattern[39m[32m 27[2mms[22m[39m
2025-06-04T21:54:53.8151650Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:53.8153431Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22mcache Pattern Invalidation[2m > [22mshould handle concurrent pattern invalidations[39m[32m 13[2mms[22m[39m
2025-06-04T21:54:53.8154745Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:53.8156190Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22mcache Tag Invalidation[2m > [22mshould invalidate keys by tag[39m[32m 6[2mms[22m[39m
2025-06-04T21:54:53.8157325Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:53.8158791Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22mcache Tag Invalidation[2m > [22mshould handle multiple tags per key[39m[32m 7[2mms[22m[39m
2025-06-04T21:54:53.8160219Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:53.8161575Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22mcache Events[2m > [22mshould emit invalidation events[39m[32m 6[2mms[22m[39m
2025-06-04T21:54:53.8162695Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:53.8164190Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22mcache Events[2m > [22mshould handle invalidation event subscribers[39m[32m 6[2mms[22m[39m
2025-06-04T21:54:53.8165677Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:53.8167305Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22merror Handling[2m > [22mshould handle Redis connection failures during invalidation[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:53.8168555Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:53.8170240Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22merror Handling[2m > [22mshould handle Redis connection recovery[39m[32m 5[2mms[22m[39m
2025-06-04T21:54:53.8171402Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:53.8172795Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22mperformance[2m > [22mshould handle large-scale invalidations[39m[32m 6[2mms[22m[39m
2025-06-04T21:54:53.8174020Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:53.8175584Z [31m   [31m×[31m cacheInvalidation Integration[2m > [22mperformance[2m > [22mshould maintain performance under concurrent load[39m[32m 14[2mms[22m[39m
2025-06-04T21:54:53.8176777Z [31m     → Failed to connect to Redis[39m
2025-06-04T21:54:54.1991164Z  [31m❯[39m src/lib/ai/temporal/__tests__/integration.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 23[2mms[22m[39m
2025-06-04T21:54:54.1993156Z [31m   [31m×[31m Oscillation Detection[2m > [22mshould detect simple oscillation patterns[39m[32m 10[2mms[22m[39m
2025-06-04T21:54:54.1994279Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:54:54.1995527Z    [32m✓[39m Oscillation Detection[2m > [22mshould not detect patterns with insufficient amplitude[32m 1[2mms[22m[39m
2025-06-04T21:54:54.1997297Z [31m   [31m×[31m Oscillation Detection[2m > [22mshould detect patterns with different frequencies[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:54.1998418Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:54:54.1999693Z [31m   [31m×[31m Oscillation Detection[2m > [22mshould handle multiple dimensions[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:54.2000680Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:54:54.2002585Z [31m   [31m×[31m Pattern Detection Integration[2m > [22mOscillation Detection Integration[2m > [22mshould detect oscillations consistently between both systems[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:54.2004547Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:54:54.2006347Z [31m   [31m×[31m Pattern Detection Integration[2m > [22mOscillation Detection Integration[2m > [22mshould detect multi-dimensional oscillations[39m[32m 3[2mms[22m[39m
2025-06-04T21:54:54.2007710Z [31m     → expected 0 to be 2[39m
2025-06-04T21:54:54.2009719Z [31m   [31m×[31m Pattern Detection Integration[2m > [22mPattern Analysis Integration[2m > [22mshould generate insights that reflect detected oscillations[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:54.2011243Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:54:54.2013060Z [31m   [31m×[31m Pattern Detection Integration[2m > [22mPattern Analysis Integration[2m > [22mshould reflect oscillation characteristics in insights[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:54.2014429Z [31m     → expected false to be true[39m
2025-06-04T21:54:54.2016071Z [31m   [31m×[31m Pattern Detection Integration[2m > [22mPattern Analysis Integration[2m > [22mshould handle multiple pattern types together[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:54.2017448Z [31m     → expected false to be true[39m
2025-06-04T21:54:54.9023080Z [90mstderr[2m | src/components/chat/__tests__/AnalyticsDashboard.test.tsx
2025-06-04T21:54:54.9024619Z [22m[39m[2025-06-04T21:54:54.900Z] [INFO] [homomorphic-ops] Homomorphic Operations initialized in client environment
2025-06-04T21:54:54.9025291Z 
2025-06-04T21:54:54.9553954Z [90mstderr[2m | src/components/chat/__tests__/AnalyticsDashboard.test.tsx
2025-06-04T21:54:54.9555780Z [22m[39m[2025-06-04T21:54:54.954Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:54.9556411Z 
2025-06-04T21:54:55.1955804Z [90mstderr[2m | src/components/chat/__tests__/AnalyticsDashboard.test.tsx
2025-06-04T21:54:55.1957645Z [22m[39m[2025-06-04T21:54:55.193Z] [INFO] [fhe-key-rotation] Key Rotation Service initialized in client environment
2025-06-04T21:54:55.1958320Z 
2025-06-04T21:54:55.1958851Z (node:8077) NOTE: The AWS SDK for JavaScript (v2) is in maintenance mode.
2025-06-04T21:54:55.1959930Z  SDK releases are limited to address critical bug fixes and security issues only.
2025-06-04T21:54:55.1960439Z 
2025-06-04T21:54:55.1960855Z Please migrate your code to use AWS SDK for JavaScript (v3).
2025-06-04T21:54:55.1961704Z For more information, check the blog post at https://a.co/cUPnyil
2025-06-04T21:54:55.1962569Z (Use `node --trace-warnings ...` to show where the warning was created)
2025-06-04T21:54:55.2493178Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould create an instance of EmotionAlertSystem
2025-06-04T21:54:55.2496582Z [22m[39m[2025-06-04T21:54:55.247Z] DEBUG [EmotionAlertSystem]: EmotionAlertSystem initialized {
2025-06-04T21:54:55.2497317Z   config: {
2025-06-04T21:54:55.2497864Z     highSeverityThreshold: [33m0.7[39m,
2025-06-04T21:54:55.2498521Z     patternDetectionWindow: [33m5[39m,
2025-06-04T21:54:55.2499352Z     minimumConfidence: [33m0.6[39m,
2025-06-04T21:54:55.2499976Z     significantChangeThreshold: [33m0.5[39m,
2025-06-04T21:54:55.2500677Z     enableCrisisLanguageAlerts: [33mtrue[39m
2025-06-04T21:54:55.2501131Z   }
2025-06-04T21:54:55.2501411Z }
2025-06-04T21:54:55.2501570Z 
2025-06-04T21:54:55.2510676Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould not generate an alert for normal emotion patterns
2025-06-04T21:54:55.2515093Z [22m[39m[2025-06-04T21:54:55.250Z] DEBUG [EmotionAlertSystem]: EmotionAlertSystem initialized {
2025-06-04T21:54:55.2515812Z   config: {
2025-06-04T21:54:55.2516322Z     highSeverityThreshold: [33m0.7[39m,
2025-06-04T21:54:55.2516931Z     patternDetectionWindow: [33m5[39m,
2025-06-04T21:54:55.2517517Z     minimumConfidence: [33m0.6[39m,
2025-06-04T21:54:55.2518114Z     significantChangeThreshold: [33m0.5[39m,
2025-06-04T21:54:55.2518786Z     enableCrisisLanguageAlerts: [33mtrue[39m
2025-06-04T21:54:55.2519817Z   }
2025-06-04T21:54:55.2520102Z }
2025-06-04T21:54:55.2520260Z 
2025-06-04T21:54:55.2588381Z [90mstderr[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould not generate an alert for normal emotion patterns
2025-06-04T21:54:55.2591159Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould not generate an alert for normal emotion patterns
2025-06-04T21:54:55.2592948Z [22m[39m[2025-06-04T21:54:55.251Z] DEBUG [EmotionAlertSystem]: Detecting potential crisis {
2025-06-04T21:54:55.2593739Z   userId: [32m'user-123'[39m,
2025-06-04T21:54:55.2594268Z   timestamp: [90mundefined[39m,
2025-06-04T21:54:55.2594836Z   hasPreviousAnalyses: [33mfalse[39m
2025-06-04T21:54:55.2595232Z }
2025-06-04T21:54:55.2595371Z 
2025-06-04T21:54:55.2597730Z [22m[39m[2025-06-04T21:54:55.251Z] ERROR [EmotionAlertSystem]: Error detecting crisis {
2025-06-04T21:54:55.2599978Z   error: TypeError: Cannot read properties of undefined (reading 'filter')
2025-06-04T21:54:55.2603096Z       at EmotionAlertSystem.detectCrisis [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionAlertSystem.ts:242:56[90m)[39m
2025-06-04T21:54:55.2606941Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:51:31
2025-06-04T21:54:55.2609449Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:55.2626732Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:55.2629010Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:55.2630375Z       at new Promise (<anonymous>)
2025-06-04T21:54:55.2632069Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:55.2634481Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:55.2636818Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:55.2639447Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m,
2025-06-04T21:54:55.2649849Z   userId: [32m'user-123'[39m
2025-06-04T21:54:55.2650260Z }
2025-06-04T21:54:55.2650438Z 
2025-06-04T21:54:55.2652025Z [90mstderr[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould generate a high-risk alert for severe negative emotions
2025-06-04T21:54:55.2653788Z [22m[39m[2025-06-04T21:54:55.260Z] ERROR [EmotionAlertSystem]: Error detecting crisis {
2025-06-04T21:54:55.2654640Z   error: TypeError: Cannot read properties of undefined (reading 'filter')
2025-06-04T21:54:55.2656280Z       at EmotionAlertSystem.detectCrisis [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionAlertSystem.ts:242:56[90m)[39m
2025-06-04T21:54:55.2658250Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:93:31
2025-06-04T21:54:55.2660497Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:55.2662969Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:55.2665178Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:55.2666352Z       at new Promise (<anonymous>)
2025-06-04T21:54:55.2668041Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:55.2680148Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:55.2682634Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:55.2691159Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m,
2025-06-04T21:54:55.2692509Z   userId: [32m'user-123'[39m
2025-06-04T21:54:55.2692863Z }
2025-06-04T21:54:55.2693026Z 
2025-06-04T21:54:55.2694568Z [90mstderr[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould generate a medium-risk alert for moderate anxiety patterns
2025-06-04T21:54:55.2696629Z [22m[39m[2025-06-04T21:54:55.263Z] ERROR [EmotionAlertSystem]: Error detecting crisis {
2025-06-04T21:54:55.2704283Z   error: TypeError: Cannot read properties of undefined (reading 'filter')
2025-06-04T21:54:55.2706005Z       at EmotionAlertSystem.detectCrisis [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionAlertSystem.ts:242:56[90m)[39m
2025-06-04T21:54:55.2707996Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:139:31
2025-06-04T21:54:55.2710184Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:55.2712390Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:55.2714751Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:55.2715893Z       at new Promise (<anonymous>)
2025-06-04T21:54:55.2717543Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:55.2720156Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:55.2722620Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:55.2725116Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m,
2025-06-04T21:54:55.2726461Z   userId: [32m'user-123'[39m
2025-06-04T21:54:55.2726822Z }
2025-06-04T21:54:55.2726977Z 
2025-06-04T21:54:55.2728767Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould generate a high-risk alert for severe negative emotions
2025-06-04T21:54:55.2730875Z [22m[39m[2025-06-04T21:54:55.259Z] DEBUG [EmotionAlertSystem]: EmotionAlertSystem initialized {
2025-06-04T21:54:55.2731606Z   config: {
2025-06-04T21:54:55.2732101Z     highSeverityThreshold: [33m0.7[39m,
2025-06-04T21:54:55.2732691Z     patternDetectionWindow: [33m5[39m,
2025-06-04T21:54:55.2733287Z     minimumConfidence: [33m0.6[39m,
2025-06-04T21:54:55.2733911Z     significantChangeThreshold: [33m0.5[39m,
2025-06-04T21:54:55.2734581Z     enableCrisisLanguageAlerts: [33mtrue[39m
2025-06-04T21:54:55.2735012Z   }
2025-06-04T21:54:55.2735261Z }
2025-06-04T21:54:55.2735407Z 
2025-06-04T21:54:55.2736906Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould generate a high-risk alert for severe negative emotions
2025-06-04T21:54:55.2738644Z [22m[39m[2025-06-04T21:54:55.260Z] DEBUG [EmotionAlertSystem]: Detecting potential crisis {
2025-06-04T21:54:55.2739680Z   userId: [32m'user-123'[39m,
2025-06-04T21:54:55.2740174Z   timestamp: [90mundefined[39m,
2025-06-04T21:54:55.2740711Z   hasPreviousAnalyses: [33mfalse[39m
2025-06-04T21:54:55.2741127Z }
2025-06-04T21:54:55.2741283Z 
2025-06-04T21:54:55.2742852Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould generate a medium-risk alert for moderate anxiety patterns
2025-06-04T21:54:55.2744731Z [22m[39m[2025-06-04T21:54:55.262Z] DEBUG [EmotionAlertSystem]: EmotionAlertSystem initialized {
2025-06-04T21:54:55.2745653Z   config: {
2025-06-04T21:54:55.2746168Z     highSeverityThreshold: [33m0.7[39m,
2025-06-04T21:54:55.2746787Z     patternDetectionWindow: [33m5[39m,
2025-06-04T21:54:55.2747378Z     minimumConfidence: [33m0.6[39m,
2025-06-04T21:54:55.2748003Z     significantChangeThreshold: [33m0.5[39m,
2025-06-04T21:54:55.2748686Z     enableCrisisLanguageAlerts: [33mtrue[39m
2025-06-04T21:54:55.2749400Z   }
2025-06-04T21:54:55.2749687Z }
2025-06-04T21:54:55.2749837Z 
2025-06-04T21:54:55.2751407Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould generate a medium-risk alert for moderate anxiety patterns
2025-06-04T21:54:55.2753267Z [22m[39m[2025-06-04T21:54:55.262Z] DEBUG [EmotionAlertSystem]: Detecting potential crisis {
2025-06-04T21:54:55.2756640Z   userId: [32m'user-123'[39m,
2025-06-04T21:54:55.2757170Z   timestamp: [90mundefined[39m,
2025-06-04T21:54:55.2757730Z   hasPreviousAnalyses: [33mfalse[39m
2025-06-04T21:54:55.2758132Z }
2025-06-04T21:54:55.2758282Z 
2025-06-04T21:54:55.2760038Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould generate a low-risk alert for significant baseline deviation
2025-06-04T21:54:55.2761919Z [22m[39m[2025-06-04T21:54:55.264Z] DEBUG [EmotionAlertSystem]: EmotionAlertSystem initialized {
2025-06-04T21:54:55.2762602Z   config: {
2025-06-04T21:54:55.2763102Z     highSeverityThreshold: [33m0.7[39m,
2025-06-04T21:54:55.2763717Z     patternDetectionWindow: [33m5[39m,
2025-06-04T21:54:55.2764300Z     minimumConfidence: [33m0.6[39m,
2025-06-04T21:54:55.2764901Z     significantChangeThreshold: [33m0.5[39m,
2025-06-04T21:54:55.2765544Z     enableCrisisLanguageAlerts: [33mtrue[39m
2025-06-04T21:54:55.2765988Z   }
2025-06-04T21:54:55.2766257Z }
2025-06-04T21:54:55.2766418Z 
2025-06-04T21:54:55.2767958Z [90mstderr[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould generate a low-risk alert for significant baseline deviation
2025-06-04T21:54:55.2769990Z [22m[39m[2025-06-04T21:54:55.265Z] ERROR [EmotionAlertSystem]: Error detecting crisis {
2025-06-04T21:54:55.2770879Z   error: TypeError: Cannot read properties of undefined (reading 'filter')
2025-06-04T21:54:55.2772695Z       at EmotionAlertSystem.detectCrisis [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionAlertSystem.ts:242:56[90m)[39m
2025-06-04T21:54:55.2774534Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:182:31
2025-06-04T21:54:55.2777100Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:55.2779503Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:55.2781605Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:55.2782722Z       at new Promise (<anonymous>)
2025-06-04T21:54:55.2784351Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:55.2786744Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:55.2789270Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:55.2791922Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m,
2025-06-04T21:54:55.2793188Z   userId: [32m'user-123'[39m
2025-06-04T21:54:55.2793547Z }
2025-06-04T21:54:55.2793710Z 
2025-06-04T21:54:55.2795258Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould generate a low-risk alert for significant baseline deviation
2025-06-04T21:54:55.2797045Z [22m[39m[2025-06-04T21:54:55.264Z] DEBUG [EmotionAlertSystem]: Detecting potential crisis {
2025-06-04T21:54:55.2797836Z   userId: [32m'user-123'[39m,
2025-06-04T21:54:55.2798369Z   timestamp: [90mundefined[39m,
2025-06-04T21:54:55.2798928Z   hasPreviousAnalyses: [33mfalse[39m
2025-06-04T21:54:55.2799570Z }
2025-06-04T21:54:55.2799732Z 
2025-06-04T21:54:55.2801234Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould consider previous analyses when detecting patterns
2025-06-04T21:54:55.2803073Z [22m[39m[2025-06-04T21:54:55.265Z] DEBUG [EmotionAlertSystem]: EmotionAlertSystem initialized {
2025-06-04T21:54:55.2803753Z   config: {
2025-06-04T21:54:55.2804204Z     highSeverityThreshold: [33m0.7[39m,
2025-06-04T21:54:55.2804799Z     patternDetectionWindow: [33m5[39m,
2025-06-04T21:54:55.2805383Z     minimumConfidence: [33m0.6[39m,
2025-06-04T21:54:55.2806009Z     significantChangeThreshold: [33m0.5[39m,
2025-06-04T21:54:55.2806715Z     enableCrisisLanguageAlerts: [33mtrue[39m
2025-06-04T21:54:55.2807165Z   }
2025-06-04T21:54:55.2807430Z }
2025-06-04T21:54:55.2807583Z 
2025-06-04T21:54:55.2808816Z [90mstdout[2m | src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22m[2mEmotionAlertSystem[2m > [22m[2mshould acknowledge an alert
2025-06-04T21:54:55.2810641Z [22m[39m[2025-06-04T21:54:55.266Z] DEBUG [EmotionAlertSystem]: EmotionAlertSystem initialized {
2025-06-04T21:54:55.2811331Z   config: {
2025-06-04T21:54:55.2811801Z     highSeverityThreshold: [33m0.7[39m,
2025-06-04T21:54:55.2812394Z     patternDetectionWindow: [33m5[39m,
2025-06-04T21:54:55.2812955Z     minimumConfidence: [33m0.6[39m,
2025-06-04T21:54:55.2813543Z     significantChangeThreshold: [33m0.5[39m,
2025-06-04T21:54:55.2814173Z     enableCrisisLanguageAlerts: [33mtrue[39m
2025-06-04T21:54:55.2814607Z   }
2025-06-04T21:54:55.2814865Z }
2025-06-04T21:54:55.2815013Z 
2025-06-04T21:54:55.2816323Z  [31m❯[39m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 23[2mms[22m[39m
2025-06-04T21:54:55.2818029Z    [32m✓[39m EmotionAlertSystem[2m > [22mshould create an instance of EmotionAlertSystem[32m 4[2mms[22m[39m
2025-06-04T21:54:55.2820000Z [31m   [31m×[31m EmotionAlertSystem[2m > [22mshould not generate an alert for normal emotion patterns[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:55.2821296Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T21:54:55.2822767Z [31m   [31m×[31m EmotionAlertSystem[2m > [22mshould generate a high-risk alert for severe negative emotions[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:55.2824034Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T21:54:55.2825535Z [31m   [31m×[31m EmotionAlertSystem[2m > [22mshould generate a medium-risk alert for moderate anxiety patterns[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:55.2826821Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T21:54:55.2828329Z [31m   [31m×[31m EmotionAlertSystem[2m > [22mshould generate a low-risk alert for significant baseline deviation[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:55.2829830Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T21:54:55.2831271Z [31m   [31m×[31m EmotionAlertSystem[2m > [22mshould consider previous analyses when detecting patterns[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:55.2832929Z [31m     → Cannot read properties of undefined (reading 'fetchPreviousAnalyses')[39m
2025-06-04T21:54:55.2834216Z [31m   [31m×[31m EmotionAlertSystem[2m > [22mshould acknowledge an alert[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:55.2835395Z [31m     → Cannot set properties of undefined (setting 'updateAlertStatus')[39m
2025-06-04T21:54:55.9050923Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts
2025-06-04T21:54:55.9054757Z [22m[39m[2025-06-04T21:54:55.903Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9056662Z 
2025-06-04T21:54:55.9124341Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2msingleton pattern returns the same instance
2025-06-04T21:54:55.9129616Z [22m[39m[2025-06-04T21:54:55.909Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9133525Z 
2025-06-04T21:54:55.9134836Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2mdefault strategy is BalancedApproach
2025-06-04T21:54:55.9136655Z [22m[39m[2025-06-04T21:54:55.911Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9137280Z 
2025-06-04T21:54:55.9138629Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2msetStrategy updates the active strategy
2025-06-04T21:54:55.9140631Z [22m[39m[2025-06-04T21:54:55.912Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9141246Z 
2025-06-04T21:54:55.9142582Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2msetStrategy updates the active strategy
2025-06-04T21:54:55.9144485Z [22m[39m[2025-06-04T21:54:55.912Z] [INFO] [fhe-parameter-optimizer] Optimization strategy set to security-focused
2025-06-04T21:54:55.9145202Z 
2025-06-04T21:54:55.9208810Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2msetConstraints updates the constraints with partial updates
2025-06-04T21:54:55.9214886Z [22m[39m[2025-06-04T21:54:55.920Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9216109Z 
2025-06-04T21:54:55.9218424Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2msetConstraints updates the constraints with partial updates
2025-06-04T21:54:55.9223393Z [22m[39m[2025-06-04T21:54:55.920Z] [INFO] [fhe-parameter-optimizer] Optimization constraints updated {"constraints":{"minimumSecurityLevel":"tc192","maximumMemoryMB":2048,"minimumPrecisionBits":20,"maximumLatencyMs":500}}
2025-06-04T21:54:55.9224924Z 
2025-06-04T21:54:55.9226798Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2mgetOptimizedParameters returns different parameters based on strategy
2025-06-04T21:54:55.9229525Z [22m[39m[2025-06-04T21:54:55.921Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9230500Z 
2025-06-04T21:54:55.9236216Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2mgetOptimizedParameters returns different parameters based on strategy
2025-06-04T21:54:55.9244050Z [22m[39m[2025-06-04T21:54:55.922Z] [INFO] [fhe-parameter-optimizer] Optimization strategy set to security-focused
2025-06-04T21:54:55.9257528Z [2025-06-04T21:54:55.922Z] [INFO] [fhe-parameter-optimizer] Optimization strategy set to performance-focused
2025-06-04T21:54:55.9258222Z 
2025-06-04T21:54:55.9259937Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2mgetOptimizedParameters returns scheme-specific parameters
2025-06-04T21:54:55.9262152Z [22m[39m[2025-06-04T21:54:55.923Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9262762Z 
2025-06-04T21:54:55.9264270Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2mgetOptimizedParameters adjusts based on operation complexity
2025-06-04T21:54:55.9266223Z [22m[39m[2025-06-04T21:54:55.924Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9266865Z 
2025-06-04T21:54:55.9268426Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2mgetOptimizedParametersForOperations handles multiple operations
2025-06-04T21:54:55.9270695Z [22m[39m[2025-06-04T21:54:55.924Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9271319Z 
2025-06-04T21:54:55.9288077Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2mrecordOperationMetrics adds metrics to history
2025-06-04T21:54:55.9305033Z [22m[39m[2025-06-04T21:54:55.927Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9305682Z 
2025-06-04T21:54:55.9307091Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2mrecordOperationMetrics limits history size
2025-06-04T21:54:55.9309048Z [22m[39m[2025-06-04T21:54:55.928Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9309883Z 
2025-06-04T21:54:55.9311599Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2manalyzePerformanceHistory returns insufficient data warning when history is empty
2025-06-04T21:54:55.9313658Z [22m[39m[2025-06-04T21:54:55.929Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9314279Z 
2025-06-04T21:54:55.9315795Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2moptimizeForContext uses metrics from context when available
2025-06-04T21:54:55.9317762Z [22m[39m[2025-06-04T21:54:55.930Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9318413Z 
2025-06-04T21:54:55.9324487Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2madaptive optimization with history affects parameters
2025-06-04T21:54:55.9335995Z [22m[39m[2025-06-04T21:54:55.931Z] [INFO] [fhe-parameter-optimizer] Initializing FHE Parameter Optimizer
2025-06-04T21:54:55.9336599Z 
2025-06-04T21:54:55.9338078Z [90mstderr[2m | src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22m[2mFHEParameterOptimizer[2m > [22m[2madaptive optimization with history affects parameters
2025-06-04T21:54:55.9340330Z [22m[39m[2025-06-04T21:54:55.932Z] [INFO] [fhe-parameter-optimizer] Optimization strategy set to auto-adaptive
2025-06-04T21:54:55.9340979Z 
2025-06-04T21:54:55.9350914Z  [31m❯[39m src/lib/fhe/__tests__/parameter-optimizer.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 25[2mms[22m[39m
2025-06-04T21:54:55.9352778Z    [32m✓[39m FHEParameterOptimizer[2m > [22msingleton pattern returns the same instance[32m 3[2mms[22m[39m
2025-06-04T21:54:55.9354329Z    [32m✓[39m FHEParameterOptimizer[2m > [22mdefault strategy is BalancedApproach[32m 1[2mms[22m[39m
2025-06-04T21:54:55.9355919Z [31m   [31m×[31m FHEParameterOptimizer[2m > [22msetStrategy updates the active strategy[39m[32m 8[2mms[22m[39m
2025-06-04T21:54:55.9357177Z [31m     → expected balanced-approach to be security-focused[39m
2025-06-04T21:54:55.9358751Z [31m   [31m×[31m FHEParameterOptimizer[2m > [22msetConstraints updates the constraints with partial updates[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:55.9360328Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:54:55.9362115Z    [32m✓[39m FHEParameterOptimizer[2m > [22mgetOptimizedParameters returns different parameters based on strategy[32m 2[2mms[22m[39m
2025-06-04T21:54:55.9363881Z    [32m✓[39m FHEParameterOptimizer[2m > [22mgetOptimizedParameters returns scheme-specific parameters[32m 1[2mms[22m[39m
2025-06-04T21:54:55.9365676Z    [32m✓[39m FHEParameterOptimizer[2m > [22mgetOptimizedParameters adjusts based on operation complexity[32m 0[2mms[22m[39m
2025-06-04T21:54:55.9367504Z    [32m✓[39m FHEParameterOptimizer[2m > [22mgetOptimizedParametersForOperations handles multiple operations[32m 2[2mms[22m[39m
2025-06-04T21:54:55.9369415Z    [32m✓[39m FHEParameterOptimizer[2m > [22mrecordOperationMetrics adds metrics to history[32m 1[2mms[22m[39m
2025-06-04T21:54:55.9371015Z    [32m✓[39m FHEParameterOptimizer[2m > [22mrecordOperationMetrics limits history size[32m 1[2mms[22m[39m
2025-06-04T21:54:55.9372861Z    [32m✓[39m FHEParameterOptimizer[2m > [22manalyzePerformanceHistory returns insufficient data warning when history is empty[32m 1[2mms[22m[39m
2025-06-04T21:54:55.9374786Z    [32m✓[39m FHEParameterOptimizer[2m > [22moptimizeForContext uses metrics from context when available[32m 2[2mms[22m[39m
2025-06-04T21:54:55.9376458Z    [32m✓[39m FHEParameterOptimizer[2m > [22madaptive optimization with history affects parameters[32m 1[2mms[22m[39m
2025-06-04T21:54:56.3603303Z  [32m✓[39m src/lib/ai/temporal/__tests__/progressions.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 10[2mms[22m[39m
2025-06-04T21:54:56.4584635Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould process real-time requests with higher priority
2025-06-04T21:54:56.4586868Z [22m[39m[2025-06-04T21:54:56.454Z] DEBUG [EmotionDetectionEngine]: EmotionDetectionEngine initialized {
2025-06-04T21:54:56.4587682Z   options: {
2025-06-04T21:54:56.4588283Z     includeConfidence: [33mtrue[39m,
2025-06-04T21:54:56.4588961Z     includeContextualFactors: [33mtrue[39m,
2025-06-04T21:54:56.4589849Z     includeRiskFactors: [33mtrue[39m,
2025-06-04T21:54:56.4590437Z     sensitivity: [33m0.7[39m,
2025-06-04T21:54:56.4591017Z     confidenceThreshold: [33m0.4[39m,
2025-06-04T21:54:56.4591580Z     language: [32m'en'[39m,
2025-06-04T21:54:56.4592103Z     useSecureProcessing: [33mfalse[39m,
2025-06-04T21:54:56.4593025Z     batchSize: [33m3[39m,
2025-06-04T21:54:56.4593559Z     batchTimeoutMs: [33m50[39m,
2025-06-04T21:54:56.4594011Z     useCache: [33mtrue[39m,
2025-06-04T21:54:56.4594464Z     cacheTTLMs: [33m5000[39m,
2025-06-04T21:54:56.4594989Z     useAdaptiveBatchSize: [33mtrue[39m,
2025-06-04T21:54:56.4595532Z     minBatchSize: [33m2[39m,
2025-06-04T21:54:56.4596064Z     maxBatchSize: [33m5[39m,
2025-06-04T21:54:56.4596631Z     targetProcessingTimeMs: [33m100[39m,
2025-06-04T21:54:56.4597230Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:56.4597798Z     useRealTimeEndpoint: [33mtrue[39m,
2025-06-04T21:54:56.4598413Z     maxConcurrentRequests: [33m10[39m
2025-06-04T21:54:56.4598809Z   }
2025-06-04T21:54:56.4599048Z }
2025-06-04T21:54:56.4599413Z 
2025-06-04T21:54:56.4699559Z [90mstderr[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould process real-time requests with higher priority
2025-06-04T21:54:56.4701780Z [22m[39m[2025-06-04T21:54:56.461Z] ERROR [EmotionDetectionEngine]: Error in real-time emotion analysis {
2025-06-04T21:54:56.4702741Z   error: TypeError: provider.getBaseUrl is not a function
2025-06-04T21:54:56.4704588Z       at EmotionDetectionEngine.analyzeEmotionsFromTextRealTime [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:855:21[90m)[39m
2025-06-04T21:54:56.4706955Z       at EmotionDetectionEngine.processItem [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:392:13[90m)[39m
2025-06-04T21:54:56.4708648Z       at async Promise.all (index 0)
2025-06-04T21:54:56.4710468Z       at EmotionDetectionEngine.processBatch [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:270:7[90m)[39m,
2025-06-04T21:54:56.4711816Z   text: [32m'real-time text'[39m
2025-06-04T21:54:56.4712202Z }
2025-06-04T21:54:56.4712346Z 
2025-06-04T21:54:56.4714197Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould process real-time requests with higher priority
2025-06-04T21:54:56.4715865Z [22m[39m[2025-06-04T21:54:56.458Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m14[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.4716974Z [2025-06-04T21:54:56.458Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m19[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.4718109Z [2025-06-04T21:54:56.459Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text (real-time) { textLength: [33m14[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.4719420Z [2025-06-04T21:54:56.460Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m14[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.4720226Z [2025-06-04T21:54:56.468Z] INFO  [EmotionDetectionEngine]: Falling back to standard emotion analysis
2025-06-04T21:54:56.4720573Z 
2025-06-04T21:54:56.5693068Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould adapt batch size based on processing time
2025-06-04T21:54:56.5695170Z [22m[39m[2025-06-04T21:54:56.567Z] DEBUG [EmotionDetectionEngine]: EmotionDetectionEngine initialized {
2025-06-04T21:54:56.5695939Z   options: {
2025-06-04T21:54:56.5696480Z     includeConfidence: [33mtrue[39m,
2025-06-04T21:54:56.5697193Z     includeContextualFactors: [33mtrue[39m,
2025-06-04T21:54:56.5697826Z     includeRiskFactors: [33mtrue[39m,
2025-06-04T21:54:56.5698394Z     sensitivity: [33m0.7[39m,
2025-06-04T21:54:56.5698934Z     confidenceThreshold: [33m0.4[39m,
2025-06-04T21:54:56.5699695Z     language: [32m'en'[39m,
2025-06-04T21:54:56.5700261Z     useSecureProcessing: [33mfalse[39m,
2025-06-04T21:54:56.5700781Z     batchSize: [33m3[39m,
2025-06-04T21:54:56.5701711Z     batchTimeoutMs: [33m50[39m,
2025-06-04T21:54:56.5702280Z     useCache: [33mtrue[39m,
2025-06-04T21:54:56.5702789Z     cacheTTLMs: [33m5000[39m,
2025-06-04T21:54:56.5703336Z     useAdaptiveBatchSize: [33mtrue[39m,
2025-06-04T21:54:56.5703899Z     minBatchSize: [33m2[39m,
2025-06-04T21:54:56.5704423Z     maxBatchSize: [33m5[39m,
2025-06-04T21:54:56.5705003Z     targetProcessingTimeMs: [33m100[39m,
2025-06-04T21:54:56.5705614Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:56.5706190Z     useRealTimeEndpoint: [33mtrue[39m,
2025-06-04T21:54:56.5706806Z     maxConcurrentRequests: [33m10[39m
2025-06-04T21:54:56.5707230Z   }
2025-06-04T21:54:56.5707523Z }
2025-06-04T21:54:56.5707662Z 
2025-06-04T21:54:56.5716550Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould adapt batch size based on processing time
2025-06-04T21:54:56.5730933Z [22m[39m[2025-06-04T21:54:56.568Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5732972Z [2025-06-04T21:54:56.569Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5735055Z [2025-06-04T21:54:56.569Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5737081Z [2025-06-04T21:54:56.569Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5739576Z [2025-06-04T21:54:56.569Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5741634Z [2025-06-04T21:54:56.569Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5743665Z [2025-06-04T21:54:56.569Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5745695Z [2025-06-04T21:54:56.569Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5747688Z [2025-06-04T21:54:56.569Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5749840Z [2025-06-04T21:54:56.569Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m6[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.5750690Z 
2025-06-04T21:54:56.5770343Z [90mstderr[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould adapt batch size based on processing time
2025-06-04T21:54:56.5772416Z [22m[39m[2025-06-04T21:54:56.571Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5773490Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5775389Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5777918Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5779667Z   text: [32m'text 0'[39m
2025-06-04T21:54:56.5780040Z }
2025-06-04T21:54:56.5780833Z [2025-06-04T21:54:56.571Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5781838Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5783674Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5786416Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5787830Z   text: [32m'text 1'[39m
2025-06-04T21:54:56.5788215Z }
2025-06-04T21:54:56.5789001Z [2025-06-04T21:54:56.572Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5790223Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5792159Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5794676Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5796087Z   text: [32m'text 2'[39m
2025-06-04T21:54:56.5796460Z }
2025-06-04T21:54:56.5797247Z [2025-06-04T21:54:56.572Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5798241Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5800311Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5802878Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5804512Z   text: [32m'text 3'[39m
2025-06-04T21:54:56.5804880Z }
2025-06-04T21:54:56.5805677Z [2025-06-04T21:54:56.573Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5806702Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5808584Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5811287Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5812675Z   text: [32m'text 4'[39m
2025-06-04T21:54:56.5813045Z }
2025-06-04T21:54:56.5813808Z [2025-06-04T21:54:56.573Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5814822Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5816714Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5819408Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5820834Z   text: [32m'text 5'[39m
2025-06-04T21:54:56.5821210Z }
2025-06-04T21:54:56.5821992Z [2025-06-04T21:54:56.573Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5823020Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5824885Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5827398Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5828817Z   text: [32m'text 6'[39m
2025-06-04T21:54:56.5829401Z }
2025-06-04T21:54:56.5830184Z [2025-06-04T21:54:56.573Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5831216Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5833353Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5835972Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5837351Z   text: [32m'text 7'[39m
2025-06-04T21:54:56.5837720Z }
2025-06-04T21:54:56.5838500Z [2025-06-04T21:54:56.574Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5839730Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5841615Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5844160Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5845558Z   text: [32m'text 8'[39m
2025-06-04T21:54:56.5845925Z }
2025-06-04T21:54:56.5846704Z [2025-06-04T21:54:56.574Z] ERROR [EmotionDetectionEngine]: Error analyzing emotions from text {
2025-06-04T21:54:56.5847697Z   error: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5849790Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:835:23[90m)[39m
2025-06-04T21:54:56.5852618Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m,
2025-06-04T21:54:56.5854045Z   text: [32m'text 9'[39m
2025-06-04T21:54:56.5854409Z }
2025-06-04T21:54:56.5855187Z [2025-06-04T21:54:56.574Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5856466Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5858609Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5861309Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5862582Z }
2025-06-04T21:54:56.5863363Z [2025-06-04T21:54:56.574Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5864633Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5866783Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5869581Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5870827Z }
2025-06-04T21:54:56.5871617Z [2025-06-04T21:54:56.574Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5872885Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5875016Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5877512Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5878765Z }
2025-06-04T21:54:56.5879984Z [2025-06-04T21:54:56.575Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5881250Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5883375Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5885916Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5887174Z }
2025-06-04T21:54:56.5887959Z [2025-06-04T21:54:56.575Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5889420Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5891576Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5894089Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5895324Z }
2025-06-04T21:54:56.5896120Z [2025-06-04T21:54:56.575Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5897409Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5899994Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5902533Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5903783Z }
2025-06-04T21:54:56.5904580Z [2025-06-04T21:54:56.575Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5905868Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5907995Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5910683Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5911958Z }
2025-06-04T21:54:56.5912734Z [2025-06-04T21:54:56.575Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5913995Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5916138Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5929903Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5930604Z }
2025-06-04T21:54:56.5931047Z [2025-06-04T21:54:56.576Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5931753Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5933022Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5935431Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5936961Z }
2025-06-04T21:54:56.5937782Z [2025-06-04T21:54:56.576Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.5939284Z   error: Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
2025-06-04T21:54:56.5941766Z       at EmotionDetectionEngine.analyzeEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:838:13[90m)[39m
2025-06-04T21:54:56.5944260Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:24[90m)[39m
2025-06-04T21:54:56.5945490Z }
2025-06-04T21:54:56.5945648Z 
2025-06-04T21:54:56.7741569Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould correctly handle concurrent real-time and batch requests
2025-06-04T21:54:56.7747692Z [22m[39m[2025-06-04T21:54:56.772Z] DEBUG [EmotionDetectionEngine]: EmotionDetectionEngine initialized {
2025-06-04T21:54:56.7748482Z   options: {
2025-06-04T21:54:56.7749022Z     includeConfidence: [33mtrue[39m,
2025-06-04T21:54:56.7750375Z     includeContextualFactors: [33mtrue[39m,
2025-06-04T21:54:56.7751000Z     includeRiskFactors: [33mtrue[39m,
2025-06-04T21:54:56.7751526Z     sensitivity: [33m0.7[39m,
2025-06-04T21:54:56.7752033Z     confidenceThreshold: [33m0.4[39m,
2025-06-04T21:54:56.7753058Z     language: [32m'en'[39m,
2025-06-04T21:54:56.7753626Z     useSecureProcessing: [33mfalse[39m,
2025-06-04T21:54:56.7754151Z     batchSize: [33m3[39m,
2025-06-04T21:54:56.7754674Z     batchTimeoutMs: [33m50[39m,
2025-06-04T21:54:56.7755192Z     useCache: [33mtrue[39m,
2025-06-04T21:54:56.7755725Z     cacheTTLMs: [33m5000[39m,
2025-06-04T21:54:56.7756315Z     useAdaptiveBatchSize: [33mtrue[39m,
2025-06-04T21:54:56.7756920Z     minBatchSize: [33m2[39m,
2025-06-04T21:54:56.7757446Z     maxBatchSize: [33m5[39m,
2025-06-04T21:54:56.7758019Z     targetProcessingTimeMs: [33m100[39m,
2025-06-04T21:54:56.7758623Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:56.7759544Z     useRealTimeEndpoint: [33mtrue[39m,
2025-06-04T21:54:56.7760183Z     maxConcurrentRequests: [33m10[39m
2025-06-04T21:54:56.7760659Z   }
2025-06-04T21:54:56.7760970Z }
2025-06-04T21:54:56.7761125Z 
2025-06-04T21:54:56.7800883Z [90mstderr[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould correctly handle concurrent real-time and batch requests
2025-06-04T21:54:56.7803066Z [22m[39m[2025-06-04T21:54:56.774Z] ERROR [EmotionDetectionEngine]: Error in real-time emotion analysis {
2025-06-04T21:54:56.7803991Z   error: ReferenceError: fetch is not defined
2025-06-04T21:54:56.7805825Z       at EmotionDetectionEngine.analyzeEmotionsFromTextRealTime [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:854:24[90m)[39m
2025-06-04T21:54:56.7808279Z       at EmotionDetectionEngine.processItem [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:392:13[90m)[39m
2025-06-04T21:54:56.7809733Z       at async Promise.all (index 0)
2025-06-04T21:54:56.7811311Z       at EmotionDetectionEngine.processBatch [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:270:7[90m)[39m,
2025-06-04T21:54:56.7812655Z   text: [32m'realtime-1'[39m
2025-06-04T21:54:56.7813033Z }
2025-06-04T21:54:56.7813200Z 
2025-06-04T21:54:56.7815013Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould correctly handle concurrent real-time and batch requests
2025-06-04T21:54:56.7818146Z [22m[39m[2025-06-04T21:54:56.773Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text (real-time) { textLength: [33m10[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.7820590Z [2025-06-04T21:54:56.773Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m9[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.7822624Z [2025-06-04T21:54:56.773Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m9[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.7824765Z [2025-06-04T21:54:56.773Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text (real-time) { textLength: [33m10[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.7826870Z [2025-06-04T21:54:56.773Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m9[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.7828364Z [2025-06-04T21:54:56.776Z] INFO  [EmotionDetectionEngine]: Falling back to standard emotion analysis
2025-06-04T21:54:56.7828962Z 
2025-06-04T21:54:56.8404942Z [90mstderr[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould correctly handle concurrent real-time and batch requests
2025-06-04T21:54:56.8408083Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould correctly handle concurrent real-time and batch requests
2025-06-04T21:54:56.8424030Z [22m[39m[2025-06-04T21:54:56.838Z] ERROR [EmotionDetectionEngine]: Error in real-time emotion analysis {
2025-06-04T21:54:56.8433699Z   error: ReferenceError: fetch is not defined
2025-06-04T21:54:56.8435460Z       at EmotionDetectionEngine.analyzeEmotionsFromTextRealTime [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:854:24[90m)[39m
2025-06-04T21:54:56.8437763Z       at EmotionDetectionEngine.processItem [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:392:13[90m)[39m
2025-06-04T21:54:56.8438952Z       at async Promise.all (index 0)
2025-06-04T21:54:56.8448658Z       at EmotionDetectionEngine.processBatch [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:270:7[90m)[39m,
2025-06-04T21:54:56.8458238Z   text: [32m'realtime-2'[39m
2025-06-04T21:54:56.8458655Z }
2025-06-04T21:54:56.8458814Z 
2025-06-04T21:54:56.8468066Z [22m[39m[2025-06-04T21:54:56.839Z] INFO  [EmotionDetectionEngine]: Falling back to standard emotion analysis
2025-06-04T21:54:56.8468744Z 
2025-06-04T21:54:56.9087860Z [90mstdout[2m | src/lib/services/notification/__tests__/WebSocketServer.test.ts
2025-06-04T21:54:56.9089347Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:54:56.9091447Z   SSR: [32m''[39m,
2025-06-04T21:54:56.9093334Z   VITEST_WORKER_ID: [32m'59'[39m,
2025-06-04T21:54:56.9095551Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:54:56.9096323Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:56.9097850Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:56.9102710Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:56.9103493Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:54:56.9104158Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:54:56.9105058Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:54:56.9109671Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:54:56.9113406Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:54:56.9114357Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:54:56.9115223Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:54:56.9115719Z   VITEST: [32m'true'[39m,
2025-06-04T21:54:56.9116282Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:54:56.9116989Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:54:56.9118212Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:56.9119647Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:54:56.9120411Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:54:56.9121273Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:54:56.9122008Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:54:56.9122744Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:54:56.9123541Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:54:56.9124178Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:54:56.9124930Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:54:56.9125806Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:54:56.9126616Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:54:56.9127310Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:54:56.9128496Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:56.9130065Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:54:56.9130664Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:54:56.9131525Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:54:56.9132375Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:54:56.9133123Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:54:56.9133823Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:54:56.9134434Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:54:56.9134938Z   MODE: [32m'test'[39m,
2025-06-04T21:54:56.9135574Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:56.9136367Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:54:56.9136917Z   CI: [32m'true'[39m,
2025-06-04T21:54:56.9137460Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:54:56.9138081Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:54:56.9138641Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:54:56.9139628Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:56.9140499Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:56.9141232Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:54:56.9141989Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:54:56.9142624Z   PROD: [32m''[39m,
2025-06-04T21:54:56.9143257Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:54:56.9143963Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:54:56.9144525Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:54:56.9145183Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:54:56.9145813Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:54:56.9146927Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:56.9148100Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:54:56.9148711Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:54:56.9149457Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:54:56.9150095Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:54:56.9150897Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:54:56.9151548Z   USER: [32m'runner'[39m,
2025-06-04T21:54:56.9152252Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:54:56.9152727Z   SHLVL: [32m'1'[39m,
2025-06-04T21:54:56.9153255Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:54:56.9154050Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:56.9154905Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:54:56.9156109Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:54:56.9157126Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:54:56.9157627Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:54:56.9158134Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:54:56.9158700Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:54:56.9159867Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:54:56.9160814Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:54:56.9161573Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:54:56.9162346Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:54:56.9163012Z   VITEST_POOL_ID: [32m'2'[39m,
2025-06-04T21:54:56.9163708Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:54:56.9164615Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:54:56.9165326Z   DEV: [32m'1'[39m,
2025-06-04T21:54:56.9165832Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:54:56.9166713Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:54:56.9167257Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:54:56.9167911Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:54:56.9168890Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:54:56.9170065Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:54:56.9170831Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:54:56.9171509Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:54:56.9172321Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:54:56.9173116Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:54:56.9173656Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:54:56.9174361Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:54:56.9174960Z   TEST: [32m'true'[39m,
2025-06-04T21:54:56.9175451Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:54:56.9176191Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:54:56.9176884Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:54:56.9177408Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:54:56.9177957Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:54:56.9179545Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:54:56.9181051Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:54:56.9181975Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:54:56.9182538Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:54:56.9183088Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:54:56.9183601Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:54:56.9184123Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:54:56.9185520Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:54:56.9186857Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:56.9187510Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:54:56.9188528Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:54:56.9189624Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:54:56.9190116Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:54:56.9191105Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:54:56.9191954Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:54:56.9192570Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:54:56.9193214Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:56.9193886Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:54:56.9194503Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:54:56.9195252Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:54:56.9196001Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:54:56.9196698Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:54:56.9197305Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:54:56.9198103Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:54:56.9198899Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:54:56.9199696Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:54:56.9206023Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:54:56.9211333Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:54:56.9211914Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:54:56.9212592Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:56.9213229Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:54:56.9213732Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:54:56.9214499Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:54:56.9215272Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:54:56.9216007Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:56.9216965Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:54:56.9217894Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:54:56.9218546Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:54:56.9219428Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:54:56.9220618Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:54:56.9221746Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:54:56.9222418Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:54:56.9223015Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:54:56.9223694Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:54:56.9224525Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:54:56.9225347Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:54:56.9225998Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:54:56.9226642Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:54:56.9227375Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:54:56.9228177Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:54:56.9228700Z }
2025-06-04T21:54:56.9228859Z 
2025-06-04T21:54:56.9540855Z [90mstderr[2m | src/lib/services/notification/__tests__/WebSocketServer.test.ts
2025-06-04T21:54:56.9553061Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould handle errors gracefully during batch processing
2025-06-04T21:54:56.9555246Z [22m[39m[2025-06-04T21:54:56.952Z] DEBUG [EmotionDetectionEngine]: EmotionDetectionEngine initialized {
2025-06-04T21:54:56.9556011Z   options: {
2025-06-04T21:54:56.9556523Z     includeConfidence: [33mtrue[39m,
2025-06-04T21:54:56.9557166Z     includeContextualFactors: [33mtrue[39m,
2025-06-04T21:54:56.9557836Z     includeRiskFactors: [33mtrue[39m,
2025-06-04T21:54:56.9558386Z     sensitivity: [33m0.7[39m,
2025-06-04T21:54:56.9558925Z     confidenceThreshold: [33m0.4[39m,
2025-06-04T21:54:56.9559658Z     language: [32m'en'[39m,
2025-06-04T21:54:56.9560209Z     useSecureProcessing: [33mfalse[39m,
2025-06-04T21:54:56.9560718Z     batchSize: [33m3[39m,
2025-06-04T21:54:56.9561205Z     batchTimeoutMs: [33m50[39m,
2025-06-04T21:54:56.9561680Z     useCache: [33mtrue[39m,
2025-06-04T21:54:56.9562251Z     cacheTTLMs: [33m5000[39m,
2025-06-04T21:54:56.9562792Z     useAdaptiveBatchSize: [33mtrue[39m,
2025-06-04T21:54:56.9563341Z     minBatchSize: [33m2[39m,
2025-06-04T21:54:56.9563830Z     maxBatchSize: [33m5[39m,
2025-06-04T21:54:56.9564371Z     targetProcessingTimeMs: [33m100[39m,
2025-06-04T21:54:56.9564936Z     maxCacheSize: [33m1000[39m,
2025-06-04T21:54:56.9565478Z     useRealTimeEndpoint: [33mtrue[39m,
2025-06-04T21:54:56.9566071Z     maxConcurrentRequests: [33m10[39m
2025-06-04T21:54:56.9566757Z   }
2025-06-04T21:54:56.9567030Z }
2025-06-04T21:54:56.9567182Z 
2025-06-04T21:54:56.9583869Z [22m[39mUsing mock Redis client for development. This should not be used in production.
2025-06-04T21:54:56.9585527Z 
2025-06-04T21:54:56.9597949Z [90mstderr[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould handle errors gracefully during batch processing
2025-06-04T21:54:56.9601288Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould handle errors gracefully during batch processing
2025-06-04T21:54:56.9603813Z [22m[39m[2025-06-04T21:54:56.954Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.9604994Z   error: Error: Test error
2025-06-04T21:54:56.9606878Z       at EmotionDetectionEngine.<anonymous> [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:216:31[90m)[39m
2025-06-04T21:54:56.9610062Z       at EmotionDetectionEngine.mockCall [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+spy@3.1.4/node_modules/[4m@vitest[24m/spy/dist/index.js:66:15[90m)[39m
2025-06-04T21:54:56.9612993Z       at EmotionDetectionEngine.spy [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/tinyspy@3.0.2/node_modules/[4mtinyspy[24m/dist/index.js:45:80[90m)[39m
2025-06-04T21:54:56.9615785Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:35[90m)[39m
2025-06-04T21:54:56.9618265Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:230:33
2025-06-04T21:54:56.9620986Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:56.9623491Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:56.9625965Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:56.9627741Z       at new Promise (<anonymous>)
2025-06-04T21:54:56.9630185Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:56.9631718Z }
2025-06-04T21:54:56.9632858Z [2025-06-04T21:54:56.958Z] ERROR [EmotionDetectionEngine]: Error in real-time emotion analysis {
2025-06-04T21:54:56.9633903Z   error: ReferenceError: fetch is not defined
2025-06-04T21:54:56.9636009Z       at EmotionDetectionEngine.analyzeEmotionsFromTextRealTime [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:854:24[90m)[39m
2025-06-04T21:54:56.9638835Z       at EmotionDetectionEngine.processItem [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:392:13[90m)[39m
2025-06-04T21:54:56.9640380Z       at async Promise.all (index 0)
2025-06-04T21:54:56.9641994Z       at EmotionDetectionEngine.processBatch [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:270:7[90m)[39m,
2025-06-04T21:54:56.9651735Z   text: [32m'good real-time text'[39m
2025-06-04T21:54:56.9652154Z }
2025-06-04T21:54:56.9652315Z 
2025-06-04T21:54:56.9653939Z [90mstderr[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould handle errors gracefully during batch processing
2025-06-04T21:54:56.9656179Z [22m[39m[2025-06-04T21:54:56.961Z] ERROR [EmotionDetectionEngine]: Error detecting emotions from text {
2025-06-04T21:54:56.9656884Z   error: Error: Test error
2025-06-04T21:54:56.9658301Z       at EmotionDetectionEngine.<anonymous> [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:216:31[90m)[39m
2025-06-04T21:54:56.9660834Z       at EmotionDetectionEngine.mockCall [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+spy@3.1.4/node_modules/[4m@vitest[24m/spy/dist/index.js:66:15[90m)[39m
2025-06-04T21:54:56.9663102Z       at EmotionDetectionEngine.spy [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/tinyspy@3.0.2/node_modules/[4mtinyspy[24m/dist/index.js:45:80[90m)[39m
2025-06-04T21:54:56.9665278Z       at EmotionDetectionEngine.detectEmotionsFromText [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/EmotionDetectionEngine.ts:752:35[90m)[39m
2025-06-04T21:54:56.9667039Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:245:38
2025-06-04T21:54:56.9668905Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:20
2025-06-04T21:54:56.9670047Z }
2025-06-04T21:54:56.9670191Z 
2025-06-04T21:54:56.9671339Z [22m[39m[2025-06-04T21:54:56.952Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m9[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.9673208Z [2025-06-04T21:54:56.953Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m10[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.9675163Z [2025-06-04T21:54:56.954Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text (real-time) { textLength: [33m19[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.9676484Z [2025-06-04T21:54:56.959Z] INFO  [EmotionDetectionEngine]: Falling back to standard emotion analysis
2025-06-04T21:54:56.9677041Z 
2025-06-04T21:54:56.9678685Z [90mstdout[2m | src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22m[2mReal-Time Emotion Analysis Optimization[2m > [22m[2mshould handle errors gracefully during batch processing
2025-06-04T21:54:56.9684335Z [22m[39m[2025-06-04T21:54:56.961Z] DEBUG [EmotionDetectionEngine]: Detecting emotions from text { textLength: [33m16[39m, hasContext: [33mfalse[39m }
2025-06-04T21:54:56.9685130Z 
2025-06-04T21:54:56.9703291Z  [31m❯[39m src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 511[2mms[22m[39m
2025-06-04T21:54:56.9704657Z [31m   [31m×[31m Real-Time Emotion Analysis Optimization[2m > [22mshould process real-time requests with higher priority[39m[32m 114[2mms[22m[39m
2025-06-04T21:54:56.9705395Z [31m     → expected "spy" to be called at least once[39m
2025-06-04T21:54:56.9706227Z [31m   [31m×[31m Real-Time Emotion Analysis Optimization[2m > [22mshould adapt batch size based on processing time[39m[32m 205[2mms[22m[39m
2025-06-04T21:54:56.9706888Z [31m     → expected "spy" to be called at least once[39m
2025-06-04T21:54:56.9707657Z    [32m✓[39m Real-Time Emotion Analysis Optimization[2m > [22mshould correctly handle concurrent real-time and batch requests[32m 180[2mms[22m[39m
2025-06-04T21:54:56.9709364Z [31m   [31m×[31m Real-Time Emotion Analysis Optimization[2m > [22mshould handle errors gracefully during batch processing[39m[32m 10[2mms[22m[39m
2025-06-04T21:54:56.9716082Z [31m     → Test error[39m
2025-06-04T21:54:57.3643134Z [90mstderr[2m | src/lib/memory/__tests__/mem0-client.test.ts[2m > [22m[2mMem0Client[2m > [22m[2mconstructor[2m > [22m[2mshould initialize with default values when no config provided
2025-06-04T21:54:57.3645588Z [22m[39m⚠️  Mem0 API key not provided. Set MEM0_API_KEY environment variable or pass apiKey to constructor.
2025-06-04T21:54:57.3647129Z 
2025-06-04T21:54:57.3673982Z [90mstderr[2m | src/lib/memory/__tests__/mem0-client.test.ts[2m > [22m[2mMem0Client[2m > [22m[2misConfigured[2m > [22m[2mshould return false when no API key is provided
2025-06-04T21:54:57.3675965Z [22m[39m⚠️  Mem0 API key not provided. Set MEM0_API_KEY environment variable or pass apiKey to constructor.
2025-06-04T21:54:57.3676842Z 
2025-06-04T21:54:57.3691415Z [90mstderr[2m | src/lib/memory/__tests__/mem0-client.test.ts[2m > [22m[2mMem0Client[2m > [22m[2maddMemory[2m > [22m[2mshould throw error when API key is missing
2025-06-04T21:54:57.3715526Z [22m[39m⚠️  Mem0 API key not provided. Set MEM0_API_KEY environment variable or pass apiKey to constructor.
2025-06-04T21:54:57.3717686Z 
2025-06-04T21:54:57.3894639Z [90mstderr[2m | src/lib/memory/__tests__/mem0-client.test.ts[2m > [22m[2mMem0Client[2m > [22m[2merror handling[2m > [22m[2mshould handle API errors
2025-06-04T21:54:57.3896724Z [22m[39mMem0 API request failed: Error: Mem0 API error (401): Unauthorized
2025-06-04T21:54:57.3898663Z     at Mem0Client.makeRequest [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/memory/mem0-client.ts:108:15[90m)[39m
2025-06-04T21:54:57.3900923Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/memory/__tests__/mem0-client.test.ts:222:7
2025-06-04T21:54:57.3904354Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:20
2025-06-04T21:54:57.3905293Z 
2025-06-04T21:54:57.3906469Z [90mstderr[2m | src/lib/memory/__tests__/mem0-client.test.ts[2m > [22m[2mMem0Client[2m > [22m[2merror handling[2m > [22m[2mshould handle network errors
2025-06-04T21:54:57.3907668Z [22m[39mMem0 API request failed: Error: Network error
2025-06-04T21:54:57.3908838Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/memory/__tests__/mem0-client.test.ts:228:51
2025-06-04T21:54:57.3910963Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:57.3913174Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:57.3947840Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:57.3949417Z     at new Promise (<anonymous>)
2025-06-04T21:54:57.3951196Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:57.3953739Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:57.3956282Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:57.3958958Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:57.3961657Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:57.3962764Z 
2025-06-04T21:54:57.3964168Z [90mstderr[2m | src/lib/memory/__tests__/mem0-client.test.ts[2m > [22m[2mMem0Client[2m > [22m[2mtestConnection[2m > [22m[2mshould return false for failed connection
2025-06-04T21:54:57.3965633Z [22m[39mMem0 API request failed: Error: Connection failed
2025-06-04T21:54:57.3967169Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/memory/__tests__/mem0-client.test.ts:250:51
2025-06-04T21:54:57.3969317Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:57.3971580Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:57.3973833Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:57.3975050Z     at new Promise (<anonymous>)
2025-06-04T21:54:57.3976769Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:57.4009576Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:57.4012105Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:57.4014586Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:57.4017038Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:57.4018075Z 
2025-06-04T21:54:57.4019553Z [90mstderr[2m | src/lib/memory/__tests__/mem0-client.test.ts[2m > [22m[2mMem0Client[2m > [22m[2mtestConnection[2m > [22m[2mshould return false for failed connection
2025-06-04T21:54:57.4021004Z [22m[39mMem0 connection test failed: Error: Connection failed
2025-06-04T21:54:57.4022133Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/memory/__tests__/mem0-client.test.ts:250:51
2025-06-04T21:54:57.4024046Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:54:57.4025899Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:54:57.4027795Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:54:57.4028800Z     at new Promise (<anonymous>)
2025-06-04T21:54:57.4030510Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:54:57.4032652Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:54:57.4034811Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:57.4036972Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:57.4039315Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:54:57.4040550Z 
2025-06-04T21:54:57.4041358Z  [32m✓[39m src/lib/memory/__tests__/mem0-client.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 33[2mms[22m[39m
2025-06-04T21:54:58.0912935Z  [31m❯[39m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m11 failed[39m[2m)[22m[32m 19[2mms[22m[39m
2025-06-04T21:54:58.0921070Z    [32m✓[39m MultidimensionalEmotionMapper[2m > [22mshould create an instance of MultidimensionalEmotionMapper[32m 3[2mms[22m[39m
2025-06-04T21:54:58.0923063Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould map joy to positive valence and moderate arousal[39m[32m 6[2mms[22m[39m
2025-06-04T21:54:58.0924408Z [31m     → mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T21:54:58.0925986Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould map sadness to negative valence and low arousal[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:58.0927368Z [31m     → mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T21:54:58.0928907Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould map anger to negative valence and high arousal[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:58.0941321Z [31m     → mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T21:54:58.0943051Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould map fear to negative valence and high arousal, low dominance[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:58.0944457Z [31m     → mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T21:54:58.0946065Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould combine multiple emotions with weighted importance[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:58.0947440Z [31m     → mapper.createDimensionalMapping is not a function[39m
2025-06-04T21:54:58.0949054Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould determine the correct quadrant based on dimensions[39m[32m 2[2mms[22m[39m
2025-06-04T21:54:58.0950876Z [31m     → expected high-arousal positive-valence high-dominance to be positive-high[39m
2025-06-04T21:54:58.0952709Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould determine the dominant dimension based on absolute values[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:58.0954183Z [31m     → mapper.determineDominantDimension is not a function[39m
2025-06-04T21:54:58.0956071Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould store mapping in the database[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:58.0957564Z [31m     → Cannot set properties of undefined (setting 'storeDimensionalMapping')[39m
2025-06-04T21:54:58.0959407Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould handle an unknown emotion type gracefully[39m[32m 1[2mms[22m[39m
2025-06-04T21:54:58.0960733Z [31m     → mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T21:54:58.0962428Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould correctly scale dimensions based on intensity[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:58.0963789Z [31m     → mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T21:54:58.0965567Z [31m   [31m×[31m MultidimensionalEmotionMapper[2m > [22mshould normalize dimensions to a -1 to 1 range[39m[32m 0[2mms[22m[39m
2025-06-04T21:54:58.0966883Z [31m     → mapper.normalizeDimensions is not a function[39m
2025-06-04T21:54:58.1837858Z  [31m❯[39m src/lib/ai/temporal/__tests__/dimensionDominance.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 17[2mms[22m[39m
2025-06-04T21:54:58.1846944Z    [32m✓[39m Dimension Dominance Pattern Detection[2m > [22mdetectTemporalPatterns - dimension dominance[2m > [22mshould detect valence dominance[32m 4[2mms[22m[39m
2025-06-04T21:54:58.1850987Z    [32m✓[39m Dimension Dominance Pattern Detection[2m > [22mdetectTemporalPatterns - dimension dominance[2m > [22mshould detect arousal dominance[32m 1[2mms[22m[39m
2025-06-04T21:54:58.1855844Z    [32m✓[39m Dimension Dominance Pattern Detection[2m > [22mdetectTemporalPatterns - dimension dominance[2m > [22mshould not detect dominance when dimensions are balanced[32m 1[2mms[22m[39m
2025-06-04T21:54:58.1858327Z    [32m✓[39m Dimension Dominance Pattern Detection[2m > [22mdetectTemporalPatterns - dimension dominance[2m > [22mshould detect dominance with primaryVector format[32m 1[2mms[22m[39m
2025-06-04T21:54:58.1861115Z [31m   [31m×[31m Dimension Dominance Pattern Detection[2m > [22manalyzePatterns - dimension dominance[2m > [22mshould generate insights for dimension dominance patterns[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:58.1862532Z [31m     → expected false to be true[39m
2025-06-04T21:54:59.3982665Z  [31m❯[39m src/lib/ai/mental-arena/__tests__/MentalArenaAdapter.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 17[2mms[22m[39m
2025-06-04T21:54:59.3986856Z    [32m✓[39m MentalArenaAdapter[2m > [22mfineTuneModelWithPythonBridge[2m > [22mshould throw an error if Python bridge is not available[32m 5[2mms[22m[39m
2025-06-04T21:54:59.3989411Z [31m   [31m×[31m MentalArenaAdapter[2m > [22mfineTuneModelWithPythonBridge[2m > [22mshould format data and call Python bridge for fine-tuning[39m[32m 9[2mms[22m[39m
2025-06-04T21:54:59.3990493Z [31m     → Fine-tuning failed: Cannot read properties of undefined (reading 'model_path')[39m
2025-06-04T21:54:59.3991435Z    [32m✓[39m MentalArenaAdapter[2m > [22mfineTuneModelWithPythonBridge[2m > [22mshould handle fine-tuning errors properly[32m 1[2mms[22m[39m
2025-06-04T21:54:59.3992509Z    [32m✓[39m MentalArenaAdapter[2m > [22mfineTuneModelWithPythonBridge[2m > [22mshould handle non-JSON results from Python bridge[32m 0[2mms[22m[39m
2025-06-04T21:55:00.2663331Z  [2m[90m↓[39m[22m src/lib/services/redis/__tests__/RedisService.perf.test.ts [2m([22m[2m9 tests[22m[2m | [22m[33m9 skipped[39m[2m)[22m
2025-06-04T21:55:00.4246299Z [90mstdout[2m | src/lib/services/email/__tests__/EmailService.test.ts
2025-06-04T21:55:00.4247367Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:55:00.4247999Z   SSR: [32m''[39m,
2025-06-04T21:55:00.4248531Z   VITEST_WORKER_ID: [32m'68'[39m,
2025-06-04T21:55:00.4249064Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:55:00.4250077Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:00.4252007Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:00.4253388Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:00.4254162Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:55:00.4254845Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:55:00.4255744Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:55:00.4260343Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:55:00.4263692Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:55:00.4264618Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:55:00.4265469Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:55:00.4265994Z   VITEST: [32m'true'[39m,
2025-06-04T21:55:00.4266599Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:55:00.4267307Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:55:00.4268875Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:00.4276169Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:55:00.4276928Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:55:00.4277751Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:55:00.4278454Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:55:00.4279644Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:55:00.4280479Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:55:00.4281132Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:55:00.4281917Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:55:00.4282846Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:55:00.4283715Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:55:00.4284428Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:55:00.4285687Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:00.4286778Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:55:00.4287396Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:55:00.4288269Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:55:00.4289386Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:55:00.4290158Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:55:00.4290876Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:55:00.4291558Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:55:00.4292104Z   MODE: [32m'test'[39m,
2025-06-04T21:55:00.4292812Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:00.4293616Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:55:00.4294199Z   CI: [32m'true'[39m,
2025-06-04T21:55:00.4294805Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:55:00.4295466Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:55:00.4296048Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:55:00.4296871Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:00.4297785Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:00.4298546Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:55:00.4304528Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:55:00.4305302Z   PROD: [32m''[39m,
2025-06-04T21:55:00.4305945Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:55:00.4306623Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:55:00.4307197Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:55:00.4307899Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:55:00.4308527Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:55:00.4309889Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:00.4311084Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:55:00.4311742Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:55:00.4312304Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:55:00.4312978Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:55:00.4313828Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:55:00.4314569Z   USER: [32m'runner'[39m,
2025-06-04T21:55:00.4315077Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:55:00.4315544Z   SHLVL: [32m'1'[39m,
2025-06-04T21:55:00.4316061Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:55:00.4316910Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:00.4317838Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:55:00.4319287Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:00.4320509Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:55:00.4320985Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:55:00.4321464Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:55:00.4321992Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:55:00.4322726Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:55:00.4323579Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:55:00.4324275Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:55:00.4324992Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:55:00.4325612Z   VITEST_POOL_ID: [32m'3'[39m,
2025-06-04T21:55:00.4326261Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:00.4327133Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:55:00.4327762Z   DEV: [32m'1'[39m,
2025-06-04T21:55:00.4328382Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:55:00.4339939Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:55:00.4340482Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:55:00.4341100Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:55:00.4341997Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:55:00.4342900Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:55:00.4343689Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:55:00.4344366Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:55:00.4345216Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:00.4346052Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:55:00.4346566Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:55:00.4347201Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:55:00.4347773Z   TEST: [32m'true'[39m,
2025-06-04T21:55:00.4348251Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:55:00.4348959Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:55:00.4349846Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:55:00.4350351Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:55:00.4350928Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:55:00.4352410Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:55:00.4354014Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:55:00.4354998Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:55:00.4355587Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:55:00.4356160Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:55:00.4356662Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:55:00.4357226Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:55:00.4358725Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:55:00.4360341Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:00.4361008Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:55:00.4362094Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:55:00.4371856Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:55:00.4372461Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:55:00.4373321Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:55:00.4374275Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:55:00.4374997Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:55:00.4375713Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:00.4376455Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:55:00.4377518Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:55:00.4378355Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:55:00.4379390Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:55:00.4380185Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:00.4380845Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:55:00.4381727Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:00.4382601Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:55:00.4383183Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:55:00.4387757Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:55:00.4390742Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:55:00.4391095Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:55:00.4391528Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:00.4391897Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:55:00.4392172Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:55:00.4392606Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:55:00.4393037Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:00.4393426Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:00.4393941Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:55:00.4394458Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:55:00.4394824Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:55:00.4395188Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:00.4396005Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:55:00.4397056Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:55:00.4397761Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:55:00.4398372Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:55:00.4399068Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:00.4400259Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:55:00.4401045Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:55:00.4401677Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:55:00.4402343Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:55:00.4403107Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:55:00.4403952Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:55:00.4404478Z }
2025-06-04T21:55:00.4404635Z 
2025-06-04T21:55:02.3741178Z [90mstdout[2m | src/workers/__tests__/notification-worker.test.ts
2025-06-04T21:55:02.3742156Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:55:02.3742785Z   SSR: [32m''[39m,
2025-06-04T21:55:02.3743305Z   VITEST_WORKER_ID: [32m'71'[39m,
2025-06-04T21:55:02.3743828Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:55:02.3744522Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:02.3745881Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.3747872Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:02.3748673Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:55:02.3749570Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:55:02.3750508Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:55:02.3754967Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:55:02.3758352Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:55:02.3759460Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:55:02.3760362Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:55:02.3760888Z   VITEST: [32m'true'[39m,
2025-06-04T21:55:02.3761482Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:55:02.3762206Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:55:02.3763468Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.3764658Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:55:02.3765386Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:55:02.3766237Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:55:02.3767014Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:55:02.3767784Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:55:02.3768564Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:55:02.3769457Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:55:02.3770314Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:55:02.3771203Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:55:02.3772071Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:55:02.3772789Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:55:02.3773981Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.3775362Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:55:02.3776033Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:55:02.3776889Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:55:02.3777786Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:55:02.3778513Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:55:02.3779451Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:55:02.3780134Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:55:02.3780687Z   MODE: [32m'test'[39m,
2025-06-04T21:55:02.3781390Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:02.3782169Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:55:02.3782737Z   CI: [32m'true'[39m,
2025-06-04T21:55:02.3783326Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:55:02.3783967Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:55:02.3784572Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:55:02.3785399Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:02.3786325Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:02.3787055Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:55:02.3787848Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:55:02.3788497Z   PROD: [32m''[39m,
2025-06-04T21:55:02.3789352Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:55:02.3790328Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:55:02.3790923Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:55:02.3791639Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:55:02.3792296Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:55:02.3793427Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.3794620Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:55:02.3795207Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:55:02.3795669Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:55:02.3796287Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:55:02.3797081Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:55:02.3797750Z   USER: [32m'runner'[39m,
2025-06-04T21:55:02.3798247Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:55:02.3798696Z   SHLVL: [32m'1'[39m,
2025-06-04T21:55:02.3799456Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:55:02.3800316Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:02.3801255Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:55:02.3802508Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.3803557Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:55:02.3804104Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:55:02.3804618Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:55:02.3805176Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:55:02.3805980Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:55:02.3806917Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:55:02.3807749Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:55:02.3808528Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:55:02.3809451Z   VITEST_POOL_ID: [32m'1'[39m,
2025-06-04T21:55:02.3810179Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:02.3811119Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:55:02.3811865Z   DEV: [32m'1'[39m,
2025-06-04T21:55:02.3812393Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:55:02.3812988Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:55:02.3813761Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:55:02.3814528Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:55:02.3815499Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:55:02.3816468Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:55:02.3817258Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:55:02.3817927Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:55:02.3818755Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:02.3819803Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:55:02.3820402Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:55:02.3821091Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:55:02.3821715Z   TEST: [32m'true'[39m,
2025-06-04T21:55:02.3822223Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:55:02.3823007Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:55:02.3823776Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:55:02.3824330Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:55:02.3824910Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:55:02.3826248Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:55:02.3827873Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:55:02.3829299Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:55:02.3829888Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:55:02.3830476Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:55:02.3830989Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:55:02.3831568Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:55:02.3833002Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:55:02.3834372Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:02.3835099Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:55:02.3836169Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:55:02.3837167Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:55:02.3837747Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:55:02.3838577Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:55:02.3839706Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:55:02.3840440Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:55:02.3841152Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:02.3841860Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:55:02.3842519Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:55:02.3843309Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:55:02.3844106Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:55:02.3844835Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:02.3845505Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:55:02.3846376Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:02.3847205Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:55:02.3847841Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:55:02.3854576Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:55:02.3859580Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:55:02.3860192Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:55:02.3860982Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:02.3861665Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:55:02.3862157Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:55:02.3862932Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:55:02.3863716Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:02.3864426Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:02.3865365Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:55:02.3866294Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:55:02.3866940Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:55:02.3867573Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:02.3868719Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:55:02.3870041Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:55:02.3870729Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:55:02.3871655Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:55:02.3872368Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:02.3873199Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:55:02.3874024Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:55:02.3874722Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:55:02.3875359Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:55:02.3876129Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:55:02.3876975Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:55:02.3877521Z }
2025-06-04T21:55:02.3877692Z 
2025-06-04T21:55:02.5121899Z [90mstdout[2m | src/hooks/__tests__/useNotificationPreferences.test.ts
2025-06-04T21:55:02.5126887Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:55:02.5131431Z   SSR: [32m''[39m,
2025-06-04T21:55:02.5135856Z   VITEST_WORKER_ID: [32m'72'[39m,
2025-06-04T21:55:02.5138266Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:55:02.5141313Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:02.5142688Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.5145620Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:02.5158278Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:55:02.5158975Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:55:02.5160091Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:55:02.5164504Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:55:02.5167921Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:55:02.5168805Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:55:02.5170985Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:55:02.5171923Z   VITEST: [32m'true'[39m,
2025-06-04T21:55:02.5172561Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:55:02.5173280Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:55:02.5174546Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.5175617Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:55:02.5176322Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:55:02.5177127Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:55:02.5178151Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:55:02.5179493Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:55:02.5180263Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:55:02.5180815Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:55:02.5181512Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:55:02.5182330Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:55:02.5183090Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:55:02.5183717Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:55:02.5184834Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.5185781Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:55:02.5186301Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:55:02.5187413Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:55:02.5188245Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:55:02.5188930Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:55:02.5189793Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:55:02.5190404Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:55:02.5190899Z   MODE: [32m'test'[39m,
2025-06-04T21:55:02.5191589Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:02.5192373Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:55:02.5192927Z   CI: [32m'true'[39m,
2025-06-04T21:55:02.5193503Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:55:02.5194145Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:55:02.5194739Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:55:02.5195534Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:02.5196410Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:02.5197129Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:55:02.5197907Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:55:02.5198533Z   PROD: [32m''[39m,
2025-06-04T21:55:02.5199498Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:55:02.5200183Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:55:02.5200729Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:55:02.5201388Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:55:02.5201991Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:55:02.5203099Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.5204252Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:55:02.5204869Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:55:02.5205411Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:55:02.5206034Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:55:02.5206832Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:55:02.5207479Z   USER: [32m'runner'[39m,
2025-06-04T21:55:02.5207953Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:55:02.5208404Z   SHLVL: [32m'1'[39m,
2025-06-04T21:55:02.5208935Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:55:02.5210706Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:02.5211664Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:55:02.5212918Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:02.5213919Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:55:02.5214428Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:55:02.5214972Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:55:02.5215540Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:55:02.5216336Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:55:02.5217227Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:55:02.5217968Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:55:02.5218706Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:55:02.5219574Z   VITEST_POOL_ID: [32m'3'[39m,
2025-06-04T21:55:02.5220283Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:02.5221205Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:55:02.5221870Z   DEV: [32m'1'[39m,
2025-06-04T21:55:02.5222364Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:55:02.5222921Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:55:02.5223443Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:55:02.5224073Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:55:02.5224985Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:55:02.5226234Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:55:02.5227000Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:55:02.5227686Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:55:02.5228527Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:02.5229634Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:55:02.5230248Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:55:02.5230934Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:55:02.5231572Z   TEST: [32m'true'[39m,
2025-06-04T21:55:02.5232097Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:55:02.5233610Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:55:02.5234329Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:55:02.5234865Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:55:02.5235433Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:55:02.5236732Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:55:02.5239595Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:55:02.5241199Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:55:02.5241754Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:55:02.5242318Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:55:02.5242832Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:55:02.5243388Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:55:02.5244837Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:55:02.5246177Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:02.5246826Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:55:02.5247914Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:55:02.5248924Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:55:02.5249687Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:55:02.5250760Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:55:02.5251660Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:55:02.5252326Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:55:02.5253216Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:02.5253934Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:55:02.5254563Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:55:02.5255297Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:55:02.5256046Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:55:02.5256750Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:02.5257375Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:55:02.5258172Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:02.5258991Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:55:02.5260210Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:55:02.5266897Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:55:02.5272343Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:55:02.5272960Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:55:02.5273747Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:02.5274396Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:55:02.5274882Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:55:02.5275678Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:55:02.5276492Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:02.5277225Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:02.5278203Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:55:02.5279383Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:55:02.5280097Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:55:02.5280787Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:02.5282025Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:55:02.5283134Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:55:02.5283793Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:55:02.5284371Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:55:02.5285044Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:02.5285843Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:55:02.5286612Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:55:02.5287236Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:55:02.5287833Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:55:02.5288542Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:55:02.5289542Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:55:02.5290065Z }
2025-06-04T21:55:02.5290225Z 
2025-06-04T21:55:02.5802711Z [90mstderr[2m | src/hooks/__tests__/useNotificationPreferences.test.ts
2025-06-04T21:55:02.5816437Z [22m[39mUsing mock Redis client for development. This should not be used in production.
2025-06-04T21:55:02.5829249Z 
2025-06-04T21:55:02.7645411Z  [31m❯[39m src/hooks/__tests__/useNotificationPreferences.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 52[2mms[22m[39m
2025-06-04T21:55:02.7656738Z    [32m✓[39m useNotificationPreferences[2m > [22mloads preferences on mount[32m 17[2mms[22m[39m
2025-06-04T21:55:02.7658344Z [31m   [31m×[31m useNotificationPreferences[2m > [22mfalls back to default preferences on load error[39m[32m 9[2mms[22m[39m
2025-06-04T21:55:02.7659802Z [31m     → expected [object Object] to equal ObjectContaining[39m
2025-06-04T21:55:02.7660951Z    [32m✓[39m useNotificationPreferences[2m > [22mupdates channel preferences[32m 8[2mms[22m[39m
2025-06-04T21:55:02.7662286Z    [32m✓[39m useNotificationPreferences[2m > [22mupdates frequency preference[32m 4[2mms[22m[39m
2025-06-04T21:55:02.7663627Z    [32m✓[39m useNotificationPreferences[2m > [22mupdates quiet hours preferences[32m 4[2mms[22m[39m
2025-06-04T21:55:02.7664959Z    [32m✓[39m useNotificationPreferences[2m > [22mupdates category preferences[32m 5[2mms[22m[39m
2025-06-04T21:55:02.7666223Z    [32m✓[39m useNotificationPreferences[2m > [22mhandles update errors[32m 4[2mms[22m[39m
2025-06-04T21:55:03.8961062Z [90mstderr[2m | src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts[2m > [22m[2mpatternRecognition Integration[2m > [22m[2mpattern Detection[2m > [22m[2mshould detect simple patterns
2025-06-04T21:55:03.8965163Z [22m[39m[2025-06-04T21:55:03.894Z] [INFO] [pattern-recognition-service] Analyzing long-term trends {"clientId":"user123","startDate":"2025-06-04T21:55:00.894Z","endDate":"2025-06-04T21:55:03.894Z"}
2025-06-04T21:55:03.8968730Z [2025-06-04T21:55:03.895Z] [ERROR] [pattern-recognition-service] Error retrieving client data points {"clientId":"user123","error":{}}
2025-06-04T21:55:03.8973664Z 
2025-06-04T21:55:03.8979395Z [90mstderr[2m | src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts[2m > [22m[2mpatternRecognition Integration[2m > [22m[2mpattern Detection[2m > [22m[2mshould detect simple patterns
2025-06-04T21:55:03.8983711Z [22m[39m[2025-06-04T21:55:03.895Z] [ERROR] [pattern-recognition-service] Error analyzing long-term trends {"clientId":"user123","error":{}}
2025-06-04T21:55:03.8986355Z 
2025-06-04T21:55:03.9084113Z [90mstderr[2m | src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts[2m > [22m[2mpatternRecognition Integration[2m > [22m[2mpattern Analysis[2m > [22m[2mshould analyze risk factor correlations
2025-06-04T21:55:03.9093410Z [22m[39m[2025-06-04T21:55:03.906Z] [INFO] [pattern-recognition-service] Analyzing risk factor correlations {"clientId":"user123","analysesCount":2}
2025-06-04T21:55:03.9094327Z 
2025-06-04T21:55:03.9096213Z [90mstderr[2m | src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts[2m > [22m[2mpatternRecognition Integration[2m > [22m[2mpattern Analysis[2m > [22m[2mshould analyze risk factor correlations
2025-06-04T21:55:03.9098763Z [22m[39m[2025-06-04T21:55:03.906Z] [INFO] [pattern-recognition-service] Cached risk correlation results {"clientId":"user123","correlationCount":1}
2025-06-04T21:55:03.9099859Z 
2025-06-04T21:55:03.9179853Z  [31m❯[39m src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 24[2mms[22m[39m
2025-06-04T21:55:03.9182265Z [31m   [31m×[31m patternRecognition Integration[2m > [22mpattern Detection[2m > [22mshould detect simple patterns[39m[32m 12[2mms[22m[39m
2025-06-04T21:55:03.9184284Z [31m     → Failed to analyze trends: Data retrieval failed: this.sessionRepository.getSessions is not a function[39m
2025-06-04T21:55:03.9186394Z [31m   [31m×[31m patternRecognition Integration[2m > [22mpattern Detection[2m > [22mshould detect complex patterns[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:03.9187788Z [31m     → testId is not defined[39m
2025-06-04T21:55:03.9189626Z [31m   [31m×[31m patternRecognition Integration[2m > [22mpattern Analysis[2m > [22mshould analyze risk factor correlations[39m[32m 10[2mms[22m[39m
2025-06-04T21:55:03.9191886Z [31m     → expected [ { primaryFactor: 'anxiety', …(4) } ] to deep equally contain ObjectContaining{…}[39m
2025-06-04T21:55:05.0750896Z  [31m❯[39m src/components/chat/__tests__/TherapyStyleSelector.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 53[2mms[22m[39m
2025-06-04T21:55:05.0756073Z [31m   [31m×[31m TherapyStyleSelector[2m > [22mrenders all therapy styles[39m[32m 32[2mms[22m[39m
2025-06-04T21:55:05.0757892Z [31m     → [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:55:05.0759903Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:55:05.0760635Z [39m
2025-06-04T21:55:05.0761707Z [31m   [31m×[31m TherapyStyleSelector[2m > [22mmarks the selected style as active[39m[32m 4[2mms[22m[39m
2025-06-04T21:55:05.0763989Z [31m     → [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:55:05.0765546Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:55:05.0766328Z [39m
2025-06-04T21:55:05.0767457Z [31m   [31m×[31m TherapyStyleSelector[2m > [22mcalls onSelectStyle when a style is clicked[39m[32m 3[2mms[22m[39m
2025-06-04T21:55:05.0769564Z [31m     → [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:55:05.0809717Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:55:05.0810478Z [39m
2025-06-04T21:55:05.0811653Z [31m   [31m×[31m TherapyStyleSelector[2m > [22mshows the detail panel for the selected style[39m[32m 3[2mms[22m[39m
2025-06-04T21:55:05.0813639Z [31m     → [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:55:05.0815084Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:55:05.0815809Z [39m
2025-06-04T21:55:05.0816866Z [31m   [31m×[31m TherapyStyleSelector[2m > [22mupdates the detail panel on hover[39m[32m 5[2mms[22m[39m
2025-06-04T21:55:05.0818783Z [31m     → [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:55:05.0820593Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:55:05.0821318Z [39m
2025-06-04T21:55:05.0822524Z [31m   [31m×[31m TherapyStyleSelector[2m > [22mgets and displays recommended styles based on issue[39m[32m 2[2mms[22m[39m
2025-06-04T21:55:05.0824520Z [31m     → [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:55:05.0826179Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:55:05.0826868Z [39m
2025-06-04T21:55:05.0828144Z [31m   [31m×[31m TherapyStyleSelector[2m > [22mdoes not show recommendations when showRecommendations is false[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:05.0830486Z [31m     → [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T21:55:05.0831926Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T21:55:05.0832644Z [39m
2025-06-04T21:55:06.6838155Z [90mstdout[2m | src/components/notification/__tests__/NotificationPreferences.test.tsx
2025-06-04T21:55:06.6841230Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:55:06.6841791Z   SSR: [32m''[39m,
2025-06-04T21:55:06.6842245Z   VITEST_WORKER_ID: [32m'79'[39m,
2025-06-04T21:55:06.6842698Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:55:06.6843338Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:06.6844600Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:06.6845802Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:06.6846512Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:55:06.6847139Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:55:06.6847985Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:55:06.6852685Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:55:06.6856061Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:55:06.6856975Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:55:06.6857780Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:55:06.6858295Z   VITEST: [32m'true'[39m,
2025-06-04T21:55:06.6858840Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:55:06.6860211Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:55:06.6861477Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:06.6871165Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:55:06.6871909Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:55:06.6872724Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:55:06.6873484Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:55:06.6874238Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:55:06.6874991Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:55:06.6875631Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:55:06.6876368Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:55:06.6877211Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:55:06.6878052Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:55:06.6878746Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:55:06.6880159Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:06.6881182Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:55:06.6881772Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:55:06.6882615Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:55:06.6883754Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:55:06.6884525Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:55:06.6885224Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:55:06.6885869Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:55:06.6886397Z   MODE: [32m'test'[39m,
2025-06-04T21:55:06.6887078Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:06.6887856Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:55:06.6888408Z   CI: [32m'true'[39m,
2025-06-04T21:55:06.6888962Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:55:06.6890202Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:55:06.6890807Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:55:06.6891578Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:06.6892444Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:06.6893161Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:55:06.6893921Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:55:06.6894538Z   PROD: [32m''[39m,
2025-06-04T21:55:06.6895173Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:55:06.6895829Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:55:06.6896386Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:55:06.6897031Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:55:06.6897686Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:55:06.6898818Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:06.6900165Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:55:06.6900782Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:55:06.6901319Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:55:06.6901950Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:55:06.6902789Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:55:06.6903467Z   USER: [32m'runner'[39m,
2025-06-04T21:55:06.6903961Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:55:06.6904414Z   SHLVL: [32m'1'[39m,
2025-06-04T21:55:06.6904936Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:55:06.6905720Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:06.6906609Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:55:06.6908128Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:06.6909444Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:55:06.6909988Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:55:06.6910565Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:55:06.6911128Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:55:06.6911899Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:55:06.6912813Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:55:06.6913537Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:55:06.6914297Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:55:06.6914972Z   VITEST_POOL_ID: [32m'1'[39m,
2025-06-04T21:55:06.6915653Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:06.6916584Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:55:06.6917268Z   DEV: [32m'1'[39m,
2025-06-04T21:55:06.6917771Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:55:06.6918362Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:55:06.6918907Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:55:06.6919757Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:55:06.6920684Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:55:06.6921859Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:55:06.6922661Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:55:06.6923318Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:55:06.6924112Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:06.6924904Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:55:06.6925428Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:55:06.6926094Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:55:06.6926742Z   TEST: [32m'true'[39m,
2025-06-04T21:55:06.6927235Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:55:06.6927965Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:55:06.6928611Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:55:06.6929359Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:55:06.6929930Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:55:06.6931247Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:55:06.6932833Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:55:06.6933766Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:55:06.6934311Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:55:06.6934865Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:55:06.6935382Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:55:06.6935940Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:55:06.6937335Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:55:06.6938664Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:06.6939526Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:55:06.6940601Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:55:06.6941569Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:55:06.6942092Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:55:06.6942904Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:55:06.6943812Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:55:06.6944479Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:55:06.6945153Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:06.6946105Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:55:06.6946736Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:55:06.6947500Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:55:06.6948260Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:55:06.6948965Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:06.6949804Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:55:06.6950620Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:06.6951455Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:55:06.6952057Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:55:06.6958661Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:55:06.6963806Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:55:06.6964433Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:55:06.6965244Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:06.6965912Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:55:06.6966421Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:55:06.6967238Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:55:06.6968036Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:06.6968776Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:06.6969939Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:55:06.6970927Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:55:06.6971606Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:55:06.6972268Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:06.6973490Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:55:06.6974646Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:55:06.6975327Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:55:06.6975928Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:55:06.6976595Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:06.6977405Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:55:06.6978195Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:55:06.6978869Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:55:06.6979700Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:55:06.6980413Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:55:06.6981234Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:55:06.6981747Z }
2025-06-04T21:55:06.6981908Z 
2025-06-04T21:55:06.7602912Z [90mstderr[2m | src/components/notification/__tests__/NotificationPreferences.test.tsx
2025-06-04T21:55:06.7604387Z [22m[39mUsing mock Redis client for development. This should not be used in production.
2025-06-04T21:55:06.7604963Z 
2025-06-04T21:55:07.2675741Z  [31m❯[39m src/lib/ai/temporal/__tests__/patternDetection.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 22[2mms[22m[39m
2025-06-04T21:55:07.2681291Z [31m   [31m×[31m patternDetection[2m > [22mdetectTemporalPatterns[2m > [22mshould detect oscillation patterns in emotional data[39m[32m 15[2mms[22m[39m
2025-06-04T21:55:07.2686814Z [31m     → expected [] to have a length of 2 but got +0[39m
2025-06-04T21:55:07.2688602Z [31m   [31m×[31m patternDetection[2m > [22mdetectTemporalPatterns[2m > [22mshould detect both quadrant transitions and oscillations[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:07.2690316Z [31m     → expected 0 to be greater than 0[39m
2025-06-04T21:55:07.2692009Z [31m   [31m×[31m patternDetection[2m > [22manalyzePatterns[2m > [22mshould analyze oscillation patterns and generate insights[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:07.2693352Z [31m     → expected undefined to be defined[39m
2025-06-04T21:55:07.2694947Z [31m   [31m×[31m patternDetection[2m > [22manalyzePatterns[2m > [22mshould combine insights from different pattern types[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:07.2696273Z [31m     → expected undefined to be defined[39m
2025-06-04T21:55:07.2697722Z [31m   [31m×[31m patternDetection[2m > [22manalyzePatterns[2m > [22mshould handle empty pattern list[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:07.2698896Z [31m     → expected undefined to equal [39m
2025-06-04T21:55:07.2700663Z [31m   [31m×[31m patternDetection[2m > [22manalyzePatterns[2m > [22mshould prioritize stronger patterns in insights[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:07.2702454Z [31m     → Cannot read properties of undefined (reading 'findIndex')[39m
2025-06-04T21:55:08.3880840Z  [32m✓[39m src/simulator/context/__tests__/SimulatorContext.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[32m 75[2mms[22m[39m
2025-06-04T21:55:09.4994134Z  [31m❯[39m src/lib/audit/__tests__/analysis.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 48[2mms[22m[39m
2025-06-04T21:55:09.4998992Z [31m   [31m×[31m Audit Analysis[2m > [22mdetectHighFrequency[2m > [22mshould detect high frequency access patterns[39m[32m 34[2mms[22m[39m
2025-06-04T21:55:09.5001011Z [31m     → expected { type: 'high_frequency', …(3) } to match object { type: 'high_frequency', …(3) }[39m
2025-06-04T21:55:09.5030218Z    [32m✓[39m Audit Analysis[2m > [22mdetectHighFrequency[2m > [22mshould not detect patterns below threshold[32m 1[2mms[22m[39m
2025-06-04T21:55:09.5032192Z [31m   [31m×[31m Audit Analysis[2m > [22mdetectOddHours[2m > [22mshould detect access during unusual hours[39m[32m 4[2mms[22m[39m
2025-06-04T21:55:09.5033726Z [31m     → expected { type: 'odd_hours', …(3) } to match object { type: 'odd_hours', …(3) }[39m
2025-06-04T21:55:09.5035180Z    [32m✓[39m Audit Analysis[2m > [22mdetectOddHours[2m > [22mshould not detect patterns during normal hours[32m 0[2mms[22m[39m
2025-06-04T21:55:09.5037184Z [31m   [31m×[31m Audit Analysis[2m > [22mdetectSensitiveAccess[2m > [22mshould detect frequent access to sensitive resources[39m[32m 5[2mms[22m[39m
2025-06-04T21:55:09.5038931Z [31m     → expected { type: 'sensitive_access', …(3) } to match object { type: 'sensitive_access', …(3) }[39m
2025-06-04T21:55:09.5040870Z    [32m✓[39m Audit Analysis[2m > [22mdetectSensitiveAccess[2m > [22mshould not detect patterns for non-sensitive resources[32m 1[2mms[22m[39m
2025-06-04T21:55:09.5042778Z [31m   [31m×[31m Audit Analysis[2m > [22mdetectUnusualPatterns[2m > [22mshould combine all detection methods[39m[32m 2[2mms[22m[39m
2025-06-04T21:55:09.5044223Z [31m     → expected [ { type: 'odd_hours', …(3) }, …(3) ] to have a length of 3 but got 4[39m
2025-06-04T21:55:10.0216604Z  [31m❯[39m src/lib/ai/temporal/__tests__/oscillations.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 13[2mms[22m[39m
2025-06-04T21:55:10.0218275Z    [32m✓[39m oscillations[2m > [22mdetectOscillations[2m > [22mshould return empty array for empty input[32m 2[2mms[22m[39m
2025-06-04T21:55:10.0219490Z    [32m✓[39m oscillations[2m > [22mdetectOscillations[2m > [22mshould return empty array for too few points[32m 0[2mms[22m[39m
2025-06-04T21:55:10.0220916Z [31m   [31m×[31m oscillations[2m > [22mdetectOscillations[2m > [22mshould detect simple oscillation pattern[39m[32m 8[2mms[22m[39m
2025-06-04T21:55:10.0221603Z [31m     → expected [] to have a length of 1 but got +0[39m
2025-06-04T21:55:10.0222363Z    [32m✓[39m oscillations[2m > [22mdetectOscillations[2m > [22mshould not detect oscillation below minimum amplitude[32m 0[2mms[22m[39m
2025-06-04T21:55:10.0223394Z [31m   [31m×[31m oscillations[2m > [22mdetectOscillations[2m > [22mshould detect oscillations in all dimensions[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:10.0224062Z [31m     → expected [] to have a length of 1 but got +0[39m
2025-06-04T21:55:10.0224821Z [31m   [31m×[31m oscillations[2m > [22mdetectOscillations[2m > [22mshould include frequency in description[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:10.0225464Z [31m     → expected [] to have a length of 1 but got +0[39m
2025-06-04T21:55:13.0321548Z [90mstderr[2m | src/components/auth/__tests__/RegisterForm.test.tsx[2m > [22m[2mRegisterForm[2m > [22m[2mannounces successful registration
2025-06-04T21:55:13.0323304Z [22m[39mRegistration error: TypeError: Cannot read properties of undefined (reading 'success')
2025-06-04T21:55:13.0325019Z     at Object.handleSubmit [as onSubmit] [90m(/home/runner/work/pixelated/pixelated/[39msrc/components/auth/RegisterForm.tsx:95:21[90m)[39m
2025-06-04T21:55:13.0325897Z 
2025-06-04T21:55:14.3174607Z  [31m❯[39m src/components/auth/__tests__/RegisterForm.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 1960[2mms[22m[39m
2025-06-04T21:55:14.3176642Z [31m   [31m×[31m RegisterForm[2m > [22mrenders all form fields with proper accessibility attributes[39m[32m 83[2mms[22m[39m
2025-06-04T21:55:14.3177989Z [31m     → Expected element to have attribute "aria-invalid" with value "false"[39m
2025-06-04T21:55:14.3179395Z    [32m✓[39m RegisterForm[2m > [22mshows and announces error messages appropriately[32m 164[2mms[22m[39m
2025-06-04T21:55:14.3180705Z    [33m[2m✓[22m[39m RegisterForm[2m > [22mannounces loading state to screen readers [33m 334[2mms[22m[39m
2025-06-04T21:55:14.3182025Z [31m   [31m×[31m RegisterForm[2m > [22mannounces successful registration[39m[33m 1340[2mms[22m[39m
2025-06-04T21:55:14.3183019Z [31m     → Invalid Chai property: toHaveTextContent
2025-06-04T21:55:14.3183422Z 
2025-06-04T21:55:14.3183719Z Ignored nodes: comments, script, style
2025-06-04T21:55:14.3184227Z [36m<html>[31m
2025-06-04T21:55:14.3184601Z   [36m<head />[31m
2025-06-04T21:55:14.3184995Z   [36m<body>[31m
2025-06-04T21:55:14.3185357Z     [36m<div>[31m
2025-06-04T21:55:14.3185686Z       [36m<div[31m
2025-06-04T21:55:14.3186129Z         [33maria-live[31m=[32m"polite"[31m
2025-06-04T21:55:14.3186695Z         [33mclass[31m=[32m"auth-success"[31m
2025-06-04T21:55:14.3187327Z         [33mrole[31m=[32m"alert"[31m
2025-06-04T21:55:14.3187852Z       [36m>[31m
2025-06-04T21:55:14.3188091Z         [36m<h2>[31m
2025-06-04T21:55:14.3188383Z           [0mRegistration Successful[0m
2025-06-04T21:55:14.3188663Z         [36m</h2>[31m
2025-06-04T21:55:14.3188883Z         [36m<p>[31m
2025-06-04T21:55:14.3189711Z           [0mPlease check your email to verify your account. If you don't see it within a few minutes, check your spam folder.[0m
2025-06-04T21:55:14.3190202Z         [36m</p>[31m
2025-06-04T21:55:14.3190436Z       [36m</div>[31m
2025-06-04T21:55:14.3190639Z     [36m</div>[31m
2025-06-04T21:55:14.3190844Z   [36m</body>[31m
2025-06-04T21:55:14.3191063Z [36m</html>[31m[39m
2025-06-04T21:55:14.3191618Z    [32m✓[39m RegisterForm[2m > [22mprovides accessible links for Terms and Privacy Policy[32m 19[2mms[22m[39m
2025-06-04T21:55:14.3192408Z [31m   [31m×[31m RegisterForm[2m > [22mmakes Google sign-in button accessible[39m[32m 19[2mms[22m[39m
2025-06-04T21:55:14.3193126Z [31m     → Expected element to have attribute "aria-label" with value "Sign up with Google"[39m
2025-06-04T21:55:15.2339423Z [90mstdout[2m | src/components/notification/__tests__/NotificationCenter.test.tsx
2025-06-04T21:55:15.2340594Z [22m[39m[env.config] Environment variables at build: {
2025-06-04T21:55:15.2341187Z   SSR: [32m''[39m,
2025-06-04T21:55:15.2341681Z   VITEST_WORKER_ID: [32m'90'[39m,
2025-06-04T21:55:15.2342214Z   BASE_URL: [32m'/'[39m,
2025-06-04T21:55:15.2342938Z   INIT_CWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:15.2344334Z   GITHUB_STEP_SUMMARY: [32m'/home/runner/work/_temp/_runner_file_commands/step_summary_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:15.2345686Z   ANDROID_NDK_HOME: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:15.2346448Z   REDIS_KEY_PREFIX: [32m'test:'[39m,
2025-06-04T21:55:15.2347082Z   REDIS_URL: [32m'redis://localhost:6379'[39m,
2025-06-04T21:55:15.2347891Z   GITHUB_WORKFLOW_SHA: [32m'a7ab312bee181441b3edbb4a374fb42bff08c442'[39m,
2025-06-04T21:55:15.2353002Z   PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.bin:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/22.15.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin'[39m,
2025-06-04T21:55:15.2356417Z   GITHUB_WORKFLOW: [32m'CI'[39m,
2025-06-04T21:55:15.2357343Z   npm_package_json: [32m'/home/runner/work/pixelated/pixelated/package.json'[39m,
2025-06-04T21:55:15.2358203Z   JOURNAL_STREAM: [32m'9:9641'[39m,
2025-06-04T21:55:15.2358729Z   VITEST: [32m'true'[39m,
2025-06-04T21:55:15.2359480Z   npm_package_name: [32m'pixelated'[39m,
2025-06-04T21:55:15.2360238Z   GITHUB_API_URL: [32m'https://api.github.com'[39m,
2025-06-04T21:55:15.2361513Z   GITHUB_PATH: [32m'/home/runner/work/_temp/_runner_file_commands/add_path_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:15.2362625Z   GHCUP_INSTALL_BASE_PREFIX: [32m'/usr/local'[39m,
2025-06-04T21:55:15.2363373Z   BOOTSTRAP_HASKELL_NONINTERACTIVE: [32m'1'[39m,
2025-06-04T21:55:15.2364232Z   GITHUB_SHA: [32m'eee88bf9c2234d2ab50d5d867568ad2a7638a9ac'[39m,
2025-06-04T21:55:15.2364941Z   npm_command: [32m'run-script'[39m,
2025-06-04T21:55:15.2365691Z   GOROOT_1_21_X64: [32m'/opt/hostedtoolcache/go/1.21.13/x64'[39m,
2025-06-04T21:55:15.2366424Z   DOTNET_SKIP_FIRST_TIME_EXPERIENCE: [32m'1'[39m,
2025-06-04T21:55:15.2366992Z   GITHUB_RUN_NUMBER: [32m'4'[39m,
2025-06-04T21:55:15.2367672Z   GITHUB_GRAPHQL_URL: [32m'https://api.github.com/graphql'[39m,
2025-06-04T21:55:15.2368492Z   GECKOWEBDRIVER: [32m'/usr/local/share/gecko_driver'[39m,
2025-06-04T21:55:15.2384709Z   AZURE_EXTENSION_DIR: [32m'/opt/az/azcliextensions'[39m,
2025-06-04T21:55:15.2385499Z   GITHUB_REF_TYPE: [32m'branch'[39m,
2025-06-04T21:55:15.2386721Z   GITHUB_OUTPUT: [32m'/home/runner/work/_temp/_runner_file_commands/set_output_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:15.2387741Z   GITHUB_HEAD_REF: [32m'stacy'[39m,
2025-06-04T21:55:15.2388378Z   CONDA: [32m'/usr/share/miniconda'[39m,
2025-06-04T21:55:15.2389444Z   POWERSHELL_DISTRIBUTION_CHANNEL: [32m'GitHub-Actions-ubuntu24'[39m,
2025-06-04T21:55:15.2390362Z   SWIFT_PATH: [32m'/usr/share/swift/usr/bin'[39m,
2025-06-04T21:55:15.2391082Z   GITHUB_REPOSITORY_OWNER_ID: [32m'150661001'[39m,
2025-06-04T21:55:15.2391844Z   RUNNER_TEMP: [32m'/home/runner/work/_temp'[39m,
2025-06-04T21:55:15.2392503Z   GITHUB_RETENTION_DAYS: [32m'90'[39m,
2025-06-04T21:55:15.2393028Z   MODE: [32m'test'[39m,
2025-06-04T21:55:15.2393709Z   NODE: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:15.2394492Z   XDG_CONFIG_HOME: [32m'/home/runner/.config'[39m,
2025-06-04T21:55:15.2395029Z   CI: [32m'true'[39m,
2025-06-04T21:55:15.2395923Z   GRADLE_HOME: [32m'/usr/share/gradle-8.14'[39m,
2025-06-04T21:55:15.2396592Z   GITHUB_RUN_ID: [32m'15453495831'[39m,
2025-06-04T21:55:15.2397198Z   NVM_DIR: [32m'/home/runner/.nvm'[39m,
2025-06-04T21:55:15.2397985Z   PNPM_SCRIPT_SRC_DIR: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:15.2398882Z   JAVA_HOME: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:15.2399976Z   RUNNER_ENVIRONMENT: [32m'github-hosted'[39m,
2025-06-04T21:55:15.2400761Z   GITHUB_REPOSITORY: [32m'nochadisfaction/pixelated'[39m,
2025-06-04T21:55:15.2401389Z   PROD: [32m''[39m,
2025-06-04T21:55:15.2402017Z   JAVA_HOME_8_X64: [32m'/usr/lib/jvm/temurin-8-jdk-amd64'[39m,
2025-06-04T21:55:15.2402690Z   PIPX_HOME: [32m'/opt/pipx'[39m,
2025-06-04T21:55:15.2403258Z   SYSTEMD_EXEC_PID: [32m'1879'[39m,
2025-06-04T21:55:15.2403912Z   npm_config_verify_deps_before_run: [32m'false'[39m,
2025-06-04T21:55:15.2404547Z   DOTNET_NOLOGO: [32m'1'[39m,
2025-06-04T21:55:15.2405713Z   GITHUB_STATE: [32m'/home/runner/work/_temp/_runner_file_commands/save_state_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:15.2406873Z   RUNNER_WORKSPACE: [32m'/home/runner/work/pixelated'[39m,
2025-06-04T21:55:15.2407493Z   NODE_ENV: [32m'test'[39m,
2025-06-04T21:55:15.2408039Z   DOTNET_MULTILEVEL_LOOKUP: [32m'0'[39m,
2025-06-04T21:55:15.2408683Z   SKIP_BROWSER_COMPAT_TESTS: [32m'true'[39m,
2025-06-04T21:55:15.2410000Z   CHROMEWEBDRIVER: [32m'/usr/local/share/chromedriver-linux64'[39m,
2025-06-04T21:55:15.2410715Z   USER: [32m'runner'[39m,
2025-06-04T21:55:15.2411221Z   SGX_AESM_ADDR: [32m'1'[39m,
2025-06-04T21:55:15.2411666Z   SHLVL: [32m'1'[39m,
2025-06-04T21:55:15.2412180Z   GITHUB_REPOSITORY_ID: [32m'991531245'[39m,
2025-06-04T21:55:15.2412985Z   ANDROID_NDK: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:15.2413901Z   GOROOT_1_22_X64: [32m'/opt/hostedtoolcache/go/1.22.12/x64'[39m,
2025-06-04T21:55:15.2415148Z   GITHUB_ENV: [32m'/home/runner/work/_temp/_runner_file_commands/set_env_c19ea332-5ce3-454f-af7e-7c4ef08bd3be'[39m,
2025-06-04T21:55:15.2416146Z   GITHUB_REF_NAME: [32m'2/merge'[39m,
2025-06-04T21:55:15.2416668Z   LANG: [32m'C.UTF-8'[39m,
2025-06-04T21:55:15.2417197Z   HOME: [32m'/home/runner'[39m,
2025-06-04T21:55:15.2417764Z   ImageVersion: [32m'20250511.1.0'[39m,
2025-06-04T21:55:15.2418535Z   SELENIUM_JAR_PATH: [32m'/usr/share/java/selenium-server.jar'[39m,
2025-06-04T21:55:15.2419788Z   npm_config_registry: [32m'https://registry.npmjs.org/'[39m,
2025-06-04T21:55:15.2420548Z   GITHUB_REF: [32m'refs/pull/2/merge'[39m,
2025-06-04T21:55:15.2421316Z   JAVA_HOME_11_X64: [32m'/usr/lib/jvm/temurin-11-jdk-amd64'[39m,
2025-06-04T21:55:15.2421987Z   VITEST_POOL_ID: [32m'1'[39m,
2025-06-04T21:55:15.2422676Z   JAVA_HOME_17_X64: [32m'/usr/lib/jvm/temurin-17-jdk-amd64'[39m,
2025-06-04T21:55:15.2423605Z   ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE: [32m'/opt/actionarchivecache'[39m,
2025-06-04T21:55:15.2424296Z   DEV: [32m'1'[39m,
2025-06-04T21:55:15.2424815Z   PIPX_BIN_DIR: [32m'/opt/pipx_bin'[39m,
2025-06-04T21:55:15.2425419Z   VITEST_TIMEOUT: [32m'30000'[39m,
2025-06-04T21:55:15.2425958Z   GITHUB_ACTION_REF: [32m''[39m,
2025-06-04T21:55:15.2426610Z   GITHUB_REPOSITORY_OWNER: [32m'nochadisfaction'[39m,
2025-06-04T21:55:15.2427564Z   ANDROID_NDK_LATEST_HOME: [32m'/usr/local/lib/android/sdk/ndk/28.1.13356709'[39m,
2025-06-04T21:55:15.2428509Z   VCPKG_INSTALLATION_ROOT: [32m'/usr/local/share/vcpkg'[39m,
2025-06-04T21:55:15.2429506Z   CHROME_BIN: [32m'/usr/bin/google-chrome'[39m,
2025-06-04T21:55:15.2430158Z   SKIP_PERFORMANCE_TESTS: [32m'true'[39m,
2025-06-04T21:55:15.2430990Z   ANDROID_NDK_ROOT: [32m'/usr/local/lib/android/sdk/ndk/27.2.12479018'[39m,
2025-06-04T21:55:15.2431771Z   GITHUB_EVENT_NAME: [32m'pull_request'[39m,
2025-06-04T21:55:15.2432302Z   FORCE_TTY: [32m''[39m,
2025-06-04T21:55:15.2432983Z   JAVA_HOME_21_X64: [32m'/usr/lib/jvm/temurin-21-jdk-amd64'[39m,
2025-06-04T21:55:15.2433881Z   TEST: [32m'true'[39m,
2025-06-04T21:55:15.2434371Z   GITHUB_BASE_REF: [32m'main'[39m,
2025-06-04T21:55:15.2435145Z   MEMORY_PRESSURE_WRITE: [32m'c29tZSAyMDAwMDAgMjAwMDAwMAA='[39m,
2025-06-04T21:55:15.2435841Z   GITHUB_RUN_ATTEMPT: [32m'1'[39m,
2025-06-04T21:55:15.2436362Z   ImageOS: [32m'ubuntu24'[39m,
2025-06-04T21:55:15.2436951Z   npm_config_frozen_lockfile: [32m''[39m,
2025-06-04T21:55:15.2438304Z   npm_lifecycle_script: [32m'vitest --pool\\=threads --poolOptions.threads.minThreads\\=0 --poolOptions.threads.maxThreads\\=3'[39m,
2025-06-04T21:55:15.2440122Z   GITHUB_WORKFLOW_REF: [32m'nochadisfaction/pixelated/.github/workflows/ci.yml@refs/pull/2/merge'[39m,
2025-06-04T21:55:15.2441031Z   RUNNER_ARCH: [32m'X64'[39m,
2025-06-04T21:55:15.2441561Z   GITHUB_ACTION_REPOSITORY: [32m''[39m,
2025-06-04T21:55:15.2442085Z   RUNNER_OS: [32m'Linux'[39m,
2025-06-04T21:55:15.2442561Z   VITEST_MODE: [32m'RUN'[39m,
2025-06-04T21:55:15.2443090Z   ENABLE_RUNNER_TRACING: [32m'true'[39m,
2025-06-04T21:55:15.2444546Z   npm_config_node_gyp: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js'[39m,
2025-06-04T21:55:15.2445897Z   AGENT_TOOLSDIRECTORY: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:15.2446567Z   LOGNAME: [32m'runner'[39m,
2025-06-04T21:55:15.2447644Z   MEMORY_PRESSURE_WATCH: [32m'/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure'[39m,
2025-06-04T21:55:15.2448859Z   SHELL: [32m'/bin/bash'[39m,
2025-06-04T21:55:15.2449648Z   ANT_HOME: [32m'/usr/share/ant'[39m,
2025-06-04T21:55:15.2450453Z   RUNNER_TRACKING_ID: [32m'github_0474ef71-a19b-43e3-af32-3e437c9d9619'[39m,
2025-06-04T21:55:15.2451390Z   INVOCATION_ID: [32m'3e73ca65b1df4c8b9e1f4d3cb3803cb0'[39m,
2025-06-04T21:55:15.2452088Z   GITHUB_ACTION: [32m'__run_13'[39m,
2025-06-04T21:55:15.2452751Z   GITHUB_TRIGGERING_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:15.2453461Z   npm_package_engines_node: [32m'22.x'[39m,
2025-06-04T21:55:15.2454100Z   XDG_RUNTIME_DIR: [32m'/run/user/1001'[39m,
2025-06-04T21:55:15.2454860Z   _: [32m'/home/runner/setup-pnpm/node_modules/.bin/pnpm'[39m,
2025-06-04T21:55:15.2455670Z   RUNNER_NAME: [32m'GitHub Actions 1000000098'[39m,
2025-06-04T21:55:15.2456398Z   RUNNER_TOOL_CACHE: [32m'/opt/hostedtoolcache'[39m,
2025-06-04T21:55:15.2457006Z   SKIP_FHE_TESTS: [32m'true'[39m,
2025-06-04T21:55:15.2457858Z   npm_node_execpath: [32m'/opt/hostedtoolcache/node/22.15.0/x64/bin/node'[39m,
2025-06-04T21:55:15.2458697Z   DEBIAN_FRONTEND: [32m'noninteractive'[39m,
2025-06-04T21:55:15.2459447Z   GITHUB_ACTIONS: [32m'true'[39m,
2025-06-04T21:55:15.2465848Z   NODE_PATH: [32m'/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules/vitest/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/vitest@3.1.4_@types+debug@4.1.12_@types+node@22.15.24_@vitest+ui@3.1.4_jiti@2.4.2_jsdom_758f4ef16a15ae126057d7ff22b16d60/node_modules:/home/runner/work/pixelated/pixelated/node_modules/.pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules:/home/runner/setup-pnpm/node_modules/.pnpm/node_modules'[39m,
2025-06-04T21:55:15.2470971Z   npm_lifecycle_event: [32m'test'[39m,
2025-06-04T21:55:15.2471620Z   GITHUB_REF_PROTECTED: [32m'false'[39m,
2025-06-04T21:55:15.2472437Z   GITHUB_WORKSPACE: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:15.2473103Z   ACCEPT_EULA: [32m'Y'[39m,
2025-06-04T21:55:15.2473619Z   GITHUB_JOB: [32m'test'[39m,
2025-06-04T21:55:15.2474411Z   npm_config_user_agent: [32m'pnpm/10.11.0 npm/? node/v22.15.0 linux x64'[39m,
2025-06-04T21:55:15.2475204Z   GITHUB_ACTOR: [32m'nochadisfaction'[39m,
2025-06-04T21:55:15.2476274Z   ANDROID_SDK_ROOT: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:15.2477242Z   GITHUB_EVENT_PATH: [32m'/home/runner/work/_temp/_github_workflow/event.json'[39m,
2025-06-04T21:55:15.2478224Z   GOROOT_1_23_X64: [32m'/opt/hostedtoolcache/go/1.23.9/x64'[39m,
2025-06-04T21:55:15.2478900Z   SKIP_REDIS_TESTS: [32m'true'[39m,
2025-06-04T21:55:15.2479837Z   PWD: [32m'/home/runner/work/pixelated/pixelated'[39m,
2025-06-04T21:55:15.2481096Z   npm_execpath: [32m'/home/runner/setup-pnpm/node_modules/.pnpm/pnpm@10.11.0/node_modules/pnpm/bin/pnpm.cjs'[39m,
2025-06-04T21:55:15.2482242Z   HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: [32m'3650'[39m,
2025-06-04T21:55:15.2482915Z   HOMEBREW_NO_AUTO_UPDATE: [32m'1'[39m,
2025-06-04T21:55:15.2483518Z   npm_package_version: [32m'0.0.1'[39m,
2025-06-04T21:55:15.2484215Z   ANDROID_HOME: [32m'/usr/local/lib/android/sdk'[39m,
2025-06-04T21:55:15.2485024Z   PNPM_HOME: [32m'/home/runner/setup-pnpm/node_modules/.bin'[39m,
2025-06-04T21:55:15.2485831Z   GITHUB_SERVER_URL: [32m'https://github.com'[39m,
2025-06-04T21:55:15.2486487Z   GITHUB_ACTOR_ID: [32m'150661001'[39m,
2025-06-04T21:55:15.2487116Z   SKIP_CRYPTO_ROTATION_TEST: [32m'true'[39m,
2025-06-04T21:55:15.2487871Z   EDGEWEBDRIVER: [32m'/usr/local/share/edge_driver'[39m,
2025-06-04T21:55:15.2488690Z   npm_config__jsr_registry: [32m'https://npm.jsr.io/'[39m
2025-06-04T21:55:15.2489413Z }
2025-06-04T21:55:15.2489588Z 
2025-06-04T21:55:15.2937445Z [90mstderr[2m | src/components/notification/__tests__/NotificationCenter.test.tsx
2025-06-04T21:55:15.2944004Z [22m[39mUsing mock Redis client for development. This should not be used in production.
2025-06-04T21:55:15.2944564Z 
2025-06-04T21:55:16.5635173Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreatePersonalizationLayer[2m > [22m[2mshould create a personalization layer with default config
2025-06-04T21:55:16.5637668Z [22m[39m[2025-06-04T21:55:16.561Z] [INFO] [personalization-layer-factory] PersonalizationLayerFactory initialized
2025-06-04T21:55:16.5638399Z 
2025-06-04T21:55:16.5654100Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreatePersonalizationLayer[2m > [22m[2mshould create a personalization layer with default config
2025-06-04T21:55:16.5657526Z [90mstdout[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreatePersonalizationLayer[2m > [22m[2mshould create a personalization layer with default config
2025-06-04T21:55:16.5660285Z [22m[39m2025-06-04T21:55:16.563Z INFO [personalization-service] PersonalizationService initialized
2025-06-04T21:55:16.5661979Z 2025-06-04T21:55:16.563Z INFO [personalization-service] Personalization layer configuration updated {
2025-06-04T21:55:16.5663359Z   layerType: [32m'standard'[39m,
2025-06-04T21:55:16.5664578Z   strategies: [ [32m'preference-based'[39m, [32m'efficacy-based'[39m, [32m'characteristics-based'[39m ]
2025-06-04T21:55:16.5665546Z }
2025-06-04T21:55:16.5665965Z 
2025-06-04T21:55:16.5671119Z [22m[39m[2025-06-04T21:55:16.564Z] [INFO] [personalization-layer-factory] Created personalization layer {"type":"standard","enabledStrategies":3}
2025-06-04T21:55:16.5674074Z 
2025-06-04T21:55:16.5676280Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreatePersonalizationLayer[2m > [22m[2mshould create a personalization layer with enhanced config
2025-06-04T21:55:16.5680654Z [22m[39m[2025-06-04T21:55:16.566Z] [INFO] [personalization-layer-factory] PersonalizationLayerFactory initialized
2025-06-04T21:55:16.5681534Z 
2025-06-04T21:55:16.5912659Z [90mstdout[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreatePersonalizationLayer[2m > [22m[2mshould create a personalization layer with enhanced config
2025-06-04T21:55:16.5919626Z [22m[39m2025-06-04T21:55:16.566Z INFO [personalization-service] PersonalizationService initialized
2025-06-04T21:55:16.5925771Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreatePersonalizationLayer[2m > [22m[2mshould create a personalization layer with enhanced config
2025-06-04T21:55:16.5934171Z [22m[39m[2025-06-04T21:55:16.589Z] [INFO] [personalization-layer-factory] Created personalization layer {"type":"enhanced","enabledStrategies":5}
2025-06-04T21:55:16.5936173Z 2025-06-04T21:55:16.566Z INFO [personalization-service] Personalization layer configuration updated {
2025-06-04T21:55:16.5937219Z 
2025-06-04T21:55:16.5941265Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreatePersonalizationLayer[2m > [22m[2mshould create a personalization layer with custom config
2025-06-04T21:55:16.5943227Z   layerType: [32m'enhanced'[39m,
2025-06-04T21:55:16.5972244Z [22m[39m[2025-06-04T21:55:16.591Z] [INFO] [personalization-layer-factory] PersonalizationLayerFactory initialized
2025-06-04T21:55:16.5972979Z 
2025-06-04T21:55:16.5975476Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreatePersonalizationLayer[2m > [22m[2mshould create a personalization layer with custom config
2025-06-04T21:55:16.5978191Z [22m[39m[2025-06-04T21:55:16.591Z] [INFO] [personalization-layer-factory] Created personalization layer {"type":"custom","enabledStrategies":2}
2025-06-04T21:55:16.5979041Z 
2025-06-04T21:55:16.5981468Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould create optimal layer based on client data
2025-06-04T21:55:16.5983900Z [22m[39m[2025-06-04T21:55:16.592Z] [INFO] [personalization-layer-factory] PersonalizationLayerFactory initialized
2025-06-04T21:55:16.5984598Z 
2025-06-04T21:55:16.5986644Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould create optimal layer based on client data
2025-06-04T21:55:16.5989508Z [22m[39m[2025-06-04T21:55:16.593Z] [INFO] [personalization-layer-factory] Creating optimal personalization layer {"clientId":"test-client"}
2025-06-04T21:55:16.5990345Z 
2025-06-04T21:55:16.5990505Z   strategies: [
2025-06-04T21:55:16.5990998Z     [32m'preference-based'[39m,
2025-06-04T21:55:16.5991540Z     [32m'efficacy-based'[39m,
2025-06-04T21:55:16.5992102Z     [32m'characteristics-based'[39m,
2025-06-04T21:55:16.5992668Z     [32m'learning-style'[39m,
2025-06-04T21:55:16.5993164Z     [32m'cognitive-level'[39m
2025-06-04T21:55:16.5993549Z   ]
2025-06-04T21:55:16.5993823Z }
2025-06-04T21:55:16.5994643Z 2025-06-04T21:55:16.566Z INFO [personalization-service] Initializing ML models for personalization
2025-06-04T21:55:16.5995245Z 
2025-06-04T21:55:16.5997273Z [90mstdout[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreatePersonalizationLayer[2m > [22m[2mshould create a personalization layer with custom config
2025-06-04T21:55:16.6057405Z [22m[39m2025-06-04T21:55:16.591Z INFO [personalization-service] PersonalizationService initialized
2025-06-04T21:55:16.6058801Z 2025-06-04T21:55:16.591Z INFO [personalization-service] Personalization layer configuration updated {
2025-06-04T21:55:16.6059980Z   layerType: [32m'custom'[39m,
2025-06-04T21:55:16.6060785Z   strategies: [ [32m'preference-based'[39m, [32m'efficacy-based'[39m ]
2025-06-04T21:55:16.6061380Z }
2025-06-04T21:55:16.6061536Z 
2025-06-04T21:55:16.6063626Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould create optimal layer based on client data
2025-06-04T21:55:16.6083330Z [22m[39m[2025-06-04T21:55:16.599Z] [INFO] [personalization-layer-factory] Created personalization layer {"type":"adaptive","enabledStrategies":7}
2025-06-04T21:55:16.6084224Z 
2025-06-04T21:55:16.6086455Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould fall back to standard config if client profile not found
2025-06-04T21:55:16.6089045Z [22m[39m[2025-06-04T21:55:16.602Z] [INFO] [personalization-layer-factory] PersonalizationLayerFactory initialized
2025-06-04T21:55:16.6090037Z 
2025-06-04T21:55:16.6092237Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould fall back to standard config if client profile not found
2025-06-04T21:55:16.6094960Z [22m[39m[2025-06-04T21:55:16.602Z] [INFO] [personalization-layer-factory] Creating optimal personalization layer {"clientId":"unknown-client"}
2025-06-04T21:55:16.6095816Z 
2025-06-04T21:55:16.6098240Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould fall back to standard config if client profile not found
2025-06-04T21:55:16.6101355Z [22m[39m[2025-06-04T21:55:16.603Z] [WARN] [personalization-layer-factory] Client profile not found, using standard configuration {"clientId":"unknown-client"}
2025-06-04T21:55:16.6103224Z [2025-06-04T21:55:16.603Z] [INFO] [personalization-layer-factory] Created personalization layer {"type":"standard","enabledStrategies":3}
2025-06-04T21:55:16.6104063Z 
2025-06-04T21:55:16.6105985Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould handle errors gracefully
2025-06-04T21:55:16.6108297Z [22m[39m[2025-06-04T21:55:16.604Z] [INFO] [personalization-layer-factory] PersonalizationLayerFactory initialized
2025-06-04T21:55:16.6108985Z 
2025-06-04T21:55:16.6111136Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould handle errors gracefully
2025-06-04T21:55:16.6113649Z [22m[39m[2025-06-04T21:55:16.604Z] [INFO] [personalization-layer-factory] Creating optimal personalization layer {"clientId":"test-client"}
2025-06-04T21:55:16.6114466Z 
2025-06-04T21:55:16.6116375Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould handle errors gracefully
2025-06-04T21:55:16.6119040Z [22m[39m[2025-06-04T21:55:16.604Z] [ERROR] [personalization-layer-factory] Error creating optimal personalization layer {"clientId":"test-client","error":{}}
2025-06-04T21:55:16.6121218Z [2025-06-04T21:55:16.604Z] [INFO] [personalization-layer-factory] Created personalization layer {"type":"standard","enabledStrategies":3}
2025-06-04T21:55:16.6122054Z 
2025-06-04T21:55:16.6124115Z [90mstdout[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould create optimal layer based on client data
2025-06-04T21:55:16.6126364Z [22m[39m2025-06-04T21:55:16.593Z INFO [personalization-service] PersonalizationService initialized
2025-06-04T21:55:16.6127664Z 2025-06-04T21:55:16.593Z INFO [personalization-service] Personalization layer configuration updated {
2025-06-04T21:55:16.6128981Z   layerType: [32m'adaptive'[39m,
2025-06-04T21:55:16.6129620Z   strategies: [
2025-06-04T21:55:16.6130109Z     [32m'preference-based'[39m,
2025-06-04T21:55:16.6130639Z     [32m'efficacy-based'[39m,
2025-06-04T21:55:16.6131172Z     [32m'characteristics-based'[39m,
2025-06-04T21:55:16.6131734Z     [32m'learning-style'[39m,
2025-06-04T21:55:16.6132271Z     [32m'cognitive-level'[39m,
2025-06-04T21:55:16.6132743Z     [32m'cultural'[39m,
2025-06-04T21:55:16.6133228Z     [32m'age-appropriate'[39m
2025-06-04T21:55:16.6133596Z   ]
2025-06-04T21:55:16.6133867Z }
2025-06-04T21:55:16.6134682Z 2025-06-04T21:55:16.594Z INFO [personalization-service] Initializing ML models for personalization
2025-06-04T21:55:16.6135291Z 
2025-06-04T21:55:16.6137457Z [90mstdout[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould fall back to standard config if client profile not found
2025-06-04T21:55:16.6158506Z [22m[39m2025-06-04T21:55:16.603Z INFO [personalization-service] PersonalizationService initialized
2025-06-04T21:55:16.6160232Z 2025-06-04T21:55:16.603Z INFO [personalization-service] Personalization layer configuration updated {
2025-06-04T21:55:16.6161211Z   layerType: [32m'standard'[39m,
2025-06-04T21:55:16.6162271Z   strategies: [ [32m'preference-based'[39m, [32m'efficacy-based'[39m, [32m'characteristics-based'[39m ]
2025-06-04T21:55:16.6162988Z }
2025-06-04T21:55:16.6163376Z 
2025-06-04T21:55:16.6165339Z [90mstdout[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[2m > [22m[2mPersonalizationLayerFactory[2m > [22m[2mcreateOptimalPersonalizationLayer[2m > [22m[2mshould handle errors gracefully
2025-06-04T21:55:16.6167519Z [22m[39m2025-06-04T21:55:16.604Z INFO [personalization-service] PersonalizationService initialized
2025-06-04T21:55:16.6168835Z 2025-06-04T21:55:16.604Z INFO [personalization-service] Personalization layer configuration updated {
2025-06-04T21:55:16.6170030Z   layerType: [32m'standard'[39m,
2025-06-04T21:55:16.6171083Z   strategies: [ [32m'preference-based'[39m, [32m'efficacy-based'[39m, [32m'characteristics-based'[39m ]
2025-06-04T21:55:16.6171834Z }
2025-06-04T21:55:16.6171992Z 
2025-06-04T21:55:16.6197769Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts
2025-06-04T21:55:16.6199334Z [22m[39m2025-06-04T21:55:16.610Z ERROR [personalization-service] Error loading efficacyPrediction model {
2025-06-04T21:55:16.6200143Z   error: TypeError: fetch failed
2025-06-04T21:55:16.6200789Z   [90m    at node:internal/deps/undici/undici:13510:13[39m
2025-06-04T21:55:16.6201706Z   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
2025-06-04T21:55:16.6203439Z       at PersonalizationServiceImpl.loadModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:298:24[90m)[39m
2025-06-04T21:55:16.6204662Z       at async Promise.all (index 1)
2025-06-04T21:55:16.6206242Z       at PersonalizationServiceImpl.initializeMLModels [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:279:7[90m)[39m {
2025-06-04T21:55:16.6207620Z     [cause]: Error: getaddrinfo EAI_AGAIN ml-models-service
2025-06-04T21:55:16.6208529Z     [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
2025-06-04T21:55:16.6209362Z       errno: [33m-3001[39m,
2025-06-04T21:55:16.6209847Z       code: [32m'EAI_AGAIN'[39m,
2025-06-04T21:55:16.6210356Z       syscall: [32m'getaddrinfo'[39m,
2025-06-04T21:55:16.6210911Z       hostname: [32m'ml-models-service'[39m
2025-06-04T21:55:16.6211313Z     }
2025-06-04T21:55:16.6211602Z   },
2025-06-04T21:55:16.6216274Z   endpoint: [32m'http://ml-models-service/efficacy-prediction-model'[39m
2025-06-04T21:55:16.6217395Z }
2025-06-04T21:55:16.6217714Z 
2025-06-04T21:55:16.6218479Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts
2025-06-04T21:55:16.6220229Z [22m[39m2025-06-04T21:55:16.619Z ERROR [personalization-service] Failed to initialize ML models {
2025-06-04T21:55:16.6221231Z   error: Error: Failed to load efficacyPrediction model: fetch failed
2025-06-04T21:55:16.6223029Z       at PersonalizationServiceImpl.loadModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:331:13[90m)[39m
2025-06-04T21:55:16.6224765Z   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
2025-06-04T21:55:16.6225533Z       at async Promise.all (index 1)
2025-06-04T21:55:16.6227257Z       at PersonalizationServiceImpl.initializeMLModels [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:279:7[90m)[39m
2025-06-04T21:55:16.6228544Z }
2025-06-04T21:55:16.6228704Z 
2025-06-04T21:55:16.6248353Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts
2025-06-04T21:55:16.6249994Z [22m[39m2025-06-04T21:55:16.621Z ERROR [personalization-service] Error loading recommendation model {
2025-06-04T21:55:16.6250836Z   error: TypeError: fetch failed
2025-06-04T21:55:16.6251528Z   [90m    at node:internal/deps/undici/undici:13510:13[39m
2025-06-04T21:55:16.6252522Z   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
2025-06-04T21:55:16.6254649Z       at PersonalizationServiceImpl.loadModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:298:24[90m)[39m
2025-06-04T21:55:16.6255980Z       at async Promise.all (index 0) {
2025-06-04T21:55:16.6256611Z     [cause]: Error: getaddrinfo EAI_AGAIN ml-models-service
2025-06-04T21:55:16.6257610Z     [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
2025-06-04T21:55:16.6258383Z       errno: [33m-3001[39m,
2025-06-04T21:55:16.6258894Z       code: [32m'EAI_AGAIN'[39m,
2025-06-04T21:55:16.6259657Z       syscall: [32m'getaddrinfo'[39m,
2025-06-04T21:55:16.6260296Z       hostname: [32m'ml-models-service'[39m
2025-06-04T21:55:16.6260748Z     }
2025-06-04T21:55:16.6261027Z   },
2025-06-04T21:55:16.6261675Z   endpoint: [32m'http://ml-models-service/recommendation-model'[39m
2025-06-04T21:55:16.6262236Z }
2025-06-04T21:55:16.6262405Z 
2025-06-04T21:55:16.6263094Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts
2025-06-04T21:55:16.6264493Z [22m[39m2025-06-04T21:55:16.622Z ERROR [personalization-service] Error loading personalization model {
2025-06-04T21:55:16.6265328Z   error: TypeError: fetch failed
2025-06-04T21:55:16.6266002Z   [90m    at node:internal/deps/undici/undici:13510:13[39m
2025-06-04T21:55:16.6266973Z   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
2025-06-04T21:55:16.6268816Z       at PersonalizationServiceImpl.loadModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:298:24[90m)[39m
2025-06-04T21:55:16.6270307Z       at async Promise.all (index 2) {
2025-06-04T21:55:16.6270909Z     [cause]: Error: getaddrinfo EAI_AGAIN ml-models-service
2025-06-04T21:55:16.6271925Z     [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
2025-06-04T21:55:16.6272700Z       errno: [33m-3001[39m,
2025-06-04T21:55:16.6273213Z       code: [32m'EAI_AGAIN'[39m,
2025-06-04T21:55:16.6273755Z       syscall: [32m'getaddrinfo'[39m,
2025-06-04T21:55:16.6274379Z       hostname: [32m'ml-models-service'[39m
2025-06-04T21:55:16.6274808Z     }
2025-06-04T21:55:16.6275071Z   },
2025-06-04T21:55:16.6275723Z   endpoint: [32m'http://ml-models-service/personalization-model'[39m
2025-06-04T21:55:16.6276316Z }
2025-06-04T21:55:16.6276474Z 
2025-06-04T21:55:16.6277161Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts
2025-06-04T21:55:16.6278528Z [22m[39m2025-06-04T21:55:16.623Z ERROR [personalization-service] Error loading recommendation model {
2025-06-04T21:55:16.6279794Z   error: TypeError: fetch failed
2025-06-04T21:55:16.6280503Z   [90m    at node:internal/deps/undici/undici:13510:13[39m
2025-06-04T21:55:16.6281476Z   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
2025-06-04T21:55:16.6283323Z       at PersonalizationServiceImpl.loadModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:298:24[90m)[39m
2025-06-04T21:55:16.6284613Z       at async Promise.all (index 0)
2025-06-04T21:55:16.6286322Z       at PersonalizationServiceImpl.initializeMLModels [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:279:7[90m)[39m {
2025-06-04T21:55:16.6287809Z     [cause]: Error: getaddrinfo EAI_AGAIN ml-models-service
2025-06-04T21:55:16.6288881Z     [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
2025-06-04T21:55:16.6289828Z       errno: [33m-3001[39m,
2025-06-04T21:55:16.6290357Z       code: [32m'EAI_AGAIN'[39m,
2025-06-04T21:55:16.6290889Z       syscall: [32m'getaddrinfo'[39m,
2025-06-04T21:55:16.6291487Z       hostname: [32m'ml-models-service'[39m
2025-06-04T21:55:16.6291930Z     }
2025-06-04T21:55:16.6292210Z   },
2025-06-04T21:55:16.6292868Z   endpoint: [32m'http://ml-models-service/recommendation-model'[39m
2025-06-04T21:55:16.6293435Z }
2025-06-04T21:55:16.6293593Z 
2025-06-04T21:55:16.6294489Z [90mstderr[2m | src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts
2025-06-04T21:55:16.6295856Z [22m[39m2025-06-04T21:55:16.624Z ERROR [personalization-service] Failed to initialize ML models {
2025-06-04T21:55:16.6296797Z   error: Error: Failed to load recommendation model: fetch failed
2025-06-04T21:55:16.6298512Z       at PersonalizationServiceImpl.loadModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:331:13[90m)[39m
2025-06-04T21:55:16.6300435Z   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
2025-06-04T21:55:16.6301226Z       at async Promise.all (index 0)
2025-06-04T21:55:16.6302910Z       at PersonalizationServiceImpl.initializeMLModels [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:279:7[90m)[39m
2025-06-04T21:55:16.6304178Z }
2025-06-04T21:55:16.6304335Z 
2025-06-04T21:55:16.6305287Z [90mstderr[2m | Logger.browserLog (/home/runner/work/pixelated/pixelated/src/lib/utils/logger.ts:131:17)
2025-06-04T21:55:16.6306836Z [22m[39m2025-06-04T21:55:16.625Z ERROR [personalization-service] Error loading efficacyPrediction model {
2025-06-04T21:55:16.6307681Z   error: TypeError: fetch failed
2025-06-04T21:55:16.6308363Z   [90m    at node:internal/deps/undici/undici:13510:13[39m
2025-06-04T21:55:16.6309528Z   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
2025-06-04T21:55:16.6311395Z       at PersonalizationServiceImpl.loadModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:298:24[90m)[39m
2025-06-04T21:55:16.6313521Z  [32m✓[39m src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 47[2mms[22m[39m
2025-06-04T21:55:16.6314588Z       at async Promise.all (index 1) {
2025-06-04T21:55:16.6315191Z     [cause]: Error: getaddrinfo EAI_AGAIN ml-models-service
2025-06-04T21:55:16.6316226Z     [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
2025-06-04T21:55:16.6317015Z       errno: [33m-3001[39m,
2025-06-04T21:55:16.6317586Z       code: [32m'EAI_AGAIN'[39m,
2025-06-04T21:55:16.6318257Z       syscall: [32m'getaddrinfo'[39m,
2025-06-04T21:55:16.6318859Z       hostname: [32m'ml-models-service'[39m
2025-06-04T21:55:16.6319498Z     }
2025-06-04T21:55:16.6319781Z   },
2025-06-04T21:55:16.6320489Z   endpoint: [32m'http://ml-models-service/efficacy-prediction-model'[39m
2025-06-04T21:55:16.6323489Z }
2025-06-04T21:55:16.6325511Z 
2025-06-04T21:55:16.6328550Z [90mstderr[2m | Logger.browserLog (/home/runner/work/pixelated/pixelated/src/lib/utils/logger.ts:131:17)
2025-06-04T21:55:16.6346835Z [22m[39m2025-06-04T21:55:16.627Z ERROR [personalization-service] Error loading personalization model {
2025-06-04T21:55:16.6347699Z   error: TypeError: fetch failed
2025-06-04T21:55:16.6348395Z   [90m    at node:internal/deps/undici/undici:13510:13[39m
2025-06-04T21:55:16.6349596Z   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
2025-06-04T21:55:16.6351473Z       at PersonalizationServiceImpl.loadModel [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/services/PersonalizationServiceImpl.ts:298:24[90m)[39m
2025-06-04T21:55:16.6352782Z       at async Promise.all (index 2) {
2025-06-04T21:55:16.6353386Z     [cause]: Error: getaddrinfo EAI_AGAIN ml-models-service
2025-06-04T21:55:16.6354399Z     [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
2025-06-04T21:55:16.6355156Z       errno: [33m-3001[39m,
2025-06-04T21:55:16.6355698Z       code: [32m'EAI_AGAIN'[39m,
2025-06-04T21:55:16.6356265Z       syscall: [32m'getaddrinfo'[39m,
2025-06-04T21:55:16.6356881Z       hostname: [32m'ml-models-service'[39m
2025-06-04T21:55:16.6357300Z     }
2025-06-04T21:55:16.6357570Z   },
2025-06-04T21:55:16.6358239Z   endpoint: [32m'http://ml-models-service/personalization-model'[39m
2025-06-04T21:55:16.6358814Z }
2025-06-04T21:55:16.6358966Z 
2025-06-04T21:55:17.7628227Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould use explicit hint when provided
2025-06-04T21:55:17.7631057Z [22m[39m[2025-06-04T21:55:17.761Z] INFO  [MentalHealthTaskRouter]: MentalHealthTaskRouter initialized with LLM invoker.
2025-06-04T21:55:17.7636030Z 
2025-06-04T21:55:17.7673228Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould use explicit hint when provided
2025-06-04T21:55:17.7678298Z [22m[39m[2025-06-04T21:55:17.762Z] INFO  [MentalHealthTaskRouter]: Determining route for text... { textLength: [33m44[39m, context: { explicitTaskHint: [32m'anxiety'[39m } }
2025-06-04T21:55:17.7683837Z [2025-06-04T21:55:17.764Z] INFO  [MentalHealthTaskRouter]: Routing based on explicit hint: anxiety
2025-06-04T21:55:17.7685056Z [2025-06-04T21:55:17.764Z] DEBUG [MentalHealthTaskRouter]: Applying contextual rules... {
2025-06-04T21:55:17.7686065Z   context: { explicitTaskHint: [32m'anxiety'[39m },
2025-06-04T21:55:17.7686588Z   currentDecision: {
2025-06-04T21:55:17.7687138Z     targetAnalyzer: [32m'anxiety'[39m,
2025-06-04T21:55:17.7687757Z     confidence: [33m0.99[39m,
2025-06-04T21:55:17.7690851Z     routingMethod: [32m'explicit_hint'[39m
2025-06-04T21:55:17.7691357Z   }
2025-06-04T21:55:17.7691643Z }
2025-06-04T21:55:17.7692453Z [2025-06-04T21:55:17.765Z] DEBUG [MentalHealthTaskRouter]: No overriding contextual rule applied.
2025-06-04T21:55:17.7693067Z 
2025-06-04T21:55:17.7694784Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould detect crisis keywords
2025-06-04T21:55:17.7699466Z [22m[39m[2025-06-04T21:55:17.767Z] INFO  [MentalHealthTaskRouter]: MentalHealthTaskRouter initialized with LLM invoker.
2025-06-04T21:55:17.7700212Z 
2025-06-04T21:55:17.7701978Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould detect crisis keywords
2025-06-04T21:55:17.7706925Z [22m[39m[2025-06-04T21:55:17.767Z] INFO  [MentalHealthTaskRouter]: Determining route for text... { textLength: [33m46[39m, context: [90mundefined[39m }
2025-06-04T21:55:17.7708744Z [2025-06-04T21:55:17.767Z] INFO  [MentalHealthTaskRouter]: Regex keyword match found: rule for 'crisis', regex 'kill\s+(myself|me)'
2025-06-04T21:55:17.7714676Z [2025-06-04T21:55:17.768Z] INFO  [MentalHealthTaskRouter]: Performing broad classification using LLM... { context: [90mundefined[39m }
2025-06-04T21:55:17.7715508Z 
2025-06-04T21:55:17.7717280Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould detect crisis keywords
2025-06-04T21:55:17.7724805Z [22m[39m[2025-06-04T21:55:17.769Z] INFO  [MentalHealthTaskRouter]: Broad classification decision: {
2025-06-04T21:55:17.7725884Z   targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7726439Z   confidence: [33m0.85[39m,
2025-06-04T21:55:17.7727045Z   routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.7727522Z   preliminaryInsights: {
2025-06-04T21:55:17.7728104Z     llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.7728927Z     llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.7729920Z     isCritical: [33mfalse[39m
2025-06-04T21:55:17.7730301Z   }
2025-06-04T21:55:17.7730574Z }
2025-06-04T21:55:17.7730724Z 
2025-06-04T21:55:17.7732412Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould detect crisis keywords
2025-06-04T21:55:17.7734809Z [22m[39m[2025-06-04T21:55:17.769Z] INFO  [MentalHealthTaskRouter]: Prioritizing critical keyword decision. {
2025-06-04T21:55:17.7735625Z   keywordDecision: {
2025-06-04T21:55:17.7736181Z     targetAnalyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.7736761Z     confidence: [33m0.9[39m,
2025-06-04T21:55:17.7737337Z     routingMethod: [32m'keyword'[39m,
2025-06-04T21:55:17.7737779Z     preliminaryInsights: {
2025-06-04T21:55:17.7738390Z       matched_keyword: [32m'kill\\s+(myself|me)'[39m,
2025-06-04T21:55:17.7739063Z       matched_rule_analyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.7746288Z       is_critical_flag: [33mtrue[39m
2025-06-04T21:55:17.7746724Z     }
2025-06-04T21:55:17.7746997Z   }
2025-06-04T21:55:17.7747264Z }
2025-06-04T21:55:17.7748011Z [2025-06-04T21:55:17.769Z] DEBUG [MentalHealthTaskRouter]: Applying contextual rules... {
2025-06-04T21:55:17.7748854Z   context: [90mundefined[39m,
2025-06-04T21:55:17.7749466Z   currentDecision: {
2025-06-04T21:55:17.7750017Z     targetAnalyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.7750609Z     confidence: [33m0.9[39m,
2025-06-04T21:55:17.7751132Z     routingMethod: [32m'keyword'[39m,
2025-06-04T21:55:17.7751587Z     preliminaryInsights: {
2025-06-04T21:55:17.7752216Z       matched_keyword: [32m'kill\\s+(myself|me)'[39m,
2025-06-04T21:55:17.7752934Z       matched_rule_analyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.7753573Z       is_critical_flag: [33mtrue[39m
2025-06-04T21:55:17.7753986Z     }
2025-06-04T21:55:17.7754265Z   }
2025-06-04T21:55:17.7754522Z }
2025-06-04T21:55:17.7755345Z [2025-06-04T21:55:17.770Z] DEBUG [MentalHealthTaskRouter]: No context provided for contextual rules.
2025-06-04T21:55:17.7756532Z [2025-06-04T21:55:17.770Z] INFO  [MentalHealthTaskRouter]: Final routing decision made. {
2025-06-04T21:55:17.7757240Z   finalDecision: {
2025-06-04T21:55:17.7757780Z     targetAnalyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.7758354Z     confidence: [33m0.9[39m,
2025-06-04T21:55:17.7758879Z     routingMethod: [32m'keyword'[39m,
2025-06-04T21:55:17.7759623Z     preliminaryInsights: {
2025-06-04T21:55:17.7760231Z       matched_keyword: [32m'kill\\s+(myself|me)'[39m,
2025-06-04T21:55:17.7760868Z       matched_rule_analyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.7761429Z       is_critical_flag: [33mtrue[39m
2025-06-04T21:55:17.7761807Z     }
2025-06-04T21:55:17.7762060Z   }
2025-06-04T21:55:17.7762307Z }
2025-06-04T21:55:17.7762450Z 
2025-06-04T21:55:17.7764283Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould use LLM classification when no keywords match
2025-06-04T21:55:17.7767018Z [22m[39m[2025-06-04T21:55:17.770Z] INFO  [MentalHealthTaskRouter]: MentalHealthTaskRouter initialized with LLM invoker.
2025-06-04T21:55:17.7767699Z 
2025-06-04T21:55:17.7769698Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould use LLM classification when no keywords match
2025-06-04T21:55:17.7772224Z [22m[39m[2025-06-04T21:55:17.771Z] INFO  [MentalHealthTaskRouter]: Determining route for text... { textLength: [33m60[39m, context: [90mundefined[39m }
2025-06-04T21:55:17.7773857Z [2025-06-04T21:55:17.771Z] INFO  [MentalHealthTaskRouter]: Keyword match found: rule for 'depression', keyword 'feeling down'
2025-06-04T21:55:17.7775670Z [2025-06-04T21:55:17.771Z] INFO  [MentalHealthTaskRouter]: Performing broad classification using LLM... { context: [90mundefined[39m }
2025-06-04T21:55:17.7776464Z 
2025-06-04T21:55:17.7778328Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould use LLM classification when no keywords match
2025-06-04T21:55:17.7780791Z [22m[39m[2025-06-04T21:55:17.771Z] INFO  [MentalHealthTaskRouter]: Broad classification decision: {
2025-06-04T21:55:17.7781739Z   targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7782556Z   confidence: [33m0.85[39m,
2025-06-04T21:55:17.7783194Z   routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.7783670Z   preliminaryInsights: {
2025-06-04T21:55:17.7784238Z     llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.7785076Z     llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.7785806Z     isCritical: [33mfalse[39m
2025-06-04T21:55:17.7786190Z   }
2025-06-04T21:55:17.7786474Z }
2025-06-04T21:55:17.7786652Z 
2025-06-04T21:55:17.7788568Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould use LLM classification when no keywords match
2025-06-04T21:55:17.7790967Z [22m[39m[2025-06-04T21:55:17.772Z] INFO  [MentalHealthTaskRouter]: Keyword and classification agreed. {
2025-06-04T21:55:17.7814484Z   bestPreliminaryDecision: {
2025-06-04T21:55:17.7815134Z     targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7815710Z     confidence: [33m0.95[39m,
2025-06-04T21:55:17.7816395Z     routingMethod: [32m'keyword+classification'[39m,
2025-06-04T21:55:17.7816971Z     preliminaryInsights: {
2025-06-04T21:55:17.7817608Z       matched_keyword: [32m'feeling down'[39m,
2025-06-04T21:55:17.7824136Z       matched_rule_analyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7824843Z       is_critical_flag: [33mfalse[39m,
2025-06-04T21:55:17.7825478Z       classification_insights: [36m[Object][39m
2025-06-04T21:55:17.7826033Z     }
2025-06-04T21:55:17.7826324Z   }
2025-06-04T21:55:17.7826600Z }
2025-06-04T21:55:17.7827339Z [2025-06-04T21:55:17.772Z] DEBUG [MentalHealthTaskRouter]: Applying contextual rules... {
2025-06-04T21:55:17.7828202Z   context: [90mundefined[39m,
2025-06-04T21:55:17.7828594Z   currentDecision: {
2025-06-04T21:55:17.7829356Z     targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7829984Z     confidence: [33m0.95[39m,
2025-06-04T21:55:17.7830686Z     routingMethod: [32m'keyword+classification'[39m,
2025-06-04T21:55:17.7831243Z     preliminaryInsights: {
2025-06-04T21:55:17.7831886Z       matched_keyword: [32m'feeling down'[39m,
2025-06-04T21:55:17.7832606Z       matched_rule_analyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7833273Z       is_critical_flag: [33mfalse[39m,
2025-06-04T21:55:17.7833930Z       classification_insights: [36m[Object][39m
2025-06-04T21:55:17.7834391Z     }
2025-06-04T21:55:17.7834677Z   }
2025-06-04T21:55:17.7835304Z }
2025-06-04T21:55:17.7836148Z [2025-06-04T21:55:17.772Z] DEBUG [MentalHealthTaskRouter]: No context provided for contextual rules.
2025-06-04T21:55:17.7837379Z [2025-06-04T21:55:17.772Z] INFO  [MentalHealthTaskRouter]: Final routing decision made. {
2025-06-04T21:55:17.7838090Z   finalDecision: {
2025-06-04T21:55:17.7838644Z     targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7839401Z     confidence: [33m0.95[39m,
2025-06-04T21:55:17.7840082Z     routingMethod: [32m'keyword+classification'[39m,
2025-06-04T21:55:17.7840661Z     preliminaryInsights: {
2025-06-04T21:55:17.7841297Z       matched_keyword: [32m'feeling down'[39m,
2025-06-04T21:55:17.7842034Z       matched_rule_analyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7842722Z       is_critical_flag: [33mfalse[39m,
2025-06-04T21:55:17.7843403Z       classification_insights: [36m[Object][39m
2025-06-04T21:55:17.7843882Z     }
2025-06-04T21:55:17.7844165Z   }
2025-06-04T21:55:17.7844430Z }
2025-06-04T21:55:17.7844591Z 
2025-06-04T21:55:17.7846620Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould apply contextual rules when session type is provided
2025-06-04T21:55:17.7849025Z [22m[39m[2025-06-04T21:55:17.779Z] INFO  [MentalHealthTaskRouter]: MentalHealthTaskRouter initialized with LLM invoker.
2025-06-04T21:55:17.7859393Z 
2025-06-04T21:55:17.7888187Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould apply contextual rules when session type is provided
2025-06-04T21:55:17.7890735Z [22m[39m[2025-06-04T21:55:17.779Z] INFO  [MentalHealthTaskRouter]: Determining route for text... {
2025-06-04T21:55:17.7908562Z   textLength: [33m47[39m,
2025-06-04T21:55:17.7909487Z   context: { sessionType: [32m'stress_management_session'[39m }
2025-06-04T21:55:17.7910054Z }
2025-06-04T21:55:17.7911037Z [2025-06-04T21:55:17.779Z] INFO  [MentalHealthTaskRouter]: Keyword match found: rule for 'stress', keyword 'overwhelmed'
2025-06-04T21:55:17.7913921Z [2025-06-04T21:55:17.779Z] INFO  [MentalHealthTaskRouter]: Performing broad classification using LLM... { context: { sessionType: [32m'stress_management_session'[39m } }
2025-06-04T21:55:17.7914888Z 
2025-06-04T21:55:17.7916802Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould apply contextual rules when session type is provided
2025-06-04T21:55:17.7918840Z [22m[39m[2025-06-04T21:55:17.779Z] INFO  [MentalHealthTaskRouter]: Broad classification decision: {
2025-06-04T21:55:17.7920002Z   targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7920571Z   confidence: [33m0.85[39m,
2025-06-04T21:55:17.7921164Z   routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.7921650Z   preliminaryInsights: {
2025-06-04T21:55:17.7922165Z     llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.7923007Z     llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.7923736Z     isCritical: [33mfalse[39m
2025-06-04T21:55:17.7924097Z   }
2025-06-04T21:55:17.7924337Z }
2025-06-04T21:55:17.7924488Z 
2025-06-04T21:55:17.7926343Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould apply contextual rules when session type is provided
2025-06-04T21:55:17.7928705Z [22m[39m[2025-06-04T21:55:17.780Z] INFO  [MentalHealthTaskRouter]: Keyword and classification disagreed, classification has higher confidence. {
2025-06-04T21:55:17.7929870Z   classificationDecision: {
2025-06-04T21:55:17.7930446Z     targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7930990Z     confidence: [33m0.85[39m,
2025-06-04T21:55:17.7931521Z     routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.7932281Z     preliminaryInsights: {
2025-06-04T21:55:17.7932778Z       llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.7933573Z       llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.7934278Z       isCritical: [33mfalse[39m
2025-06-04T21:55:17.7934646Z     }
2025-06-04T21:55:17.7934906Z   }
2025-06-04T21:55:17.7935156Z }
2025-06-04T21:55:17.7935845Z [2025-06-04T21:55:17.780Z] DEBUG [MentalHealthTaskRouter]: Applying contextual rules... {
2025-06-04T21:55:17.7936822Z   context: { sessionType: [32m'stress_management_session'[39m },
2025-06-04T21:55:17.7937368Z   currentDecision: {
2025-06-04T21:55:17.7937867Z     targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.7938400Z     confidence: [33m0.85[39m,
2025-06-04T21:55:17.7938928Z     routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.7939580Z     preliminaryInsights: {
2025-06-04T21:55:17.7940155Z       llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.7941009Z       llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.7941724Z       isCritical: [33mfalse[39m
2025-06-04T21:55:17.7942102Z     }
2025-06-04T21:55:17.7942371Z   }
2025-06-04T21:55:17.7942638Z }
2025-06-04T21:55:17.7943436Z [2025-06-04T21:55:17.780Z] INFO  [MentalHealthTaskRouter]: Biasing towards 'stress' based on session type.
2025-06-04T21:55:17.7944556Z [2025-06-04T21:55:17.780Z] INFO  [MentalHealthTaskRouter]: Final routing decision made. {
2025-06-04T21:55:17.7945483Z   finalDecision: {
2025-06-04T21:55:17.7946092Z     targetAnalyzer: [32m'stress'[39m,
2025-06-04T21:55:17.7946662Z     confidence: [33m0.85[39m,
2025-06-04T21:55:17.7947226Z     routingMethod: [32m'contextual'[39m,
2025-06-04T21:55:17.7947693Z     preliminaryInsights: {
2025-06-04T21:55:17.7948246Z       llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.7949332Z       llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.7950122Z       isCritical: [33mfalse[39m,
2025-06-04T21:55:17.7950766Z       contextual_rule: [32m'stress_session_bias'[39m
2025-06-04T21:55:17.7951218Z     }
2025-06-04T21:55:17.7951495Z   }
2025-06-04T21:55:17.7951746Z }
2025-06-04T21:55:17.7951900Z 
2025-06-04T21:55:17.7953609Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould handle LLM errors gracefully
2025-06-04T21:55:17.7955833Z [22m[39m[2025-06-04T21:55:17.780Z] INFO  [MentalHealthTaskRouter]: MentalHealthTaskRouter initialized with LLM invoker.
2025-06-04T21:55:17.7956570Z 
2025-06-04T21:55:17.7958329Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould handle LLM errors gracefully
2025-06-04T21:55:17.7960941Z [22m[39m[2025-06-04T21:55:17.781Z] INFO  [MentalHealthTaskRouter]: Determining route for text... { textLength: [33m29[39m, context: [90mundefined[39m }
2025-06-04T21:55:17.7962946Z [2025-06-04T21:55:17.781Z] DEBUG [MentalHealthTaskRouter]: No keyword match found. { textSample: [32m'i am feeling quite sad today.'[39m }
2025-06-04T21:55:17.7965526Z [90mstderr[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould handle LLM errors gracefully
2025-06-04T21:55:17.7967638Z [22m[39m[2025-06-04T21:55:17.781Z] ERROR [MentalHealthTaskRouter]: Error during broad classification: {
2025-06-04T21:55:17.7968510Z   error: Error: LLM service unavailable
2025-06-04T21:55:17.7970098Z       at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts:71:44
2025-06-04T21:55:17.7972085Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:55:17.7974462Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:55:17.7976482Z       at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:55:17.7977569Z       at new Promise (<anonymous>)
2025-06-04T21:55:17.7979419Z       at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:55:17.7981861Z       at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:55:17.7984161Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:55:17.7986294Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:55:17.7988440Z       at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:55:17.7989652Z }
2025-06-04T21:55:17.7989807Z 
2025-06-04T21:55:17.7990814Z [2025-06-04T21:55:17.781Z] INFO  [MentalHealthTaskRouter]: Performing broad classification using LLM... { context: [90mundefined[39m }
2025-06-04T21:55:17.7991501Z 
2025-06-04T21:55:17.7992999Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould handle LLM errors gracefully
2025-06-04T21:55:17.7994810Z [22m[39m[2025-06-04T21:55:17.783Z] INFO  [MentalHealthTaskRouter]: Only classification decision available. {
2025-06-04T21:55:17.7995546Z   classificationDecision: {
2025-06-04T21:55:17.7996058Z     targetAnalyzer: [32m'unknown'[39m,
2025-06-04T21:55:17.7996575Z     confidence: [33m0.1[39m,
2025-06-04T21:55:17.7997058Z     routingMethod: [32m'fallback'[39m,
2025-06-04T21:55:17.7997808Z     preliminaryInsights: { error: [32m'LLM service unavailable'[39m }
2025-06-04T21:55:17.7998358Z   }
2025-06-04T21:55:17.7998595Z }
2025-06-04T21:55:17.7999451Z [2025-06-04T21:55:17.783Z] DEBUG [MentalHealthTaskRouter]: Applying contextual rules... {
2025-06-04T21:55:17.8000209Z   context: [90mundefined[39m,
2025-06-04T21:55:17.8000565Z   currentDecision: {
2025-06-04T21:55:17.8001018Z     targetAnalyzer: [32m'unknown'[39m,
2025-06-04T21:55:17.8001522Z     confidence: [33m0.1[39m,
2025-06-04T21:55:17.8001992Z     routingMethod: [32m'fallback'[39m,
2025-06-04T21:55:17.8002718Z     preliminaryInsights: { error: [32m'LLM service unavailable'[39m }
2025-06-04T21:55:17.8003245Z   }
2025-06-04T21:55:17.8003473Z }
2025-06-04T21:55:17.8004201Z [2025-06-04T21:55:17.783Z] DEBUG [MentalHealthTaskRouter]: No context provided for contextual rules.
2025-06-04T21:55:17.8005436Z [2025-06-04T21:55:17.783Z] INFO  [MentalHealthTaskRouter]: Very low confidence (0.1). Using general_mental_health fallback.
2025-06-04T21:55:17.8006612Z [2025-06-04T21:55:17.783Z] INFO  [MentalHealthTaskRouter]: Using general mental health fallback.
2025-06-04T21:55:17.8007618Z [2025-06-04T21:55:17.783Z] INFO  [MentalHealthTaskRouter]: Final routing decision made. {
2025-06-04T21:55:17.8008231Z   finalDecision: {
2025-06-04T21:55:17.8008762Z     targetAnalyzer: [32m'general_mental_health'[39m,
2025-06-04T21:55:17.8009505Z     confidence: [33m0.3[39m,
2025-06-04T21:55:17.8009995Z     routingMethod: [32m'fallback'[39m,
2025-06-04T21:55:17.8010822Z     preliminaryInsights: { fallback_reason: [32m'no_specific_classification'[39m }
2025-06-04T21:55:17.8011670Z   }
2025-06-04T21:55:17.8011914Z }
2025-06-04T21:55:17.8012056Z 
2025-06-04T21:55:17.8013826Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould apply fallback mechanisms for low confidence decisions
2025-06-04T21:55:17.8015889Z [22m[39m[2025-06-04T21:55:17.784Z] INFO  [MentalHealthTaskRouter]: MentalHealthTaskRouter initialized with LLM invoker.
2025-06-04T21:55:17.8016515Z 
2025-06-04T21:55:17.8018231Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould apply fallback mechanisms for low confidence decisions
2025-06-04T21:55:17.8020730Z [22m[39m[2025-06-04T21:55:17.784Z] INFO  [MentalHealthTaskRouter]: Determining route for text... { textLength: [33m17[39m, context: [90mundefined[39m }
2025-06-04T21:55:17.8022504Z [2025-06-04T21:55:17.784Z] DEBUG [MentalHealthTaskRouter]: No keyword match found. { textSample: [32m'just checking in.'[39m }
2025-06-04T21:55:17.8024189Z [2025-06-04T21:55:17.784Z] INFO  [MentalHealthTaskRouter]: Performing broad classification using LLM... { context: [90mundefined[39m }
2025-06-04T21:55:17.8024920Z 
2025-06-04T21:55:17.8026876Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould apply fallback mechanisms for low confidence decisions
2025-06-04T21:55:17.8028821Z [22m[39m[2025-06-04T21:55:17.784Z] INFO  [MentalHealthTaskRouter]: Broad classification decision: {
2025-06-04T21:55:17.8029785Z   targetAnalyzer: [32m'unknown'[39m,
2025-06-04T21:55:17.8030243Z   confidence: [33m0.3[39m,
2025-06-04T21:55:17.8030761Z   routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.8031184Z   preliminaryInsights: {
2025-06-04T21:55:17.8031674Z     llmCategory: [32m'unknown'[39m,
2025-06-04T21:55:17.8032177Z     llmReasoning: [90mundefined[39m,
2025-06-04T21:55:17.8032672Z     isCritical: [33mfalse[39m
2025-06-04T21:55:17.8033006Z   }
2025-06-04T21:55:17.8033251Z }
2025-06-04T21:55:17.8033384Z 
2025-06-04T21:55:17.8035141Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould apply fallback mechanisms for low confidence decisions
2025-06-04T21:55:17.8037122Z [22m[39m[2025-06-04T21:55:17.784Z] INFO  [MentalHealthTaskRouter]: Only classification decision available. {
2025-06-04T21:55:17.8037842Z   classificationDecision: {
2025-06-04T21:55:17.8038334Z     targetAnalyzer: [32m'unknown'[39m,
2025-06-04T21:55:17.8038823Z     confidence: [33m0.3[39m,
2025-06-04T21:55:17.8039491Z     routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.8039909Z     preliminaryInsights: {
2025-06-04T21:55:17.8040392Z       llmCategory: [32m'unknown'[39m,
2025-06-04T21:55:17.8040922Z       llmReasoning: [90mundefined[39m,
2025-06-04T21:55:17.8041432Z       isCritical: [33mfalse[39m
2025-06-04T21:55:17.8041780Z     }
2025-06-04T21:55:17.8042029Z   }
2025-06-04T21:55:17.8042260Z }
2025-06-04T21:55:17.8042924Z [2025-06-04T21:55:17.784Z] DEBUG [MentalHealthTaskRouter]: Applying contextual rules... {
2025-06-04T21:55:17.8043664Z   context: [90mundefined[39m,
2025-06-04T21:55:17.8044047Z   currentDecision: {
2025-06-04T21:55:17.8044518Z     targetAnalyzer: [32m'unknown'[39m,
2025-06-04T21:55:17.8045023Z     confidence: [33m0.3[39m,
2025-06-04T21:55:17.8045535Z     routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.8045984Z     preliminaryInsights: {
2025-06-04T21:55:17.8046460Z       llmCategory: [32m'unknown'[39m,
2025-06-04T21:55:17.8046980Z       llmReasoning: [90mundefined[39m,
2025-06-04T21:55:17.8047474Z       isCritical: [33mfalse[39m
2025-06-04T21:55:17.8047819Z     }
2025-06-04T21:55:17.8048295Z   }
2025-06-04T21:55:17.8048534Z }
2025-06-04T21:55:17.8049415Z [2025-06-04T21:55:17.785Z] DEBUG [MentalHealthTaskRouter]: No context provided for contextual rules.
2025-06-04T21:55:17.8050740Z [2025-06-04T21:55:17.785Z] INFO  [MentalHealthTaskRouter]: Low confidence (0.3) with short text. Using general_mental_health fallback.
2025-06-04T21:55:17.8052093Z [2025-06-04T21:55:17.785Z] INFO  [MentalHealthTaskRouter]: Text appears unrelated to mental health. Using fallback.
2025-06-04T21:55:17.8053157Z [2025-06-04T21:55:17.785Z] INFO  [MentalHealthTaskRouter]: Final routing decision made. {
2025-06-04T21:55:17.8053763Z   finalDecision: {
2025-06-04T21:55:17.8054218Z     targetAnalyzer: [32m'unknown'[39m,
2025-06-04T21:55:17.8054721Z     confidence: [33m0.4[39m,
2025-06-04T21:55:17.8055207Z     routingMethod: [32m'fallback'[39m,
2025-06-04T21:55:17.8056020Z     preliminaryInsights: { fallback_reason: [32m'unrelated_to_mental_health'[39m }
2025-06-04T21:55:17.8056629Z   }
2025-06-04T21:55:17.8056880Z }
2025-06-04T21:55:17.8057029Z 
2025-06-04T21:55:17.8058753Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould combine keyword and classification when they agree
2025-06-04T21:55:17.8060970Z [22m[39m[2025-06-04T21:55:17.785Z] INFO  [MentalHealthTaskRouter]: MentalHealthTaskRouter initialized with LLM invoker.
2025-06-04T21:55:17.8061589Z 
2025-06-04T21:55:17.8063476Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould combine keyword and classification when they agree
2025-06-04T21:55:17.8065762Z [22m[39m[2025-06-04T21:55:17.786Z] INFO  [MentalHealthTaskRouter]: Determining route for text... { textLength: [33m55[39m, context: [90mundefined[39m }
2025-06-04T21:55:17.8067220Z [2025-06-04T21:55:17.786Z] INFO  [MentalHealthTaskRouter]: Keyword match found: rule for 'anxiety', keyword 'anxious'
2025-06-04T21:55:17.8068827Z [2025-06-04T21:55:17.786Z] INFO  [MentalHealthTaskRouter]: Performing broad classification using LLM... { context: [90mundefined[39m }
2025-06-04T21:55:17.8069698Z 
2025-06-04T21:55:17.8071423Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould combine keyword and classification when they agree
2025-06-04T21:55:17.8073314Z [22m[39m[2025-06-04T21:55:17.786Z] INFO  [MentalHealthTaskRouter]: Broad classification decision: {
2025-06-04T21:55:17.8074099Z   targetAnalyzer: [32m'anxiety'[39m,
2025-06-04T21:55:17.8074558Z   confidence: [33m0.8[39m,
2025-06-04T21:55:17.8075060Z   routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.8075484Z   preliminaryInsights: {
2025-06-04T21:55:17.8075950Z     llmCategory: [32m'anxiety'[39m,
2025-06-04T21:55:17.8076455Z     llmReasoning: [90mundefined[39m,
2025-06-04T21:55:17.8076957Z     isCritical: [33mfalse[39m
2025-06-04T21:55:17.8077288Z   }
2025-06-04T21:55:17.8077534Z }
2025-06-04T21:55:17.8077668Z 
2025-06-04T21:55:17.8079527Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould combine keyword and classification when they agree
2025-06-04T21:55:17.8081485Z [22m[39m[2025-06-04T21:55:17.786Z] INFO  [MentalHealthTaskRouter]: Keyword and classification agreed. {
2025-06-04T21:55:17.8082176Z   bestPreliminaryDecision: {
2025-06-04T21:55:17.8082682Z     targetAnalyzer: [32m'anxiety'[39m,
2025-06-04T21:55:17.8083173Z     confidence: [33m0.9[39m,
2025-06-04T21:55:17.8083736Z     routingMethod: [32m'keyword+classification'[39m,
2025-06-04T21:55:17.8084212Z     preliminaryInsights: {
2025-06-04T21:55:17.8084699Z       matched_keyword: [32m'anxious'[39m,
2025-06-04T21:55:17.8085267Z       matched_rule_analyzer: [32m'anxiety'[39m,
2025-06-04T21:55:17.8086112Z       is_critical_flag: [33mfalse[39m,
2025-06-04T21:55:17.8086652Z       classification_insights: [36m[Object][39m
2025-06-04T21:55:17.8087042Z     }
2025-06-04T21:55:17.8087287Z   }
2025-06-04T21:55:17.8087519Z }
2025-06-04T21:55:17.8088188Z [2025-06-04T21:55:17.786Z] DEBUG [MentalHealthTaskRouter]: Applying contextual rules... {
2025-06-04T21:55:17.8088910Z   context: [90mundefined[39m,
2025-06-04T21:55:17.8089420Z   currentDecision: {
2025-06-04T21:55:17.8089897Z     targetAnalyzer: [32m'anxiety'[39m,
2025-06-04T21:55:17.8090400Z     confidence: [33m0.9[39m,
2025-06-04T21:55:17.8090970Z     routingMethod: [32m'keyword+classification'[39m,
2025-06-04T21:55:17.8091438Z     preliminaryInsights: {
2025-06-04T21:55:17.8091928Z       matched_keyword: [32m'anxious'[39m,
2025-06-04T21:55:17.8092499Z       matched_rule_analyzer: [32m'anxiety'[39m,
2025-06-04T21:55:17.8093054Z       is_critical_flag: [33mfalse[39m,
2025-06-04T21:55:17.8093594Z       classification_insights: [36m[Object][39m
2025-06-04T21:55:17.8094004Z     }
2025-06-04T21:55:17.8094243Z   }
2025-06-04T21:55:17.8094479Z }
2025-06-04T21:55:17.8095188Z [2025-06-04T21:55:17.786Z] DEBUG [MentalHealthTaskRouter]: No context provided for contextual rules.
2025-06-04T21:55:17.8096232Z [2025-06-04T21:55:17.786Z] INFO  [MentalHealthTaskRouter]: Final routing decision made. {
2025-06-04T21:55:17.8096822Z   finalDecision: {
2025-06-04T21:55:17.8097259Z     targetAnalyzer: [32m'anxiety'[39m,
2025-06-04T21:55:17.8097936Z     confidence: [33m0.9[39m,
2025-06-04T21:55:17.8098529Z     routingMethod: [32m'keyword+classification'[39m,
2025-06-04T21:55:17.8099015Z     preliminaryInsights: {
2025-06-04T21:55:17.8099679Z       matched_keyword: [32m'anxious'[39m,
2025-06-04T21:55:17.8100251Z       matched_rule_analyzer: [32m'anxiety'[39m,
2025-06-04T21:55:17.8100808Z       is_critical_flag: [33mfalse[39m,
2025-06-04T21:55:17.8101369Z       classification_insights: [36m[Object][39m
2025-06-04T21:55:17.8101792Z     }
2025-06-04T21:55:17.8102045Z   }
2025-06-04T21:55:17.8102287Z }
2025-06-04T21:55:17.8102429Z 
2025-06-04T21:55:17.8104059Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould handle very short texts appropriately
2025-06-04T21:55:17.8106072Z [22m[39m[2025-06-04T21:55:17.787Z] INFO  [MentalHealthTaskRouter]: MentalHealthTaskRouter initialized with LLM invoker.
2025-06-04T21:55:17.8106723Z 
2025-06-04T21:55:17.8108323Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould handle very short texts appropriately
2025-06-04T21:55:17.8110669Z [22m[39m[2025-06-04T21:55:17.787Z] INFO  [MentalHealthTaskRouter]: Determining route for text... { textLength: [33m3[39m, context: [90mundefined[39m }
2025-06-04T21:55:17.8112264Z [2025-06-04T21:55:17.787Z] DEBUG [MentalHealthTaskRouter]: No keyword match found. { textSample: [32m'hi.'[39m }
2025-06-04T21:55:17.8113844Z [2025-06-04T21:55:17.787Z] INFO  [MentalHealthTaskRouter]: Performing broad classification using LLM... { context: [90mundefined[39m }
2025-06-04T21:55:17.8114555Z 
2025-06-04T21:55:17.8116188Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould handle very short texts appropriately
2025-06-04T21:55:17.8118025Z [22m[39m[2025-06-04T21:55:17.787Z] INFO  [MentalHealthTaskRouter]: Broad classification decision: {
2025-06-04T21:55:17.8118850Z   targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.8119580Z   confidence: [33m0.85[39m,
2025-06-04T21:55:17.8120135Z   routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.8120619Z   preliminaryInsights: {
2025-06-04T21:55:17.8121173Z     llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.8122224Z     llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.8122941Z     isCritical: [33mfalse[39m
2025-06-04T21:55:17.8123315Z   }
2025-06-04T21:55:17.8123576Z }
2025-06-04T21:55:17.8123739Z 
2025-06-04T21:55:17.8125371Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould handle very short texts appropriately
2025-06-04T21:55:17.8127411Z [22m[39m[2025-06-04T21:55:17.787Z] INFO  [MentalHealthTaskRouter]: Only classification decision available. {
2025-06-04T21:55:17.8128158Z   classificationDecision: {
2025-06-04T21:55:17.8128713Z     targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.8129606Z     confidence: [33m0.85[39m,
2025-06-04T21:55:17.8130139Z     routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.8130595Z     preliminaryInsights: {
2025-06-04T21:55:17.8131128Z       llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.8131907Z       llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.8132586Z       isCritical: [33mfalse[39m
2025-06-04T21:55:17.8132953Z     }
2025-06-04T21:55:17.8133212Z   }
2025-06-04T21:55:17.8133455Z }
2025-06-04T21:55:17.8134138Z [2025-06-04T21:55:17.787Z] DEBUG [MentalHealthTaskRouter]: Applying contextual rules... {
2025-06-04T21:55:17.8134883Z   context: [90mundefined[39m,
2025-06-04T21:55:17.8135255Z   currentDecision: {
2025-06-04T21:55:17.8135934Z     targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.8136462Z     confidence: [33m0.85[39m,
2025-06-04T21:55:17.8136992Z     routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.8137443Z     preliminaryInsights: {
2025-06-04T21:55:17.8137949Z       llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.8138685Z       llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.8139536Z       isCritical: [33mfalse[39m
2025-06-04T21:55:17.8139900Z     }
2025-06-04T21:55:17.8140149Z   }
2025-06-04T21:55:17.8140378Z }
2025-06-04T21:55:17.8141094Z [2025-06-04T21:55:17.787Z] DEBUG [MentalHealthTaskRouter]: No context provided for contextual rules.
2025-06-04T21:55:17.8142100Z [2025-06-04T21:55:17.787Z] INFO  [MentalHealthTaskRouter]: Final routing decision made. {
2025-06-04T21:55:17.8142696Z   finalDecision: {
2025-06-04T21:55:17.8143153Z     targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.8143640Z     confidence: [33m0.85[39m,
2025-06-04T21:55:17.8144127Z     routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.8144544Z     preliminaryInsights: {
2025-06-04T21:55:17.8145031Z       llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.8145760Z       llmReasoning: [32m'The text mentions feeling sad and hopeless.'[39m,
2025-06-04T21:55:17.8146415Z       isCritical: [33mfalse[39m
2025-06-04T21:55:17.8146753Z     }
2025-06-04T21:55:17.8146996Z   }
2025-06-04T21:55:17.8147228Z }
2025-06-04T21:55:17.8147367Z 
2025-06-04T21:55:17.8149347Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould prioritize crisis detection over other categories
2025-06-04T21:55:17.8151568Z [22m[39m[2025-06-04T21:55:17.788Z] INFO  [MentalHealthTaskRouter]: MentalHealthTaskRouter initialized with LLM invoker.
2025-06-04T21:55:17.8152224Z 
2025-06-04T21:55:17.8154007Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould prioritize crisis detection over other categories
2025-06-04T21:55:17.8156441Z [22m[39m[2025-06-04T21:55:17.788Z] INFO  [MentalHealthTaskRouter]: Determining route for text... { textLength: [33m41[39m, context: [90mundefined[39m }
2025-06-04T21:55:17.8158089Z [2025-06-04T21:55:17.788Z] INFO  [MentalHealthTaskRouter]: Regex keyword match found: rule for 'crisis', regex 'end\s+(my\s+)?life'
2025-06-04T21:55:17.8160213Z [2025-06-04T21:55:17.788Z] INFO  [MentalHealthTaskRouter]: Performing broad classification using LLM... { context: [90mundefined[39m }
2025-06-04T21:55:17.8160990Z 
2025-06-04T21:55:17.8162818Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould prioritize crisis detection over other categories
2025-06-04T21:55:17.8164848Z [22m[39m[2025-06-04T21:55:17.789Z] INFO  [MentalHealthTaskRouter]: Broad classification decision: {
2025-06-04T21:55:17.8165704Z   targetAnalyzer: [32m'depression'[39m,
2025-06-04T21:55:17.8166215Z   confidence: [33m0.9[39m,
2025-06-04T21:55:17.8166749Z   routingMethod: [32m'classification'[39m,
2025-06-04T21:55:17.8167216Z   preliminaryInsights: {
2025-06-04T21:55:17.8167735Z     llmCategory: [32m'depression'[39m,
2025-06-04T21:55:17.8168290Z     llmReasoning: [90mundefined[39m,
2025-06-04T21:55:17.8168810Z     isCritical: [33mfalse[39m
2025-06-04T21:55:17.8169409Z   }
2025-06-04T21:55:17.8169656Z }
2025-06-04T21:55:17.8169793Z 
2025-06-04T21:55:17.8171588Z [90mstdout[2m | src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22m[2mMentalHealthTaskRouter[2m > [22m[2mdetermineRoute[2m > [22m[2mshould prioritize crisis detection over other categories
2025-06-04T21:55:17.8173983Z [22m[39m[2025-06-04T21:55:17.789Z] INFO  [MentalHealthTaskRouter]: Prioritizing critical keyword decision. {
2025-06-04T21:55:17.8174776Z   keywordDecision: {
2025-06-04T21:55:17.8175262Z     targetAnalyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.8175784Z     confidence: [33m0.9[39m,
2025-06-04T21:55:17.8176281Z     routingMethod: [32m'keyword'[39m,
2025-06-04T21:55:17.8176708Z     preliminaryInsights: {
2025-06-04T21:55:17.8177286Z       matched_keyword: [32m'end\\s+(my\\s+)?life'[39m,
2025-06-04T21:55:17.8177926Z       matched_rule_analyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.8178506Z       is_critical_flag: [33mtrue[39m
2025-06-04T21:55:17.8178889Z     }
2025-06-04T21:55:17.8179345Z   }
2025-06-04T21:55:17.8179762Z }
2025-06-04T21:55:17.8180455Z [2025-06-04T21:55:17.789Z] DEBUG [MentalHealthTaskRouter]: Applying contextual rules... {
2025-06-04T21:55:17.8181270Z   context: [90mundefined[39m,
2025-06-04T21:55:17.8181658Z   currentDecision: {
2025-06-04T21:55:17.8182124Z     targetAnalyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.8182626Z     confidence: [33m0.9[39m,
2025-06-04T21:55:17.8183153Z     routingMethod: [32m'keyword'[39m,
2025-06-04T21:55:17.8183577Z     preliminaryInsights: {
2025-06-04T21:55:17.8184152Z       matched_keyword: [32m'end\\s+(my\\s+)?life'[39m,
2025-06-04T21:55:17.8184828Z       matched_rule_analyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.8185401Z       is_critical_flag: [33mtrue[39m
2025-06-04T21:55:17.8185795Z     }
2025-06-04T21:55:17.8186050Z   }
2025-06-04T21:55:17.8186300Z }
2025-06-04T21:55:17.8187063Z [2025-06-04T21:55:17.789Z] DEBUG [MentalHealthTaskRouter]: No context provided for contextual rules.
2025-06-04T21:55:17.8188177Z [2025-06-04T21:55:17.789Z] INFO  [MentalHealthTaskRouter]: Final routing decision made. {
2025-06-04T21:55:17.8188801Z   finalDecision: {
2025-06-04T21:55:17.8189427Z     targetAnalyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.8189944Z     confidence: [33m0.9[39m,
2025-06-04T21:55:17.8190450Z     routingMethod: [32m'keyword'[39m,
2025-06-04T21:55:17.8190869Z     preliminaryInsights: {
2025-06-04T21:55:17.8191448Z       matched_keyword: [32m'end\\s+(my\\s+)?life'[39m,
2025-06-04T21:55:17.8192068Z       matched_rule_analyzer: [32m'crisis'[39m,
2025-06-04T21:55:17.8192626Z       is_critical_flag: [33mtrue[39m
2025-06-04T21:55:17.8193006Z     }
2025-06-04T21:55:17.8193262Z   }
2025-06-04T21:55:17.8193504Z }
2025-06-04T21:55:17.8193654Z 
2025-06-04T21:55:17.8194872Z  [31m❯[39m src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 32[2mms[22m[39m
2025-06-04T21:55:17.8196911Z    [32m✓[39m MentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould use explicit hint when provided[32m 7[2mms[22m[39m
2025-06-04T21:55:17.8198454Z    [32m✓[39m MentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould detect crisis keywords[32m 4[2mms[22m[39m
2025-06-04T21:55:17.8200504Z [31m   [31m×[31m MentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould use LLM classification when no keywords match[39m[32m 8[2mms[22m[39m
2025-06-04T21:55:17.8201858Z [31m     → expected keyword+classification to be classification[39m
2025-06-04T21:55:17.8203290Z    [32m✓[39m MentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould apply contextual rules when session type is provided[32m 2[2mms[22m[39m
2025-06-04T21:55:17.8204961Z    [32m✓[39m MentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould handle LLM errors gracefully[32m 3[2mms[22m[39m
2025-06-04T21:55:17.8206864Z [31m   [31m×[31m MentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould apply fallback mechanisms for low confidence decisions[39m[32m 2[2mms[22m[39m
2025-06-04T21:55:17.8208161Z [31m     → expected unknown to be general_mental_health[39m
2025-06-04T21:55:17.8209805Z    [32m✓[39m MentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould combine keyword and classification when they agree[32m 1[2mms[22m[39m
2025-06-04T21:55:17.8211946Z [31m   [31m×[31m MentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould handle very short texts appropriately[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:17.8213131Z [31m     → expected depression to be unknown[39m
2025-06-04T21:55:17.8214454Z    [32m✓[39m MentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould prioritize crisis detection over other categories[32m 2[2mms[22m[39m
2025-06-04T21:55:21.2037771Z  [31m❯[39m src/components/monitoring/__tests__/RealUserMonitoring.astro.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 124[2mms[22m[39m
2025-06-04T21:55:21.2042045Z [31m   [31m×[31m RealUserMonitoring.astro[2m > [22mrenders with default props[39m[32m 74[2mms[22m[39m
2025-06-04T21:55:21.2044585Z [31m     → Unable to find an element with the text: Real User Monitoring. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
2025-06-04T21:55:21.2045864Z 
2025-06-04T21:55:21.2046168Z Ignored nodes: comments, script, style
2025-06-04T21:55:21.2046692Z [36m<body>[31m
2025-06-04T21:55:21.2047093Z   [36m<div>[31m
2025-06-04T21:55:21.2047463Z     [36m<div[31m
2025-06-04T21:55:21.2047964Z       [33mclass[31m=[32m"rum-dashboard"[31m
2025-06-04T21:55:21.2048660Z       [33mdata-testid[31m=[32m"astro-component"[31m
2025-06-04T21:55:21.2049426Z     [36m>[31m
2025-06-04T21:55:21.2049801Z       [36m<div[31m
2025-06-04T21:55:21.2050321Z         [33mclass[31m=[32m"metrics-container"[31m
2025-06-04T21:55:21.2050868Z       [36m>[31m
2025-06-04T21:55:21.2051295Z         [36m<div[31m
2025-06-04T21:55:21.2051785Z           [33mclass[31m=[32m"grid"[31m
2025-06-04T21:55:21.2052256Z         [36m>[31m
2025-06-04T21:55:21.2052629Z           [36m<div[31m
2025-06-04T21:55:21.2053226Z             [33mclass[31m=[32m"metric-card"[31m
2025-06-04T21:55:21.2053748Z           [36m>[31m
2025-06-04T21:55:21.2054143Z             [36m<h3>[31m
2025-06-04T21:55:21.2054665Z               [0mLoading Performance[0m
2025-06-04T21:55:21.2055181Z             [36m</h3>[31m
2025-06-04T21:55:21.2055608Z             [36m<div[31m
2025-06-04T21:55:21.2056147Z               [33mid[31m=[32m"loading-metrics"[31m
2025-06-04T21:55:21.2056664Z             [36m>[31m
2025-06-04T21:55:21.2057083Z               [36m<div>[31m
2025-06-04T21:55:21.2057593Z                 [36m<span>[31m
2025-06-04T21:55:21.2058104Z                   [0mTTFB:[0m
2025-06-04T21:55:21.2058578Z                 [36m</span>[31m
2025-06-04T21:55:21.2059934Z                 [36m<span>[31m
2025-06-04T21:55:21.2060453Z                   [0mLoading...[0m
2025-06-04T21:55:21.2060979Z                 [36m</span>[31m
2025-06-04T21:55:21.2061483Z               [36m</div>[31m
2025-06-04T21:55:21.2061941Z               [36m<div>[31m
2025-06-04T21:55:21.2062437Z                 [36m<span>[31m
2025-06-04T21:55:21.2062927Z                   [0mFCP:[0m
2025-06-04T21:55:21.2063424Z                 [36m</span>[31m
2025-06-04T21:55:21.2063919Z                 [36m<span>[31m
2025-06-04T21:55:21.2064423Z                   [0mLoading...[0m
2025-06-04T21:55:21.2064926Z                 [36m</span>[31m
2025-06-04T21:55:21.2065416Z               [36m</div>[31m
2025-06-04T21:55:21.2065881Z               [36m<div>[31m
2025-06-04T21:55:21.2066358Z                 [36m<span>[31m
2025-06-04T21:55:21.2066844Z                   [0mLCP:[0m
2025-06-04T21:55:21.2067312Z                 [36m</span>[31m
2025-06-04T21:55:21.2067840Z                 [36m<span>[31m
2025-06-04T21:55:21.2068339Z                   [0mLoading...[0m
2025-06-04T21:55:21.2068847Z                 [36m</span>[31m
2025-06-04T21:55:21.2069539Z               [36m</div>[31m
2025-06-04T21:55:21.2069995Z               [36m<div>[31m
2025-06-04T21:55:21.2070490Z                 [36m<span>[31m
2025-06-04T21:55:21.2071008Z                   [0mSpeed Index:[0m
2025-06-04T21:55:21.2071520Z                 [36m</span>[31m
2025-06-04T21:55:21.2072318Z                 [36m<span>[31m
2025-06-04T21:55:21.2072843Z                   [0mLoading...[0m
2025-06-04T21:55:21.2073349Z                 [36m</span>[31m
2025-06-04T21:55:21.2073847Z               [36m</div>[31m
2025-06-04T21:55:21.2074319Z             [36m</div>[31m
2025-06-04T21:55:21.2074749Z           [36m</div>[31m
2025-06-04T21:55:21.2075176Z           [36m<div[31m
2025-06-04T21:55:21.2075699Z             [33mclass[31m=[32m"metric-card"[31m
2025-06-04T21:55:21.2076238Z           [36m>[31m
2025-06-04T21:55:21.2076636Z             [36m<h3>[31m
2025-06-04T21:55:21.2077101Z               [0mInteractivity[0m
2025-06-04T21:55:21.2077568Z             [36m</h3>[31m
2025-06-04T21:55:21.2078012Z             [36m<div[31m
2025-06-04T21:55:21.2078628Z               [33mid[31m=[32m"interactivity-metrics"[31m
2025-06-04T21:55:21.2079387Z             [36m>[31m
2025-06-04T21:55:21.2079804Z               [36m<div>[31m
2025-06-04T21:55:21.2080302Z                 [36m<span>[31m
2025-06-04T21:55:21.2080799Z                   [0mFID:[0m
2025-06-04T21:55:21.2081266Z                 [36m</span>[31m
2025-06-04T21:55:21.2081756Z                 [36m<span>[31m
2025-06-04T21:55:21.2082273Z                   [0mLoading...[0m
2025-06-04T21:55:21.2082813Z                 [36m</span>[31m
2025-06-04T21:55:21.2083305Z               [36m</div>[31m
2025-06-04T21:55:21.2083733Z               [36m<div>[31m
2025-06-04T21:55:21.2084200Z                 [36m<span>[31m
2025-06-04T21:55:21.2084708Z                   [0mTBT:[0m
2025-06-04T21:55:21.2085171Z                 [36m</span>[31m
2025-06-04T21:55:21.2085666Z                 [36m<span>[31m
2025-06-04T21:55:21.2086243Z                   [0mLoading...[0m
2025-06-04T21:55:21.2086783Z                 [36m</span>[31m
2025-06-04T21:55:21.2087274Z               [36m</div>[31m
2025-06-04T21:55:21.2087717Z               [36m<div>[31m
2025-06-04T21:55:21.2088176Z                 [36m<span>[31m
2025-06-04T21:55:21.2088674Z                   [0mTTI:[0m
2025-06-04T21:55:21.2093356Z                 [36m</span>[31m
2025-06-04T21:55:21.2093980Z                 [36m<span>[31m
2025-06-04T21:55:21.2094519Z                   [0mLoading...[0m
2025-06-04T21:55:21.2095073Z                 [36m</span>[31m
2025-06-04T21:55:21.2095581Z               [36m</div>[31m
2025-06-04T21:55:21.2096019Z             [36m</div>[31m
2025-06-04T21:55:21.2096448Z           [36m</div>[31m
2025-06-04T21:55:21.2096874Z           [36m<div[31m
2025-06-04T21:55:21.2097710Z             [33mclass[31m=[32m"metric-card"[31m
2025-06-04T21:55:21.2098213Z           [36m>[31m
2025-06-04T21:55:21.2098623Z             [36m<h3>[31m
2025-06-04T21:55:21.2099332Z               [0mVisual Stability[0m
2025-06-04T21:55:21.2099850Z             [36m</h3>[31m
2025-06-04T21:55:21.2100266Z             [36m<div[31m
2025-06-04T21:55:21.2100831Z               [33mid[31m=[32m"stability-metrics"[31m
2025-06-04T21:55:21.2101366Z             [36m>[31m
2025-06-04T21:55:21.2101791Z               [36m<div>[31m
2025-06-04T21:55:21.2102255Z                 [36m<span>[31m
2025-06-04T21:55:21.2102751Z                   [0mCLS:[0m
2025-06-04T21:55:21.2103249Z                 [36m</span>[31m
2025-06-04T21:55:21.2103749Z                 [36m<span>[31m
2025-06-04T21:55:21.2104256Z                   [0mLoading...[0m
2025-06-04T21:55:21.2104758Z                 [36m</span>[31m
2025-06-04T21:55:21.2105245Z               [36m</div>[31m
2025-06-04T21:55:21.2105692Z             [36m</div>[31m
2025-06-04T21:55:21.2106108Z           [36m</div>[31m
2025-06-04T21:55:21.2106517Z           [36m<div[31m
2025-06-04T21:55:21.2107061Z             [33mclass[31m=[32m"metric-card"[31m
2025-06-04T21:55:21.2107579Z           [36m>[31m
2025-06-04T21:55:21.2107981Z             [36m<h3>[31m
2025-06-04T21:55:21.2108462Z               [0mUser Demographics[0m
2025-06-04T21:55:21.2108964Z             [36m</h3>[31m
2025-06-04T21:55:21.2109922Z             [36m<div[31m
2025-06-04T21:55:21.2110512Z               [33mid[31m=[32m"demographics-metrics"[31m
2025-06-04T21:55:21.2111050Z             [36m>[31m
2025-06-04T21:55:21.2111479Z               [36m<div>[31m
2025-06-04T21:55:21.2111960Z                 [36m<span>[31m
2025-06-04T21:55:21.2112455Z                   [0mDevices:[0m
2025-06-04T21:55:21.2112953Z                 [36m</span>[31m
2025-06-04T21:55:21.2113460Z                 [36m<span>[31m
2025-06-04T21:55:21.2113959Z                   [0mLoading...[0m
2025-06-04T21:55:21.2114487Z                 [36m</span>[31m
2025-06-04T21:55:21.2114982Z               [36m</div>[31m
2025-06-04T21:55:21.2115440Z               [36m<div>[31m
2025-06-04T21:55:21.2115921Z                 [36m<span>[31m
2025-06-04T21:55:21.2116413Z                   [0mBrowsers:[0m
2025-06-04T21:55:21.2116929Z                 [36m</span>[31m
2025-06-04T21:55:21.2117418Z                 [36m<span>[31m
2025-06-04T21:55:21.2117920Z                   [0mLoading...[0m
2025-06-04T21:55:21.2118442Z                 [36m</span>[31m
2025-06-04T21:55:21.2118944Z               [36m</div>[31m
2025-06-04T21:55:21.2119622Z               [36m<div>[31m
2025-06-04T21:55:21.2120107Z                 [36m<span>[31m
2025-06-04T21:55:21.2120605Z                   [0mCountries:[0m
2025-06-04T21:55:21.2121118Z                 [36m</span>[31m
2025-06-04T21:55:21.2121603Z                 [36m<span>[31m
2025-06-04T21:55:21.2122094Z                   [0mLoading...[0m
2025-06-04T21:55:21.2122615Z                 [36m</span>[31m
2025-06-04T21:55:21.2123120Z               [36m</div>[31m
2025-06-04T21:55:21.2123573Z             [36m</div>[31m
2025-06-04T21:55:21.2124008Z           [36m</div>[31m
2025-06-04T21:55:21.2124428Z           [36m<div[31m
2025-06-04T21:55:21.2124948Z             [33mclass[31m=[32m"metric-card"[31m
2025-06-04T21:55:21.2125458Z           [36m>[31m
2025-06-04T21:55:21.2125852Z             [36m<h3>[31m
2025-06-04T21:55:21.2126348Z               [0mResource Metrics[0m
2025-06-04T21:55:21.2126834Z             [36m</h3>[31m
2025-06-04T21:55:21.2127261Z             [36m<div[31m
2025-06-04T21:55:21.2127827Z               [33mid[31m=[32m"resource-metrics"[31m
2025-06-04T21:55:21.2128345Z             [36m>[31m
2025-06-04T21:55:21.2128741Z               [36m<div>[31m
2025-06-04T21:55:21.2129443Z                 [36m<span>[31m
2025-06-04T21:55:21.2129951Z                   [0mJS Size:[0m
2025-06-04T21:55:21.2130445Z                 [36m</span>[31m
2025-06-04T21:55:21.2131246Z                 [36m<span>[31m
2025-06-04T21:55:21.2131782Z                   [0mLoading...[0m
2025-06-04T21:55:21.2132305Z                 [36m</span>[31m
2025-06-04T21:55:21.2132785Z               [36m</div>[31m
2025-06-04T21:55:21.2133222Z               [36m<div>[31m
2025-06-04T21:55:21.2133710Z                 [36m<span>[31m
2025-06-04T21:55:21.2134194Z                   [0mCSS Size:[0m
2025-06-04T21:55:21.2134688Z                 [36m</span>[31m
2025-06-04T21:55:21.2135184Z                 [36m<span>[31m
2025-06-04T21:55:21.2135708Z                   [0mLoading...[0m
2025-06-04T21:55:21.2136237Z                 [36m</span>[31m
2025-06-04T21:55:21.2136729Z               [36m</div>[31m
2025-06-04T21:55:21.2137159Z               [36m<div>[31m
2025-06-04T21:55:21.2137654Z                 [36m<span>[31m
2025-06-04T21:55:21.2138151Z                   [0mRequests:[0m
2025-06-04T21:55:21.2138645Z                 [36m</span>[31m
2025-06-04T21:55:21.2139351Z                 [36m<span>[31m
2025-06-04T21:55:21.2139887Z                   [0mLoading...[0m
2025-06-04T21:55:21.2140423Z                 [36m</span>[31m
2025-06-04T21:55:21.2140908Z               [36m</div>[31m
2025-06-04T21:55:21.2141333Z             [36m</div>[31m
2025-06-04T21:55:21.2141764Z           [36m</div>[31m
2025-06-04T21:55:21.2142184Z           [36m<div[31m
2025-06-04T21:55:21.2142699Z             [33mclass[31m=[32m"metric-card"[31m
2025-06-04T21:55:21.2143448Z           [36m>[31m
2025-06-04T21:55:21.2143895Z             [36m<h3>[31m
2025-06-04T21:55:21.2144387Z               [0mError Rates[0m
2025-06-04T21:55:21.2144845Z             [36m</h3>[31m
2025-06-04T21:55:21.2145258Z             [36m<div[31m
2025-06-04T21:55:21.2145807Z               [33mid[31m=[32m"error-metrics"[31m
2025-06-04T21:55:21.2146324Z             [36m>[31m
2025-06-04T21:55:21.2146720Z               [36m<div>[31m
2025-06-04T21:55:21.2147194Z                 [36m<span>[31m
2025-06-04T21:55:21.2147730Z                   [0mJS Errors:[0m
2025-06-04T21:55:21.2148266Z                 [36m</span>[31m
2025-06-04T21:55:21.2148779Z                 [36m<span>[31m
2025-06-04T21:55:21.2149496Z                   [0mLoading...[0m
2025-06-04T21:55:21.2150003Z                 [36m</span>[31m
2025-06-04T21:55:21.2150507Z               [36m</div>[31m
2025-06-04T21:55:21.2150945Z               [36m<div>[31m
2025-06-04T21:55:21.2151472Z                 [36m<span>[31m
2025-06-04T21:55:21.2152004Z                   [0mAPI Errors:[0m
2025-06-04T21:55:21.2152538Z                 [36m</span>[31m
2025-06-04T21:55:21.2153051Z                 [36m<span>[31m
2025-06-04T21:55:21.2153554Z                   [0mLoading...[0m
2025-06-04T21:55:21.2154054Z                 [36m</span>[31m
2025-06-04T21:55:21.2154563Z               [36m</div>[31m
2025-06-04T21:55:21.2155016Z               [36m<div>[31m
2025-06-04T21:55:21.2155479Z                 [36m<span>[31m
2025-06-04T21:55:21.2155966Z                   [0m404s:[0m
2025-06-04T21:55:21.2156450Z                 [36m</span>[31m
2025-06-04T21:55:21.2156951Z                 [36m<span>[31m
2025-06-04T21:55:21.2157448Z                   [0mLoading...[0m
2025-06-04T21:55:21.2157954Z                 [36m</span>[31m
2025-06-04T21:55:21.2158439Z               [36m</div>[31m
2025-06-04T21:55:21.2158880Z             [36m</div>[31m
2025-06-04T21:55:21.2159502Z           [36m</div>[31m
2025-06-04T21:55:21.2159926Z         [36m</div>[31m
2025-06-04T21:55:21.2160335Z         [36m<div[31m
2025-06-04T21:55:21.2160831Z           [33mclass[31m=[32m"mt-6"[31m
2025-06-04T21:55:21.2161312Z         [36m>[31m
2025-06-04T21:55:21.2161692Z           [36m<span[31m
2025-06-04T21:55:21.2162207Z             [33mid[31m=[32m"last-updated"[31m
2025-06-04T21:55:21.2162702Z           [36m>[31m
2025-06-04T21:55:21.2163176Z             [0mLast updated: Never[0m
2025-06-04T21:55:21.2163658Z           [36m</span>[31m
2025-06-04T21:55:21.2164363Z           [36m<button[31m
2025-06-04T21:55:21.2164898Z             [33mid[31m=[32m"refresh-btn"[31m
2025-06-04T21:55:21.2165395Z           [36m>[31m
2025-06-04T21:55:21.2165843Z             [0mRefresh Now[0m
2025-06-04T21:55:21.2166286Z           [36m</button>[31m
2025-06-04T21:55:21.2166705Z         [36m</div>[31m
2025-06-04T21:55:21.2167082Z       [36m</div>[31m
2025-06-04T21:55:21.2167463Z     [36m</div>[31m
2025-06-04T21:55:21.2167852Z   [36m</div>[31m
2025-06-04T21:55:21.2168261Z [36m</body>[31m[39m
2025-06-04T21:55:21.2169379Z    [32m✓[39m RealUserMonitoring.astro[2m > [22mrenders with custom props[32m 19[2mms[22m[39m
2025-06-04T21:55:21.2170746Z    [32m✓[39m RealUserMonitoring.astro[2m > [22mstarts with loading placeholders[32m 15[2mms[22m[39m
2025-06-04T21:55:21.2171872Z    [32m✓[39m RealUserMonitoring.astro[2m > [22mshows last updated text[32m 13[2mms[22m[39m
2025-06-04T21:55:24.3723226Z  [32m✓[39m src/components/monitoring/__tests__/RUMWidget.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 117[2mms[22m[39m
2025-06-04T21:55:25.4811500Z  [31m❯[39m src/layouts/__tests__/DocumentationLayout.test.tsx [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 6[2mms[22m[39m
2025-06-04T21:55:25.4815268Z [31m   [31m×[31m DocumentationLayout renders with correct title and content[39m[32m 4[2mms[22m[39m
2025-06-04T21:55:25.4817157Z [31m     → Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.[39m
2025-06-04T21:55:25.4818221Z [31m   [31m×[31m DocumentationLayout uses frontmatter props when available[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:25.4819578Z [31m     → Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.[39m
2025-06-04T21:55:26.5030075Z [90mstderr[2m | src/components/dashboard/__tests__/SimulatorDashboard.test.tsx[2m > [22m[2mSimulatorDashboardReact[2m > [22m[2mswitches to simulation container when scenario is selected
2025-06-04T21:55:26.5032185Z [22m[39mAn update to SimulatorDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:26.5032791Z 
2025-06-04T21:55:26.5033370Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:26.5033924Z 
2025-06-04T21:55:26.5034078Z act(() => {
2025-06-04T21:55:26.5034505Z   /* fire events that update state */
2025-06-04T21:55:26.5034937Z });
2025-06-04T21:55:26.5035290Z /* assert on the output */
2025-06-04T21:55:26.5035564Z 
2025-06-04T21:55:26.5036594Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:26.5037974Z An update to SimulatorDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:26.5038528Z 
2025-06-04T21:55:26.5039339Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:26.5039892Z 
2025-06-04T21:55:26.5040038Z act(() => {
2025-06-04T21:55:26.5040432Z   /* fire events that update state */
2025-06-04T21:55:26.5040860Z });
2025-06-04T21:55:26.5041208Z /* assert on the output */
2025-06-04T21:55:26.5041466Z 
2025-06-04T21:55:26.5042394Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:26.5043459Z 
2025-06-04T21:55:26.5113612Z [90mstderr[2m | src/components/dashboard/__tests__/SimulatorDashboard.test.tsx[2m > [22m[2mSimulatorDashboardReact[2m > [22m[2mshows metrics dialog when metrics button is clicked
2025-06-04T21:55:26.5115544Z [22m[39mAn update to SimulatorDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:26.5116149Z 
2025-06-04T21:55:26.5116719Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:26.5117751Z 
2025-06-04T21:55:26.5117895Z act(() => {
2025-06-04T21:55:26.5118299Z   /* fire events that update state */
2025-06-04T21:55:26.5118726Z });
2025-06-04T21:55:26.5119048Z /* assert on the output */
2025-06-04T21:55:26.5119505Z 
2025-06-04T21:55:26.5120426Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:26.5121227Z 
2025-06-04T21:55:26.5138640Z [90mstderr[2m | src/components/dashboard/__tests__/SimulatorDashboard.test.tsx[2m > [22m[2mSimulatorDashboardReact[2m > [22m[2mshows metrics dialog when metrics button is clicked
2025-06-04T21:55:26.5140732Z [22m[39mAn update to SimulatorDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:26.5141309Z 
2025-06-04T21:55:26.5141876Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:26.5142412Z 
2025-06-04T21:55:26.5142556Z act(() => {
2025-06-04T21:55:26.5142945Z   /* fire events that update state */
2025-06-04T21:55:26.5143366Z });
2025-06-04T21:55:26.5143687Z /* assert on the output */
2025-06-04T21:55:26.5143948Z 
2025-06-04T21:55:26.5144900Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:26.5145710Z 
2025-06-04T21:55:26.5208204Z [90mstderr[2m | src/components/dashboard/__tests__/SimulatorDashboard.test.tsx[2m > [22m[2mSimulatorDashboardReact[2m > [22m[2mreturns to scenario selection when back button is clicked
2025-06-04T21:55:26.5216125Z [22m[39mAn update to SimulatorDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:26.5216728Z 
2025-06-04T21:55:26.5217299Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:26.5217851Z 
2025-06-04T21:55:26.5217986Z act(() => {
2025-06-04T21:55:26.5218367Z   /* fire events that update state */
2025-06-04T21:55:26.5218779Z });
2025-06-04T21:55:26.5219323Z /* assert on the output */
2025-06-04T21:55:26.5219580Z 
2025-06-04T21:55:26.5220520Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:26.5221832Z An update to SimulatorDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:26.5222385Z 
2025-06-04T21:55:26.5222940Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:26.5223509Z 
2025-06-04T21:55:26.5223690Z act(() => {
2025-06-04T21:55:26.5224099Z   /* fire events that update state */
2025-06-04T21:55:26.5224521Z });
2025-06-04T21:55:26.5224865Z /* assert on the output */
2025-06-04T21:55:26.5225142Z 
2025-06-04T21:55:26.5226075Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:26.5229661Z 
2025-06-04T21:55:26.5239056Z [90mstderr[2m | src/components/dashboard/__tests__/SimulatorDashboard.test.tsx[2m > [22m[2mSimulatorDashboardReact[2m > [22m[2mreturns to scenario selection when back button is clicked
2025-06-04T21:55:26.5258399Z [22m[39mAn update to SimulatorDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:26.5258999Z 
2025-06-04T21:55:26.5262103Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:26.5262668Z 
2025-06-04T21:55:26.5262828Z act(() => {
2025-06-04T21:55:26.5263237Z   /* fire events that update state */
2025-06-04T21:55:26.5263645Z });
2025-06-04T21:55:26.5263964Z /* assert on the output */
2025-06-04T21:55:26.5264213Z 
2025-06-04T21:55:26.5265075Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:26.5265821Z 
2025-06-04T21:55:26.5268262Z  [32m✓[39m src/components/dashboard/__tests__/SimulatorDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 79[2mms[22m[39m
2025-06-04T21:55:27.7067717Z  [31m❯[39m src/hooks/__tests__/usePatternDetection.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 48[2mms[22m[39m
2025-06-04T21:55:27.7072966Z [31m   [31m×[31m usePatternDetection[2m > [22mshould detect patterns from conversation history[39m[32m 29[2mms[22m[39m
2025-06-04T21:55:27.7074145Z [31m     → expected  to equal [object Object][39m
2025-06-04T21:55:27.7075413Z [31m   [31m×[31m usePatternDetection[2m > [22mshould handle streaming responses[39m[32m 4[2mms[22m[39m
2025-06-04T21:55:27.7076439Z [31m     → expected  to equal [object Object][39m
2025-06-04T21:55:27.7077721Z [31m   [31m×[31m usePatternDetection[2m > [22mshould return error pattern on API failure[39m[32m 4[2mms[22m[39m
2025-06-04T21:55:27.7078805Z [31m     → expected  to equal [object Object][39m
2025-06-04T21:55:27.7080235Z [31m   [31m×[31m usePatternDetection[2m > [22mshould handle malformed JSON responses[39m[32m 3[2mms[22m[39m
2025-06-04T21:55:27.7081361Z [31m     → expected  to equal [object Object][39m
2025-06-04T21:55:27.7082412Z    [32m✓[39m usePatternDetection[2m > [22mshould handle empty message array[32m 4[2mms[22m[39m
2025-06-04T21:55:27.7083744Z    [32m✓[39m usePatternDetection[2m > [22mshould handle non-array responses[32m 2[2mms[22m[39m
2025-06-04T21:55:32.9194013Z  [32m✓[39m src/components/ai/__tests__/MentalHealthInsights.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 110[2mms[22m[39m
2025-06-04T21:55:34.1592978Z  [31m❯[39m src/components/chat/__tests__/MentalHealthInsights.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 64[2mms[22m[39m
2025-06-04T21:55:34.1596499Z    [32m✓[39m MentalHealthInsights[2m > [22mrenders loading state[32m 41[2mms[22m[39m
2025-06-04T21:55:34.1597513Z    [32m✓[39m MentalHealthInsights[2m > [22mrenders empty state when no analysis is provided[32m 5[2mms[22m[39m
2025-06-04T21:55:34.1598415Z [31m   [31m×[31m MentalHealthInsights[2m > [22mrenders analysis with moderate severity[39m[32m 11[2mms[22m[39m
2025-06-04T21:55:34.1599501Z [31m     → Cannot read properties of undefined (reading 'map')[39m
2025-06-04T21:55:34.1600232Z [31m   [31m×[31m MentalHealthInsights[2m > [22mrenders analysis with low severity[39m[32m 3[2mms[22m[39m
2025-06-04T21:55:34.1600853Z [31m     → Cannot read properties of undefined (reading 'map')[39m
2025-06-04T21:55:34.1601560Z [31m   [31m×[31m MentalHealthInsights[2m > [22mrenders analysis with high severity[39m[32m 2[2mms[22m[39m
2025-06-04T21:55:34.1602203Z [31m     → Cannot read properties of undefined (reading 'map')[39m
2025-06-04T21:55:35.0961933Z [90mstderr[2m | src/hooks/__tests__/useEmotionDetection.test.ts[2m > [22m[2museEmotionDetection[2m > [22m[2mshould detect emotions from text content
2025-06-04T21:55:35.0964304Z [22m[39mError detecting emotions: SyntaxError: Unexpected token 'i', "invalid json" is not valid JSON
2025-06-04T21:55:35.0965597Z     at JSON.parse (<anonymous>)
2025-06-04T21:55:35.0967078Z     at Object.detectEmotions [90m(/home/runner/work/pixelated/pixelated/[39msrc/hooks/useEmotionDetection.ts:62:31[90m)[39m
2025-06-04T21:55:35.0968950Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/hooks/__tests__/useEmotionDetection.test.ts:37:22
2025-06-04T21:55:35.0971370Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:20
2025-06-04T21:55:35.0972551Z 
2025-06-04T21:55:35.1025346Z [90mstderr[2m | src/hooks/__tests__/useEmotionDetection.test.ts[2m > [22m[2museEmotionDetection[2m > [22m[2mshould handle streaming responses
2025-06-04T21:55:35.1028345Z [22m[39mError detecting emotions: SyntaxError: Unexpected token 'i', "invalid json" is not valid JSON
2025-06-04T21:55:35.1032046Z     at JSON.parse (<anonymous>)
2025-06-04T21:55:35.1038427Z     at Object.detectEmotions [90m(/home/runner/work/pixelated/pixelated/[39msrc/hooks/useEmotionDetection.ts:62:31[90m)[39m
2025-06-04T21:55:35.1040870Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/hooks/__tests__/useEmotionDetection.test.ts:57:22
2025-06-04T21:55:35.1042818Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:20
2025-06-04T21:55:35.1045198Z 
2025-06-04T21:55:35.1064412Z [90mstderr[2m | src/hooks/__tests__/useEmotionDetection.test.ts[2m > [22m[2museEmotionDetection[2m > [22m[2mshould return default values on error
2025-06-04T21:55:35.1074467Z [22m[39mError detecting emotions: SyntaxError: Unexpected token 'i', "invalid json" is not valid JSON
2025-06-04T21:55:35.1075323Z     at JSON.parse (<anonymous>)
2025-06-04T21:55:35.1076580Z     at Object.detectEmotions [90m(/home/runner/work/pixelated/pixelated/[39msrc/hooks/useEmotionDetection.ts:62:31[90m)[39m
2025-06-04T21:55:35.1078220Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/hooks/__tests__/useEmotionDetection.test.ts:77:22
2025-06-04T21:55:35.1080338Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:20
2025-06-04T21:55:35.1081318Z 
2025-06-04T21:55:35.1099602Z [90mstderr[2m | src/hooks/__tests__/useEmotionDetection.test.ts[2m > [22m[2museEmotionDetection[2m > [22m[2mshould handle malformed JSON responses
2025-06-04T21:55:35.1108409Z [22m[39mError detecting emotions: SyntaxError: Unexpected token 'i', "invalid json" is not valid JSON
2025-06-04T21:55:35.1109485Z     at JSON.parse (<anonymous>)
2025-06-04T21:55:35.1110742Z     at Object.detectEmotions [90m(/home/runner/work/pixelated/pixelated/[39msrc/hooks/useEmotionDetection.ts:62:31[90m)[39m
2025-06-04T21:55:35.1112370Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/hooks/__tests__/useEmotionDetection.test.ts:95:22
2025-06-04T21:55:35.1114302Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:20
2025-06-04T21:55:35.1115296Z 
2025-06-04T21:55:35.1124963Z  [31m❯[39m src/hooks/__tests__/useEmotionDetection.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 49[2mms[22m[39m
2025-06-04T21:55:35.1130059Z [31m   [31m×[31m useEmotionDetection[2m > [22mshould detect emotions from text content[39m[32m 36[2mms[22m[39m
2025-06-04T21:55:35.1131856Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:55:35.1134752Z [31m   [31m×[31m useEmotionDetection[2m > [22mshould handle streaming responses[39m[32m 4[2mms[22m[39m
2025-06-04T21:55:35.1136300Z [31m     → expected [object Object] to equal [object Object][39m
2025-06-04T21:55:35.1138768Z    [32m✓[39m useEmotionDetection[2m > [22mshould return default values on error[32m 4[2mms[22m[39m
2025-06-04T21:55:35.1140320Z    [32m✓[39m useEmotionDetection[2m > [22mshould handle malformed JSON responses[32m 3[2mms[22m[39m
2025-06-04T21:55:37.2759042Z [90mstderr[2m | src/lib/security/__tests__/audit.logging.test.ts[2m > [22m[2mauditLoggingService[2m > [22m[2mlogEvent[2m > [22m[2mshould log an event with sanitized details
2025-06-04T21:55:37.2761033Z [22m[39mFailed to log audit event: TypeError: this.config.redactFields is not iterable
2025-06-04T21:55:37.2762788Z     at AuditLoggingService.sanitizeEntry [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/security/audit.logging.ts:112:39[90m)[39m
2025-06-04T21:55:37.2764768Z     at AuditLoggingService.logEvent [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/security/audit.logging.ts:69:35[90m)[39m
2025-06-04T21:55:37.2766472Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/security/__tests__/audit.logging.test.ts:51:29
2025-06-04T21:55:37.2768406Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:55:37.2771356Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:55:37.2773558Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:55:37.2774753Z     at new Promise (<anonymous>)
2025-06-04T21:55:37.2776477Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:55:37.2778971Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:55:37.2782755Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:55:37.2783829Z 
2025-06-04T21:55:37.2843427Z [90mstderr[2m | src/lib/security/__tests__/audit.logging.test.ts[2m > [22m[2mauditLoggingService[2m > [22m[2mlogEvent[2m > [22m[2mshould handle logging errors gracefully
2025-06-04T21:55:37.2860935Z [22m[39mFailed to log audit event: TypeError: this.config.redactFields is not iterable
2025-06-04T21:55:37.2862834Z     at AuditLoggingService.sanitizeEntry [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/security/audit.logging.ts:112:39[90m)[39m
2025-06-04T21:55:37.2864853Z     at AuditLoggingService.logEvent [90m(/home/runner/work/pixelated/pixelated/[39msrc/lib/security/audit.logging.ts:69:35[90m)[39m
2025-06-04T21:55:37.2866652Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/lib/security/__tests__/audit.logging.test.ts:62:40
2025-06-04T21:55:37.2868665Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:103:11
2025-06-04T21:55:37.2871179Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:596:26
2025-06-04T21:55:37.2873414Z     at [90mfile:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:879:20
2025-06-04T21:55:37.2874594Z     at new Promise (<anonymous>)
2025-06-04T21:55:37.2876270Z     at runWithTimeout [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:852:10[90m)[39m
2025-06-04T21:55:37.2878770Z     at runTest [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1360:12[90m)[39m
2025-06-04T21:55:37.2881425Z     at runSuite [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.1.4/node_modules/[4m@vitest[24m/runner/dist/index.js:1507:8[90m)[39m
2025-06-04T21:55:37.2882500Z 
2025-06-04T21:55:37.2890156Z [90mstdout[2m | src/lib/security/__tests__/audit.logging.test.ts[2m > [22m[2mauditLoggingService[2m > [22m[2mcleanup[2m > [22m[2mshould log cleanup message
2025-06-04T21:55:37.2891470Z [22m[39mAudit logging service cleaned up
2025-06-04T21:55:37.2891803Z 
2025-06-04T21:55:37.2912474Z  [31m❯[39m src/lib/security/__tests__/audit.logging.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 25[2mms[22m[39m
2025-06-04T21:55:37.2922574Z [31m   [31m×[31m auditLoggingService[2m > [22mlogEvent[2m > [22mshould log an event with sanitized details[39m[32m 17[2mms[22m[39m
2025-06-04T21:55:37.2924159Z [31m     → promise rejected "SecurityError: Failed to log audit event" instead of resolving[39m
2025-06-04T21:55:37.2926243Z [31m   [31m×[31m auditLoggingService[2m > [22mlogEvent[2m > [22mshould handle logging errors gracefully[39m[32m 4[2mms[22m[39m
2025-06-04T21:55:37.2927458Z [31m     → expected "spy" to be called at least once[39m
2025-06-04T21:55:37.2929293Z [31m   [31m×[31m auditLoggingService[2m > [22msanitizeEntry[2m > [22mshould hash sensitive identifiers when PII is not included[39m[32m 1[2mms[22m[39m
2025-06-04T21:55:37.2930699Z [31m     → this.config.redactFields is not iterable[39m
2025-06-04T21:55:37.2932023Z [31m   [31m×[31m auditLoggingService[2m > [22mcleanup[2m > [22mshould log cleanup message[39m[32m 2[2mms[22m[39m
2025-06-04T21:55:37.2933765Z [31m     → expected "spy" to be called with arguments: [ 'Audit logging service cleaned up' ][90m
2025-06-04T21:55:37.2934482Z 
2025-06-04T21:55:37.2934882Z Number of calls: [1m0[22m
2025-06-04T21:55:37.2935419Z [31m[39m
2025-06-04T21:55:38.4797189Z [90mstderr[2m | src/components/ai/__tests__/PerformanceDashboard.test.tsx[2m > [22m[2mPerformanceDashboardReact Component[2m > [22m[2mupdates metrics on interval
2025-06-04T21:55:38.4799058Z [22m[39mAn update to PerformanceDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:38.4801235Z 
2025-06-04T21:55:38.4802977Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:38.4804684Z 
2025-06-04T21:55:38.4805023Z act(() => {
2025-06-04T21:55:38.4806077Z   /* fire events that update state */
2025-06-04T21:55:38.4806717Z });
2025-06-04T21:55:38.4807201Z /* assert on the output */
2025-06-04T21:55:38.4807603Z 
2025-06-04T21:55:38.4808651Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:38.4810427Z An update to PerformanceDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:38.4811081Z 
2025-06-04T21:55:38.4811728Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:38.4812361Z 
2025-06-04T21:55:38.4812578Z act(() => {
2025-06-04T21:55:38.4813060Z   /* fire events that update state */
2025-06-04T21:55:38.4814361Z });
2025-06-04T21:55:38.4814901Z /* assert on the output */
2025-06-04T21:55:38.4815288Z 
2025-06-04T21:55:38.4816348Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:38.4817930Z An update to PerformanceDashboardReact inside a test was not wrapped in act(...).
2025-06-04T21:55:38.4818666Z 
2025-06-04T21:55:38.4819734Z When testing, code that causes React state updates should be wrapped into act(...):
2025-06-04T21:55:38.4820566Z 
2025-06-04T21:55:38.4821940Z act(() => {
2025-06-04T21:55:38.4822355Z   /* fire events that update state */
2025-06-04T21:55:38.4822772Z });
2025-06-04T21:55:38.4823097Z /* assert on the output */
2025-06-04T21:55:38.4823354Z 
2025-06-04T21:55:38.4824218Z This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-06-04T21:55:38.4824948Z 
2025-06-04T21:55:38.4923787Z [90mstderr[2m | src/components/ai/__tests__/PerformanceDashboard.test.tsx[2m > [22m[2mPerformanceDashboardReact Component[2m > [22m[2mhandles error states
2025-06-04T21:55:38.4933643Z [22m[39mError fetching cache stats: Error: Service unavailable
2025-06-04T21:55:38.4937433Z     at Object.<anonymous> [90m(/home/runner/work/pixelated/pixelated/[39msrc/components/ai/__tests__/PerformanceDashboard.test.tsx:70:15[90m)[39m
2025-06-04T21:55:38.4941327Z     at Object.mockCall [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/@vitest+spy@3.1.4/node_modules/[4m@vitest[24m/spy/dist/index.js:66:15[90m)[39m
2025-06-04T21:55:38.4947937Z     at Object.spy [as getCacheService] [90m(file:///home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/tinyspy@3.0.2/node_modules/[4mtinyspy[24m/dist/index.js:45:80[90m)[39m
2025-06-04T21:55:38.4950914Z     at fetchCacheStats [90m(/home/runner/work/pixelated/pixelated/[39msrc/components/ai/PerformanceDashboardReact.tsx:37:31[90m)[39m
2025-06-04T21:55:38.4952616Z     at [90m/home/runner/work/pixelated/pixelated/[39msrc/components/ai/PerformanceDashboardReact.tsx:49:5
2025-06-04T21:55:38.4954902Z     at Object.react-stack-bottom-frame [90m(/home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/react-dom@19.1.0_react@19.1.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23949:20[90m)[39m
2025-06-04T21:55:38.4967245Z     at runWithFiberInDEV [90m(/home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/react-dom@19.1.0_react@19.1.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13[90m)[39m
2025-06-04T21:55:38.4970158Z     at commitHookEffectListMount [90m(/home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/react-dom@19.1.0_react@19.1.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:11905:29[90m)[39m
2025-06-04T21:55:38.4973236Z     at commitHookPassiveMountEffects [90m(/home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/react-dom@19.1.0_react@19.1.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:12028:11[90m)[39m
2025-06-04T21:55:38.4976338Z     at commitPassiveMountOnFiber [90m(/home/runner/work/pixelated/pixelated/[39mnode_modules/[4m.pnpm[24m/react-dom@19.1.0_react@19.1.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13841:13[90m)[39m
2025-06-04T21:55:38.4977704Z 
2025-06-04T21:55:38.4978948Z  [31m❯[39m src/components/ai/__tests__/PerformanceDashboard.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 76[2mms[22m[39m
2025-06-04T21:55:38.4981100Z [31m   [31m×[31m PerformanceDashboardReact Component[2m > [22mrenders properly with default props[39m[32m 52[2mms[22m[39m
2025-06-04T21:55:38.4983662Z [31m     → Unable to find an element with the text: /100 \/1000/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
2025-06-04T21:55:38.4984829Z 
2025-06-04T21:55:38.4985107Z Ignored nodes: comments, script, style
2025-06-04T21:55:38.4985607Z [36m<body>[31m
2025-06-04T21:55:38.4985991Z   [36m<div>[31m
2025-06-04T21:55:38.4986383Z     [36m<div[31m
2025-06-04T21:55:38.4986862Z       [33mclass[31m=[32m"p-6"[31m
2025-06-04T21:55:38.4987324Z     [36m>[31m
2025-06-04T21:55:38.4987692Z       [36m<div[31m
2025-06-04T21:55:38.4988168Z         [33mclass[31m=[32m"mb-6"[31m
2025-06-04T21:55:38.4988646Z       [36m>[31m
2025-06-04T21:55:38.4989013Z         [36m<h3[31m
2025-06-04T21:55:38.4989893Z           [33mclass[31m=[32m"text-lg font-medium mb-2"[31m
2025-06-04T21:55:38.4990449Z         [36m>[31m
2025-06-04T21:55:38.4990975Z           [0mCache Performance[0m
2025-06-04T21:55:38.4991472Z         [36m</h3>[31m
2025-06-04T21:55:38.4991879Z         [36m<div[31m
2025-06-04T21:55:38.4992675Z           [33mclass[31m=[32m"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"[31m
2025-06-04T21:55:38.4993369Z         [36m>[31m
2025-06-04T21:55:38.4993764Z           [36m<div[31m
2025-06-04T21:55:38.4994864Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T21:55:38.4995766Z           [36m>[31m
2025-06-04T21:55:38.4996175Z             [36m<div[31m
2025-06-04T21:55:38.4996909Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.4997547Z             [36m>[31m
2025-06-04T21:55:38.4997947Z               [0mSize[0m
2025-06-04T21:55:38.4998388Z             [36m</div>[31m
2025-06-04T21:55:38.4998832Z             [36m<div[31m
2025-06-04T21:55:38.4999620Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5000505Z             [36m>[31m
2025-06-04T21:55:38.5000911Z               [0m100[0m
2025-06-04T21:55:38.5001383Z               [0m entries[0m
2025-06-04T21:55:38.5001833Z             [36m</div>[31m
2025-06-04T21:55:38.5002262Z           [36m</div>[31m
2025-06-04T21:55:38.5002683Z           [36m<div[31m
2025-06-04T21:55:38.5003794Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T21:55:38.5004699Z           [36m>[31m
2025-06-04T21:55:38.5005097Z             [36m<div[31m
2025-06-04T21:55:38.5005820Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.5006460Z             [36m>[31m
2025-06-04T21:55:38.5006914Z               [0mMax Size[0m
2025-06-04T21:55:38.5007358Z             [36m</div>[31m
2025-06-04T21:55:38.5007785Z             [36m<div[31m
2025-06-04T21:55:38.5008379Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5008956Z             [36m>[31m
2025-06-04T21:55:38.5009572Z               [0m1000[0m
2025-06-04T21:55:38.5010030Z               [0m entries[0m
2025-06-04T21:55:38.5010484Z             [36m</div>[31m
2025-06-04T21:55:38.5010924Z           [36m</div>[31m
2025-06-04T21:55:38.5011344Z           [36m<div[31m
2025-06-04T21:55:38.5012663Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T21:55:38.5013615Z           [36m>[31m
2025-06-04T21:55:38.5014032Z             [36m<div[31m
2025-06-04T21:55:38.5014805Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.5015482Z             [36m>[31m
2025-06-04T21:55:38.5015926Z               [0mHit Rate[0m
2025-06-04T21:55:38.5016372Z             [36m</div>[31m
2025-06-04T21:55:38.5016805Z             [36m<div[31m
2025-06-04T21:55:38.5017410Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5017953Z             [36m>[31m
2025-06-04T21:55:38.5018354Z               [0m75.0%[0m
2025-06-04T21:55:38.5018785Z             [36m</div>[31m
2025-06-04T21:55:38.5019476Z           [36m</div>[31m
2025-06-04T21:55:38.5019904Z           [36m<div[31m
2025-06-04T21:55:38.5020984Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T21:55:38.5021876Z           [36m>[31m
2025-06-04T21:55:38.5022268Z             [36m<div[31m
2025-06-04T21:55:38.5022977Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.5023601Z             [36m>[31m
2025-06-04T21:55:38.5024017Z               [0mTTL[0m
2025-06-04T21:55:38.5024460Z             [36m</div>[31m
2025-06-04T21:55:38.5024912Z             [36m<div[31m
2025-06-04T21:55:38.5025521Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5026177Z             [36m>[31m
2025-06-04T21:55:38.5026590Z               [0m60s[0m
2025-06-04T21:55:38.5027013Z             [36m</div>[31m
2025-06-04T21:55:38.5027429Z           [36m</div>[31m
2025-06-04T21:55:38.5027866Z         [36m</div>[31m
2025-06-04T21:55:38.5028259Z       [36m</div>[31m
2025-06-04T21:55:38.5028665Z       [36m<div[31m
2025-06-04T21:55:38.5029525Z         [33mclass[31m=[32m"flex justify-between items-center mb-4"[31m
2025-06-04T21:55:38.5030194Z       [36m>[31m
2025-06-04T21:55:38.5030595Z         [36m<div[31m
2025-06-04T21:55:38.5031104Z           [33mclass[31m=[32m"text-sm"[31m
2025-06-04T21:55:38.5031578Z         [36m>[31m
2025-06-04T21:55:38.5031964Z           [36m<span[31m
2025-06-04T21:55:38.5032611Z             [33mclass[31m=[32m"text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.5033185Z           [36m>[31m
2025-06-04T21:55:38.5033582Z             [0mStatus:[0m
2025-06-04T21:55:38.5034004Z           [36m</span>[31m
2025-06-04T21:55:38.5034697Z           [0m [0m
2025-06-04T21:55:38.5035084Z           [36m<span[31m
2025-06-04T21:55:38.5035818Z             [33mclass[31m=[32m"font-medium text-green-600 dark:text-green-400"[31m
2025-06-04T21:55:38.5036460Z           [36m>[31m
2025-06-04T21:55:38.5036857Z             [0mEnabled[0m
2025-06-04T21:55:38.5037269Z           [36m</span>[31m
2025-06-04T21:55:38.5037689Z         [36m</div>[31m
2025-06-04T21:55:38.5038087Z         [36m<button[31m
2025-06-04T21:55:38.5039358Z           [33mclass[31m=[32m"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded"[31m
2025-06-04T21:55:38.5040242Z         [36m>[31m
2025-06-04T21:55:38.5040641Z           [0mClear Cache[0m
2025-06-04T21:55:38.5041083Z         [36m</button>[31m
2025-06-04T21:55:38.5041485Z       [36m</div>[31m
2025-06-04T21:55:38.5041871Z       [36m<div[31m
2025-06-04T21:55:38.5042628Z         [33mclass[31m=[32m"text-xs text-gray-500 dark:text-gray-400 mt-6 text-right"[31m
2025-06-04T21:55:38.5043328Z       [36m>[31m
2025-06-04T21:55:38.5043760Z         [0mLast updated: [0m
2025-06-04T21:55:38.5044202Z         [0m9:55:38 PM[0m
2025-06-04T21:55:38.5044617Z       [36m</div>[31m
2025-06-04T21:55:38.5045002Z     [36m</div>[31m
2025-06-04T21:55:38.5045373Z   [36m</div>[31m
2025-06-04T21:55:38.5045768Z [36m</body>[31m[39m
2025-06-04T21:55:38.5047001Z    [32m✓[39m PerformanceDashboardReact Component[2m > [22mupdates metrics on interval[32m 9[2mms[22m[39m
2025-06-04T21:55:38.5048591Z [31m   [31m×[31m PerformanceDashboardReact Component[2m > [22mhandles error states[39m[32m 13[2mms[22m[39m
2025-06-04T21:55:38.5049880Z [31m     → Found multiple elements with the text: N/A
2025-06-04T21:55:38.5050227Z 
2025-06-04T21:55:38.5050459Z Here are the matching elements:
2025-06-04T21:55:38.5050737Z 
2025-06-04T21:55:38.5050981Z Ignored nodes: comments, script, style
2025-06-04T21:55:38.5051478Z [36m<div[31m
2025-06-04T21:55:38.5052008Z   [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5052519Z [36m>[31m
2025-06-04T21:55:38.5052857Z   [0mN/A[0m
2025-06-04T21:55:38.5053199Z [36m</div>[31m
2025-06-04T21:55:38.5053386Z 
2025-06-04T21:55:38.5053638Z Ignored nodes: comments, script, style
2025-06-04T21:55:38.5054118Z [36m<div[31m
2025-06-04T21:55:38.5054628Z   [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5055135Z [36m>[31m
2025-06-04T21:55:38.5055470Z   [0mN/A[0m
2025-06-04T21:55:38.5055826Z [36m</div>[31m
2025-06-04T21:55:38.5056013Z 
2025-06-04T21:55:38.5056839Z (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).
2025-06-04T21:55:38.5057553Z 
2025-06-04T21:55:38.5057820Z Ignored nodes: comments, script, style
2025-06-04T21:55:38.5058308Z [36m<body>[31m
2025-06-04T21:55:38.5058675Z   [36m<div>[31m
2025-06-04T21:55:38.5059036Z     [36m<div[31m
2025-06-04T21:55:38.5059756Z       [33mclass[31m=[32m"p-6"[31m
2025-06-04T21:55:38.5060242Z     [36m>[31m
2025-06-04T21:55:38.5060641Z       [36m<div[31m
2025-06-04T21:55:38.5061102Z         [33mclass[31m=[32m"mb-6"[31m
2025-06-04T21:55:38.5061576Z       [36m>[31m
2025-06-04T21:55:38.5061931Z         [36m<h3[31m
2025-06-04T21:55:38.5062524Z           [33mclass[31m=[32m"text-lg font-medium mb-2"[31m
2025-06-04T21:55:38.5063078Z         [36m>[31m
2025-06-04T21:55:38.5063525Z           [0mCache Performance[0m
2025-06-04T21:55:38.5063991Z         [36m</h3>[31m
2025-06-04T21:55:38.5064383Z         [36m<div[31m
2025-06-04T21:55:38.5065155Z           [33mclass[31m=[32m"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"[31m
2025-06-04T21:55:38.5065874Z         [36m>[31m
2025-06-04T21:55:38.5066264Z           [36m<div[31m
2025-06-04T21:55:38.5067322Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T21:55:38.5068236Z           [36m>[31m
2025-06-04T21:55:38.5068994Z             [36m<div[31m
2025-06-04T21:55:38.5069902Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.5070548Z             [36m>[31m
2025-06-04T21:55:38.5070939Z               [0mSize[0m
2025-06-04T21:55:38.5071355Z             [36m</div>[31m
2025-06-04T21:55:38.5071777Z             [36m<div[31m
2025-06-04T21:55:38.5072361Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5072908Z             [36m>[31m
2025-06-04T21:55:38.5073307Z               [0m0[0m
2025-06-04T21:55:38.5073737Z               [0m entries[0m
2025-06-04T21:55:38.5074178Z             [36m</div>[31m
2025-06-04T21:55:38.5074594Z           [36m</div>[31m
2025-06-04T21:55:38.5075006Z           [36m<div[31m
2025-06-04T21:55:38.5076065Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T21:55:38.5076957Z           [36m>[31m
2025-06-04T21:55:38.5077345Z             [36m<div[31m
2025-06-04T21:55:38.5078056Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.5078690Z             [36m>[31m
2025-06-04T21:55:38.5079332Z               [0mMax Size[0m
2025-06-04T21:55:38.5079784Z             [36m</div>[31m
2025-06-04T21:55:38.5080199Z             [36m<div[31m
2025-06-04T21:55:38.5080777Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5081576Z             [36m>[31m
2025-06-04T21:55:38.5082000Z               [0m0[0m
2025-06-04T21:55:38.5082436Z               [0m entries[0m
2025-06-04T21:55:38.5082869Z             [36m</div>[31m
2025-06-04T21:55:38.5083297Z           [36m</div>[31m
2025-06-04T21:55:38.5083706Z           [36m<div[31m
2025-06-04T21:55:38.5084745Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T21:55:38.5085635Z           [36m>[31m
2025-06-04T21:55:38.5086025Z             [36m<div[31m
2025-06-04T21:55:38.5086725Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.5087350Z             [36m>[31m
2025-06-04T21:55:38.5087779Z               [0mHit Rate[0m
2025-06-04T21:55:38.5088219Z             [36m</div>[31m
2025-06-04T21:55:38.5088643Z             [36m<div[31m
2025-06-04T21:55:38.5089433Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5089979Z             [36m>[31m
2025-06-04T21:55:38.5090378Z               [0mN/A[0m
2025-06-04T21:55:38.5090860Z             [36m</div>[31m
2025-06-04T21:55:38.5091288Z           [36m</div>[31m
2025-06-04T21:55:38.5091705Z           [36m<div[31m
2025-06-04T21:55:38.5092757Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T21:55:38.5093635Z           [36m>[31m
2025-06-04T21:55:38.5094045Z             [36m<div[31m
2025-06-04T21:55:38.5094748Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.5095363Z             [36m>[31m
2025-06-04T21:55:38.5095753Z               [0mTTL[0m
2025-06-04T21:55:38.5096165Z             [36m</div>[31m
2025-06-04T21:55:38.5096590Z             [36m<div[31m
2025-06-04T21:55:38.5097161Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T21:55:38.5097703Z             [36m>[31m
2025-06-04T21:55:38.5098102Z               [0mN/A[0m
2025-06-04T21:55:38.5098509Z             [36m</div>[31m
2025-06-04T21:55:38.5098928Z           [36m</div>[31m
2025-06-04T21:55:38.5099547Z         [36m</div>[31m
2025-06-04T21:55:38.5099944Z       [36m</div>[31m
2025-06-04T21:55:38.5100333Z       [36m<div[31m
2025-06-04T21:55:38.5100985Z         [33mclass[31m=[32m"flex justify-between items-center mb-4"[31m
2025-06-04T21:55:38.5101607Z       [36m>[31m
2025-06-04T21:55:38.5102276Z         [36m<div[31m
2025-06-04T21:55:38.5102778Z           [33mclass[31m=[32m"text-sm"[31m
2025-06-04T21:55:38.5103265Z         [36m>[31m
2025-06-04T21:55:38.5103636Z           [36m<span[31m
2025-06-04T21:55:38.5104289Z             [33mclass[31m=[32m"text-gray-500 dark:text-gray-400"[31m
2025-06-04T21:55:38.5104873Z           [36m>[31m
2025-06-04T21:55:38.5105273Z             [0mStatus:[0m
2025-06-04T21:55:38.5105698Z           [36m</span>[31m
2025-06-04T21:55:38.5106114Z           [0m [0m
2025-06-04T21:55:38.5106496Z           [36m<span[31m
2025-06-04T21:55:38.5107188Z             [33mclass[31m=[32m"font-medium text-red-600 dark:text-red-400"[31m
2025-06-04T21:55:38.5107814Z           [36m>[31m
2025-06-04T21:55:38.5108218Z             [0mDisabled[0m
2025-06-04T21:55:38.5108646Z           [36m</span>[31m
2025-06-04T21:55:38.5109062Z         [36m</div>[31m
2025-06-04T21:55:38.5109749Z         [36m<button[31m
2025-06-04T21:55:38.5110800Z           [33mclass[31m=[32m"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded"[31m
2025-06-04T21:55:38.5111689Z         [36m>[31m
2025-06-04T21:55:38.5112084Z           [0mClear Cache[0m
2025-06-04T21:55:38.5112533Z         [36m</button>[31m
2025-06-04T21:55:38.5112935Z       [36m</div>[31m
2025-06-04T21:55:38.5113325Z       [36m<div[31m
2025-06-04T21:55:38.5114095Z         [33mclass[31m=[32m"text-xs text-gray-500 dark:text-gray-400 mt-6 text-right"[31m
2025-06-04T21:55:38.5115017Z       [36m>[31m
2025-06-04T21:55:38.5115487Z         [0mLast updated: [0m
2025-06-04T21:55:38.5115948Z         [0m9:55:38 PM[0m
2025-06-04T21:55:38.5116356Z       [36m</div>[31m
2025-06-04T21:55:38.5116748Z     [36m</div>[31m
2025-06-04T21:55:38.5117114Z   [36m</div>[31m
2025-06-04T21:55:38.5117511Z [36m</body>[31m[39m
2025-06-04T21:55:40.4953647Z  [31m❯[39m src/simulator/components/__tests__/EmotionDisplay.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 142[2mms[22m[39m
2025-06-04T21:55:40.4954907Z    [32m✓[39m EmotionDisplay[2m > [22mshows placeholder when no emotion data is available[32m 39[2mms[22m[39m
2025-06-04T21:55:40.4955804Z    [32m✓[39m EmotionDisplay[2m > [22mdisplays emotion analysis results when data is available[32m 85[2mms[22m[39m
2025-06-04T21:55:40.4956724Z [31m   [31m×[31m EmotionDisplay[2m > [22mrenders progress bars with correct widths[39m[32m 17[2mms[22m[39m
2025-06-04T21:55:40.4957372Z [31m     → Invalid Chai property: toHaveStyle[39m
2025-06-04T21:55:42.7806960Z  [31m❯[39m src/simulator/components/__tests__/TechniqueDisplay.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 67[2mms[22m[39m
2025-06-04T21:55:42.7816448Z    [32m✓[39m TechniqueDisplay[2m > [22mdisplays placeholder when no techniques are detected[32m 41[2mms[22m[39m
2025-06-04T21:55:42.7818218Z [31m   [31m×[31m TechniqueDisplay[2m > [22mdisplays detected techniques with confidence levels[39m[32m 17[2mms[22m[39m
2025-06-04T21:55:42.7821132Z [31m     → Unable to find an element with the text: Cognitive Reframing (95.0%). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
2025-06-04T21:55:42.7822441Z 
2025-06-04T21:55:42.7822718Z Ignored nodes: comments, script, style
2025-06-04T21:55:42.7823240Z [36m<body>[31m
2025-06-04T21:55:42.7823620Z   [36m<div>[31m
2025-06-04T21:55:42.7824012Z     [36m<div[31m
2025-06-04T21:55:42.7824579Z       [33mclass[31m=[32m"p-4 border rounded-lg"[31m
2025-06-04T21:55:42.7825116Z     [36m>[31m
2025-06-04T21:55:42.7825483Z       [36m<h2[31m
2025-06-04T21:55:42.7826080Z         [33mclass[31m=[32m"text-lg font-semibold mb-2"[31m
2025-06-04T21:55:42.7826657Z       [36m>[31m
2025-06-04T21:55:42.7827123Z         [0mDetected Techniques[0m
2025-06-04T21:55:42.7827593Z       [36m</h2>[31m
2025-06-04T21:55:42.7827980Z       [36m<p[31m
2025-06-04T21:55:42.7829047Z         [33mclass[31m=[32m"text-muted-foreground"[31m
2025-06-04T21:55:42.7829799Z       [36m>[31m
2025-06-04T21:55:42.7830344Z         [0mNo therapeutic techniques detected yet.[0m
2025-06-04T21:55:42.7830887Z       [36m</p>[31m
2025-06-04T21:55:42.7831274Z     [36m</div>[31m
2025-06-04T21:55:42.7831654Z   [36m</div>[31m
2025-06-04T21:55:42.7832057Z [36m</body>[31m[39m
2025-06-04T21:55:42.7833307Z [31m   [31m×[31m TechniqueDisplay[2m > [22mapplies correct badge variants based on confidence levels[39m[32m 7[2mms[22m[39m
2025-06-04T21:55:42.7835818Z [31m     → Unable to find an element with the text: /.*\(\d+\.\d+%\)/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
2025-06-04T21:55:42.7836981Z 
2025-06-04T21:55:42.7837240Z Ignored nodes: comments, script, style
2025-06-04T21:55:42.7837748Z [36m<body>[31m
2025-06-04T21:55:42.7838135Z   [36m<div>[31m
2025-06-04T21:55:42.7838532Z     [36m<div[31m
2025-06-04T21:55:42.7839251Z       [33mclass[31m=[32m"p-4 border rounded-lg"[31m
2025-06-04T21:55:42.7839813Z     [36m>[31m
2025-06-04T21:55:42.7840186Z       [36m<h2[31m
2025-06-04T21:55:42.7840762Z         [33mclass[31m=[32m"text-lg font-semibold mb-2"[31m
2025-06-04T21:55:42.7841336Z       [36m>[31m
2025-06-04T21:55:42.7841780Z         [0mDetected Techniques[0m
2025-06-04T21:55:42.7842257Z       [36m</h2>[31m
2025-06-04T21:55:42.7842925Z       [36m<p[31m
2025-06-04T21:55:42.7843538Z         [33mclass[31m=[32m"text-muted-foreground"[31m
2025-06-04T21:55:42.7844084Z       [36m>[31m
2025-06-04T21:55:42.7844616Z         [0mNo therapeutic techniques detected yet.[0m
2025-06-04T21:55:42.7845148Z       [36m</p>[31m
2025-06-04T21:55:42.7845543Z     [36m</div>[31m
2025-06-04T21:55:42.7845918Z   [36m</div>[31m
2025-06-04T21:55:42.7846310Z [36m</body>[31m[39m
2025-06-04T22:03:59.7698372Z  [32m✓[39m src/simulator/components/__tests__/EmotionAnalysis.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 32[2mms[22m[39m
2025-06-04T22:41:45.3176255Z  [31m❯[39m src/lib/security/__tests__/phiDetection.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 12[2mms[22m[39m
2025-06-04T22:41:45.3177450Z [31m   [31m×[31m detectAndRedactPHI[2m > [22mredacts emails[39m[32m 7[2mms[22m[39m
2025-06-04T22:41:45.3178202Z [31m     → expected [REDACTED]: [REDACTED] to be Contact: [EMAIL][39m
2025-06-04T22:41:45.3179046Z [31m   [31m×[31m detectAndRedactPHI[2m > [22mredacts phone numbers[39m[32m 1[2mms[22m[39m
2025-06-04T22:41:45.3180139Z [31m     → expected [REDACTED] me at [REDACTED] to be Call me at [PHONE][39m
2025-06-04T22:41:45.3180789Z [31m   [31m×[31m detectAndRedactPHI[2m > [22mredacts SSNs[39m[32m 0[2mms[22m[39m
2025-06-04T22:41:45.3181299Z [31m     → expected SSN: [REDACTED] to be SSN: [ID][39m
2025-06-04T22:41:45.3181872Z [31m   [31m×[31m detectAndRedactPHI[2m > [22mredacts full names[39m[32m 1[2mms[22m[39m
2025-06-04T22:41:45.3182496Z [31m     → expected [REDACTED]ED]ACTED] [REDACTED] to be Patient [NAME][39m
2025-06-04T22:41:45.3183136Z [31m   [31m×[31m detectAndRedactPHI[2m > [22mredacts mixed PHI/PII[39m[32m 0[2mms[22m[39m
2025-06-04T22:41:45.3184281Z [31m     → expected [REDACTED]ACTED]DACTED], SSN: [REDACTED], email: [REDACTED], phone: [REDACTED] to be [NAME], SSN: [ID], email: [EMAIL], phone: [PHONE][39m
2025-06-04T22:41:45.3185191Z [31m   [31m×[31m detectAndRedactPHI[2m > [22mhandles text with no PHI/PII[39m[32m 0[2mms[22m[39m
2025-06-04T22:41:45.3185873Z [31m     → expected [REDACTED] sensitive info here. to be No sensitive info here.[39m
2025-06-04T22:41:45.3341178Z 
2025-06-04T22:41:45.3342003Z [31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Suites 42 [49m[22m[31m⎯⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.3342283Z 
2025-06-04T22:41:45.3345970Z [41m[1m FAIL [22m[49m src/components/__tests__/AIChat.astro.test.ts[2m [ src/components/__tests__/AIChat.astro.test.ts ][22m
2025-06-04T22:41:45.3347892Z [41m[1m FAIL [22m[49m src/components/__tests__/MentalHealthChatDemo.astro.test.ts[2m [ src/components/__tests__/MentalHealthChatDemo.astro.test.ts ][22m
2025-06-04T22:41:45.3349070Z [41m[1m FAIL [22m[49m src/components/__tests__/SearchDemo.astro.test.ts[2m [ src/components/__tests__/SearchDemo.astro.test.ts ][22m
2025-06-04T22:41:45.3350257Z [41m[1m FAIL [22m[49m src/layouts/__tests__/DashboardLayout.test.ts[2m [ src/layouts/__tests__/DashboardLayout.test.ts ][22m
2025-06-04T22:41:45.3351344Z [41m[1m FAIL [22m[49m src/components/admin/__tests__/AdminDashboard.test.ts[2m [ src/components/admin/__tests__/AdminDashboard.test.ts ][22m
2025-06-04T22:41:45.3352551Z [41m[1m FAIL [22m[49m src/components/base/__tests__/ErrorBoundary.test.ts[2m [ src/components/base/__tests__/ErrorBoundary.test.ts ][22m
2025-06-04T22:41:45.3353678Z [41m[1m FAIL [22m[49m src/components/ui/__tests__/Button.astro.test.ts[2m [ src/components/ui/__tests__/Button.astro.test.ts ][22m
2025-06-04T22:41:45.3354771Z [41m[1m FAIL [22m[49m src/pages/admin/__tests__/system-health.test.ts[2m [ src/pages/admin/__tests__/system-health.test.ts ][22m
2025-06-04T22:41:45.3365556Z [31m[1mError[22m: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.[39m
2025-06-04T22:41:45.3366498Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3367715Z   File: [36m/home/runner/work/pixelated/pixelated/src/components/AIChat.astro[39m:30:12
2025-06-04T22:41:45.3368957Z [33m  28 |        <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">
2025-06-04T22:41:45.3371140Z   29 |          {title}
2025-06-04T22:41:45.3371463Z   30 |        </h2>
2025-06-04T22:41:45.3371756Z      |             ^
2025-06-04T22:41:45.3372063Z   31 |      )
2025-06-04T22:41:45.3372340Z   32 |    }[39m
2025-06-04T22:41:45.3373516Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3375218Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3377368Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40426:14[22m[39m
2025-06-04T22:41:45.3379064Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3380854Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3381480Z 
2025-06-04T22:41:45.3381694Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/523]⎯[22m[39m
2025-06-04T22:41:45.3381879Z 
2025-06-04T22:41:45.3382437Z [41m[1m FAIL [22m[49m src/workers/__tests__/analytics-worker.test.ts[2m [ src/workers/__tests__/analytics-worker.test.ts ][22m
2025-06-04T22:41:45.3383911Z [31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
2025-06-04T22:41:45.3384983Z [36m [2m❯[22m src/lib/services/analytics/AnalyticsService.ts:[2m3:1[22m[39m
2025-06-04T22:41:45.3416180Z     [90m  1| [39m[35mimport[39m type { [33mWebSocket[39m } [35mfrom[39m [32m'ws'[39m
2025-06-04T22:41:45.3417430Z     [90m  2| [39m[35mimport[39m { redis } [35mfrom[39m [32m'@/lib/services/redis'[39m
2025-06-04T22:41:45.3418132Z     [90m  3| [39m[35mimport[39m { logger } [35mfrom[39m [32m'@/lib/utils/logger'[39m
2025-06-04T22:41:45.3418621Z     [90m   | [39m[31m^[39m
2025-06-04T22:41:45.3419282Z     [90m  4| [39m[35mimport[39m { z } [35mfrom[39m [32m'zod'[39m
2025-06-04T22:41:45.3419756Z     [90m  5| [39m
2025-06-04T22:41:45.3419908Z 
2025-06-04T22:41:45.3438134Z [31m[1mCaused by: ReferenceError[22m: Cannot access 'mockLoggerInstance' before initialization[39m
2025-06-04T22:41:45.3439596Z [36m [2m❯[22m src/workers/__tests__/analytics-worker.test.ts:[2m17:11[22m[39m
2025-06-04T22:41:45.3440734Z [90m [2m❯[22m src/lib/services/analytics/AnalyticsService.ts:[2m3:1[22m[39m
2025-06-04T22:41:45.3441226Z 
2025-06-04T22:41:45.3441647Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/523]⎯[22m[39m
2025-06-04T22:41:45.3441954Z 
2025-06-04T22:41:45.3442574Z [41m[1m FAIL [22m[49m src/workers/__tests__/notification-worker.test.ts[2m [ src/workers/__tests__/notification-worker.test.ts ][22m
2025-06-04T22:41:45.3444561Z [31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
2025-06-04T22:41:45.3446877Z [36m [2m❯[22m src/lib/services/email/EmailService.ts:[2m3:1[22m[39m
2025-06-04T22:41:45.3465256Z     [90m  1| [39m[35mimport[39m { env } [35mfrom[39m [32m'@/config/env.config'[39m
2025-06-04T22:41:45.3466272Z     [90m  2| [39m[35mimport[39m { redis } [35mfrom[39m [32m'@/lib/services/redis'[39m
2025-06-04T22:41:45.3467238Z     [90m  3| [39m[35mimport[39m { logger } [35mfrom[39m [32m'@/lib/utils/logger'[39m
2025-06-04T22:41:45.3467898Z     [90m   | [39m[31m^[39m
2025-06-04T22:41:45.3468643Z     [90m  4| [39m[35mimport[39m { [33mResend[39m } [35mfrom[39m [32m'resend'[39m
2025-06-04T22:41:45.3469689Z     [90m  5| [39m[35mimport[39m { z } [35mfrom[39m [32m'zod'[39m
2025-06-04T22:41:45.3470067Z 
2025-06-04T22:41:45.3470879Z [31m[1mCaused by: ReferenceError[22m: Cannot access 'mockLoggerInstance' before initialization[39m
2025-06-04T22:41:45.3472145Z [36m [2m❯[22m src/workers/__tests__/notification-worker.test.ts:[2m28:11[22m[39m
2025-06-04T22:41:45.3473208Z [90m [2m❯[22m src/lib/services/email/EmailService.ts:[2m3:1[22m[39m
2025-06-04T22:41:45.3473647Z 
2025-06-04T22:41:45.3474048Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/523]⎯[22m[39m
2025-06-04T22:41:45.3474358Z 
2025-06-04T22:41:45.3475675Z [41m[1m FAIL [22m[49m src/components/ai/__tests__/PerformanceDashboard.astro.test.ts[2m [ src/components/ai/__tests__/PerformanceDashboard.astro.test.ts ][22m
2025-06-04T22:41:45.3477536Z [41m[1m FAIL [22m[49m src/components/base/__tests__/Link.test.ts[2m [ src/components/base/__tests__/Link.test.ts ][22m
2025-06-04T22:41:45.3479576Z [41m[1m FAIL [22m[49m src/components/security/__tests__/SecurityDashboard.test.ts[2m [ src/components/security/__tests__/SecurityDashboard.test.ts ][22m
2025-06-04T22:41:45.3481382Z [41m[1m FAIL [22m[49m src/components/ui/__tests__/Alert.test.ts[2m [ src/components/ui/__tests__/Alert.test.ts ][22m
2025-06-04T22:41:45.3482873Z [41m[1m FAIL [22m[49m src/components/ui/__tests__/Card.test.ts[2m [ src/components/ui/__tests__/Card.test.ts ][22m
2025-06-04T22:41:45.3484446Z [41m[1m FAIL [22m[49m src/components/ui/__tests__/ThemeToggle.test.ts[2m [ src/components/ui/__tests__/ThemeToggle.test.ts ][22m
2025-06-04T22:41:45.3485812Z [31m[1mError[22m: No known conditions for "./globals" specifier in "vitest" package[39m
2025-06-04T22:41:45.3486692Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3487781Z   File: [36m/home/runner/work/pixelated/pixelated/src/test/utils/astro.ts[39m:3:19
2025-06-04T22:41:45.3489018Z [33m  1  |  import { render } from "@testing-library/react";
2025-06-04T22:41:45.3489887Z   2  |  import { vi } from "vitest/globals";
2025-06-04T22:41:45.3490323Z      |                      ^
2025-06-04T22:41:45.3490954Z   3  |  export async function renderAstro(Component, props = {}, slotContent) {
2025-06-04T22:41:45.3491979Z   4  |    const html = await Component.render({ ...props, slot: slotContent });[39m
2025-06-04T22:41:45.3494028Z [90m [2m❯[22m e node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m12200:25[22m[39m
2025-06-04T22:41:45.3496050Z [90m [2m❯[22m n node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m12200:650[22m[39m
2025-06-04T22:41:45.3498076Z [90m [2m❯[22m o node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m12200:1293[22m[39m
2025-06-04T22:41:45.3501040Z [90m [2m❯[22m resolveExportsOrImports node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m16217:18[22m[39m
2025-06-04T22:41:45.3504158Z [90m [2m❯[22m resolveDeepImport node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m16230:25[22m[39m
2025-06-04T22:41:45.3507015Z [90m [2m❯[22m tryNodeResolve node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m16060:18[22m[39m
2025-06-04T22:41:45.3510094Z [90m [2m❯[22m ResolveIdContext.resolveId node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m15831:19[22m[39m
2025-06-04T22:41:45.3513211Z [90m [2m❯[22m EnvironmentPluginContainer.resolveId node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42213:17[22m[39m
2025-06-04T22:41:45.3516260Z [90m [2m❯[22m ResolveIdContext.resolve node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42420:15[22m[39m
2025-06-04T22:41:45.3517451Z 
2025-06-04T22:41:45.3517845Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/523]⎯[22m[39m
2025-06-04T22:41:45.3518156Z 
2025-06-04T22:41:45.3519485Z [41m[1m FAIL [22m[49m src/components/audit/__tests__/UnusualPatterns.test.tsx[2m [ src/components/audit/__tests__/UnusualPatterns.test.tsx ][22m
2025-06-04T22:41:45.3521440Z [31m[1mError[22m: Failed to resolve import "../ui/scroll-area" from "src/components/audit/UnusualPatterns.tsx". Does the file exist?[39m
2025-06-04T22:41:45.3522496Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3523557Z   File: [36m/home/runner/work/pixelated/pixelated/src/components/audit/UnusualPatterns.tsx[39m:10:27
2025-06-04T22:41:45.3524504Z [33m  8  |  } from "../ui/card";
2025-06-04T22:41:45.3524962Z   9  |  import { Badge } from "../ui/badge";
2025-06-04T22:41:45.3525513Z   10 |  import { ScrollArea } from "../ui/scroll-area";
2025-06-04T22:41:45.3526012Z      |                              ^
2025-06-04T22:41:45.3526440Z   11 |  const severityColors = {
2025-06-04T22:41:45.3527020Z   12 |    low: "bg-yellow-100 text-yellow-800",[39m
2025-06-04T22:41:45.3529329Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3532541Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3535342Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3537907Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3540936Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3544109Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3547197Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3548321Z 
2025-06-04T22:41:45.3548707Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/523]⎯[22m[39m
2025-06-04T22:41:45.3549020Z 
2025-06-04T22:41:45.3550402Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/AnalyticsDashboard.test.tsx[2m [ src/components/chat/__tests__/AnalyticsDashboard.test.tsx ][22m
2025-06-04T22:41:45.3552305Z [31m[1mError[22m: [vitest] No "getLogger" export is defined on the "@/lib/utils/logger" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.3553559Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.3554198Z [39m
2025-06-04T22:41:45.3555267Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/utils/logger"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.3556394Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.3557002Z   [35mreturn[39m {
2025-06-04T22:41:45.3557442Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.3557940Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.3558316Z   }
2025-06-04T22:41:45.3558567Z })
2025-06-04T22:41:45.3558711Z 
2025-06-04T22:41:45.3559278Z [36m [2m❯[22m src/lib/fhe/index.ts:[2m13:16[22m[39m
2025-06-04T22:41:45.3560244Z     [90m 11| [39m[35mimport[39m type { [33mCryptoSystem[39m } [35mfrom[39m [32m'../crypto'[39m
2025-06-04T22:41:45.3560940Z     [90m 12| [39m
2025-06-04T22:41:45.3561768Z     [90m 13| [39m[35mconst[39m logger [33m=[39m [34mgetLogger[39m({ prefix[33m:[39m [32m'fhe'[39m })
2025-06-04T22:41:45.3562584Z     [90m   | [39m               [31m^[39m
2025-06-04T22:41:45.3563038Z     [90m 14| [39m
2025-06-04T22:41:45.3563583Z     [90m 15| [39m[90m/** FHE system implementation */[39m
2025-06-04T22:41:45.3564339Z [90m [2m❯[22m src/lib/fhe/exports.ts:[2m28:1[22m[39m
2025-06-04T22:41:45.3564687Z 
2025-06-04T22:41:45.3565075Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/523]⎯[22m[39m
2025-06-04T22:41:45.3565382Z 
2025-06-04T22:41:45.3566765Z [41m[1m FAIL [22m[49m src/components/notification/__tests__/NotificationCenter.test.tsx[2m [ src/components/notification/__tests__/NotificationCenter.test.tsx ][22m
2025-06-04T22:41:45.3569023Z [31m[1mError[22m: Failed to resolve import "@/components/ui/Badge" from "src/components/notification/NotificationCenter.tsx". Does the file exist?[39m
2025-06-04T22:41:45.3570390Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3571868Z   File: [36m/home/runner/work/pixelated/pixelated/src/components/notification/NotificationCenter.tsx[39m:2:22
2025-06-04T22:41:45.3573082Z [33m  1  |  import { jsxDEV } from "react/jsx-dev-runtime";
2025-06-04T22:41:45.3573718Z   2  |  import { Badge } from "@/components/ui/Badge";
2025-06-04T22:41:45.3574241Z      |                         ^
2025-06-04T22:41:45.3574758Z   3  |  import { Button } from "@/components/ui/Button";
2025-06-04T22:41:45.3575493Z   4  |  import { Card } from "@/components/ui/Card";[39m
2025-06-04T22:41:45.3577704Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3581044Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3584003Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3586949Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3590130Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3593372Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3596385Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3597549Z 
2025-06-04T22:41:45.3597965Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/523]⎯[22m[39m
2025-06-04T22:41:45.3598283Z 
2025-06-04T22:41:45.3600001Z [41m[1m FAIL [22m[49m src/components/notification/__tests__/NotificationPreferences.test.tsx[2m [ src/components/notification/__tests__/NotificationPreferences.test.tsx ][22m
2025-06-04T22:41:45.3602455Z [31m[1mError[22m: Failed to resolve import "@/components/ui/Alert" from "src/components/notification/NotificationPreferences.tsx". Does the file exist?[39m
2025-06-04T22:41:45.3603700Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3604942Z   File: [36m/home/runner/work/pixelated/pixelated/src/components/notification/NotificationPreferences.tsx[39m:1:22
2025-06-04T22:41:45.3606198Z [33m  1  |  import { jsxDEV } from "react/jsx-dev-runtime";
2025-06-04T22:41:45.3606813Z   2  |  import { Alert } from "@/components/ui/Alert";
2025-06-04T22:41:45.3607302Z      |                         ^
2025-06-04T22:41:45.3607787Z   3  |  import { Card } from "@/components/ui/Card";
2025-06-04T22:41:45.3608473Z   4  |  import { Input } from "@/components/ui/Input";[39m
2025-06-04T22:41:45.3610855Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3613911Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3617009Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3619823Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3622720Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3625878Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3628895Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3630208Z 
2025-06-04T22:41:45.3630607Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/523]⎯[22m[39m
2025-06-04T22:41:45.3630918Z 
2025-06-04T22:41:45.3632020Z [41m[1m FAIL [22m[49m src/lib/auth/__tests__/serverAuth.test.ts[2m [ src/lib/auth/__tests__/serverAuth.test.ts ][22m
2025-06-04T22:41:45.3633699Z [31m[1mError[22m: Failed to resolve import "../auth" from "src/lib/auth/__tests__/serverAuth.test.ts". Does the file exist?[39m
2025-06-04T22:41:45.3634694Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3635729Z   File: [36m/home/runner/work/pixelated/pixelated/src/lib/auth/__tests__/serverAuth.test.ts[39m:2:0
2025-06-04T22:41:45.3636595Z [33m  28 |  }));
2025-06-04T22:41:45.3637055Z   29 |  const __vi_import_0__ = await import("../serverAuth");
2025-06-04T22:41:45.3637674Z   30 |  const __vi_import_1__ = await import("../auth");
2025-06-04T22:41:45.3638202Z      |                                       ^
2025-06-04T22:41:45.3638792Z   31 |  const __vi_import_2__ = await import("../../audit/log");
2025-06-04T22:41:45.3639529Z   32 |  [39m
2025-06-04T22:41:45.3641556Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3644613Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3647482Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3650597Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3653548Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3656327Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3658349Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3659250Z 
2025-06-04T22:41:45.3659587Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/523]⎯[22m[39m
2025-06-04T22:41:45.3659875Z 
2025-06-04T22:41:45.3660378Z [41m[1m FAIL [22m[49m src/lib/ehr/__tests__/allscripts.test.ts[2m [ src/lib/ehr/__tests__/allscripts.test.ts ][22m
2025-06-04T22:41:45.3661170Z [41m[1m FAIL [22m[49m src/lib/ehr/__tests__/cerner.test.ts[2m [ src/lib/ehr/__tests__/cerner.test.ts ][22m
2025-06-04T22:41:45.3661906Z [41m[1m FAIL [22m[49m src/lib/ehr/__tests__/ehr.test.ts[2m [ src/lib/ehr/__tests__/ehr.test.ts ][22m
2025-06-04T22:41:45.3662436Z [31m[1mReferenceError[22m: string is not defined[39m
2025-06-04T22:41:45.3662870Z [36m [2m❯[22m src/lib/ehr/types.ts:[2m142:13[22m[39m
2025-06-04T22:41:45.3663714Z     [90m140| [39m  vendor[33m:[39m z[33m.[39m[35menum[39m([[32m'epic'[39m[33m,[39m [32m'cerner'[39m[33m,[39m [32m'allscripts'[39m[33m,[39m [32m'athenahealth'[39m])[33m,[39m
2025-06-04T22:41:45.3664506Z     [90m141| [39m  baseUrl[33m:[39m z[33m.[39m[34mstring[39m()[33m.[39m[34murl[39m()[33m,[39m
2025-06-04T22:41:45.3665018Z     [90m142| [39m  clientId[33m:[39m [34mstring[39m()[33m,[39m
2025-06-04T22:41:45.3665371Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.3665802Z     [90m143| [39m  clientSecret[33m:[39m z[33m.[39m[34mstring[39m()[33m,[39m
2025-06-04T22:41:45.3666562Z     [90m144| [39m  scopes[33m:[39m z[33m.[39m[34marray[39m(z[33m.[39m[34mstring[39m())[33m,[39m
2025-06-04T22:41:45.3667141Z [90m [2m❯[22m src/lib/ehr/services/fhir.client.ts:[2m2:1[22m[39m
2025-06-04T22:41:45.3667380Z 
2025-06-04T22:41:45.3667585Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/523]⎯[22m[39m
2025-06-04T22:41:45.3667764Z 
2025-06-04T22:41:45.3668258Z [41m[1m FAIL [22m[49m src/lib/ehr/__tests__/athenahealth.test.ts[2m [ src/lib/ehr/__tests__/athenahealth.test.ts ][22m
2025-06-04T22:41:45.3668855Z [31m[1mReferenceError[22m: string is not defined[39m
2025-06-04T22:41:45.3669587Z [36m [2m❯[22m src/lib/ehr/types.ts:[2m142:13[22m[39m
2025-06-04T22:41:45.3670406Z     [90m140| [39m  vendor[33m:[39m z[33m.[39m[35menum[39m([[32m'epic'[39m[33m,[39m [32m'cerner'[39m[33m,[39m [32m'allscripts'[39m[33m,[39m [32m'athenahealth'[39m])[33m,[39m
2025-06-04T22:41:45.3671196Z     [90m141| [39m  baseUrl[33m:[39m z[33m.[39m[34mstring[39m()[33m.[39m[34murl[39m()[33m,[39m
2025-06-04T22:41:45.3671722Z     [90m142| [39m  clientId[33m:[39m [34mstring[39m()[33m,[39m
2025-06-04T22:41:45.3672085Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.3672521Z     [90m143| [39m  clientSecret[33m:[39m z[33m.[39m[34mstring[39m()[33m,[39m
2025-06-04T22:41:45.3673112Z     [90m144| [39m  scopes[33m:[39m z[33m.[39m[34marray[39m(z[33m.[39m[34mstring[39m())[33m,[39m
2025-06-04T22:41:45.3674013Z [90m [2m❯[22m src/lib/ehr/providers/athenahealth.provider.ts:[2m1:1[22m[39m
2025-06-04T22:41:45.3674721Z 
2025-06-04T22:41:45.3675106Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/523]⎯[22m[39m
2025-06-04T22:41:45.3675408Z 
2025-06-04T22:41:45.3676309Z [41m[1m FAIL [22m[49m src/lib/fhe/__tests__/multi-tenant-isolation.test.ts[2m [ src/lib/fhe/__tests__/multi-tenant-isolation.test.ts ][22m
2025-06-04T22:41:45.3677420Z [31m[1mError[22m: Failed to resolve import "../tenant-manager" from "src/lib/fhe/__tests__/multi-tenant-isolation.test.ts". Does the file exist?[39m
2025-06-04T22:41:45.3678068Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3678724Z   File: [36m/home/runner/work/pixelated/pixelated/src/lib/fhe/__tests__/multi-tenant-isolation.test.ts[39m:15:30
2025-06-04T22:41:45.3679786Z [33m  1  |  import { fheService } from "../index";
2025-06-04T22:41:45.3680328Z   2  |  import { tenantManager } from "../tenant-manager";
2025-06-04T22:41:45.3680675Z      |                                 ^
2025-06-04T22:41:45.3680972Z   3  |  import { EncryptionMode } from "../types";
2025-06-04T22:41:45.3681382Z   4  |  describe("FHE Multi-tenant Isolation", () => {[39m
2025-06-04T22:41:45.3682932Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3685372Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3687243Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3688665Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3690405Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3692238Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3693875Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3694494Z 
2025-06-04T22:41:45.3694711Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/523]⎯[22m[39m
2025-06-04T22:41:45.3694895Z 
2025-06-04T22:41:45.3695452Z [41m[1m FAIL [22m[49m src/lib/providers/__tests__/providers.test.tsx[2m [ src/lib/providers/__tests__/providers.test.tsx ][22m
2025-06-04T22:41:45.3696475Z [31m[1mError[22m: Failed to resolve import "./AnalyticsProvider" from "src/lib/providers/SharedProviders.tsx". Does the file exist?[39m
2025-06-04T22:41:45.3697094Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3697681Z   File: [36m/home/runner/work/pixelated/pixelated/src/lib/providers/SharedProviders.tsx[39m:3:34
2025-06-04T22:41:45.3698284Z [33m  1  |  import { jsxDEV } from "react/jsx-dev-runtime";
2025-06-04T22:41:45.3698677Z   2  |  import { AnalyticsProvider } from "./AnalyticsProvider";
2025-06-04T22:41:45.3699005Z      |                                     ^
2025-06-04T22:41:45.3699438Z   3  |  import { AuthProvider } from "./AuthProvider";
2025-06-04T22:41:45.3700196Z   4  |  import { ConvexProvider } from "./ConvexProvider";[39m
2025-06-04T22:41:45.3701938Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3703770Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3705972Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3707593Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3709875Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3711792Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3713541Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3714171Z 
2025-06-04T22:41:45.3714382Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/523]⎯[22m[39m
2025-06-04T22:41:45.3714561Z 
2025-06-04T22:41:45.3715319Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/breach-notification.integration.test.ts[2m [ src/lib/security/__tests__/breach-notification.integration.test.ts ][22m
2025-06-04T22:41:45.3716580Z [31m[1mError[22m: Failed to resolve import "@/lib/email" from "src/lib/security/__tests__/breach-notification.integration.test.ts". Does the file exist?[39m
2025-06-04T22:41:45.3717254Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3717971Z   File: [36m/home/runner/work/pixelated/pixelated/src/lib/security/__tests__/breach-notification.integration.test.ts[39m:2:0
2025-06-04T22:41:45.3718750Z [33m  6  |  vi.mock("@/lib/logger");
2025-06-04T22:41:45.3719267Z   7  |  const __vi_import_0__ = await import("@/lib/auth");
2025-06-04T22:41:45.3719682Z   8  |  const __vi_import_1__ = await import("@/lib/email");
2025-06-04T22:41:45.3720176Z      |                                       ^
2025-06-04T22:41:45.3720693Z   9  |  const __vi_import_2__ = await import("@/lib/fhe");
2025-06-04T22:41:45.3721436Z   10 |  const __vi_import_3__ = await import("@/lib/logger");[39m
2025-06-04T22:41:45.3723488Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3725191Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3726752Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3728168Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3730000Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3731689Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3733271Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3733893Z 
2025-06-04T22:41:45.3734102Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/523]⎯[22m[39m
2025-06-04T22:41:45.3734286Z 
2025-06-04T22:41:45.3734905Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/breach-notification.test.ts[2m [ src/lib/security/__tests__/breach-notification.test.ts ][22m
2025-06-04T22:41:45.3735992Z [31m[1mError[22m: Failed to resolve import "@/lib/email" from "src/lib/security/__tests__/breach-notification.test.ts". Does the file exist?[39m
2025-06-04T22:41:45.3736611Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3737260Z   File: [36m/home/runner/work/pixelated/pixelated/src/lib/security/__tests__/breach-notification.test.ts[39m:2:0
2025-06-04T22:41:45.3737776Z [33m  27 |  }));
2025-06-04T22:41:45.3738178Z   28 |  const __vi_import_0__ = await import("@/lib/auth");
2025-06-04T22:41:45.3738540Z   29 |  const __vi_import_1__ = await import("@/lib/email");
2025-06-04T22:41:45.3738849Z      |                                       ^
2025-06-04T22:41:45.3739351Z   30 |  const __vi_import_2__ = await import("@/lib/fhe");
2025-06-04T22:41:45.3739809Z   31 |  const __vi_import_3__ = await import("@/lib/logger");[39m
2025-06-04T22:41:45.3741033Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3742685Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3744223Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3745627Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3747156Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3748840Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3750803Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3751428Z 
2025-06-04T22:41:45.3751638Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/523]⎯[22m[39m
2025-06-04T22:41:45.3751822Z 
2025-06-04T22:41:45.3752407Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/token.encryption.test.ts[2m [ src/lib/security/__tests__/token.encryption.test.ts ][22m
2025-06-04T22:41:45.3754078Z [31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
2025-06-04T22:41:45.3755095Z [36m [2m❯[22m src/lib/security/token.encryption.ts:[2m1:1[22m[39m
2025-06-04T22:41:45.3755479Z     [90m  1| [39m[35mimport[39m {
2025-06-04T22:41:45.3755772Z     [90m   | [39m[31m^[39m
2025-06-04T22:41:45.3756064Z     [90m  2| [39m  createCipheriv[33m,[39m
2025-06-04T22:41:45.3756398Z     [90m  3| [39m  createDecipheriv[33m,[39m
2025-06-04T22:41:45.3756583Z 
2025-06-04T22:41:45.3756972Z [31m[1mCaused by: ReferenceError[22m: Cannot access 'mockCrypto' before initialization[39m
2025-06-04T22:41:45.3757642Z [36m [2m❯[22m src/lib/security/__tests__/token.encryption.test.ts:[2m31:21[22m[39m
2025-06-04T22:41:45.3758203Z [90m [2m❯[22m src/lib/security/token.encryption.ts:[2m1:1[22m[39m
2025-06-04T22:41:45.3758445Z 
2025-06-04T22:41:45.3758648Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/523]⎯[22m[39m
2025-06-04T22:41:45.3758824Z 
2025-06-04T22:41:45.3759581Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/analyze.test.ts[2m [ src/pages/api/bias-detection/analyze.test.ts ][22m
2025-06-04T22:41:45.3760860Z [31m[1mError[22m: Failed to resolve import "@/lib/ai/bias-detection/performance-monitor" from "src/pages/api/bias-detection/analyze.ts". Does the file exist?[39m
2025-06-04T22:41:45.3761580Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3762168Z   File: [36m/home/runner/work/pixelated/pixelated/src/pages/api/bias-detection/analyze.ts[39m:20:35
2025-06-04T22:41:45.3762835Z [33m  7  |  import { getAuditLogger } from "@/lib/ai/bias-detection/audit";
2025-06-04T22:41:45.3763287Z   8  |  import { getCacheManager } from "@/lib/ai/bias-detection/cache";
2025-06-04T22:41:45.3763790Z   9  |  import { performanceMonitor } from "@/lib/ai/bias-detection/performance-monitor";
2025-06-04T22:41:45.3764207Z      |                                      ^
2025-06-04T22:41:45.3764514Z   10 |  import { getLogger } from "@/lib/utils/logger";
2025-06-04T22:41:45.3764902Z   11 |  const logger = getLogger("BiasAnalysisAPI");[39m
2025-06-04T22:41:45.3766111Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3767764Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3769419Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3770847Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3772381Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3774059Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3775645Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3776670Z 
2025-06-04T22:41:45.3776922Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/523]⎯[22m[39m
2025-06-04T22:41:45.3777104Z 
2025-06-04T22:41:45.3777694Z [41m[1m FAIL [22m[49m src/lib/ai/crisis/__tests__/CrisisProtocol.test.ts[2m [ src/lib/ai/crisis/__tests__/CrisisProtocol.test.ts ][22m
2025-06-04T22:41:45.3778344Z [31m[1mReferenceError[22m: jest is not defined[39m
2025-06-04T22:41:45.3778892Z [36m [2m❯[22m src/lib/ai/crisis/__tests__/CrisisProtocol.test.ts:[2m9:1[22m[39m
2025-06-04T22:41:45.3779399Z     [90m  7| [39m
2025-06-04T22:41:45.3779685Z     [90m  8| [39m[90m// Mock the logging module[39m
2025-06-04T22:41:45.3780193Z     [90m  9| [39mjest[33m.[39m[34mmock[39m([32m'../../../logging'[39m[33m,[39m () [33m=>[39m ({
2025-06-04T22:41:45.3780601Z     [90m   | [39m[31m^[39m
2025-06-04T22:41:45.3780888Z     [90m 10| [39m  appLogger[33m:[39m {
2025-06-04T22:41:45.3781298Z     [90m 11| [39m    info[33m:[39m jest[33m.[39m[34mfn[39m()[33m,[39m
2025-06-04T22:41:45.3781527Z 
2025-06-04T22:41:45.3781738Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/523]⎯[22m[39m
2025-06-04T22:41:45.3781914Z 
2025-06-04T22:41:45.3782511Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionContext.test.ts[2m [ src/lib/ai/emotions/__tests__/EmotionContext.test.ts ][22m
2025-06-04T22:41:45.3783816Z [31m[1mError[22m: Failed to resolve import "../EmotionContext" from "src/lib/ai/emotions/__tests__/EmotionContext.test.ts". Does the file exist?[39m
2025-06-04T22:41:45.3784967Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3785744Z   File: [36m/home/runner/work/pixelated/pixelated/src/lib/ai/emotions/__tests__/EmotionContext.test.ts[39m:1:0
2025-06-04T22:41:45.3786280Z [33m  10 |        })
2025-06-04T22:41:45.3786600Z   11 |      }));
2025-06-04T22:41:45.3787077Z   12 |  const __vi_import_0__ = await import("../EmotionContext");
2025-06-04T22:41:45.3787675Z      |                                       ^
2025-06-04T22:41:45.3788066Z   13 |  
2025-06-04T22:41:45.3788507Z   14 |  describe("EmotionContext", () => {[39m
2025-06-04T22:41:45.3790188Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3792491Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3794034Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3795446Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3796982Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3798666Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3800571Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3801198Z 
2025-06-04T22:41:45.3801414Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/523]⎯[22m[39m
2025-06-04T22:41:45.3801767Z 
2025-06-04T22:41:45.3802412Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionSynthesizer.test.ts[2m [ src/lib/ai/emotions/__tests__/EmotionSynthesizer.test.ts ][22m
2025-06-04T22:41:45.3803573Z [31m[1mError[22m: Failed to resolve import "../EmotionSynthesizer" from "src/lib/ai/emotions/__tests__/EmotionSynthesizer.test.ts". Does the file exist?[39m
2025-06-04T22:41:45.3804239Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3804904Z   File: [36m/home/runner/work/pixelated/pixelated/src/lib/ai/emotions/__tests__/EmotionSynthesizer.test.ts[39m:1:0
2025-06-04T22:41:45.3812898Z [33m  3  |        storeEmotionResponse: vi.fn().mockResolvedValue("response-123")
2025-06-04T22:41:45.3813533Z   4  |      }));
2025-06-04T22:41:45.3814082Z   5  |  const __vi_import_0__ = await import("../EmotionSynthesizer");
2025-06-04T22:41:45.3814663Z      |                                       ^
2025-06-04T22:41:45.3815062Z   6  |  
2025-06-04T22:41:45.3815593Z   7  |  describe("EmotionSynthesizer", () => {[39m
2025-06-04T22:41:45.3817702Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3820885Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3823844Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3826576Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3829797Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3833049Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3836139Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3837295Z 
2025-06-04T22:41:45.3837720Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/523]⎯[22m[39m
2025-06-04T22:41:45.3838046Z 
2025-06-04T22:41:45.3839479Z [41m[1m FAIL [22m[49m src/lib/ai/mental-llama/tests/evaluation-system.test.ts[2m [ src/lib/ai/mental-llama/tests/evaluation-system.test.ts ][22m
2025-06-04T22:41:45.3841391Z [31m[1mError[22m: [vitest] No "getLogger" export is defined on the "../../../logging" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.3842618Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.3843292Z [39m
2025-06-04T22:41:45.3844385Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../../logging"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.3845534Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.3846176Z   [35mreturn[39m {
2025-06-04T22:41:45.3846631Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.3847145Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.3847538Z   }
2025-06-04T22:41:45.3847799Z })
2025-06-04T22:41:45.3848187Z 
2025-06-04T22:41:45.3852122Z [36m [2m❯[22m src/lib/ai/mental-llama/utils/bart-score.ts:[2m17:16[22m[39m
2025-06-04T22:41:45.3852937Z     [90m 15| [39m
2025-06-04T22:41:45.3853481Z     [90m 16| [39m[90m// Initialize logger[39m
2025-06-04T22:41:45.3853983Z     [90m 17| [39m[35mconst[39m logger [33m=[39m [34mgetLogger[39m()
2025-06-04T22:41:45.3854375Z     [90m   | [39m               [31m^[39m
2025-06-04T22:41:45.3854645Z     [90m 18| [39m
2025-06-04T22:41:45.3855043Z     [90m 19| [39m[90m// Interface for BART-Score calculation parameters[39m
2025-06-04T22:41:45.3855698Z [90m [2m❯[22m src/lib/ai/mental-llama/tests/evaluation-system.test.ts:[2m11:1[22m[39m
2025-06-04T22:41:45.3856021Z 
2025-06-04T22:41:45.3856238Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/523]⎯[22m[39m
2025-06-04T22:41:45.3856421Z 
2025-06-04T22:41:45.3857057Z [41m[1m FAIL [22m[49m src/lib/ai/performance/__tests__/EdgeComputing.test.ts[2m [ src/lib/ai/performance/__tests__/EdgeComputing.test.ts ][22m
2025-06-04T22:41:45.3858192Z [31m[1mError[22m: Failed to resolve import "../EdgeComputing" from "src/lib/ai/performance/__tests__/EdgeComputing.test.ts". Does the file exist?[39m
2025-06-04T22:41:45.3858851Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.3859756Z   File: [36m/home/runner/work/pixelated/pixelated/src/lib/ai/performance/__tests__/EdgeComputing.test.ts[39m:1:0
2025-06-04T22:41:45.3860292Z [33m  7  |    }))
2025-06-04T22:41:45.3860473Z   8  |  }));
2025-06-04T22:41:45.3860959Z   9  |  const __vi_import_0__ = await import("../EdgeComputing");
2025-06-04T22:41:45.3861297Z      |                                       ^
2025-06-04T22:41:45.3861530Z   10 |  
2025-06-04T22:41:45.3861770Z   11 |  const mockNavigator = {[39m
2025-06-04T22:41:45.3862947Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.3864606Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.3866147Z [90m [2m❯[22m normalizeUrl node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40475:23[22m[39m
2025-06-04T22:41:45.3867550Z [90m [2m❯[22m node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40594:37[22m[39m
2025-06-04T22:41:45.3869070Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40521:7[22m[39m
2025-06-04T22:41:45.3871173Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.3874288Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.3875440Z 
2025-06-04T22:41:45.3875859Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/523]⎯[22m[39m
2025-06-04T22:41:45.3876184Z 
2025-06-04T22:41:45.3877406Z [41m[1m FAIL [22m[49m src/lib/services/contact/__tests__/ContactService.test.ts[2m [ src/lib/services/contact/__tests__/ContactService.test.ts ][22m
2025-06-04T22:41:45.3879465Z [31m[1mError[22m: [vitest] No "default" export is defined on the "fs/promises" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.3880978Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.3881690Z [39m
2025-06-04T22:41:45.3882760Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"fs/promises"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.3883925Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.3884574Z   [35mreturn[39m {
2025-06-04T22:41:45.3885048Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.3885570Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.3885954Z   }
2025-06-04T22:41:45.3886207Z })
2025-06-04T22:41:45.3886355Z 
2025-06-04T22:41:45.3886985Z [36m [2m❯[22m src/lib/services/contact/ContactService.ts:[2m4:26[22m[39m
2025-06-04T22:41:45.3888070Z     [90m  2| [39m[35mimport[39m { logger } [35mfrom[39m [32m'@/lib/utils/logger'[39m
2025-06-04T22:41:45.3888957Z     [90m  3| [39m[35mimport[39m { z } [35mfrom[39m [32m'zod'[39m
2025-06-04T22:41:45.3890081Z     [90m  4| [39m[35mimport[39m { readFile } [35mfrom[39m [32m'fs/promises'[39m
2025-06-04T22:41:45.3890894Z     [90m   | [39m                         [31m^[39m
2025-06-04T22:41:45.3891611Z     [90m  5| [39m[35mimport[39m { join } [35mfrom[39m [32m'path'[39m
2025-06-04T22:41:45.3892033Z     [90m  6| [39m
2025-06-04T22:41:45.3892531Z [90m [2m❯[22m src/lib/services/contact/__tests__/ContactService.test.ts:[2m2:1[22m[39m
2025-06-04T22:41:45.3892851Z 
2025-06-04T22:41:45.3893247Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/523]⎯[22m[39m
2025-06-04T22:41:45.3893442Z 
2025-06-04T22:41:45.3894062Z [41m[1m FAIL [22m[49m src/lib/services/email/__tests__/EmailService.test.ts[2m [ src/lib/services/email/__tests__/EmailService.test.ts ][22m
2025-06-04T22:41:45.3895273Z [41m[1m FAIL [22m[49m src/lib/services/notification/__tests__/NotificationService.test.ts[2m [ src/lib/services/notification/__tests__/NotificationService.test.ts ][22m
2025-06-04T22:41:45.3896903Z [31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
2025-06-04T22:41:45.3898027Z [31m[1mCaused by: ReferenceError[22m: Cannot access 'mockLogger' before initialization[39m
2025-06-04T22:41:45.3898705Z [36m [2m❯[22m src/lib/services/email/__tests__/EmailService.test.ts:[2m52:13[22m[39m
2025-06-04T22:41:45.3899539Z [90m [2m❯[22m src/lib/services/email/EmailService.ts:[2m3:1[22m[39m
2025-06-04T22:41:45.3899801Z 
2025-06-04T22:41:45.3900018Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/523]⎯[22m[39m
2025-06-04T22:41:45.3900196Z 
2025-06-04T22:41:45.3900914Z [41m[1m FAIL [22m[49m src/lib/services/notification/__tests__/WebSocketServer.test.ts[2m [ src/lib/services/notification/__tests__/WebSocketServer.test.ts ][22m
2025-06-04T22:41:45.3902006Z [31m[1mError[22m: [vitest] No "getLogger" export is defined on the "@/lib/utils/logger" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.3902718Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.3903078Z [39m
2025-06-04T22:41:45.3903678Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/utils/logger"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.3904311Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.3904674Z   [35mreturn[39m {
2025-06-04T22:41:45.3904929Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.3905212Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.3905435Z   }
2025-06-04T22:41:45.3905586Z })
2025-06-04T22:41:45.3905674Z 
2025-06-04T22:41:45.3905997Z [36m [2m❯[22m src/lib/services/notification/smsUtils.ts:[2m5:16[22m[39m
2025-06-04T22:41:45.3906560Z     [90m  3| [39m[35mimport[39m { getLogger } [35mfrom[39m [32m'@/lib/utils/logger'[39m
2025-06-04T22:41:45.3907080Z     [90m  4| [39m
2025-06-04T22:41:45.3907492Z     [90m  5| [39m[35mconst[39m logger [33m=[39m [34mgetLogger[39m([32m'smsUtils'[39m)
2025-06-04T22:41:45.3907909Z     [90m   | [39m               [31m^[39m
2025-06-04T22:41:45.3908164Z     [90m  6| [39m
2025-06-04T22:41:45.3908658Z     [90m  7| [39m[35mlet[39m twilioClient[33m:[39m [33mTwilio[39m [33m|[39m [35mnull[39m [33m=[39m [35mnull[39m
2025-06-04T22:41:45.3909499Z [90m [2m❯[22m src/lib/services/notification/NotificationService.ts:[2m9:1[22m[39m
2025-06-04T22:41:45.3909809Z 
2025-06-04T22:41:45.3910020Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/523]⎯[22m[39m
2025-06-04T22:41:45.3910198Z 
2025-06-04T22:41:45.3910776Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.integration.test.ts[2m > [22mRedisService Integration Tests
2025-06-04T22:41:45.3911493Z [31m[1mRedisServiceError[22m: Failed to connect to Redis[39m
2025-06-04T22:41:45.3912124Z [36m [2m❯[22m RedisService.connect src/lib/services/redis/RedisService.ts:[2m125:13[22m[39m
2025-06-04T22:41:45.3912563Z     [90m123| [39m      }
2025-06-04T22:41:45.3912788Z     [90m124| [39m
2025-06-04T22:41:45.3913163Z     [90m125| [39m      [35mthrow[39m [35mnew[39m [33mRedisServiceError[39m(
2025-06-04T22:41:45.3913554Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.3914037Z     [90m126| [39m        [33mRedisErrorCode[39m[33m.[39m[33mCONNECTION_FAILED[39m[33m,[39m
2025-06-04T22:41:45.3914682Z     [90m127| [39m        [32m'Failed to connect to Redis'[39m[33m,[39m
2025-06-04T22:41:45.3915335Z [90m [2m❯[22m src/lib/services/redis/__tests__/RedisService.integration.test.ts:[2m32:5[22m[39m
2025-06-04T22:41:45.3915670Z 
2025-06-04T22:41:45.3915968Z [31m[1mCaused by: Error[22m: Redis is already connecting/connected[39m
2025-06-04T22:41:45.3916632Z [90m [2m❯[22m node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:[2m107:24[22m[39m
2025-06-04T22:41:45.3917466Z [90m [2m❯[22m EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:[2m103:25[22m[39m
2025-06-04T22:41:45.3918266Z [36m [2m❯[22m RedisService.connect src/lib/services/redis/RedisService.ts:[2m107:25[22m[39m
2025-06-04T22:41:45.3919279Z [90m [2m❯[22m src/lib/services/redis/__tests__/RedisService.integration.test.ts:[2m32:17[22m[39m
2025-06-04T22:41:45.3919890Z 
2025-06-04T22:41:45.3920270Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/523]⎯[22m[39m
2025-06-04T22:41:45.3920585Z 
2025-06-04T22:41:45.3921453Z [41m[1m FAIL [22m[49m src/pages/api/v1/__tests__/health.test.ts[2m [ src/pages/api/v1/__tests__/health.test.ts ][22m
2025-06-04T22:41:45.3923357Z [31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
2025-06-04T22:41:45.3924334Z [36m [2m❯[22m src/pages/api/v1/health.ts:[2m5:1[22m[39m
2025-06-04T22:41:45.3924868Z     [90m  3| [39m[35mimport[39m [33m*[39m [35mas[39m os [35mfrom[39m [32m'node:os'[39m
2025-06-04T22:41:45.3925462Z     [90m  4| [39m[35mimport[39m { createClient } [35mfrom[39m [32m'@supabase/supabase-js'[39m
2025-06-04T22:41:45.3926070Z     [90m  5| [39m[35mimport[39m { getRedisHealth } [35mfrom[39m [32m'../../../lib/redis'[39m
2025-06-04T22:41:45.3926479Z     [90m   | [39m[31m^[39m
2025-06-04T22:41:45.3926723Z     [90m  6| [39m
2025-06-04T22:41:45.3926930Z     [90m  7| [39m[90m/**
2025-06-04T22:41:45.3927068Z 
2025-06-04T22:41:45.3927455Z [31m[1mCaused by: ReferenceError[22m: Cannot access 'redisMock' before initialization[39m
2025-06-04T22:41:45.3928069Z [36m [2m❯[22m src/pages/api/v1/__tests__/health.test.ts:[2m33:3[22m[39m
2025-06-04T22:41:45.3928553Z [90m [2m❯[22m src/pages/api/v1/health.ts:[2m5:1[22m[39m
2025-06-04T22:41:45.3928752Z 
2025-06-04T22:41:45.3928957Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/523]⎯[22m[39m
2025-06-04T22:41:45.3929532Z 
2025-06-04T22:41:45.3929538Z 
2025-06-04T22:41:45.3929845Z [31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 437 [49m[22m[31m⎯⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.3930065Z 
2025-06-04T22:41:45.3930538Z [41m[1m FAIL [22m[49m src/tests/performance.test.ts[2m > [22mperformance Tests[2m > [22maPI Performance - 
2025-06-04T22:41:45.3931152Z [31m[1mError[22m: page.evaluate: TypeError: Failed to fetch
2025-06-04T22:41:45.3931545Z     at eval (eval at evaluate (:313:29), <anonymous>:2:20)
2025-06-04T22:41:45.3931889Z     at UtilityScript.evaluate (<anonymous>:315:16)
2025-06-04T22:41:45.3932277Z     at UtilityScript.<anonymous> (<anonymous>:1:44)[39m
2025-06-04T22:41:45.3932994Z [36m [2m❯[22m src/tests/performance.test.ts:[2m344:31[22m[39m
2025-06-04T22:41:45.3934024Z     [90m342| [39m        }[33m,[39m [32m`http://localhost:3000[39m[36m${[39mpath[36m}[39m[32m`[39m)
2025-06-04T22:41:45.3935088Z     [90m343| [39m      } [35melse[39m [35mif[39m (method [33m===[39m [32m'POST'[39m) {
2025-06-04T22:41:45.3935837Z     [90m344| [39m        response [33m=[39m [35mawait[39m page[33m.[39m[34mevaluate[39m(
2025-06-04T22:41:45.3936290Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.3936686Z     [90m345| [39m          ({ url[33m,[39m data }) [33m=>[39m {
2025-06-04T22:41:45.3937147Z     [90m346| [39m            [35mreturn[39m [34mfetch[39m(url[33m,[39m {
2025-06-04T22:41:45.3937548Z 
2025-06-04T22:41:45.3938097Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/523]⎯[22m[39m
2025-06-04T22:41:45.3938405Z 
2025-06-04T22:41:45.3939052Z [41m[1m FAIL [22m[49m src/tests/performance.test.ts[2m > [22mperformance Tests[2m > [22maPI Performance - 
2025-06-04T22:41:45.3940289Z [31m[1mError[22m: page.evaluate: TypeError: Failed to fetch
2025-06-04T22:41:45.3940758Z     at eval (eval at evaluate (:313:29), <anonymous>:2:35)
2025-06-04T22:41:45.3941094Z     at UtilityScript.evaluate (<anonymous>:315:16)
2025-06-04T22:41:45.3941506Z     at UtilityScript.<anonymous> (<anonymous>:1:44)[39m
2025-06-04T22:41:45.3942135Z [36m [2m❯[22m src/tests/performance.test.ts:[2m336:31[22m[39m
2025-06-04T22:41:45.3942530Z     [90m334| [39m      [35mlet[39m response
2025-06-04T22:41:45.3942928Z     [90m335| [39m      [35mif[39m (method [33m===[39m [32m'GET'[39m) {
2025-06-04T22:41:45.3943650Z     [90m336| [39m        response [33m=[39m [35mawait[39m page[33m.[39m[34mevaluate[39m([35masync[39m (url[33m:[39m string) [33m=>[39m {
2025-06-04T22:41:45.3944221Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.3944721Z     [90m337| [39m          [35mconst[39m response [33m=[39m [35mawait[39m [34mfetch[39m(url)
2025-06-04T22:41:45.3945152Z     [90m338| [39m          [35mreturn[39m {
2025-06-04T22:41:45.3945320Z 
2025-06-04T22:41:45.3945531Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/523]⎯[22m[39m
2025-06-04T22:41:45.3945707Z 
2025-06-04T22:41:45.3946354Z [41m[1m FAIL [22m[49m src/hooks/__tests__/useEmotionDetection.test.ts[2m > [22museEmotionDetection[2m > [22mshould detect emotions from text content
2025-06-04T22:41:45.3947309Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.3947896Z [36m [2m❯[22m src/hooks/__tests__/useEmotionDetection.test.ts:[2m41:22[22m[39m
2025-06-04T22:41:45.3952490Z     [90m 39| [39m    )
2025-06-04T22:41:45.3952882Z     [90m 40| [39m
2025-06-04T22:41:45.3953492Z     [90m 41| [39m    [34mexpect[39m(analysis)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.3954112Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.3954820Z     [90m 42| [39m      primaryEmotion[33m:[39m [32m'joy'[39m[33m,[39m
2025-06-04T22:41:45.3955925Z     [90m 43| [39m      secondaryEmotions[33m:[39m [[32m'excitement'[39m[33m,[39m [32m'contentment'[39m][33m,[39m
2025-06-04T22:41:45.3956520Z 
2025-06-04T22:41:45.3956754Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/523]⎯[22m[39m
2025-06-04T22:41:45.3956949Z 
2025-06-04T22:41:45.3957599Z [41m[1m FAIL [22m[49m src/hooks/__tests__/useEmotionDetection.test.ts[2m > [22museEmotionDetection[2m > [22mshould handle streaming responses
2025-06-04T22:41:45.3958917Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.3959758Z [36m [2m❯[22m src/hooks/__tests__/useEmotionDetection.test.ts:[2m61:22[22m[39m
2025-06-04T22:41:45.3960267Z     [90m 59| [39m    )
2025-06-04T22:41:45.3960504Z     [90m 60| [39m
2025-06-04T22:41:45.3960864Z     [90m 61| [39m    [34mexpect[39m(analysis)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.3961249Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.3961659Z     [90m 62| [39m      primaryEmotion[33m:[39m [32m'joy'[39m[33m,[39m
2025-06-04T22:41:45.3962284Z     [90m 63| [39m      secondaryEmotions[33m:[39m [[32m'excitement'[39m[33m,[39m [32m'contentment'[39m][33m,[39m
2025-06-04T22:41:45.3962620Z 
2025-06-04T22:41:45.3962839Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/523]⎯[22m[39m
2025-06-04T22:41:45.3963015Z 
2025-06-04T22:41:45.3963772Z [41m[1m FAIL [22m[49m src/hooks/__tests__/useNotificationPreferences.test.ts[2m > [22museNotificationPreferences[2m > [22mfalls back to default preferences on load error
2025-06-04T22:41:45.3964633Z [31m[1mError[22m: expected [object Object] to equal ObjectContaining[39m
2025-06-04T22:41:45.3965432Z [36m [2m❯[22m src/hooks/__tests__/useNotificationPreferences.test.ts:[2m66:40[22m[39m
2025-06-04T22:41:45.3971026Z     [90m 64| [39m    [34mexpect[39m(result[33m.[39mcurrent[33m.[39misLoading)[33m.[39m[34mtoBe[39m([35mfalse[39m)
2025-06-04T22:41:45.3972382Z     [90m 65| [39m    [34mexpect[39m(result[33m.[39mcurrent[33m.[39merror)[33m.[39m[34mtoBeInstanceOf[39m([33mError[39m)
2025-06-04T22:41:45.3973162Z     [90m 66| [39m    [34mexpect[39m(result[33m.[39mcurrent[33m.[39mpreferences)[33m.[39m[34mtoEqual[39m(
2025-06-04T22:41:45.3973885Z     [90m   | [39m                                       [31m^[39m
2025-06-04T22:41:45.3974694Z     [90m 67| [39m      expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.3975600Z     [90m 68| [39m        channels[33m:[39m expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.3976066Z 
2025-06-04T22:41:45.3976472Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/523]⎯[22m[39m
2025-06-04T22:41:45.3976799Z 
2025-06-04T22:41:45.3978093Z [41m[1m FAIL [22m[49m src/hooks/__tests__/usePatternDetection.test.ts[2m > [22musePatternDetection[2m > [22mshould detect patterns from conversation history
2025-06-04T22:41:45.3979645Z [31m[1mError[22m: expected  to equal [object Object][39m
2025-06-04T22:41:45.3980677Z [36m [2m❯[22m src/hooks/__tests__/usePatternDetection.test.ts:[2m60:22[22m[39m
2025-06-04T22:41:45.3984772Z     [90m 58| [39m    [35mconst[39m patterns [33m=[39m [35mawait[39m result[33m.[39mcurrent[33m.[39m[34mdetectPatterns[39m(mockMessages)
2025-06-04T22:41:45.3986048Z     [90m 59| [39m
2025-06-04T22:41:45.3986850Z     [90m 60| [39m    [34mexpect[39m(patterns)[33m.[39m[34mtoEqual[39m(mockPatternResponse)
2025-06-04T22:41:45.3987718Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.3988226Z     [90m 61| [39m  })
2025-06-04T22:41:45.3988646Z     [90m 62| [39m
2025-06-04T22:41:45.3988849Z 
2025-06-04T22:41:45.3989457Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/523]⎯[22m[39m
2025-06-04T22:41:45.3989788Z 
2025-06-04T22:41:45.3991003Z [41m[1m FAIL [22m[49m src/hooks/__tests__/usePatternDetection.test.ts[2m > [22musePatternDetection[2m > [22mshould handle streaming responses
2025-06-04T22:41:45.3992370Z [31m[1mError[22m: expected  to equal [object Object][39m
2025-06-04T22:41:45.3993423Z [36m [2m❯[22m src/hooks/__tests__/usePatternDetection.test.ts:[2m73:22[22m[39m
2025-06-04T22:41:45.3994922Z     [90m 71| [39m    [35mconst[39m patterns [33m=[39m [35mawait[39m result[33m.[39mcurrent[33m.[39m[34mdetectPatterns[39m(mockMessages)
2025-06-04T22:41:45.3995789Z     [90m 72| [39m
2025-06-04T22:41:45.3996548Z     [90m 73| [39m    [34mexpect[39m(patterns)[33m.[39m[34mtoEqual[39m(mockPatternResponse)
2025-06-04T22:41:45.3997351Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.3997692Z     [90m 74| [39m  })
2025-06-04T22:41:45.3998083Z     [90m 75| [39m
2025-06-04T22:41:45.3998281Z 
2025-06-04T22:41:45.3998695Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/523]⎯[22m[39m
2025-06-04T22:41:45.3999020Z 
2025-06-04T22:41:45.4000747Z [41m[1m FAIL [22m[49m src/hooks/__tests__/usePatternDetection.test.ts[2m > [22musePatternDetection[2m > [22mshould return error pattern on API failure
2025-06-04T22:41:45.4002202Z [31m[1mError[22m: expected  to equal [object Object][39m
2025-06-04T22:41:45.4003278Z [36m [2m❯[22m src/hooks/__tests__/usePatternDetection.test.ts:[2m86:22[22m[39m
2025-06-04T22:41:45.4004727Z     [90m 84| [39m    [35mconst[39m patterns [33m=[39m [35mawait[39m result[33m.[39mcurrent[33m.[39m[34mdetectPatterns[39m(mockMessages)
2025-06-04T22:41:45.4005639Z     [90m 85| [39m
2025-06-04T22:41:45.4006280Z     [90m 86| [39m    [34mexpect[39m(patterns)[33m.[39m[34mtoEqual[39m([
2025-06-04T22:41:45.4006978Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.4007461Z     [90m 87| [39m      {
2025-06-04T22:41:45.4008120Z     [90m 88| [39m        patternType[33m:[39m [32m'error'[39m[33m,[39m
2025-06-04T22:41:45.4008516Z 
2025-06-04T22:41:45.4009024Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/523]⎯[22m[39m
2025-06-04T22:41:45.4009518Z 
2025-06-04T22:41:45.4010738Z [41m[1m FAIL [22m[49m src/hooks/__tests__/usePatternDetection.test.ts[2m > [22musePatternDetection[2m > [22mshould handle malformed JSON responses
2025-06-04T22:41:45.4012041Z [31m[1mError[22m: expected  to equal [object Object][39m
2025-06-04T22:41:45.4013048Z [36m [2m❯[22m src/hooks/__tests__/usePatternDetection.test.ts:[2m107:22[22m[39m
2025-06-04T22:41:45.4014473Z     [90m105| [39m    [35mconst[39m patterns [33m=[39m [35mawait[39m result[33m.[39mcurrent[33m.[39m[34mdetectPatterns[39m(mockMessages)
2025-06-04T22:41:45.4015373Z     [90m106| [39m
2025-06-04T22:41:45.4016022Z     [90m107| [39m    [34mexpect[39m(patterns)[33m.[39m[34mtoEqual[39m([
2025-06-04T22:41:45.4016717Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.4017195Z     [90m108| [39m      {
2025-06-04T22:41:45.4017874Z     [90m109| [39m        patternType[33m:[39m [32m'error'[39m[33m,[39m
2025-06-04T22:41:45.4018282Z 
2025-06-04T22:41:45.4018680Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/523]⎯[22m[39m
2025-06-04T22:41:45.4018985Z 
2025-06-04T22:41:45.4020321Z [41m[1m FAIL [22m[49m src/layouts/__tests__/DocumentationLayout.test.tsx[2m > [22mDocumentationLayout renders with correct title and content
2025-06-04T22:41:45.4022262Z [41m[1m FAIL [22m[49m src/layouts/__tests__/DocumentationLayout.test.tsx[2m > [22mDocumentationLayout uses frontmatter props when available
2025-06-04T22:41:45.4024842Z [31m[1mError[22m: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.[39m
2025-06-04T22:41:45.4026175Z   Plugin: [35mvite:import-analysis[39m
2025-06-04T22:41:45.4027235Z   File: [36m/home/runner/work/pixelated/pixelated/src/layouts/DocumentationLayout.astro[39m:252:13
2025-06-04T22:41:45.4028345Z [33m  250|          background-color: rgba(241, 245, 249, 0.8);
2025-06-04T22:41:45.4028806Z   251|        }
2025-06-04T22:41:45.4029267Z   252|      </style>
2025-06-04T22:41:45.4029576Z      |              ^
2025-06-04T22:41:45.4029878Z   253|    </head>
2025-06-04T22:41:45.4030205Z   254|  [39m
2025-06-04T22:41:45.4032247Z [90m [2m❯[22m TransformPluginContext._formatLog node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42499:41[22m[39m
2025-06-04T22:41:45.4035352Z [90m [2m❯[22m TransformPluginContext.error node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42496:16[22m[39m
2025-06-04T22:41:45.4038716Z [90m [2m❯[22m TransformPluginContext.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m40426:14[22m[39m
2025-06-04T22:41:45.4042118Z [90m [2m❯[22m EnvironmentPluginContainer.transform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m42294:18[22m[39m
2025-06-04T22:41:45.4045113Z [90m [2m❯[22m loadAndTransform node_modules/.pnpm/vite@6.3.5_@types+node@22.15.24_jiti@2.4.2_lightningcss@1.29.3_terser@5.39.2_tsx@4.19.4_yaml@2.8.0/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:[2m35735:27[22m[39m
2025-06-04T22:41:45.4046277Z 
2025-06-04T22:41:45.4046705Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/523]⎯[22m[39m
2025-06-04T22:41:45.4047033Z 
2025-06-04T22:41:45.4048438Z [41m[1m FAIL [22m[49m src/tests/ai/crisis-detection.test.ts[2m > [22mcrisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould detect high-risk crisis correctly
2025-06-04T22:41:45.4050257Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.4051377Z [36m [2m❯[22m src/tests/ai/crisis-detection.test.ts:[2m173:22[22m[39m
2025-06-04T22:41:45.4052143Z     [90m171| [39m
2025-06-04T22:41:45.4052726Z     [90m172| [39m      [90m// Verify the result[39m
2025-06-04T22:41:45.4053486Z     [90m173| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.4054158Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.4054831Z     [90m174| [39m        isCrisis[33m:[39m [35mtrue[39m[33m,[39m
2025-06-04T22:41:45.4055643Z     [90m175| [39m        severity[33m:[39m [32m'high'[39m[33m,[39m
2025-06-04T22:41:45.4056059Z 
2025-06-04T22:41:45.4056493Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/523]⎯[22m[39m
2025-06-04T22:41:45.4056824Z 
2025-06-04T22:41:45.4058223Z [41m[1m FAIL [22m[49m src/tests/ai/crisis-detection.test.ts[2m > [22mcrisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould detect medium-risk crisis correctly
2025-06-04T22:41:45.4059915Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.4060958Z [36m [2m❯[22m src/tests/ai/crisis-detection.test.ts:[2m236:22[22m[39m
2025-06-04T22:41:45.4061603Z     [90m234| [39m
2025-06-04T22:41:45.4062094Z     [90m235| [39m      [90m// Verify the result[39m
2025-06-04T22:41:45.4062831Z     [90m236| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.4063523Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.4064647Z     [90m237| [39m        isCrisis[33m:[39m [35mtrue[39m[33m,[39m
2025-06-04T22:41:45.4065545Z     [90m238| [39m        severity[33m:[39m [32m'medium'[39m[33m,[39m
2025-06-04T22:41:45.4065975Z 
2025-06-04T22:41:45.4066413Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/523]⎯[22m[39m
2025-06-04T22:41:45.4066730Z 
2025-06-04T22:41:45.4068037Z [41m[1m FAIL [22m[49m src/tests/ai/crisis-detection.test.ts[2m > [22mcrisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould detect low-risk crisis correctly
2025-06-04T22:41:45.4069711Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.4070816Z [36m [2m❯[22m src/tests/ai/crisis-detection.test.ts:[2m285:22[22m[39m
2025-06-04T22:41:45.4071456Z     [90m283| [39m
2025-06-04T22:41:45.4072047Z     [90m284| [39m      [90m// Verify the result[39m
2025-06-04T22:41:45.4072872Z     [90m285| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.4073543Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.4074236Z     [90m286| [39m        isCrisis[33m:[39m [35mtrue[39m[33m,[39m
2025-06-04T22:41:45.4074980Z     [90m287| [39m        severity[33m:[39m [32m'low'[39m[33m,[39m
2025-06-04T22:41:45.4075355Z 
2025-06-04T22:41:45.4075773Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/523]⎯[22m[39m
2025-06-04T22:41:45.4076118Z 
2025-06-04T22:41:45.4077758Z [41m[1m FAIL [22m[49m src/tests/ai/crisis-detection.test.ts[2m > [22mcrisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould correctly identify non-crisis text
2025-06-04T22:41:45.4079547Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.4080595Z [36m [2m❯[22m src/tests/ai/crisis-detection.test.ts:[2m334:22[22m[39m
2025-06-04T22:41:45.4081242Z     [90m332| [39m
2025-06-04T22:41:45.4081760Z     [90m333| [39m      [90m// Verify the result[39m
2025-06-04T22:41:45.4082546Z     [90m334| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.4083261Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.4083969Z     [90m335| [39m        isCrisis[33m:[39m [35mfalse[39m[33m,[39m
2025-06-04T22:41:45.4084751Z     [90m336| [39m        severity[33m:[39m [32m'none'[39m[33m,[39m
2025-06-04T22:41:45.4085124Z 
2025-06-04T22:41:45.4085492Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/523]⎯[22m[39m
2025-06-04T22:41:45.4085819Z 
2025-06-04T22:41:45.4087165Z [41m[1m FAIL [22m[49m src/tests/ai/crisis-detection.test.ts[2m > [22mcrisisDetectionService[2m > [22mdetectCrisis[2m > [22mshould respect sensitivity level
2025-06-04T22:41:45.4088993Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ { …(2) }, ObjectContaining{…} ][90m
2025-06-04T22:41:45.4089856Z 
2025-06-04T22:41:45.4090004Z Received: 
2025-06-04T22:41:45.4090188Z 
2025-06-04T22:41:45.4090440Z [1m  1st spy call:
2025-06-04T22:41:45.4090653Z 
2025-06-04T22:41:45.4090880Z [22m[2m  [[22m
2025-06-04T22:41:45.4091281Z [31m+   [[90m
2025-06-04T22:41:45.4091618Z [2m      {[22m
2025-06-04T22:41:45.4092248Z [32m-     "asymmetricMatch": [Function asymmetricMatch],[90m
2025-06-04T22:41:45.4093058Z [32m-     "toString": [Function toString],[90m
2025-06-04T22:41:45.4095371Z [31m+       "content": "You are a mental health assessment assistant specializing in crisis detection. Analyze the message for indicators of crisis, including self-harm, suicidal ideation, harm to others, and severe psychological distress.[90m
2025-06-04T22:41:45.4096949Z [31m+[90m
2025-06-04T22:41:45.4097551Z [31m+ The current sensitivity level is set to: HIGH[90m
2025-06-04T22:41:45.4098080Z [31m+[90m
2025-06-04T22:41:45.4098581Z [31m+ Respond in valid JSON format with:[90m
2025-06-04T22:41:45.4099634Z [31m+ - isCrisis: boolean indicating if there is a crisis concern[90m
2025-06-04T22:41:45.4100669Z [31m+ - confidence: number from 0-1 indicating confidence in assessment[90m
2025-06-04T22:41:45.4102047Z [31m+ - category: optional string categorizing the type of crisis (e.g., \"self-harm\", \"suicide\", \"abuse\")[90m
2025-06-04T22:41:45.4103506Z [31m+ - severity: \"none\", \"low\", \"medium\", \"high\", or \"severe\"[90m
2025-06-04T22:41:45.4104531Z [31m+ - recommendedAction: optional string with recommended next steps[90m
2025-06-04T22:41:45.4105175Z [31m+[90m
2025-06-04T22:41:45.4106120Z [31m+ Be extremely cautious about false negatives - if there's ambiguity, lean toward safety.",[90m
2025-06-04T22:41:45.4106955Z [31m+       "name": "",[90m
2025-06-04T22:41:45.4107467Z [31m+       "role": "system",[90m
2025-06-04T22:41:45.4107917Z [2m      },[22m
2025-06-04T22:41:45.4108377Z [32m-   ObjectContaining {[90m
2025-06-04T22:41:45.4108819Z [31m+     {[90m
2025-06-04T22:41:45.4109695Z [31m+       "content": "I'm feeling really anxious about everything.",[90m
2025-06-04T22:41:45.4110351Z [31m+       "name": "",[90m
2025-06-04T22:41:45.4110854Z [31m+       "role": "user",[90m
2025-06-04T22:41:45.4111291Z [31m+     },[90m
2025-06-04T22:41:45.4111648Z [31m+   ],[90m
2025-06-04T22:41:45.4111985Z [31m+   {[90m
2025-06-04T22:41:45.4112446Z [2m      "model": "test-model",[22m
2025-06-04T22:41:45.4112886Z [2m    },[22m
2025-06-04T22:41:45.4113196Z [2m  ][22m
2025-06-04T22:41:45.4113492Z [31m[90m
2025-06-04T22:41:45.4113651Z 
2025-06-04T22:41:45.4113872Z Number of calls: [1m1[22m
2025-06-04T22:41:45.4114237Z [31m[39m
2025-06-04T22:41:45.4115176Z [36m [2m❯[22m src/tests/ai/crisis-detection.test.ts:[2m415:50[22m[39m
2025-06-04T22:41:45.4115904Z     [90m413| [39m
2025-06-04T22:41:45.4116693Z     [90m414| [39m      [90m// Verify the AI service was called with sensitivity parameter[39m
2025-06-04T22:41:45.4118109Z     [90m415| [39m      [34mexpect[39m(mockAIService[33m.[39mcreateChatCompletion)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.4119363Z     [90m   | [39m                                                 [31m^[39m
2025-06-04T22:41:45.4120105Z     [90m416| [39m        expect[33m.[39m[34marrayContaining[39m([
2025-06-04T22:41:45.4120974Z     [90m417| [39m          expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.4121382Z 
2025-06-04T22:41:45.4121820Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/523]⎯[22m[39m
2025-06-04T22:41:45.4122170Z 
2025-06-04T22:41:45.4123590Z [41m[1m FAIL [22m[49m src/tests/ai/crisis-detection.test.ts[2m > [22mcrisisDetectionService[2m > [22mdetectBatch[2m > [22mshould analyze multiple texts in parallel
2025-06-04T22:41:45.4124894Z [31m[1mError[22m: expected low to be none[39m
2025-06-04T22:41:45.4125775Z [36m [2m❯[22m src/tests/ai/crisis-detection.test.ts:[2m551:35[22m[39m
2025-06-04T22:41:45.4126969Z     [90m549| [39m      [34mexpect[39m(results[[34m0[39m][33m.[39mseverity)[33m.[39m[34mtoBe[39m([32m'high'[39m)
2025-06-04T22:41:45.4128319Z     [90m550| [39m      [34mexpect[39m(results[[34m1[39m][33m.[39misCrisis)[33m.[39m[34mtoBe[39m([35mfalse[39m)
2025-06-04T22:41:45.4129819Z     [90m551| [39m      [34mexpect[39m(results[[34m1[39m][33m.[39mseverity)[33m.[39m[34mtoBe[39m([32m'none'[39m)
2025-06-04T22:41:45.4130786Z     [90m   | [39m                                  [31m^[39m
2025-06-04T22:41:45.4131296Z     [90m552| [39m
2025-06-04T22:41:45.4131918Z     [90m553| [39m      [90m// Verify the AI service was called twice[39m
2025-06-04T22:41:45.4132322Z 
2025-06-04T22:41:45.4132717Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/523]⎯[22m[39m
2025-06-04T22:41:45.4133026Z 
2025-06-04T22:41:45.4134381Z [41m[1m FAIL [22m[49m src/tests/ai/crisis-detection.test.ts[2m > [22mcrisisDetectionService[2m > [22mconstructor[2m > [22mshould use default model if not provided
2025-06-04T22:41:45.4135941Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'model')[39m
2025-06-04T22:41:45.4137012Z [36m [2m❯[22m src/tests/ai/crisis-detection.test.ts:[2m608:70[22m[39m
2025-06-04T22:41:45.4137925Z     [90m606| [39m      [90m// Use a non-public method to test the model[39m
2025-06-04T22:41:45.4138851Z     [90m607| [39m      [34mexpect[39m(
2025-06-04T22:41:45.4139899Z     [90m608| [39m        (service as unknown as { config: { model: string } }).config.m…
2025-06-04T22:41:45.4140792Z     [90m   | [39m                                                                     [31m^[39m
2025-06-04T22:41:45.4141546Z     [90m609| [39m      )[33m.[39m[34mtoBe[39m([32m'gpt-4o'[39m)
2025-06-04T22:41:45.4142082Z     [90m610| [39m    })
2025-06-04T22:41:45.4142308Z 
2025-06-04T22:41:45.4142674Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/523]⎯[22m[39m
2025-06-04T22:41:45.4142974Z 
2025-06-04T22:41:45.4144386Z [41m[1m FAIL [22m[49m src/tests/ai/crisis-detection.test.ts[2m > [22mcrisisDetectionService[2m > [22mconstructor[2m > [22mshould use custom system prompt if provided
2025-06-04T22:41:45.4146128Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'defaultPrompt')[39m
2025-06-04T22:41:45.4147313Z [36m [2m❯[22m src/tests/ai/crisis-detection.test.ts:[2m621:12[22m[39m
2025-06-04T22:41:45.4148075Z     [90m619| [39m      [34mexpect[39m(
2025-06-04T22:41:45.4148904Z     [90m620| [39m        (service as unknown as { config: { defaultPrompt: string } }).…
2025-06-04T22:41:45.4149964Z     [90m621| [39m          [33m.[39mdefaultPrompt[33m,[39m
2025-06-04T22:41:45.4150573Z     [90m   | [39m           [31m^[39m
2025-06-04T22:41:45.4151226Z     [90m622| [39m      )[33m.[39m[34mtoBe[39m(customPrompt)
2025-06-04T22:41:45.4152004Z     [90m623| [39m    })
2025-06-04T22:41:45.4152238Z 
2025-06-04T22:41:45.4152637Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/523]⎯[22m[39m
2025-06-04T22:41:45.4152950Z 
2025-06-04T22:41:45.4154584Z [41m[1m FAIL [22m[49m src/tests/ai/intervention-analysis.test.ts[2m > [22minterventionAnalysisService[2m > [22manalyzeIntervention[2m > [22mshould analyze intervention effectiveness correctly
2025-06-04T22:41:45.4156262Z [31m[1mError[22m: Failed to parse intervention analysis result[39m
2025-06-04T22:41:45.4157846Z [36m [2m❯[22m InterventionAnalysisService.analyzeIntervention src/lib/ai/services/intervention-analysis.ts:[2m167:13[22m[39m
2025-06-04T22:41:45.4158887Z     [90m165| [39m      }
2025-06-04T22:41:45.4159547Z     [90m166| [39m    } [35mcatch[39m {
2025-06-04T22:41:45.4160596Z     [90m167| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m'Failed to parse intervention analysis result'[39m)
2025-06-04T22:41:45.4161468Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.4161939Z     [90m168| [39m    }
2025-06-04T22:41:45.4162326Z     [90m169| [39m  }
2025-06-04T22:41:45.4163142Z [90m [2m❯[22m src/tests/ai/intervention-analysis.test.ts:[2m132:22[22m[39m
2025-06-04T22:41:45.4163640Z 
2025-06-04T22:41:45.4164016Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/523]⎯[22m[39m
2025-06-04T22:41:45.4164317Z 
2025-06-04T22:41:45.4165833Z [41m[1m FAIL [22m[49m src/tests/ai/intervention-analysis.test.ts[2m > [22minterventionAnalysisService[2m > [22manalyzeIntervention[2m > [22mshould handle custom analysis prompt
2025-06-04T22:41:45.4167405Z [31m[1mError[22m: Failed to parse intervention analysis result[39m
2025-06-04T22:41:45.4169031Z [36m [2m❯[22m InterventionAnalysisService.analyzeIntervention src/lib/ai/services/intervention-analysis.ts:[2m167:13[22m[39m
2025-06-04T22:41:45.4170352Z     [90m165| [39m      }
2025-06-04T22:41:45.4170880Z     [90m166| [39m    } [35mcatch[39m {
2025-06-04T22:41:45.4172028Z     [90m167| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m'Failed to parse intervention analysis result'[39m)
2025-06-04T22:41:45.4172968Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.4173431Z     [90m168| [39m    }
2025-06-04T22:41:45.4173821Z     [90m169| [39m  }
2025-06-04T22:41:45.4174646Z [90m [2m❯[22m src/tests/ai/intervention-analysis.test.ts:[2m211:7[22m[39m
2025-06-04T22:41:45.4175131Z 
2025-06-04T22:41:45.4175532Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[47/523]⎯[22m[39m
2025-06-04T22:41:45.4176107Z 
2025-06-04T22:41:45.4177640Z [41m[1m FAIL [22m[49m src/tests/ai/intervention-analysis.test.ts[2m > [22minterventionAnalysisService[2m > [22manalyzeBatch[2m > [22mshould analyze multiple interventions in parallel
2025-06-04T22:41:45.4179553Z [31m[1mError[22m: Failed to parse intervention analysis result[39m
2025-06-04T22:41:45.4181195Z [36m [2m❯[22m InterventionAnalysisService.analyzeIntervention src/lib/ai/services/intervention-analysis.ts:[2m167:13[22m[39m
2025-06-04T22:41:45.4182342Z     [90m165| [39m      }
2025-06-04T22:41:45.4182902Z     [90m166| [39m    } [35mcatch[39m {
2025-06-04T22:41:45.4183956Z     [90m167| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m'Failed to parse intervention analysis result'[39m)
2025-06-04T22:41:45.4184864Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.4185342Z     [90m168| [39m    }
2025-06-04T22:41:45.4185739Z     [90m169| [39m  }
2025-06-04T22:41:45.4185945Z 
2025-06-04T22:41:45.4186339Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[48/523]⎯[22m[39m
2025-06-04T22:41:45.4186689Z 
2025-06-04T22:41:45.4188211Z [41m[1m FAIL [22m[49m src/tests/ai/intervention-analysis.test.ts[2m > [22minterventionAnalysisService[2m > [22mconstructor[2m > [22mshould use default model if not provided
2025-06-04T22:41:45.4190166Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'model')[39m
2025-06-04T22:41:45.4191346Z [36m [2m❯[22m src/tests/ai/intervention-analysis.test.ts:[2m420:59[22m[39m
2025-06-04T22:41:45.4192611Z     [90m418| [39m        config[33m:[39m { model[33m:[39m string }
2025-06-04T22:41:45.4193229Z     [90m419| [39m      }
2025-06-04T22:41:45.4194018Z     [90m420| [39m      expect((service as unknown as ServiceConfig).config.model).toBe(…
2025-06-04T22:41:45.4194914Z     [90m   | [39m                                                          [31m^[39m
2025-06-04T22:41:45.4195443Z     [90m421| [39m    })
2025-06-04T22:41:45.4195824Z     [90m422| [39m
2025-06-04T22:41:45.4196037Z 
2025-06-04T22:41:45.4196424Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[49/523]⎯[22m[39m
2025-06-04T22:41:45.4196740Z 
2025-06-04T22:41:45.4198223Z [41m[1m FAIL [22m[49m src/tests/ai/intervention-analysis.test.ts[2m > [22minterventionAnalysisService[2m > [22mconstructor[2m > [22mshould use custom system prompt if provided
2025-06-04T22:41:45.4200171Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'systemPrompt')[39m
2025-06-04T22:41:45.4201347Z [36m [2m❯[22m src/tests/ai/intervention-analysis.test.ts:[2m434:64[22m[39m
2025-06-04T22:41:45.4202018Z     [90m432| [39m      }
2025-06-04T22:41:45.4202504Z     [90m433| [39m      [34mexpect[39m(
2025-06-04T22:41:45.4203344Z     [90m434| [39m        (service as unknown as ServiceConfigWithPrompt).config.systemP…
2025-06-04T22:41:45.4204244Z     [90m   | [39m                                                               [31m^[39m
2025-06-04T22:41:45.4204974Z     [90m435| [39m      )[33m.[39m[34mtoBe[39m(customPrompt)
2025-06-04T22:41:45.4205715Z     [90m436| [39m    })
2025-06-04T22:41:45.4205939Z 
2025-06-04T22:41:45.4206317Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[50/523]⎯[22m[39m
2025-06-04T22:41:45.4206626Z 
2025-06-04T22:41:45.4208011Z [41m[1m FAIL [22m[49m src/tests/ai/response-generation.test.ts[2m > [22mresponseGenerationService[2m > [22mgenerateResponse[2m > [22mshould generate a response correctly
2025-06-04T22:41:45.4209770Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.4210888Z [36m [2m❯[22m src/tests/ai/response-generation.test.ts:[2m53:22[22m[39m
2025-06-04T22:41:45.4211605Z     [90m 51| [39m
2025-06-04T22:41:45.4212138Z     [90m 52| [39m      [90m// Verify the result[39m
2025-06-04T22:41:45.4212862Z     [90m 53| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.4213532Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.4214424Z     [90m 54| [39m        content[33m:[39m [32m'This is a generated response.'[39m[33m,[39m
2025-06-04T22:41:45.4215374Z     [90m 55| [39m        model[33m:[39m [32m'test-model'[39m[33m,[39m
2025-06-04T22:41:45.4215766Z 
2025-06-04T22:41:45.4216173Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[51/523]⎯[22m[39m
2025-06-04T22:41:45.4216504Z 
2025-06-04T22:41:45.4218106Z [41m[1m FAIL [22m[49m src/tests/ai/response-generation.test.ts[2m > [22mresponseGenerationService[2m > [22mgenerateStreamingResponse[2m > [22mshould handle streaming responses correctly
2025-06-04T22:41:45.4219905Z [31m[1mTypeError[22m: this.aiService.createChatCompletionStream is not a function[39m
2025-06-04T22:41:45.4220876Z [36m [2m❯[22m ResponseGenerationService.generateStreamingResponse src/lib/ai/services/response-generation.ts:[2m381:49[22m[39m
2025-06-04T22:41:45.4221459Z     [90m379| [39m    }
2025-06-04T22:41:45.4221677Z     [90m380| [39m
2025-06-04T22:41:45.4222126Z     [90m381| [39m    const responseStream = await this.aiService.createChatCompletionSt…
2025-06-04T22:41:45.4222648Z     [90m   | [39m                                                [31m^[39m
2025-06-04T22:41:45.4223333Z     [90m382| [39m      messagesWithSystem[33m,[39m
2025-06-04T22:41:45.4223722Z     [90m383| [39m      {
2025-06-04T22:41:45.4224180Z [90m [2m❯[22m src/tests/ai/response-generation.test.ts:[2m298:29[22m[39m
2025-06-04T22:41:45.4224447Z 
2025-06-04T22:41:45.4224658Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[52/523]⎯[22m[39m
2025-06-04T22:41:45.4224843Z 
2025-06-04T22:41:45.4225793Z [41m[1m FAIL [22m[49m src/tests/ai/response-generation.test.ts[2m > [22mresponseGenerationService[2m > [22mgenerateStreamingResponse[2m > [22mshould handle streaming errors
2025-06-04T22:41:45.4227038Z [31m[1mAssertionError[22m: expected [Function] to throw error including 'Streaming error' but got 'this.aiService.createChatCompletionSt…'[39m
2025-06-04T22:41:45.4227521Z 
2025-06-04T22:41:45.4227700Z Expected: [32m"Streaming error"[39m
2025-06-04T22:41:45.4228220Z Received: [31m"this.aiService.createChatCompletionStream is not a function"[39m
2025-06-04T22:41:45.4228539Z 
2025-06-04T22:41:45.4228750Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[53/523]⎯[22m[39m
2025-06-04T22:41:45.4228928Z 
2025-06-04T22:41:45.4230380Z [41m[1m FAIL [22m[49m src/tests/ai/sentiment-analysis.test.ts[2m > [22msentimentAnalysisService[2m > [22manalyzeSentiment[2m > [22mshould analyze sentiment correctly for positive text
2025-06-04T22:41:45.4231938Z [31m[1mError[22m: Failed to parse sentiment analysis result[39m
2025-06-04T22:41:45.4233352Z [36m [2m❯[22m SentimentAnalysisService.analyzeSentiment src/lib/ai/services/sentiment-analysis.ts:[2m110:13[22m[39m
2025-06-04T22:41:45.4234713Z     [90m108| [39m      } as SentimentAnalysisResult & { model: string; processingTime: …
2025-06-04T22:41:45.4235452Z     [90m109| [39m    } [35mcatch[39m {
2025-06-04T22:41:45.4236438Z     [90m110| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m'Failed to parse sentiment analysis result'[39m)
2025-06-04T22:41:45.4237507Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.4237939Z     [90m111| [39m    }
2025-06-04T22:41:45.4238303Z     [90m112| [39m  }
2025-06-04T22:41:45.4239033Z [90m [2m❯[22m src/tests/ai/sentiment-analysis.test.ts:[2m69:22[22m[39m
2025-06-04T22:41:45.4239671Z 
2025-06-04T22:41:45.4240040Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[54/523]⎯[22m[39m
2025-06-04T22:41:45.4240342Z 
2025-06-04T22:41:45.4241841Z [41m[1m FAIL [22m[49m src/tests/ai/sentiment-analysis.test.ts[2m > [22msentimentAnalysisService[2m > [22manalyzeSentiment[2m > [22mshould analyze sentiment correctly for negative text
2025-06-04T22:41:45.4243563Z [31m[1mError[22m: Failed to parse sentiment analysis result[39m
2025-06-04T22:41:45.4245110Z [36m [2m❯[22m SentimentAnalysisService.analyzeSentiment src/lib/ai/services/sentiment-analysis.ts:[2m110:13[22m[39m
2025-06-04T22:41:45.4246555Z     [90m108| [39m      } as SentimentAnalysisResult & { model: string; processingTime: …
2025-06-04T22:41:45.4247401Z     [90m109| [39m    } [35mcatch[39m {
2025-06-04T22:41:45.4248313Z     [90m110| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m'Failed to parse sentiment analysis result'[39m)
2025-06-04T22:41:45.4248830Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.4249290Z     [90m111| [39m    }
2025-06-04T22:41:45.4249551Z     [90m112| [39m  }
2025-06-04T22:41:45.4250000Z [90m [2m❯[22m src/tests/ai/sentiment-analysis.test.ts:[2m115:22[22m[39m
2025-06-04T22:41:45.4250287Z 
2025-06-04T22:41:45.4250510Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[55/523]⎯[22m[39m
2025-06-04T22:41:45.4250691Z 
2025-06-04T22:41:45.4251794Z [41m[1m FAIL [22m[49m src/tests/ai/sentiment-analysis.test.ts[2m > [22msentimentAnalysisService[2m > [22manalyzeSentiment[2m > [22mshould analyze sentiment correctly for neutral text
2025-06-04T22:41:45.4252685Z [31m[1mError[22m: Failed to parse sentiment analysis result[39m
2025-06-04T22:41:45.4254047Z [36m [2m❯[22m SentimentAnalysisService.analyzeSentiment src/lib/ai/services/sentiment-analysis.ts:[2m110:13[22m[39m
2025-06-04T22:41:45.4255424Z     [90m108| [39m      } as SentimentAnalysisResult & { model: string; processingTime: …
2025-06-04T22:41:45.4256199Z     [90m109| [39m    } [35mcatch[39m {
2025-06-04T22:41:45.4257228Z     [90m110| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m'Failed to parse sentiment analysis result'[39m)
2025-06-04T22:41:45.4258101Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.4258820Z     [90m111| [39m    }
2025-06-04T22:41:45.4259531Z     [90m112| [39m  }
2025-06-04T22:41:45.4260372Z [90m [2m❯[22m src/tests/ai/sentiment-analysis.test.ts:[2m147:22[22m[39m
2025-06-04T22:41:45.4260856Z 
2025-06-04T22:41:45.4261251Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[56/523]⎯[22m[39m
2025-06-04T22:41:45.4261562Z 
2025-06-04T22:41:45.4262991Z [41m[1m FAIL [22m[49m src/tests/ai/sentiment-analysis.test.ts[2m > [22msentimentAnalysisService[2m > [22manalyzeBatch[2m > [22mshould analyze multiple texts in parallel
2025-06-04T22:41:45.4264521Z [31m[1mError[22m: Failed to parse sentiment analysis result[39m
2025-06-04T22:41:45.4266007Z [36m [2m❯[22m SentimentAnalysisService.analyzeSentiment src/lib/ai/services/sentiment-analysis.ts:[2m110:13[22m[39m
2025-06-04T22:41:45.4267349Z     [90m108| [39m      } as SentimentAnalysisResult & { model: string; processingTime: …
2025-06-04T22:41:45.4268120Z     [90m109| [39m    } [35mcatch[39m {
2025-06-04T22:41:45.4269294Z     [90m110| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m'Failed to parse sentiment analysis result'[39m)
2025-06-04T22:41:45.4270169Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.4270564Z     [90m111| [39m    }
2025-06-04T22:41:45.4270795Z     [90m112| [39m  }
2025-06-04T22:41:45.4270948Z 
2025-06-04T22:41:45.4271330Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[57/523]⎯[22m[39m
2025-06-04T22:41:45.4271629Z 
2025-06-04T22:41:45.4273042Z [41m[1m FAIL [22m[49m src/tests/ai/sentiment-analysis.test.ts[2m > [22msentimentAnalysisService[2m > [22mconstructor[2m > [22mshould use default model if not provided
2025-06-04T22:41:45.4274902Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'model')[39m
2025-06-04T22:41:45.4276032Z [36m [2m❯[22m src/tests/ai/sentiment-analysis.test.ts:[2m296:70[22m[39m
2025-06-04T22:41:45.4276953Z     [90m294| [39m      [90m// Use a non-public method to test the model[39m
2025-06-04T22:41:45.4277644Z     [90m295| [39m      [34mexpect[39m(
2025-06-04T22:41:45.4278458Z     [90m296| [39m        (service as unknown as { config: { model: string } }).config.m…
2025-06-04T22:41:45.4279556Z     [90m   | [39m                                                                     [31m^[39m
2025-06-04T22:41:45.4280333Z     [90m297| [39m      )[33m.[39m[34mtoBe[39m([32m'gpt-4o'[39m)
2025-06-04T22:41:45.4280890Z     [90m298| [39m    })
2025-06-04T22:41:45.4281110Z 
2025-06-04T22:41:45.4281491Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[58/523]⎯[22m[39m
2025-06-04T22:41:45.4281823Z 
2025-06-04T22:41:45.4283227Z [41m[1m FAIL [22m[49m src/tests/ai/sentiment-analysis.test.ts[2m > [22msentimentAnalysisService[2m > [22mconstructor[2m > [22mshould use custom system prompt if provided
2025-06-04T22:41:45.4284912Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'defaultPrompt')[39m
2025-06-04T22:41:45.4286038Z [36m [2m❯[22m src/tests/ai/sentiment-analysis.test.ts:[2m324:12[22m[39m
2025-06-04T22:41:45.4286954Z     [90m322| [39m      [34mexpect[39m(
2025-06-04T22:41:45.4287793Z     [90m323| [39m        (service as unknown as { config: { defaultPrompt: string } }).…
2025-06-04T22:41:45.4288641Z     [90m324| [39m          [33m.[39mdefaultPrompt[33m,[39m
2025-06-04T22:41:45.4289409Z     [90m   | [39m           [31m^[39m
2025-06-04T22:41:45.4290074Z     [90m325| [39m      )[33m.[39m[34mtoBe[39m(customPrompt)
2025-06-04T22:41:45.4290617Z     [90m326| [39m    })
2025-06-04T22:41:45.4290855Z 
2025-06-04T22:41:45.4291234Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[59/523]⎯[22m[39m
2025-06-04T22:41:45.4291549Z 
2025-06-04T22:41:45.4292761Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mrenders loading state initially
2025-06-04T22:41:45.4294883Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mrenders dashboard data after loading
2025-06-04T22:41:45.4297012Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles chart interactions correctly
2025-06-04T22:41:45.4299052Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mrenders filtering controls
2025-06-04T22:41:45.4301338Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles time range filter changes
2025-06-04T22:41:45.4303639Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mshows custom date inputs when custom time range is selected
2025-06-04T22:41:45.4305838Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles bias score filter changes
2025-06-04T22:41:45.4307928Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles alert level filter changes
2025-06-04T22:41:45.4310285Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mclears all filters when clear button is clicked
2025-06-04T22:41:45.4312455Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mdisplays filter summary correctly
2025-06-04T22:41:45.4314618Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mupdates chart data when filters are applied
2025-06-04T22:41:45.4317111Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mshows no data message when filters exclude all data
2025-06-04T22:41:45.4319418Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles custom date range input
2025-06-04T22:41:45.4321538Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mrenders notification settings panel
2025-06-04T22:41:45.4323675Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles notification settings changes
2025-06-04T22:41:45.4325778Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles test notification sending
2025-06-04T22:41:45.4327873Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mrenders alert management controls
2025-06-04T22:41:45.4330110Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles individual alert actions
2025-06-04T22:41:45.4332333Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles bulk alert actions
2025-06-04T22:41:45.4334433Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles alert selection and deselection
2025-06-04T22:41:45.4336465Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles alert notes addition
2025-06-04T22:41:45.4338383Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles alert escalation with notes
2025-06-04T22:41:45.4339786Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mdisplays action history for alerts
2025-06-04T22:41:45.4340936Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mcloses notification settings panel
2025-06-04T22:41:45.4342285Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mData Export Functionality[2m > [22mopens export dialog when export button is clicked
2025-06-04T22:41:45.4344194Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mData Export Functionality[2m > [22mallows format selection in export dialog
2025-06-04T22:41:45.4346078Z [31m[1mReferenceError[22m: Cannot access 'announceToScreenReader' before initialization[39m
2025-06-04T22:41:45.4347521Z [36m [2m❯[22m BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:[2m693:84[22m[39m
2025-06-04T22:41:45.4348355Z     [90m691| [39m      }
2025-06-04T22:41:45.4348767Z     [90m692| [39m    };
2025-06-04T22:41:45.4349771Z     [90m693| [39m  }, [enableRealTimeUpdates, selectedTimeRange, biasScoreFilter, alert…
2025-06-04T22:41:45.4350804Z     [90m   | [39m                                                                                   [31m^[39m
2025-06-04T22:41:45.4351343Z     [90m694| [39m
2025-06-04T22:41:45.4351974Z     [90m695| [39m  // Update WebSocket subscription when filters change
2025-06-04T22:41:45.4353869Z [90m [2m❯[22m Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m23863:20[22m[39m
2025-06-04T22:41:45.4356142Z [90m [2m❯[22m renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m5529:22[22m[39m
2025-06-04T22:41:45.4358684Z [90m [2m❯[22m updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m8897:19[22m[39m
2025-06-04T22:41:45.4361015Z [90m [2m❯[22m beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m10522:18[22m[39m
2025-06-04T22:41:45.4363149Z [90m [2m❯[22m runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m1522:13[22m[39m
2025-06-04T22:41:45.4365379Z [90m [2m❯[22m performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m15140:22[22m[39m
2025-06-04T22:41:45.4367537Z [90m [2m❯[22m workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m14956:41[22m[39m
2025-06-04T22:41:45.4369830Z [90m [2m❯[22m renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m14936:11[22m[39m
2025-06-04T22:41:45.4372000Z [90m [2m❯[22m performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m14462:44[22m[39m
2025-06-04T22:41:45.4372916Z 
2025-06-04T22:41:45.4373497Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[60/523]⎯[22m[39m
2025-06-04T22:41:45.4373829Z 
2025-06-04T22:41:45.4375018Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles WebSocket connection
2025-06-04T22:41:45.4376486Z [31m[1mTypeError[22m: mockWebSocket.mockImplementation is not a function[39m
2025-06-04T22:41:45.4377685Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m109:19[22m[39m
2025-06-04T22:41:45.4382902Z     [90m107| [39m      addEventListener[33m:[39m vi[33m.[39m[34mfn[39m()[33m,[39m
2025-06-04T22:41:45.4383658Z     [90m108| [39m    }[33m;[39m
2025-06-04T22:41:45.4384588Z     [90m109| [39m    mockWebSocket[33m.[39m[34mmockImplementation[39m(() [33m=>[39m mockWs)[33m;[39m
2025-06-04T22:41:45.4385425Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.4385879Z     [90m110| [39m
2025-06-04T22:41:45.4387215Z     [90m111| [39m    [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4388103Z 
2025-06-04T22:41:45.4388523Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[61/523]⎯[22m[39m
2025-06-04T22:41:45.4388835Z 
2025-06-04T22:41:45.4390353Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles WebSocket errors gracefully
2025-06-04T22:41:45.4391828Z [31m[1mTypeError[22m: mockWebSocket.mockImplementation is not a function[39m
2025-06-04T22:41:45.4393104Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m132:19[22m[39m
2025-06-04T22:41:45.4394225Z     [90m130| [39m      addEventListener[33m:[39m vi[33m.[39m[34mfn[39m()[33m,[39m
2025-06-04T22:41:45.4394957Z     [90m131| [39m    }[33m;[39m
2025-06-04T22:41:45.4395901Z     [90m132| [39m    mockWebSocket[33m.[39m[34mmockImplementation[39m(() [33m=>[39m mockWs)[33m;[39m
2025-06-04T22:41:45.4396764Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.4397223Z     [90m133| [39m
2025-06-04T22:41:45.4398528Z     [90m134| [39m    [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4399588Z 
2025-06-04T22:41:45.4399998Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[62/523]⎯[22m[39m
2025-06-04T22:41:45.4400309Z 
2025-06-04T22:41:45.4401622Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mupdates data when receiving WebSocket messages
2025-06-04T22:41:45.4403481Z [31m[1mTypeError[22m: mockWebSocket.mockImplementation is not a function[39m
2025-06-04T22:41:45.4404750Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m155:19[22m[39m
2025-06-04T22:41:45.4405872Z     [90m153| [39m      addEventListener[33m:[39m vi[33m.[39m[34mfn[39m()[33m,[39m
2025-06-04T22:41:45.4406605Z     [90m154| [39m    }[33m;[39m
2025-06-04T22:41:45.4407570Z     [90m155| [39m    mockWebSocket[33m.[39m[34mmockImplementation[39m(() [33m=>[39m mockWs)[33m;[39m
2025-06-04T22:41:45.4408475Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.4408957Z     [90m156| [39m
2025-06-04T22:41:45.4410480Z     [90m157| [39m    [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4411383Z 
2025-06-04T22:41:45.4411777Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[63/523]⎯[22m[39m
2025-06-04T22:41:45.4412088Z 
2025-06-04T22:41:45.4413291Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mhandles data updates with animations
2025-06-04T22:41:45.4414841Z [31m[1mTypeError[22m: mockWebSocket.mockImplementation is not a function[39m
2025-06-04T22:41:45.4416353Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m216:19[22m[39m
2025-06-04T22:41:45.4417545Z     [90m214| [39m      addEventListener[33m:[39m vi[33m.[39m[34mfn[39m()[33m,[39m
2025-06-04T22:41:45.4418276Z     [90m215| [39m    }[33m;[39m
2025-06-04T22:41:45.4419404Z     [90m216| [39m    mockWebSocket[33m.[39m[34mmockImplementation[39m(() [33m=>[39m mockWs)[33m;[39m
2025-06-04T22:41:45.4420316Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.4420784Z     [90m217| [39m
2025-06-04T22:41:45.4422100Z     [90m218| [39m    [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4423014Z 
2025-06-04T22:41:45.4423409Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[64/523]⎯[22m[39m
2025-06-04T22:41:45.4423736Z 
2025-06-04T22:41:45.4425055Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mcleans up WebSocket connection on unmount
2025-06-04T22:41:45.4426630Z [31m[1mTypeError[22m: mockWebSocket.mockImplementation is not a function[39m
2025-06-04T22:41:45.4427915Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m253:19[22m[39m
2025-06-04T22:41:45.4429066Z     [90m251| [39m      addEventListener[33m:[39m vi[33m.[39m[34mfn[39m()[33m,[39m
2025-06-04T22:41:45.4429978Z     [90m252| [39m    }[33m;[39m
2025-06-04T22:41:45.4430940Z     [90m253| [39m    mockWebSocket[33m.[39m[34mmockImplementation[39m(() [33m=>[39m mockWs)[33m;[39m
2025-06-04T22:41:45.4431805Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.4432265Z     [90m254| [39m
2025-06-04T22:41:45.4432995Z     [90m255| [39m    const { unmount } = render(<BiasDashboard enableRealTimeUpdates={t…
2025-06-04T22:41:45.4433476Z 
2025-06-04T22:41:45.4433862Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[65/523]⎯[22m[39m
2025-06-04T22:41:45.4434175Z 
2025-06-04T22:41:45.4435721Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mData Export Functionality[2m > [22mhandles export data functionality
2025-06-04T22:41:45.4437303Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4439428Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4442829Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4446175Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4448265Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m749:7[22m[39m
2025-06-04T22:41:45.4449748Z     [90m747| [39m      document[33m.[39mbody[33m.[39mremoveChild [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
2025-06-04T22:41:45.4450561Z     [90m748| [39m
2025-06-04T22:41:45.4451417Z     [90m749| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4452237Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4452683Z     [90m750| [39m
2025-06-04T22:41:45.4453301Z     [90m751| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4453698Z 
2025-06-04T22:41:45.4454105Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[66/523]⎯[22m[39m
2025-06-04T22:41:45.4454424Z 
2025-06-04T22:41:45.4456268Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mData Export Functionality[2m > [22mcloses export dialog when cancel is clicked
2025-06-04T22:41:45.4457945Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4460040Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4463269Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4466714Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4468816Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m770:7[22m[39m
2025-06-04T22:41:45.4469762Z     [90m768| [39m
2025-06-04T22:41:45.4470744Z     [90m769| [39m    [34mit[39m([32m'closes export dialog when cancel is clicked'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4471999Z     [90m770| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4472769Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4473199Z     [90m771| [39m
2025-06-04T22:41:45.4473807Z     [90m772| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4474198Z 
2025-06-04T22:41:45.4474583Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[67/523]⎯[22m[39m
2025-06-04T22:41:45.4474900Z 
2025-06-04T22:41:45.4476431Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mData Export Functionality[2m > [22mvalidates date range in export dialog
2025-06-04T22:41:45.4477977Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4480056Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4483117Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4486733Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4488769Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m788:7[22m[39m
2025-06-04T22:41:45.4489730Z     [90m786| [39m
2025-06-04T22:41:45.4490699Z     [90m787| [39m    [34mit[39m([32m'validates date range in export dialog'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4491955Z     [90m788| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4492710Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4493136Z     [90m789| [39m
2025-06-04T22:41:45.4493741Z     [90m790| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4494150Z 
2025-06-04T22:41:45.4494531Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[68/523]⎯[22m[39m
2025-06-04T22:41:45.4494843Z 
2025-06-04T22:41:45.4496272Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mResponsive Design[2m > [22madapts layout for mobile screens
2025-06-04T22:41:45.4497740Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4500011Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4503102Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4506385Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4508462Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m842:7[22m[39m
2025-06-04T22:41:45.4509454Z     [90m840| [39m      })[33m;[39m
2025-06-04T22:41:45.4509888Z     [90m841| [39m
2025-06-04T22:41:45.4510722Z     [90m842| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4511482Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4511906Z     [90m843| [39m
2025-06-04T22:41:45.4512514Z     [90m844| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4512906Z 
2025-06-04T22:41:45.4513291Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[69/523]⎯[22m[39m
2025-06-04T22:41:45.4513600Z 
2025-06-04T22:41:45.4515040Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mResponsive Design[2m > [22madapts layout for tablet screens
2025-06-04T22:41:45.4516753Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4518691Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4521950Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4525248Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4527307Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m859:7[22m[39m
2025-06-04T22:41:45.4528175Z     [90m857| [39m      })[33m;[39m
2025-06-04T22:41:45.4528611Z     [90m858| [39m
2025-06-04T22:41:45.4529571Z     [90m859| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4530340Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4530766Z     [90m860| [39m
2025-06-04T22:41:45.4531384Z     [90m861| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4531776Z 
2025-06-04T22:41:45.4532162Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[70/523]⎯[22m[39m
2025-06-04T22:41:45.4532486Z 
2025-06-04T22:41:45.4533895Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mResponsive Design[2m > [22mhandles window resize events
2025-06-04T22:41:45.4535370Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4537312Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4540516Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4544023Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4546073Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m870:7[22m[39m
2025-06-04T22:41:45.4546828Z     [90m868| [39m
2025-06-04T22:41:45.4547739Z     [90m869| [39m    [34mit[39m([32m'handles window resize events'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4548965Z     [90m870| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4549951Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4550395Z     [90m871| [39m
2025-06-04T22:41:45.4551004Z     [90m872| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4551396Z 
2025-06-04T22:41:45.4551792Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[71/523]⎯[22m[39m
2025-06-04T22:41:45.4552120Z 
2025-06-04T22:41:45.4553702Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mAccessibility Features[2m > [22mprovides skip links for keyboard navigation
2025-06-04T22:41:45.4555292Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4557213Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4559877Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4561731Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4563521Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m908:7[22m[39m
2025-06-04T22:41:45.4563949Z     [90m906| [39m
2025-06-04T22:41:45.4564822Z     [90m907| [39m    [34mit[39m([32m'provides skip links for keyboard navigation'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4566057Z     [90m908| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4566627Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4566877Z     [90m909| [39m
2025-06-04T22:41:45.4567216Z     [90m910| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4567441Z 
2025-06-04T22:41:45.4567655Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[72/523]⎯[22m[39m
2025-06-04T22:41:45.4567835Z 
2025-06-04T22:41:45.4568659Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mAccessibility Features[2m > [22mhandles keyboard navigation shortcuts
2025-06-04T22:41:45.4569652Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4570706Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4572915Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4575195Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4577040Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m923:7[22m[39m
2025-06-04T22:41:45.4577473Z     [90m921| [39m
2025-06-04T22:41:45.4578028Z     [90m922| [39m    [34mit[39m([32m'handles keyboard navigation shortcuts'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4578736Z     [90m923| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4578868Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4578976Z     [90m924| [39m
2025-06-04T22:41:45.4579344Z     [90m925| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4579353Z 
2025-06-04T22:41:45.4579569Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[73/523]⎯[22m[39m
2025-06-04T22:41:45.4579576Z 
2025-06-04T22:41:45.4580437Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mAccessibility Features[2m > [22mprovides proper ARIA labels and descriptions
2025-06-04T22:41:45.4580718Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4581556Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4583269Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4584491Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4584903Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m943:7[22m[39m
2025-06-04T22:41:45.4585011Z     [90m941| [39m
2025-06-04T22:41:45.4585492Z     [90m942| [39m    [34mit[39m([32m'provides proper ARIA labels and descriptions'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4585839Z     [90m943| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4585973Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4586066Z     [90m944| [39m
2025-06-04T22:41:45.4586300Z     [90m945| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4586315Z 
2025-06-04T22:41:45.4586520Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[74/523]⎯[22m[39m
2025-06-04T22:41:45.4586527Z 
2025-06-04T22:41:45.4587303Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mAccessibility Features[2m > [22msupports high contrast mode
2025-06-04T22:41:45.4587569Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4588406Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4589604Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4590621Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4591023Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m975:7[22m[39m
2025-06-04T22:41:45.4591174Z     [90m973| [39m      })[33m;[39m
2025-06-04T22:41:45.4591269Z     [90m974| [39m
2025-06-04T22:41:45.4591735Z     [90m975| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4591878Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4591973Z     [90m976| [39m
2025-06-04T22:41:45.4592211Z     [90m977| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4592219Z 
2025-06-04T22:41:45.4592421Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[75/523]⎯[22m[39m
2025-06-04T22:41:45.4592428Z 
2025-06-04T22:41:45.4593232Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mAccessibility Features[2m > [22mrespects reduced motion preferences
2025-06-04T22:41:45.4593501Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4594332Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4596077Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4598125Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4599427Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1002:7[22m[39m
2025-06-04T22:41:45.4599733Z     [90m1000| [39m      })[33m;[39m
2025-06-04T22:41:45.4599917Z     [90m1001| [39m
2025-06-04T22:41:45.4600596Z     [90m1002| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4600879Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4601086Z     [90m1003| [39m
2025-06-04T22:41:45.4601566Z     [90m1004| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4601583Z 
2025-06-04T22:41:45.4601999Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[76/523]⎯[22m[39m
2025-06-04T22:41:45.4602036Z 
2025-06-04T22:41:45.4611339Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mAccessibility Features[2m > [22mprovides screen reader announcements
2025-06-04T22:41:45.4611966Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4613272Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4614827Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4615914Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4616338Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1013:7[22m[39m
2025-06-04T22:41:45.4616452Z     [90m1011| [39m
2025-06-04T22:41:45.4616907Z     [90m1012| [39m    [34mit[39m([32m'provides screen reader announcements'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4617314Z     [90m1013| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4617562Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4617735Z     [90m1014| [39m
2025-06-04T22:41:45.4618159Z     [90m1015| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4618186Z 
2025-06-04T22:41:45.4618552Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[77/523]⎯[22m[39m
2025-06-04T22:41:45.4618580Z 
2025-06-04T22:41:45.4619927Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mAccessibility Features[2m > [22mmanages focus properly in dialogs
2025-06-04T22:41:45.4620406Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4621476Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4622637Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4624412Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4625158Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1026:7[22m[39m
2025-06-04T22:41:45.4625337Z     [90m1024| [39m
2025-06-04T22:41:45.4625904Z     [90m1025| [39m    [34mit[39m([32m'manages focus properly in dialogs'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4626453Z     [90m1026| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4626590Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4626694Z     [90m1027| [39m
2025-06-04T22:41:45.4626934Z     [90m1028| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4626942Z 
2025-06-04T22:41:45.4627162Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[78/523]⎯[22m[39m
2025-06-04T22:41:45.4627170Z 
2025-06-04T22:41:45.4628410Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mshows connection status indicators
2025-06-04T22:41:45.4628841Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4630478Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4631741Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4633199Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4633902Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1067:7[22m[39m
2025-06-04T22:41:45.4634100Z     [90m1065| [39m
2025-06-04T22:41:45.4634875Z     [90m1066| [39m    [34mit[39m([32m'shows connection status indicators'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4636081Z     [90m1067| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4636376Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4636550Z     [90m1068| [39m
2025-06-04T22:41:45.4636995Z     [90m1069| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4637021Z 
2025-06-04T22:41:45.4637424Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[79/523]⎯[22m[39m
2025-06-04T22:41:45.4637436Z 
2025-06-04T22:41:45.4639353Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles connection errors with proper status
2025-06-04T22:41:45.4639902Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4641467Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4643492Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4645412Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4646174Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1090:7[22m[39m
2025-06-04T22:41:45.4646361Z     [90m1088| [39m
2025-06-04T22:41:45.4647212Z     [90m1089| [39m    [34mit[39m([32m'handles connection errors with proper status'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4648372Z     [90m1090| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4648954Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4649322Z     [90m1091| [39m
2025-06-04T22:41:45.4649767Z     [90m1092| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4649782Z 
2025-06-04T22:41:45.4650164Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[80/523]⎯[22m[39m
2025-06-04T22:41:45.4650184Z 
2025-06-04T22:41:45.4651617Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles reconnection attempts with exponential backoff
2025-06-04T22:41:45.4651908Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4653039Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4654881Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4656982Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4657764Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1115:7[22m[39m
2025-06-04T22:41:45.4658208Z     [90m1113| [39m      vi[33m.[39m[34museFakeTimers[39m()[33m;[39m
2025-06-04T22:41:45.4658384Z     [90m1114| [39m
2025-06-04T22:41:45.4659733Z     [90m1115| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4660011Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4660192Z     [90m1116| [39m
2025-06-04T22:41:45.4660622Z     [90m1117| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4660636Z 
2025-06-04T22:41:45.4661018Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[81/523]⎯[22m[39m
2025-06-04T22:41:45.4661032Z 
2025-06-04T22:41:45.4662712Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22msends subscription message on connection
2025-06-04T22:41:45.4663228Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4664784Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4666807Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4668758Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4669759Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1145:7[22m[39m
2025-06-04T22:41:45.4669960Z     [90m1143| [39m
2025-06-04T22:41:45.4670785Z     [90m1144| [39m    [34mit[39m([32m'sends subscription message on connection'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4671944Z     [90m1145| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4672432Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4672608Z     [90m1146| [39m
2025-06-04T22:41:45.4673053Z     [90m1147| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4673069Z 
2025-06-04T22:41:45.4673451Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[82/523]⎯[22m[39m
2025-06-04T22:41:45.4673463Z 
2025-06-04T22:41:45.4675100Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mupdates subscription when filters change
2025-06-04T22:41:45.4675882Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4676765Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4677850Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4679289Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4680248Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1167:7[22m[39m
2025-06-04T22:41:45.4680386Z     [90m1165| [39m
2025-06-04T22:41:45.4680880Z     [90m1166| [39m    [34mit[39m([32m'updates subscription when filters change'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4682033Z     [90m1167| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4682281Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4682457Z     [90m1168| [39m
2025-06-04T22:41:45.4682873Z     [90m1169| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4682887Z 
2025-06-04T22:41:45.4683244Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[83/523]⎯[22m[39m
2025-06-04T22:41:45.4683261Z 
2025-06-04T22:41:45.4684656Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles heartbeat messages
2025-06-04T22:41:45.4684956Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4685804Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4686890Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4688082Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4688504Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1196:7[22m[39m
2025-06-04T22:41:45.4688618Z     [90m1194| [39m
2025-06-04T22:41:45.4689017Z     [90m1195| [39m    [34mit[39m([32m'handles heartbeat messages'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4689914Z     [90m1196| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4690052Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4690382Z     [90m1197| [39m
2025-06-04T22:41:45.4690633Z     [90m1198| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4690641Z 
2025-06-04T22:41:45.4690862Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[84/523]⎯[22m[39m
2025-06-04T22:41:45.4690870Z 
2025-06-04T22:41:45.4691727Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles real-time bias alert updates
2025-06-04T22:41:45.4692019Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4693062Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4695062Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4696940Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4697597Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1230:7[22m[39m
2025-06-04T22:41:45.4697951Z     [90m1228| [39m
2025-06-04T22:41:45.4698721Z     [90m1229| [39m    [34mit[39m([32m'handles real-time bias alert updates'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4699892Z     [90m1230| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4700042Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4700141Z     [90m1231| [39m
2025-06-04T22:41:45.4700397Z     [90m1232| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4700405Z 
2025-06-04T22:41:45.4700720Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[85/523]⎯[22m[39m
2025-06-04T22:41:45.4700733Z 
2025-06-04T22:41:45.4702046Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles real-time session updates
2025-06-04T22:41:45.4702330Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4703300Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4704388Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4705419Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4705826Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1272:7[22m[39m
2025-06-04T22:41:45.4705931Z     [90m1270| [39m
2025-06-04T22:41:45.4706361Z     [90m1271| [39m    [34mit[39m([32m'handles real-time session updates'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4706992Z     [90m1272| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4707122Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4707217Z     [90m1273| [39m
2025-06-04T22:41:45.4707467Z     [90m1274| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4707625Z 
2025-06-04T22:41:45.4707835Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[86/523]⎯[22m[39m
2025-06-04T22:41:45.4707843Z 
2025-06-04T22:41:45.4708692Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles real-time metrics updates
2025-06-04T22:41:45.4708968Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4710049Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4711134Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4712167Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4712569Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1309:7[22m[39m
2025-06-04T22:41:45.4712675Z     [90m1307| [39m
2025-06-04T22:41:45.4713224Z     [90m1308| [39m    [34mit[39m([32m'handles real-time metrics updates'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4714218Z     [90m1309| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4714467Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4714647Z     [90m1310| [39m
2025-06-04T22:41:45.4715010Z     [90m1311| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4715039Z 
2025-06-04T22:41:45.4715403Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[87/523]⎯[22m[39m
2025-06-04T22:41:45.4715416Z 
2025-06-04T22:41:45.4716826Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles manual reconnection
2025-06-04T22:41:45.4717179Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4718031Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4719379Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4720516Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4720947Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1345:7[22m[39m
2025-06-04T22:41:45.4721051Z     [90m1343| [39m
2025-06-04T22:41:45.4721589Z     [90m1344| [39m    [34mit[39m([32m'handles manual reconnection'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4722222Z     [90m1345| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4722357Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4722454Z     [90m1346| [39m
2025-06-04T22:41:45.4722701Z     [90m1347| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4722860Z 
2025-06-04T22:41:45.4723082Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[88/523]⎯[22m[39m
2025-06-04T22:41:45.4723089Z 
2025-06-04T22:41:45.4723968Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mcleans up WebSocket connection properly
2025-06-04T22:41:45.4724238Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4725082Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4726153Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4727168Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4727591Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1374:27[22m[39m
2025-06-04T22:41:45.4727691Z     [90m1372| [39m
2025-06-04T22:41:45.4728259Z     [90m1373| [39m    [34mit[39m([32m'cleans up WebSocket connection properly'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4728583Z     [90m1374| [39m      const { unmount } = render(<BiasDashboard enableRealTimeUpdates=…
2025-06-04T22:41:45.4728765Z     [90m   | [39m                          [31m^[39m
2025-06-04T22:41:45.4728863Z     [90m1375| [39m
2025-06-04T22:41:45.4729302Z     [90m1376| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4729315Z 
2025-06-04T22:41:45.4729610Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[89/523]⎯[22m[39m
2025-06-04T22:41:45.4729630Z 
2025-06-04T22:41:45.4730525Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles unknown message types gracefully
2025-06-04T22:41:45.4730810Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4731665Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4732744Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4733767Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4734323Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1398:7[22m[39m
2025-06-04T22:41:45.4734431Z     [90m1396| [39m
2025-06-04T22:41:45.4734887Z     [90m1397| [39m    [34mit[39m([32m'handles unknown message types gracefully'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4735533Z     [90m1398| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4735666Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4735766Z     [90m1399| [39m
2025-06-04T22:41:45.4736000Z     [90m1400| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4736008Z 
2025-06-04T22:41:45.4736218Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[90/523]⎯[22m[39m
2025-06-04T22:41:45.4736225Z 
2025-06-04T22:41:45.4737087Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mhandles malformed WebSocket messages
2025-06-04T22:41:45.4737358Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4738196Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4739706Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4741324Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4741984Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1428:7[22m[39m
2025-06-04T22:41:45.4742094Z     [90m1426| [39m
2025-06-04T22:41:45.4742542Z     [90m1427| [39m    [34mit[39m([32m'handles malformed WebSocket messages'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.4743320Z     [90m1428| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4743523Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4743712Z     [90m1429| [39m
2025-06-04T22:41:45.4744088Z     [90m1430| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4744109Z 
2025-06-04T22:41:45.4744327Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[91/523]⎯[22m[39m
2025-06-04T22:41:45.4744335Z 
2025-06-04T22:41:45.4745244Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mshows correct status during reconnection attempts
2025-06-04T22:41:45.4745532Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4746489Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4747584Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4748602Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4749292Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1455:7[22m[39m
2025-06-04T22:41:45.4749399Z     [90m1453| [39m
2025-06-04T22:41:45.4749715Z     [90m1454| [39m    it('shows correct status during reconnection attempts', async () =…
2025-06-04T22:41:45.4750358Z     [90m1455| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mtrue[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4750495Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4750592Z     [90m1456| [39m
2025-06-04T22:41:45.4750833Z     [90m1457| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4750841Z 
2025-06-04T22:41:45.4751045Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[92/523]⎯[22m[39m
2025-06-04T22:41:45.4751052Z 
2025-06-04T22:41:45.4752001Z [41m[1m FAIL [22m[49m src/components/admin/bias-detection/BiasDashboard.test.tsx[2m > [22mBiasDashboard[2m > [22mEnhanced WebSocket Functionality[2m > [22mdisables live updates when enableRealTimeUpdates is false
2025-06-04T22:41:45.4752276Z [31m[1mError[22m: Target container is not a DOM element.[39m
2025-06-04T22:41:45.4753115Z [90m [2m❯[22m Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m24878:15[22m[39m
2025-06-04T22:41:45.4754872Z [90m [2m❯[22m createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m147:27[22m[39m
2025-06-04T22:41:45.4756863Z [90m [2m❯[22m Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:[2m266:12[22m[39m
2025-06-04T22:41:45.4757682Z [36m [2m❯[22m src/components/admin/bias-detection/BiasDashboard.test.tsx:[2m1475:7[22m[39m
2025-06-04T22:41:45.4757880Z     [90m1473| [39m
2025-06-04T22:41:45.4758468Z     [90m1474| [39m    it('disables live updates when enableRealTimeUpdates is false', as…
2025-06-04T22:41:45.4759872Z     [90m1475| [39m      [34mrender[39m([33m<[39m[33mBiasDashboard[39m [33menableRealTimeUpdates[39m[33m=[39m[33m{[39m[35mfalse[39m[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
2025-06-04T22:41:45.4760360Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4760578Z     [90m1476| [39m
2025-06-04T22:41:45.4761025Z     [90m1477| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4761040Z 
2025-06-04T22:41:45.4761441Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[93/523]⎯[22m[39m
2025-06-04T22:41:45.4761455Z 
2025-06-04T22:41:45.4762949Z [41m[1m FAIL [22m[49m src/components/ai/__tests__/PerformanceDashboard.test.tsx[2m > [22mPerformanceDashboardReact Component[2m > [22mrenders properly with default props
2025-06-04T22:41:45.4764995Z [31m[1mTestingLibraryElementError[22m: Unable to find an element with the text: /100 \/1000/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
2025-06-04T22:41:45.4765012Z 
2025-06-04T22:41:45.4765259Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.4765435Z [36m<body>[31m
2025-06-04T22:41:45.4765612Z   [36m<div>[31m
2025-06-04T22:41:45.4765780Z     [36m<div[31m
2025-06-04T22:41:45.4766050Z       [33mclass[31m=[32m"p-6"[31m
2025-06-04T22:41:45.4766215Z     [36m>[31m
2025-06-04T22:41:45.4766398Z       [36m<div[31m
2025-06-04T22:41:45.4766669Z         [33mclass[31m=[32m"mb-6"[31m
2025-06-04T22:41:45.4766844Z       [36m>[31m
2025-06-04T22:41:45.4767016Z         [36m<h3[31m
2025-06-04T22:41:45.4767394Z           [33mclass[31m=[32m"text-lg font-medium mb-2"[31m
2025-06-04T22:41:45.4768026Z         [36m>[31m
2025-06-04T22:41:45.4768288Z           [0mCache Performance[0m
2025-06-04T22:41:45.4768482Z         [36m</h3>[31m
2025-06-04T22:41:45.4768658Z         [36m<div[31m
2025-06-04T22:41:45.4769411Z           [33mclass[31m=[32m"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"[31m
2025-06-04T22:41:45.4769610Z         [36m>[31m
2025-06-04T22:41:45.4769798Z           [36m<div[31m
2025-06-04T22:41:45.4770661Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T22:41:45.4770852Z           [36m>[31m
2025-06-04T22:41:45.4771046Z             [36m<div[31m
2025-06-04T22:41:45.4771525Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4771715Z             [36m>[31m
2025-06-04T22:41:45.4771901Z               [0mSize[0m
2025-06-04T22:41:45.4772102Z             [36m</div>[31m
2025-06-04T22:41:45.4772282Z             [36m<div[31m
2025-06-04T22:41:45.4772656Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4772846Z             [36m>[31m
2025-06-04T22:41:45.4773028Z               [0m100[0m
2025-06-04T22:41:45.4773264Z               [0m entries[0m
2025-06-04T22:41:45.4773454Z             [36m</div>[31m
2025-06-04T22:41:45.4773640Z           [36m</div>[31m
2025-06-04T22:41:45.4773817Z           [36m<div[31m
2025-06-04T22:41:45.4774664Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T22:41:45.4774850Z           [36m>[31m
2025-06-04T22:41:45.4775029Z             [36m<div[31m
2025-06-04T22:41:45.4775509Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4775690Z             [36m>[31m
2025-06-04T22:41:45.4775921Z               [0mMax Size[0m
2025-06-04T22:41:45.4776108Z             [36m</div>[31m
2025-06-04T22:41:45.4776294Z             [36m<div[31m
2025-06-04T22:41:45.4776666Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4776842Z             [36m>[31m
2025-06-04T22:41:45.4777034Z               [0m1000[0m
2025-06-04T22:41:45.4777260Z               [0m entries[0m
2025-06-04T22:41:45.4777459Z             [36m</div>[31m
2025-06-04T22:41:45.4777644Z           [36m</div>[31m
2025-06-04T22:41:45.4777831Z           [36m<div[31m
2025-06-04T22:41:45.4778868Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T22:41:45.4779072Z           [36m>[31m
2025-06-04T22:41:45.4779437Z             [36m<div[31m
2025-06-04T22:41:45.4779900Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4780087Z             [36m>[31m
2025-06-04T22:41:45.4780303Z               [0mHit Rate[0m
2025-06-04T22:41:45.4780491Z             [36m</div>[31m
2025-06-04T22:41:45.4780679Z             [36m<div[31m
2025-06-04T22:41:45.4781045Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4781390Z             [36m>[31m
2025-06-04T22:41:45.4781589Z               [0m75.0%[0m
2025-06-04T22:41:45.4781774Z             [36m</div>[31m
2025-06-04T22:41:45.4781943Z           [36m</div>[31m
2025-06-04T22:41:45.4782116Z           [36m<div[31m
2025-06-04T22:41:45.4782776Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T22:41:45.4782974Z           [36m>[31m
2025-06-04T22:41:45.4783144Z             [36m<div[31m
2025-06-04T22:41:45.4783552Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4783700Z             [36m>[31m
2025-06-04T22:41:45.4783875Z               [0mTTL[0m
2025-06-04T22:41:45.4784051Z             [36m</div>[31m
2025-06-04T22:41:45.4784218Z             [36m<div[31m
2025-06-04T22:41:45.4784797Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4784969Z             [36m>[31m
2025-06-04T22:41:45.4785137Z               [0m60s[0m
2025-06-04T22:41:45.4785315Z             [36m</div>[31m
2025-06-04T22:41:45.4785488Z           [36m</div>[31m
2025-06-04T22:41:45.4785662Z         [36m</div>[31m
2025-06-04T22:41:45.4785832Z       [36m</div>[31m
2025-06-04T22:41:45.4786002Z       [36m<div[31m
2025-06-04T22:41:45.4786450Z         [33mclass[31m=[32m"flex justify-between items-center mb-4"[31m
2025-06-04T22:41:45.4786616Z       [36m>[31m
2025-06-04T22:41:45.4786785Z         [36m<div[31m
2025-06-04T22:41:45.4787058Z           [33mclass[31m=[32m"text-sm"[31m
2025-06-04T22:41:45.4787217Z         [36m>[31m
2025-06-04T22:41:45.4787389Z           [36m<span[31m
2025-06-04T22:41:45.4787795Z             [33mclass[31m=[32m"text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4787971Z           [36m>[31m
2025-06-04T22:41:45.4788164Z             [0mStatus:[0m
2025-06-04T22:41:45.4788357Z           [36m</span>[31m
2025-06-04T22:41:45.4788527Z           [0m [0m
2025-06-04T22:41:45.4788705Z           [36m<span[31m
2025-06-04T22:41:45.4789406Z             [33mclass[31m=[32m"font-medium text-green-600 dark:text-green-400"[31m
2025-06-04T22:41:45.4789598Z           [36m>[31m
2025-06-04T22:41:45.4789781Z             [0mEnabled[0m
2025-06-04T22:41:45.4789971Z           [36m</span>[31m
2025-06-04T22:41:45.4790144Z         [36m</div>[31m
2025-06-04T22:41:45.4790336Z         [36m<button[31m
2025-06-04T22:41:45.4791142Z           [33mclass[31m=[32m"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded"[31m
2025-06-04T22:41:45.4791312Z         [36m>[31m
2025-06-04T22:41:45.4791500Z           [0mClear Cache[0m
2025-06-04T22:41:45.4791679Z         [36m</button>[31m
2025-06-04T22:41:45.4791855Z       [36m</div>[31m
2025-06-04T22:41:45.4792021Z       [36m<div[31m
2025-06-04T22:41:45.4792591Z         [33mclass[31m=[32m"text-xs text-gray-500 dark:text-gray-400 mt-6 text-right"[31m
2025-06-04T22:41:45.4792754Z       [36m>[31m
2025-06-04T22:41:45.4792989Z         [0mLast updated: [0m
2025-06-04T22:41:45.4793178Z         [0m9:55:38 PM[0m
2025-06-04T22:41:45.4793353Z       [36m</div>[31m
2025-06-04T22:41:45.4793527Z     [36m</div>[31m
2025-06-04T22:41:45.4793692Z   [36m</div>[31m
2025-06-04T22:41:45.4793892Z [36m</body>[31m[39m
2025-06-04T22:41:45.4795328Z [90m [2m❯[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
2025-06-04T22:41:45.4796427Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
2025-06-04T22:41:45.4797483Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
2025-06-04T22:41:45.4798547Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
2025-06-04T22:41:45.4799452Z [36m [2m❯[22m src/components/ai/__tests__/PerformanceDashboard.test.tsx:[2m32:19[22m[39m
2025-06-04T22:41:45.4800020Z     [90m 30| [39m    [90m// Check if cache metrics are displayed[39m
2025-06-04T22:41:45.4800840Z     [90m 31| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([32m'Enabled'[39m))[33m.[39m[34mtoBeInTheDocument[39m()
2025-06-04T22:41:45.4801662Z     [90m 32| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/100 \/1000/[39m))[33m.[39m[34mtoBeInTheDocument[39m()
2025-06-04T22:41:45.4801984Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.4802801Z     [90m 33| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/75.0%/[39m))[33m.[39m[34mtoBeInTheDocument[39m()
2025-06-04T22:41:45.4802972Z     [90m 34| [39m
2025-06-04T22:41:45.4802986Z 
2025-06-04T22:41:45.4803566Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[94/523]⎯[22m[39m
2025-06-04T22:41:45.4803586Z 
2025-06-04T22:41:45.4804860Z [41m[1m FAIL [22m[49m src/components/ai/__tests__/PerformanceDashboard.test.tsx[2m > [22mPerformanceDashboardReact Component[2m > [22mhandles error states
2025-06-04T22:41:45.4805550Z [31m[1mTestingLibraryElementError[22m: Found multiple elements with the text: N/A
2025-06-04T22:41:45.4805578Z 
2025-06-04T22:41:45.4805798Z Here are the matching elements:
2025-06-04T22:41:45.4805826Z 
2025-06-04T22:41:45.4806065Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.4806251Z [36m<div[31m
2025-06-04T22:41:45.4806582Z   [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4806764Z [36m>[31m
2025-06-04T22:41:45.4806924Z   [0mN/A[0m
2025-06-04T22:41:45.4807091Z [36m</div>[31m
2025-06-04T22:41:45.4807102Z 
2025-06-04T22:41:45.4807335Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.4807493Z [36m<div[31m
2025-06-04T22:41:45.4807830Z   [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4807982Z [36m>[31m
2025-06-04T22:41:45.4808140Z   [0mN/A[0m
2025-06-04T22:41:45.4808296Z [36m</div>[31m
2025-06-04T22:41:45.4808307Z 
2025-06-04T22:41:45.4809283Z (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).
2025-06-04T22:41:45.4809300Z 
2025-06-04T22:41:45.4809539Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.4809712Z [36m<body>[31m
2025-06-04T22:41:45.4810124Z   [36m<div>[31m
2025-06-04T22:41:45.4810310Z     [36m<div[31m
2025-06-04T22:41:45.4810566Z       [33mclass[31m=[32m"p-6"[31m
2025-06-04T22:41:45.4810728Z     [36m>[31m
2025-06-04T22:41:45.4810901Z       [36m<div[31m
2025-06-04T22:41:45.4811148Z         [33mclass[31m=[32m"mb-6"[31m
2025-06-04T22:41:45.4811313Z       [36m>[31m
2025-06-04T22:41:45.4811478Z         [36m<h3[31m
2025-06-04T22:41:45.4811839Z           [33mclass[31m=[32m"text-lg font-medium mb-2"[31m
2025-06-04T22:41:45.4812044Z         [36m>[31m
2025-06-04T22:41:45.4812381Z           [0mCache Performance[0m
2025-06-04T22:41:45.4812650Z         [36m</h3>[31m
2025-06-04T22:41:45.4812843Z         [36m<div[31m
2025-06-04T22:41:45.4813383Z           [33mclass[31m=[32m"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"[31m
2025-06-04T22:41:45.4813557Z         [36m>[31m
2025-06-04T22:41:45.4813754Z           [36m<div[31m
2025-06-04T22:41:45.4814591Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T22:41:45.4814777Z           [36m>[31m
2025-06-04T22:41:45.4814957Z             [36m<div[31m
2025-06-04T22:41:45.4815417Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4815597Z             [36m>[31m
2025-06-04T22:41:45.4815771Z               [0mSize[0m
2025-06-04T22:41:45.4815955Z             [36m</div>[31m
2025-06-04T22:41:45.4816133Z             [36m<div[31m
2025-06-04T22:41:45.4816491Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4816659Z             [36m>[31m
2025-06-04T22:41:45.4816824Z               [0m0[0m
2025-06-04T22:41:45.4817046Z               [0m entries[0m
2025-06-04T22:41:45.4817223Z             [36m</div>[31m
2025-06-04T22:41:45.4817405Z           [36m</div>[31m
2025-06-04T22:41:45.4817575Z           [36m<div[31m
2025-06-04T22:41:45.4818407Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T22:41:45.4818580Z           [36m>[31m
2025-06-04T22:41:45.4818763Z             [36m<div[31m
2025-06-04T22:41:45.4819396Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4819581Z             [36m>[31m
2025-06-04T22:41:45.4819808Z               [0mMax Size[0m
2025-06-04T22:41:45.4819994Z             [36m</div>[31m
2025-06-04T22:41:45.4820383Z             [36m<div[31m
2025-06-04T22:41:45.4820744Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4820925Z             [36m>[31m
2025-06-04T22:41:45.4821099Z               [0m0[0m
2025-06-04T22:41:45.4821319Z               [0m entries[0m
2025-06-04T22:41:45.4821513Z             [36m</div>[31m
2025-06-04T22:41:45.4821695Z           [36m</div>[31m
2025-06-04T22:41:45.4821880Z           [36m<div[31m
2025-06-04T22:41:45.4822730Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T22:41:45.4822913Z           [36m>[31m
2025-06-04T22:41:45.4823094Z             [36m<div[31m
2025-06-04T22:41:45.4823572Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4823749Z             [36m>[31m
2025-06-04T22:41:45.4823972Z               [0mHit Rate[0m
2025-06-04T22:41:45.4824165Z             [36m</div>[31m
2025-06-04T22:41:45.4824353Z             [36m<div[31m
2025-06-04T22:41:45.4824720Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4824897Z             [36m>[31m
2025-06-04T22:41:45.4825075Z               [0mN/A[0m
2025-06-04T22:41:45.4825246Z             [36m</div>[31m
2025-06-04T22:41:45.4825419Z           [36m</div>[31m
2025-06-04T22:41:45.4825601Z           [36m<div[31m
2025-06-04T22:41:45.4826610Z             [33mclass[31m=[32m"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"[31m
2025-06-04T22:41:45.4826810Z           [36m>[31m
2025-06-04T22:41:45.4826993Z             [36m<div[31m
2025-06-04T22:41:45.4827472Z               [33mclass[31m=[32m"text-sm text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4827647Z             [36m>[31m
2025-06-04T22:41:45.4827828Z               [0mTTL[0m
2025-06-04T22:41:45.4828011Z             [36m</div>[31m
2025-06-04T22:41:45.4828188Z             [36m<div[31m
2025-06-04T22:41:45.4828560Z               [33mclass[31m=[32m"text-xl font-semibold"[31m
2025-06-04T22:41:45.4828733Z             [36m>[31m
2025-06-04T22:41:45.4828914Z               [0mN/A[0m
2025-06-04T22:41:45.4829270Z             [36m</div>[31m
2025-06-04T22:41:45.4829470Z           [36m</div>[31m
2025-06-04T22:41:45.4829650Z         [36m</div>[31m
2025-06-04T22:41:45.4829822Z       [36m</div>[31m
2025-06-04T22:41:45.4829996Z       [36m<div[31m
2025-06-04T22:41:45.4830453Z         [33mclass[31m=[32m"flex justify-between items-center mb-4"[31m
2025-06-04T22:41:45.4830625Z       [36m>[31m
2025-06-04T22:41:45.4830797Z         [36m<div[31m
2025-06-04T22:41:45.4831080Z           [33mclass[31m=[32m"text-sm"[31m
2025-06-04T22:41:45.4831252Z         [36m>[31m
2025-06-04T22:41:45.4831436Z           [36m<span[31m
2025-06-04T22:41:45.4831863Z             [33mclass[31m=[32m"text-gray-500 dark:text-gray-400"[31m
2025-06-04T22:41:45.4832037Z           [36m>[31m
2025-06-04T22:41:45.4832265Z             [0mStatus:[0m
2025-06-04T22:41:45.4832480Z           [36m</span>[31m
2025-06-04T22:41:45.4832649Z           [0m [0m
2025-06-04T22:41:45.4832827Z           [36m<span[31m
2025-06-04T22:41:45.4833306Z             [33mclass[31m=[32m"font-medium text-red-600 dark:text-red-400"[31m
2025-06-04T22:41:45.4833477Z           [36m>[31m
2025-06-04T22:41:45.4833666Z             [0mDisabled[0m
2025-06-04T22:41:45.4833855Z           [36m</span>[31m
2025-06-04T22:41:45.4834041Z         [36m</div>[31m
2025-06-04T22:41:45.4834224Z         [36m<button[31m
2025-06-04T22:41:45.4835030Z           [33mclass[31m=[32m"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded"[31m
2025-06-04T22:41:45.4835212Z         [36m>[31m
2025-06-04T22:41:45.4835401Z           [0mClear Cache[0m
2025-06-04T22:41:45.4835576Z         [36m</button>[31m
2025-06-04T22:41:45.4835744Z       [36m</div>[31m
2025-06-04T22:41:45.4835903Z       [36m<div[31m
2025-06-04T22:41:45.4836648Z         [33mclass[31m=[32m"text-xs text-gray-500 dark:text-gray-400 mt-6 text-right"[31m
2025-06-04T22:41:45.4836814Z       [36m>[31m
2025-06-04T22:41:45.4837048Z         [0mLast updated: [0m
2025-06-04T22:41:45.4837229Z         [0m9:55:38 PM[0m
2025-06-04T22:41:45.4837407Z       [36m</div>[31m
2025-06-04T22:41:45.4837577Z     [36m</div>[31m
2025-06-04T22:41:45.4837741Z   [36m</div>[31m
2025-06-04T22:41:45.4837944Z [36m</body>[31m[39m
2025-06-04T22:41:45.4839362Z [90m [2m❯[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
2025-06-04T22:41:45.4840596Z [90m [2m❯[22m getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m20:35[22m[39m
2025-06-04T22:41:45.4841970Z [90m [2m❯[22m getMultipleElementsFoundError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m23:10[22m[39m
2025-06-04T22:41:45.4843049Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m55:13[22m[39m
2025-06-04T22:41:45.4844108Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
2025-06-04T22:41:45.4844816Z [36m [2m❯[22m src/components/ai/__tests__/PerformanceDashboard.test.tsx:[2m83:19[22m[39m
2025-06-04T22:41:45.4845163Z     [90m 81| [39m
2025-06-04T22:41:45.4845756Z     [90m 82| [39m    [90m// Check that it renders fallback state (e.g., N/A values) instead[39m
2025-06-04T22:41:45.4846317Z     [90m 83| [39m    expect(screen.getByText('N/A')).toBeInTheDocument() // Add asserti…
2025-06-04T22:41:45.4846613Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.4846800Z     [90m 84| [39m  })
2025-06-04T22:41:45.4846968Z     [90m 85| [39m})
2025-06-04T22:41:45.4846983Z 
2025-06-04T22:41:45.4847364Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[95/523]⎯[22m[39m
2025-06-04T22:41:45.4847376Z 
2025-06-04T22:41:45.4848949Z [41m[1m FAIL [22m[49m src/components/auth/__tests__/RegisterForm.test.tsx[2m > [22mRegisterForm[2m > [22mrenders all form fields with proper accessibility attributes
2025-06-04T22:41:45.4849891Z [31m[1mError[22m: Expected element to have attribute "aria-invalid" with value "false"[39m
2025-06-04T22:41:45.4850571Z [36m [2m❯[22m src/components/auth/__tests__/RegisterForm.test.tsx:[2m29:27[22m[39m
2025-06-04T22:41:45.4851340Z     [90m 27| [39m    [35mconst[39m fullNameInput [33m=[39m screen[33m.[39m[34mgetByLabelText[39m([36m/full name/i[39m)
2025-06-04T22:41:45.4852219Z     [90m 28| [39m    [34mexpect[39m(fullNameInput)[33m.[39m[34mtoHaveAttribute[39m([32m'aria-required'[39m[33m,[39m [32m'true'[39m)
2025-06-04T22:41:45.4853098Z     [90m 29| [39m    [34mexpect[39m(fullNameInput)[33m.[39m[34mtoHaveAttribute[39m([32m'aria-invalid'[39m[33m,[39m [32m'false'[39m)
2025-06-04T22:41:45.4853426Z     [90m   | [39m                          [31m^[39m
2025-06-04T22:41:45.4853599Z     [90m 30| [39m
2025-06-04T22:41:45.4854304Z     [90m 31| [39m    [35mconst[39m emailInput [33m=[39m screen[33m.[39m[34mgetByLabelText[39m([36m/email/i[39m)
2025-06-04T22:41:45.4854317Z 
2025-06-04T22:41:45.4854688Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[96/523]⎯[22m[39m
2025-06-04T22:41:45.4854700Z 
2025-06-04T22:41:45.4855794Z [41m[1m FAIL [22m[49m src/components/auth/__tests__/RegisterForm.test.tsx[2m > [22mRegisterForm[2m > [22mannounces successful registration
2025-06-04T22:41:45.4856255Z [31m[1mError[22m: Invalid Chai property: toHaveTextContent
2025-06-04T22:41:45.4856267Z 
2025-06-04T22:41:45.4856506Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.4856674Z [36m<html>[31m
2025-06-04T22:41:45.4856846Z   [36m<head />[31m
2025-06-04T22:41:45.4857009Z   [36m<body>[31m
2025-06-04T22:41:45.4857185Z     [36m<div>[31m
2025-06-04T22:41:45.4857550Z       [36m<div[31m
2025-06-04T22:41:45.4857839Z         [33maria-live[31m=[32m"polite"[31m
2025-06-04T22:41:45.4858110Z         [33mclass[31m=[32m"auth-success"[31m
2025-06-04T22:41:45.4858355Z         [33mrole[31m=[32m"alert"[31m
2025-06-04T22:41:45.4858509Z       [36m>[31m
2025-06-04T22:41:45.4858671Z         [36m<h2>[31m
2025-06-04T22:41:45.4858936Z           [0mRegistration Successful[0m
2025-06-04T22:41:45.4859258Z         [36m</h2>[31m
2025-06-04T22:41:45.4859448Z         [36m<p>[31m
2025-06-04T22:41:45.4860239Z           [0mPlease check your email to verify your account. If you don't see it within a few minutes, check your spam folder.[0m
2025-06-04T22:41:45.4860415Z         [36m</p>[31m
2025-06-04T22:41:45.4860577Z       [36m</div>[31m
2025-06-04T22:41:45.4860740Z     [36m</div>[31m
2025-06-04T22:41:45.4860898Z   [36m</body>[31m
2025-06-04T22:41:45.4861084Z [36m</html>[31m[39m
2025-06-04T22:41:45.4861727Z [36m [2m❯[22m src/components/auth/__tests__/RegisterForm.test.tsx:[2m107:28[22m[39m
2025-06-04T22:41:45.4862144Z     [90m105| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.4862915Z     [90m106| [39m      [35mconst[39m successMessage [33m=[39m screen[33m.[39m[34mgetByRole[39m([32m'alert'[39m)
2025-06-04T22:41:45.4863486Z     [90m107| [39m      expect(successMessage).toHaveTextContent(/registration successfu…
2025-06-04T22:41:45.4863841Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.4864913Z     [90m108| [39m      [34mexpect[39m(successMessage)[33m.[39m[34mtoHaveAttribute[39m([32m'aria-live'[39m[33m,[39m [32m'polite'[39m)
2025-06-04T22:41:45.4865118Z     [90m109| [39m    })
2025-06-04T22:41:45.4866497Z [90m [2m❯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
2025-06-04T22:41:45.4867660Z [90m [2m❯[22m checkCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
2025-06-04T22:41:45.4868995Z [90m [2m❯[22m Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m
2025-06-04T22:41:45.4869012Z 
2025-06-04T22:41:45.4869575Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[97/523]⎯[22m[39m
2025-06-04T22:41:45.4869590Z 
2025-06-04T22:41:45.4870751Z [41m[1m FAIL [22m[49m src/components/auth/__tests__/RegisterForm.test.tsx[2m > [22mRegisterForm[2m > [22mmakes Google sign-in button accessible
2025-06-04T22:41:45.4871579Z [31m[1mError[22m: Expected element to have attribute "aria-label" with value "Sign up with Google"[39m
2025-06-04T22:41:45.4872254Z [36m [2m❯[22m src/components/auth/__tests__/RegisterForm.test.tsx:[2m136:26[22m[39m
2025-06-04T22:41:45.4872742Z     [90m134| [39m      name[33m:[39m [36m/sign up with google/i[39m[33m,[39m
2025-06-04T22:41:45.4872933Z     [90m135| [39m    })
2025-06-04T22:41:45.4873511Z     [90m136| [39m    expect(googleButton).toHaveAttribute('aria-label', 'Sign up with G…
2025-06-04T22:41:45.4873834Z     [90m   | [39m                         [31m^[39m
2025-06-04T22:41:45.4874012Z     [90m137| [39m
2025-06-04T22:41:45.4874574Z     [90m138| [39m    const googleLogo = screen.getByRole('img', { name: /google logo/i …
2025-06-04T22:41:45.4874588Z 
2025-06-04T22:41:45.4874973Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[98/523]⎯[22m[39m
2025-06-04T22:41:45.4875001Z 
2025-06-04T22:41:45.4876347Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/MentalHealthInsights.test.tsx[2m > [22mMentalHealthInsights[2m > [22mrenders analysis with moderate severity
2025-06-04T22:41:45.4877591Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/MentalHealthInsights.test.tsx[2m > [22mMentalHealthInsights[2m > [22mrenders analysis with low severity
2025-06-04T22:41:45.4878830Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/MentalHealthInsights.test.tsx[2m > [22mMentalHealthInsights[2m > [22mrenders analysis with high severity
2025-06-04T22:41:45.4879803Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'map')[39m
2025-06-04T22:41:45.4880645Z [36m [2m❯[22m MentalHealthInsights src/components/chat/MentalHealthInsights.tsx:[2m114:43[22m[39m
2025-06-04T22:41:45.4881050Z     [90m112| [39m            [33m<[39m[33m/[39m[33mh3[39m[33m>[39m
2025-06-04T22:41:45.4881799Z     [90m113| [39m            [33m<[39m[33mul[39m [33mclassName[39m[33m=[39m[32m"list-disc pl-5 text-gray-600"[39m[33m>[39m
2025-06-04T22:41:45.4882630Z     [90m114| [39m              [33m{[39manalysis[33m.[39mcognitivePatterns[33m.[39m[34mmap[39m((pattern[33m,[39m index) [33m=>[39m (
2025-06-04T22:41:45.4882995Z     [90m   | [39m                                          [31m^[39m
2025-06-04T22:41:45.4884006Z     [90m115| [39m                [33m<[39m[33mli[39m [33mkey[39m[33m=[39m[33m{[39mindex[33m}[39m[33m>[39m[33m{[39mpattern[33m}[39m[33m<[39m[33m/[39m[33mli[39m[33m>[39m
2025-06-04T22:41:45.4884298Z     [90m116| [39m              ))[33m}[39m
2025-06-04T22:41:45.4885719Z [90m [2m❯[22m Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m23863:20[22m[39m
2025-06-04T22:41:45.4887158Z [90m [2m❯[22m renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m5529:22[22m[39m
2025-06-04T22:41:45.4888542Z [90m [2m❯[22m updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m8897:19[22m[39m
2025-06-04T22:41:45.4889908Z [90m [2m❯[22m beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m10522:18[22m[39m
2025-06-04T22:41:45.4891191Z [90m [2m❯[22m runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m1522:13[22m[39m
2025-06-04T22:41:45.4892478Z [90m [2m❯[22m performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m15140:22[22m[39m
2025-06-04T22:41:45.4893700Z [90m [2m❯[22m workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m14956:41[22m[39m
2025-06-04T22:41:45.4894948Z [90m [2m❯[22m renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m14936:11[22m[39m
2025-06-04T22:41:45.4896208Z [90m [2m❯[22m performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m14462:44[22m[39m
2025-06-04T22:41:45.4896226Z 
2025-06-04T22:41:45.4896610Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[99/523]⎯[22m[39m
2025-06-04T22:41:45.4896637Z 
2025-06-04T22:41:45.4897840Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/TherapyStyleSelector.test.tsx[2m > [22mTherapyStyleSelector[2m > [22mrenders all therapy styles
2025-06-04T22:41:45.4899259Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/TherapyStyleSelector.test.tsx[2m > [22mTherapyStyleSelector[2m > [22mmarks the selected style as active
2025-06-04T22:41:45.4900578Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/TherapyStyleSelector.test.tsx[2m > [22mTherapyStyleSelector[2m > [22mcalls onSelectStyle when a style is clicked
2025-06-04T22:41:45.4901911Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/TherapyStyleSelector.test.tsx[2m > [22mTherapyStyleSelector[2m > [22mshows the detail panel for the selected style
2025-06-04T22:41:45.4903283Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/TherapyStyleSelector.test.tsx[2m > [22mTherapyStyleSelector[2m > [22mupdates the detail panel on hover
2025-06-04T22:41:45.4904574Z [31m[1mError[22m: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.4905281Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.4905437Z [39m
2025-06-04T22:41:45.4906526Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../../lib/ai/types/TherapyStyles"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.4907022Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.4907214Z   [35mreturn[39m {
2025-06-04T22:41:45.4907447Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.4907698Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.4907808Z   }
2025-06-04T22:41:45.4907927Z })
2025-06-04T22:41:45.4907939Z 
2025-06-04T22:41:45.4908780Z [36m [2m❯[22m TherapyStyleSelector src/components/chat/TherapyStyleSelector.tsx:[2m51:24[22m[39m
2025-06-04T22:41:45.4908985Z     [90m 49| [39m
2025-06-04T22:41:45.4909668Z     [90m 50| [39m  [90m// Get the current style details to display in the panel[39m
2025-06-04T22:41:45.4910244Z     [90m 51| [39m  [35mconst[39m currentStyle [33m=[39m therapyStyleConfigs[detailStyle]
2025-06-04T22:41:45.4910550Z     [90m   | [39m                       [31m^[39m
2025-06-04T22:41:45.4910721Z     [90m 52| [39m
2025-06-04T22:41:45.4910979Z     [90m 53| [39m  [35mreturn[39m (
2025-06-04T22:41:45.4912622Z [90m [2m❯[22m Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m23863:20[22m[39m
2025-06-04T22:41:45.4913942Z [90m [2m❯[22m renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m5529:22[22m[39m
2025-06-04T22:41:45.4915314Z [90m [2m❯[22m updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m8897:19[22m[39m
2025-06-04T22:41:45.4916600Z [90m [2m❯[22m beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m10522:18[22m[39m
2025-06-04T22:41:45.4917951Z [90m [2m❯[22m runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m1522:13[22m[39m
2025-06-04T22:41:45.4918700Z [90m [2m❯[22m performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m15140:22[22m[39m
2025-06-04T22:41:45.4919581Z [90m [2m❯[22m workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:[2m14956:41[22m[39m
2025-06-04T22:41:45.4919594Z 
2025-06-04T22:41:45.4919821Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[100/523]⎯[22m[39m
2025-06-04T22:41:45.4919829Z 
2025-06-04T22:41:45.4921264Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/TherapyStyleSelector.test.tsx[2m > [22mTherapyStyleSelector[2m > [22mgets and displays recommended styles based on issue
2025-06-04T22:41:45.4922609Z [31m[1mError[22m: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.4923139Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.4923303Z [39m
2025-06-04T22:41:45.4924395Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../../lib/ai/types/TherapyStyles"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.4924894Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.4925076Z   [35mreturn[39m {
2025-06-04T22:41:45.4925316Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.4925569Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.4925684Z   }
2025-06-04T22:41:45.4925808Z })
2025-06-04T22:41:45.4926028Z 
2025-06-04T22:41:45.4926799Z [36m [2m❯[22m src/components/chat/__tests__/TherapyStyleSelector.test.tsx:[2m126:7[22m[39m
2025-06-04T22:41:45.4927405Z     [90m124| [39m    [90m// Mock the recommendation function to return specific styles[39m
2025-06-04T22:41:45.4927861Z     [90m125| [39m    [35mconst[39m mockRecommendedStyles [33m=[39m [
2025-06-04T22:41:45.4928287Z     [90m126| [39m      therapyStyleConfigs[33m.[39mcbt[33m,[39m
2025-06-04T22:41:45.4928550Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.4928968Z     [90m127| [39m      therapyStyleConfigs[33m.[39mact[33m,[39m
2025-06-04T22:41:45.4929337Z     [90m128| [39m    ]
2025-06-04T22:41:45.4929352Z 
2025-06-04T22:41:45.4929747Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[101/523]⎯[22m[39m
2025-06-04T22:41:45.4929766Z 
2025-06-04T22:41:45.4931305Z [41m[1m FAIL [22m[49m src/components/chat/__tests__/TherapyStyleSelector.test.tsx[2m > [22mTherapyStyleSelector[2m > [22mdoes not show recommendations when showRecommendations is false
2025-06-04T22:41:45.4932645Z [31m[1mError[22m: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.4933189Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.4933346Z [39m
2025-06-04T22:41:45.4934647Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../../lib/ai/types/TherapyStyles"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.4935175Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.4935363Z   [35mreturn[39m {
2025-06-04T22:41:45.4935595Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.4935847Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.4935955Z   }
2025-06-04T22:41:45.4936065Z })
2025-06-04T22:41:45.4936077Z 
2025-06-04T22:41:45.4936833Z [36m [2m❯[22m src/components/chat/__tests__/TherapyStyleSelector.test.tsx:[2m160:36[22m[39m
2025-06-04T22:41:45.4937430Z     [90m158| [39m  it('does not show recommendations when showRecommendations is false'…
2025-06-04T22:41:45.4937798Z     [90m159| [39m    [90m// Mock recommended styles[39m
2025-06-04T22:41:45.4938497Z     [90m160| [39m    [35mconst[39m mockRecommendedStyles [33m=[39m [therapyStyleConfigs[33m.[39mcbt]
2025-06-04T22:41:45.4938859Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.4939655Z     [90m161| [39m    ;(getRecommendedStyles as ReturnType<typeof vi.fn>).mockReturnValu…
2025-06-04T22:41:45.4940039Z     [90m162| [39m      mockRecommendedStyles[33m,[39m
2025-06-04T22:41:45.4940054Z 
2025-06-04T22:41:45.4940438Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[102/523]⎯[22m[39m
2025-06-04T22:41:45.4940451Z 
2025-06-04T22:41:45.4941842Z [41m[1m FAIL [22m[49m src/components/monitoring/__tests__/RealUserMonitoring.astro.test.ts[2m > [22mRealUserMonitoring.astro[2m > [22mrenders with default props
2025-06-04T22:41:45.4944029Z [31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: Real User Monitoring. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
2025-06-04T22:41:45.4944045Z 
2025-06-04T22:41:45.4944298Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.4944470Z [36m<body>[39m
2025-06-04T22:41:45.4944653Z   [36m<div>[39m
2025-06-04T22:41:45.4944851Z     [36m<div[39m
2025-06-04T22:41:45.4945149Z       [33mclass[39m=[32m"rum-dashboard"[39m
2025-06-04T22:41:45.4945503Z       [33mdata-testid[39m=[32m"astro-component"[39m
2025-06-04T22:41:45.4945666Z     [36m>[39m
2025-06-04T22:41:45.4945844Z       [36m<div[39m
2025-06-04T22:41:45.4946161Z         [33mclass[39m=[32m"metrics-container"[39m
2025-06-04T22:41:45.4946332Z       [36m>[39m
2025-06-04T22:41:45.4946510Z         [36m<div[39m
2025-06-04T22:41:45.4946783Z           [33mclass[39m=[32m"grid"[39m
2025-06-04T22:41:45.4947159Z         [36m>[39m
2025-06-04T22:41:45.4947342Z           [36m<div[39m
2025-06-04T22:41:45.4947655Z             [33mclass[39m=[32m"metric-card"[39m
2025-06-04T22:41:45.4947830Z           [36m>[39m
2025-06-04T22:41:45.4948022Z             [36m<h3>[39m
2025-06-04T22:41:45.4948303Z               [0mLoading Performance[0m
2025-06-04T22:41:45.4948501Z             [36m</h3>[39m
2025-06-04T22:41:45.4948684Z             [36m<div[39m
2025-06-04T22:41:45.4949434Z               [33mid[39m=[32m"loading-metrics"[39m
2025-06-04T22:41:45.4949626Z             [36m>[39m
2025-06-04T22:41:45.4949816Z               [36m<div>[39m
2025-06-04T22:41:45.4950047Z                 [36m<span>[39m
2025-06-04T22:41:45.4950271Z                   [0mTTFB:[0m
2025-06-04T22:41:45.4950502Z                 [36m</span>[39m
2025-06-04T22:41:45.4950720Z                 [36m<span>[39m
2025-06-04T22:41:45.4950957Z                   [0mLoading...[0m
2025-06-04T22:41:45.4951201Z                 [36m</span>[39m
2025-06-04T22:41:45.4951436Z               [36m</div>[39m
2025-06-04T22:41:45.4951642Z               [36m<div>[39m
2025-06-04T22:41:45.4951873Z                 [36m<span>[39m
2025-06-04T22:41:45.4952111Z                   [0mFCP:[0m
2025-06-04T22:41:45.4952344Z                 [36m</span>[39m
2025-06-04T22:41:45.4952561Z                 [36m<span>[39m
2025-06-04T22:41:45.4952806Z                   [0mLoading...[0m
2025-06-04T22:41:45.4953225Z                 [36m</span>[39m
2025-06-04T22:41:45.4953481Z               [36m</div>[39m
2025-06-04T22:41:45.4953677Z               [36m<div>[39m
2025-06-04T22:41:45.4953916Z                 [36m<span>[39m
2025-06-04T22:41:45.4954144Z                   [0mLCP:[0m
2025-06-04T22:41:45.4954392Z                 [36m</span>[39m
2025-06-04T22:41:45.4954626Z                 [36m<span>[39m
2025-06-04T22:41:45.4954875Z                   [0mLoading...[0m
2025-06-04T22:41:45.4955111Z                 [36m</span>[39m
2025-06-04T22:41:45.4955364Z               [36m</div>[39m
2025-06-04T22:41:45.4955555Z               [36m<div>[39m
2025-06-04T22:41:45.4955786Z                 [36m<span>[39m
2025-06-04T22:41:45.4956048Z                   [0mSpeed Index:[0m
2025-06-04T22:41:45.4956281Z                 [36m</span>[39m
2025-06-04T22:41:45.4956518Z                 [36m<span>[39m
2025-06-04T22:41:45.4956763Z                   [0mLoading...[0m
2025-06-04T22:41:45.4957009Z                 [36m</span>[39m
2025-06-04T22:41:45.4957237Z               [36m</div>[39m
2025-06-04T22:41:45.4957429Z             [36m</div>[39m
2025-06-04T22:41:45.4957625Z           [36m</div>[39m
2025-06-04T22:41:45.4957808Z           [36m<div[39m
2025-06-04T22:41:45.4958123Z             [33mclass[39m=[32m"metric-card"[39m
2025-06-04T22:41:45.4958305Z           [36m>[39m
2025-06-04T22:41:45.4958503Z             [36m<h3>[39m
2025-06-04T22:41:45.4958753Z               [0mInteractivity[0m
2025-06-04T22:41:45.4958956Z             [36m</h3>[39m
2025-06-04T22:41:45.4959294Z             [36m<div[39m
2025-06-04T22:41:45.4959669Z               [33mid[39m=[32m"interactivity-metrics"[39m
2025-06-04T22:41:45.4959859Z             [36m>[39m
2025-06-04T22:41:45.4960056Z               [36m<div>[39m
2025-06-04T22:41:45.4960294Z                 [36m<span>[39m
2025-06-04T22:41:45.4960517Z                   [0mFID:[0m
2025-06-04T22:41:45.4960747Z                 [36m</span>[39m
2025-06-04T22:41:45.4960996Z                 [36m<span>[39m
2025-06-04T22:41:45.4961253Z                   [0mLoading...[0m
2025-06-04T22:41:45.4961503Z                 [36m</span>[39m
2025-06-04T22:41:45.4961734Z               [36m</div>[39m
2025-06-04T22:41:45.4961942Z               [36m<div>[39m
2025-06-04T22:41:45.4962219Z                 [36m<span>[39m
2025-06-04T22:41:45.4962465Z                   [0mTBT:[0m
2025-06-04T22:41:45.4962707Z                 [36m</span>[39m
2025-06-04T22:41:45.4962944Z                 [36m<span>[39m
2025-06-04T22:41:45.4963430Z                   [0mLoading...[0m
2025-06-04T22:41:45.4963676Z                 [36m</span>[39m
2025-06-04T22:41:45.4963920Z               [36m</div>[39m
2025-06-04T22:41:45.4964121Z               [36m<div>[39m
2025-06-04T22:41:45.4964363Z                 [36m<span>[39m
2025-06-04T22:41:45.4964595Z                   [0mTTI:[0m
2025-06-04T22:41:45.4964837Z                 [36m</span>[39m
2025-06-04T22:41:45.4965080Z                 [36m<span>[39m
2025-06-04T22:41:45.4965347Z                   [0mLoading...[0m
2025-06-04T22:41:45.4965601Z                 [36m</span>[39m
2025-06-04T22:41:45.4965828Z               [36m</div>[39m
2025-06-04T22:41:45.4966033Z             [36m</div>[39m
2025-06-04T22:41:45.4966226Z           [36m</div>[39m
2025-06-04T22:41:45.4966414Z           [36m<div[39m
2025-06-04T22:41:45.4966739Z             [33mclass[39m=[32m"metric-card"[39m
2025-06-04T22:41:45.4966926Z           [36m>[39m
2025-06-04T22:41:45.4967138Z             [36m<h3>[39m
2025-06-04T22:41:45.4967411Z               [0mVisual Stability[0m
2025-06-04T22:41:45.4967614Z             [36m</h3>[39m
2025-06-04T22:41:45.4967811Z             [36m<div[39m
2025-06-04T22:41:45.4968164Z               [33mid[39m=[32m"stability-metrics"[39m
2025-06-04T22:41:45.4968356Z             [36m>[39m
2025-06-04T22:41:45.4968553Z               [36m<div>[39m
2025-06-04T22:41:45.4968802Z                 [36m<span>[39m
2025-06-04T22:41:45.4969420Z                   [0mCLS:[0m
2025-06-04T22:41:45.4969705Z                 [36m</span>[39m
2025-06-04T22:41:45.4969945Z                 [36m<span>[39m
2025-06-04T22:41:45.4970203Z                   [0mLoading...[0m
2025-06-04T22:41:45.4970439Z                 [36m</span>[39m
2025-06-04T22:41:45.4970664Z               [36m</div>[39m
2025-06-04T22:41:45.4970869Z             [36m</div>[39m
2025-06-04T22:41:45.4971059Z           [36m</div>[39m
2025-06-04T22:41:45.4971247Z           [36m<div[39m
2025-06-04T22:41:45.4971569Z             [33mclass[39m=[32m"metric-card"[39m
2025-06-04T22:41:45.4971751Z           [36m>[39m
2025-06-04T22:41:45.4971940Z             [36m<h3>[39m
2025-06-04T22:41:45.4972208Z               [0mUser Demographics[0m
2025-06-04T22:41:45.4972402Z             [36m</h3>[39m
2025-06-04T22:41:45.4972583Z             [36m<div[39m
2025-06-04T22:41:45.4972936Z               [33mid[39m=[32m"demographics-metrics"[39m
2025-06-04T22:41:45.4973111Z             [36m>[39m
2025-06-04T22:41:45.4973315Z               [36m<div>[39m
2025-06-04T22:41:45.4973542Z                 [36m<span>[39m
2025-06-04T22:41:45.4973780Z                   [0mDevices:[0m
2025-06-04T22:41:45.4974019Z                 [36m</span>[39m
2025-06-04T22:41:45.4974248Z                 [36m<span>[39m
2025-06-04T22:41:45.4974499Z                   [0mLoading...[0m
2025-06-04T22:41:45.4974737Z                 [36m</span>[39m
2025-06-04T22:41:45.4974977Z               [36m</div>[39m
2025-06-04T22:41:45.4975185Z               [36m<div>[39m
2025-06-04T22:41:45.4975419Z                 [36m<span>[39m
2025-06-04T22:41:45.4975674Z                   [0mBrowsers:[0m
2025-06-04T22:41:45.4975904Z                 [36m</span>[39m
2025-06-04T22:41:45.4976145Z                 [36m<span>[39m
2025-06-04T22:41:45.4976383Z                   [0mLoading...[0m
2025-06-04T22:41:45.4976611Z                 [36m</span>[39m
2025-06-04T22:41:45.4976834Z               [36m</div>[39m
2025-06-04T22:41:45.4977039Z               [36m<div>[39m
2025-06-04T22:41:45.4977270Z                 [36m<span>[39m
2025-06-04T22:41:45.4977503Z                   [0mCountries:[0m
2025-06-04T22:41:45.4977737Z                 [36m</span>[39m
2025-06-04T22:41:45.4977960Z                 [36m<span>[39m
2025-06-04T22:41:45.4978204Z                   [0mLoading...[0m
2025-06-04T22:41:45.4978428Z                 [36m</span>[39m
2025-06-04T22:41:45.4978668Z               [36m</div>[39m
2025-06-04T22:41:45.4978861Z             [36m</div>[39m
2025-06-04T22:41:45.4979438Z           [36m</div>[39m
2025-06-04T22:41:45.4979634Z           [36m<div[39m
2025-06-04T22:41:45.4979938Z             [33mclass[39m=[32m"metric-card"[39m
2025-06-04T22:41:45.4980121Z           [36m>[39m
2025-06-04T22:41:45.4980297Z             [36m<h3>[39m
2025-06-04T22:41:45.4980546Z               [0mResource Metrics[0m
2025-06-04T22:41:45.4980724Z             [36m</h3>[39m
2025-06-04T22:41:45.4980896Z             [36m<div[39m
2025-06-04T22:41:45.4981220Z               [33mid[39m=[32m"resource-metrics"[39m
2025-06-04T22:41:45.4981389Z             [36m>[39m
2025-06-04T22:41:45.4981583Z               [36m<div>[39m
2025-06-04T22:41:45.4981808Z                 [36m<span>[39m
2025-06-04T22:41:45.4982046Z                   [0mJS Size:[0m
2025-06-04T22:41:45.4982273Z                 [36m</span>[39m
2025-06-04T22:41:45.4982494Z                 [36m<span>[39m
2025-06-04T22:41:45.4982737Z                   [0mLoading...[0m
2025-06-04T22:41:45.4982972Z                 [36m</span>[39m
2025-06-04T22:41:45.4983198Z               [36m</div>[39m
2025-06-04T22:41:45.4983385Z               [36m<div>[39m
2025-06-04T22:41:45.4983613Z                 [36m<span>[39m
2025-06-04T22:41:45.4983847Z                   [0mCSS Size:[0m
2025-06-04T22:41:45.4984072Z                 [36m</span>[39m
2025-06-04T22:41:45.4984298Z                 [36m<span>[39m
2025-06-04T22:41:45.4984535Z                   [0mLoading...[0m
2025-06-04T22:41:45.4984936Z                 [36m</span>[39m
2025-06-04T22:41:45.4985166Z               [36m</div>[39m
2025-06-04T22:41:45.4985358Z               [36m<div>[39m
2025-06-04T22:41:45.4985579Z                 [36m<span>[39m
2025-06-04T22:41:45.4985818Z                   [0mRequests:[0m
2025-06-04T22:41:45.4986041Z                 [36m</span>[39m
2025-06-04T22:41:45.4986260Z                 [36m<span>[39m
2025-06-04T22:41:45.4986501Z                   [0mLoading...[0m
2025-06-04T22:41:45.4986721Z                 [36m</span>[39m
2025-06-04T22:41:45.4986956Z               [36m</div>[39m
2025-06-04T22:41:45.4987141Z             [36m</div>[39m
2025-06-04T22:41:45.4987326Z           [36m</div>[39m
2025-06-04T22:41:45.4987504Z           [36m<div[39m
2025-06-04T22:41:45.4987803Z             [33mclass[39m=[32m"metric-card"[39m
2025-06-04T22:41:45.4987981Z           [36m>[39m
2025-06-04T22:41:45.4988159Z             [36m<h3>[39m
2025-06-04T22:41:45.4988396Z               [0mError Rates[0m
2025-06-04T22:41:45.4988587Z             [36m</h3>[39m
2025-06-04T22:41:45.4988773Z             [36m<div[39m
2025-06-04T22:41:45.4989259Z               [33mid[39m=[32m"error-metrics"[39m
2025-06-04T22:41:45.4989451Z             [36m>[39m
2025-06-04T22:41:45.4989645Z               [36m<div>[39m
2025-06-04T22:41:45.4989868Z                 [36m<span>[39m
2025-06-04T22:41:45.4990112Z                   [0mJS Errors:[0m
2025-06-04T22:41:45.4990336Z                 [36m</span>[39m
2025-06-04T22:41:45.4990571Z                 [36m<span>[39m
2025-06-04T22:41:45.4990805Z                   [0mLoading...[0m
2025-06-04T22:41:45.4991027Z                 [36m</span>[39m
2025-06-04T22:41:45.4991246Z               [36m</div>[39m
2025-06-04T22:41:45.4991429Z               [36m<div>[39m
2025-06-04T22:41:45.4991656Z                 [36m<span>[39m
2025-06-04T22:41:45.4991900Z                   [0mAPI Errors:[0m
2025-06-04T22:41:45.4992130Z                 [36m</span>[39m
2025-06-04T22:41:45.4992360Z                 [36m<span>[39m
2025-06-04T22:41:45.4992601Z                   [0mLoading...[0m
2025-06-04T22:41:45.4992917Z                 [36m</span>[39m
2025-06-04T22:41:45.4993147Z               [36m</div>[39m
2025-06-04T22:41:45.4993334Z               [36m<div>[39m
2025-06-04T22:41:45.4993554Z                 [36m<span>[39m
2025-06-04T22:41:45.4993779Z                   [0m404s:[0m
2025-06-04T22:41:45.4994003Z                 [36m</span>[39m
2025-06-04T22:41:45.4994247Z                 [36m<span>[39m
2025-06-04T22:41:45.4994749Z                   [0mLoading...[0m
2025-06-04T22:41:45.4994982Z                 [36m</span>[39m
2025-06-04T22:41:45.4995200Z               [36m</div>[39m
2025-06-04T22:41:45.4995380Z             [36m</div>[39m
2025-06-04T22:41:45.4995564Z           [36m</div>[39m
2025-06-04T22:41:45.4995735Z         [36m</div>[39m
2025-06-04T22:41:45.4995907Z         [36m<div[39m
2025-06-04T22:41:45.4996169Z           [33mclass[39m=[32m"mt-6"[39m
2025-06-04T22:41:45.4996341Z         [36m>[39m
2025-06-04T22:41:45.4996523Z           [36m<span[39m
2025-06-04T22:41:45.4996805Z             [33mid[39m=[32m"last-updated"[39m
2025-06-04T22:41:45.4996982Z           [36m>[39m
2025-06-04T22:41:45.4997241Z             [0mLast updated: Never[0m
2025-06-04T22:41:45.4997436Z           [36m</span>[39m
2025-06-04T22:41:45.4997618Z           [36m<button[39m
2025-06-04T22:41:45.4997898Z             [33mid[39m=[32m"refresh-btn"[39m
2025-06-04T22:41:45.4998076Z           [36m>[39m
2025-06-04T22:41:45.4998339Z             [0mRefresh Now[0m
2025-06-04T22:41:45.4998532Z           [36m</button>[39m
2025-06-04T22:41:45.4998708Z         [36m</div>[39m
2025-06-04T22:41:45.4998885Z       [36m</div>[39m
2025-06-04T22:41:45.4999053Z     [36m</div>[39m
2025-06-04T22:41:45.4999398Z   [36m</div>[39m
2025-06-04T22:41:45.4999589Z [36m</body>[39m
2025-06-04T22:41:45.5001010Z [90m [2m❯[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
2025-06-04T22:41:45.5002127Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
2025-06-04T22:41:45.5003222Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
2025-06-04T22:41:45.5004301Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
2025-06-04T22:41:45.5005158Z [36m [2m❯[22m src/components/monitoring/__tests__/RealUserMonitoring.astro.test.ts:[2m105:19[22m[39m
2025-06-04T22:41:45.5005345Z     [90m103| [39m
2025-06-04T22:41:45.5005864Z     [90m104| [39m    [90m// Check that the component renders with default title[39m
2025-06-04T22:41:45.5006447Z     [90m105| [39m    expect(screen.getByText('Real User Monitoring')).toBeInTheDocument…
2025-06-04T22:41:45.5006739Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.5006911Z     [90m106| [39m
2025-06-04T22:41:45.5007260Z     [90m107| [39m    [90m// Check for main sections[39m
2025-06-04T22:41:45.5007274Z 
2025-06-04T22:41:45.5007683Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[103/523]⎯[22m[39m
2025-06-04T22:41:45.5007702Z 
2025-06-04T22:41:45.5009043Z [41m[1m FAIL [22m[49m src/lib/ai/__tests__/performance-optimizations.test.ts[2m > [22madvanced performance optimizations[2m > [22mshould track performance metrics
2025-06-04T22:41:45.5009880Z [31m[1mAssertionError[22m: expected "spy" to be called 1 times, but got 0 times
2025-06-04T22:41:45.5009901Z 
2025-06-04T22:41:45.5010144Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.5010316Z [36m<html>[31m
2025-06-04T22:41:45.5010496Z   [36m<head />[31m
2025-06-04T22:41:45.5010671Z   [36m<body />[31m
2025-06-04T22:41:45.5010873Z [36m</html>[31m[39m
2025-06-04T22:41:45.5011582Z [36m [2m❯[22m src/lib/ai/__tests__/performance-optimizations.test.ts:[2m91:51[22m[39m
2025-06-04T22:41:45.5012037Z     [90m 89| [39m    [90m// Wrap in waitFor in case tracking is async[39m
2025-06-04T22:41:45.5012444Z     [90m 90| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.5013034Z     [90m 91| [39m      expect(performanceTracker.trackPerformance).toHaveBeenCalledTime…
2025-06-04T22:41:45.5013419Z     [90m   | [39m                                                  [31m^[39m
2025-06-04T22:41:45.5014260Z     [90m 92| [39m      [34mexpect[39m(performanceTracker[33m.[39mtrackPerformance)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.5014878Z     [90m 93| [39m        expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.5016331Z [90m [2m❯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
2025-06-04T22:41:45.5017523Z [90m [2m❯[22m checkCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
2025-06-04T22:41:45.5018873Z [90m [2m❯[22m Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m
2025-06-04T22:41:45.5018889Z 
2025-06-04T22:41:45.5019438Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[104/523]⎯[22m[39m
2025-06-04T22:41:45.5019453Z 
2025-06-04T22:41:45.5020902Z [41m[1m FAIL [22m[49m src/lib/ai/__tests__/performance-optimizations.test.ts[2m > [22madvanced performance optimizations[2m > [22mshould cache responses and return cached results
2025-06-04T22:41:45.5021790Z [31m[1mAssertionError[22m: expected "spy" to be called 2 times, but got 3 times[39m
2025-06-04T22:41:45.5022483Z [36m [2m❯[22m src/lib/ai/__tests__/performance-optimizations.test.ts:[2m135:26[22m[39m
2025-06-04T22:41:45.5022940Z     [90m133| [39m      { model[33m:[39m request[33m.[39mmodel }[33m,[39m
2025-06-04T22:41:45.5023304Z     [90m134| [39m    )
2025-06-04T22:41:45.5024001Z     [90m135| [39m    [34mexpect[39m(completeMock)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m2[39m)
2025-06-04T22:41:45.5024309Z     [90m   | [39m                         [31m^[39m
2025-06-04T22:41:45.5024485Z     [90m136| [39m
2025-06-04T22:41:45.5024924Z     [90m137| [39m    [90m// System message should always be included[39m
2025-06-04T22:41:45.5024936Z 
2025-06-04T22:41:45.5025313Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[105/523]⎯[22m[39m
2025-06-04T22:41:45.5025338Z 
2025-06-04T22:41:45.5026765Z [41m[1m FAIL [22m[49m src/lib/ai/__tests__/performance-optimizations.test.ts[2m > [22madvanced performance optimizations[2m > [22mshould optimize tokens for long conversations
2025-06-04T22:41:45.5027638Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ { …(2) }, ObjectContaining{…} ][90m
2025-06-04T22:41:45.5027651Z 
2025-06-04T22:41:45.5027774Z Received: 
2025-06-04T22:41:45.5027784Z 
2025-06-04T22:41:45.5027995Z [1m  1st spy call:
2025-06-04T22:41:45.5028006Z 
2025-06-04T22:41:45.5028196Z [22m[2m  [[22m
2025-06-04T22:41:45.5028355Z [31m+   [[90m
2025-06-04T22:41:45.5028519Z [2m      {[22m
2025-06-04T22:41:45.5028975Z [32m-     "asymmetricMatch": [Function asymmetricMatch],[90m
2025-06-04T22:41:45.5029506Z [32m-     "toString": [Function toString],[90m
2025-06-04T22:41:45.5029932Z [31m+       "content": "You are a helpful assistant.",[90m
2025-06-04T22:41:45.5030253Z [31m+       "name": "system",[90m
2025-06-04T22:41:45.5030561Z [31m+       "role": "system",[90m
2025-06-04T22:41:45.5030737Z [2m      },[22m
2025-06-04T22:41:45.5031008Z [32m-   ObjectContaining {[90m
2025-06-04T22:41:45.5031162Z [31m+   ],[90m
2025-06-04T22:41:45.5031320Z [31m+   {[90m
2025-06-04T22:41:45.5031598Z [2m      "model": "test-model",[22m
2025-06-04T22:41:45.5031866Z [31m+     "temperature": 1,[90m
2025-06-04T22:41:45.5032021Z [2m    },[22m
2025-06-04T22:41:45.5032167Z [2m  ][22m
2025-06-04T22:41:45.5032322Z [31m[90m
2025-06-04T22:41:45.5032341Z 
2025-06-04T22:41:45.5032553Z Number of calls: [1m1[22m
2025-06-04T22:41:45.5032701Z [31m[39m
2025-06-04T22:41:45.5033426Z [36m [2m❯[22m src/lib/ai/__tests__/performance-optimizations.test.ts:[2m201:26[22m[39m
2025-06-04T22:41:45.5033616Z     [90m199| [39m
2025-06-04T22:41:45.5034201Z     [90m200| [39m    [90m// The service should have been called with a subset of messages[39m
2025-06-04T22:41:45.5034807Z     [90m201| [39m    [34mexpect[39m(completeMock)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.5035326Z     [90m   | [39m                         [31m^[39m
2025-06-04T22:41:45.5035738Z     [90m202| [39m      expect[33m.[39m[34marrayContaining[39m([
2025-06-04T22:41:45.5036477Z     [90m203| [39m        expect[33m.[39m[34mobjectContaining[39m({ role[33m:[39m [32m'system'[39m })[33m,[39m
2025-06-04T22:41:45.5036491Z 
2025-06-04T22:41:45.5036863Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[106/523]⎯[22m[39m
2025-06-04T22:41:45.5036881Z 
2025-06-04T22:41:45.5038179Z [41m[1m FAIL [22m[49m src/lib/ai/__tests__/performance-optimizations.test.ts[2m > [22madvanced performance optimizations[2m > [22mshould handle rate limiting
2025-06-04T22:41:45.5038790Z [31m[1mAssertionError[22m: expected "spy" to be called 3 times, but got 0 times
2025-06-04T22:41:45.5038808Z 
2025-06-04T22:41:45.5039047Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.5039403Z [36m<html>[31m
2025-06-04T22:41:45.5039587Z   [36m<head />[31m
2025-06-04T22:41:45.5039768Z   [36m<body />[31m
2025-06-04T22:41:45.5039964Z [36m</html>[31m[39m
2025-06-04T22:41:45.5040644Z [36m [2m❯[22m src/lib/ai/__tests__/performance-optimizations.test.ts:[2m264:51[22m[39m
2025-06-04T22:41:45.5041067Z     [90m262| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
2025-06-04T22:41:45.5041614Z     [90m263| [39m      [90m// Wrap in waitFor as tracking might be async after rejection[39m
2025-06-04T22:41:45.5042479Z     [90m264| [39m      expect(performanceTracker.trackPerformance).toHaveBeenCalledTime…
2025-06-04T22:41:45.5042926Z     [90m   | [39m                                                  [31m^[39m
2025-06-04T22:41:45.5043535Z     [90m265| [39m      expect(performanceTracker.trackPerformance).toHaveBeenLastCalled…
2025-06-04T22:41:45.5043975Z     [90m266| [39m        expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.5045432Z [90m [2m❯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
2025-06-04T22:41:45.5046624Z [90m [2m❯[22m checkCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
2025-06-04T22:41:45.5047952Z [90m [2m❯[22m Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m
2025-06-04T22:41:45.5047976Z 
2025-06-04T22:41:45.5048403Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[107/523]⎯[22m[39m
2025-06-04T22:41:45.5048417Z 
2025-06-04T22:41:45.5050006Z [41m[1m FAIL [22m[49m src/lib/ai/__tests__/performance-optimizations.test.ts[2m > [22madvanced performance optimizations[2m > [22mshould try fallback models when primary model fails
2025-06-04T22:41:45.5050790Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ ObjectContaining{…} ][90m
2025-06-04T22:41:45.5050805Z 
2025-06-04T22:41:45.5050926Z Received: 
2025-06-04T22:41:45.5050954Z 
2025-06-04T22:41:45.5051160Z [1m  1st spy call:
2025-06-04T22:41:45.5051172Z 
2025-06-04T22:41:45.5051349Z [22m[2m  [[22m
2025-06-04T22:41:45.5051638Z [32m-   ObjectContaining {[90m
2025-06-04T22:41:45.5051973Z [32m-     "model": "fallback-model-1",[90m
2025-06-04T22:41:45.5052146Z [31m+   [[90m
2025-06-04T22:41:45.5052330Z [31m+     {[90m
2025-06-04T22:41:45.5052621Z [31m+       "content": "Hello",[90m
2025-06-04T22:41:45.5052897Z [31m+       "name": "user",[90m
2025-06-04T22:41:45.5053174Z [31m+       "role": "user",[90m
2025-06-04T22:41:45.5053365Z [31m+     },[90m
2025-06-04T22:41:45.5053523Z [31m+   ],[90m
2025-06-04T22:41:45.5053688Z [31m+   {[90m
2025-06-04T22:41:45.5054002Z [31m+     "model": "primary-model",[90m
2025-06-04T22:41:45.5054275Z [31m+     "temperature": 1,[90m
2025-06-04T22:41:45.5054447Z [2m    },[22m
2025-06-04T22:41:45.5054602Z [2m  ][22m
2025-06-04T22:41:45.5054761Z [31m[90m
2025-06-04T22:41:45.5054772Z 
2025-06-04T22:41:45.5055226Z Number of calls: [1m1[22m
2025-06-04T22:41:45.5055377Z [31m[39m
2025-06-04T22:41:45.5056098Z [36m [2m❯[22m src/lib/ai/__tests__/performance-optimizations.test.ts:[2m312:26[22m[39m
2025-06-04T22:41:45.5056280Z     [90m310| [39m
2025-06-04T22:41:45.5056709Z     [90m311| [39m    [90m// Should have tried the fallback model[39m
2025-06-04T22:41:45.5057299Z     [90m312| [39m    [34mexpect[39m(completeMock)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.5057639Z     [90m   | [39m                         [31m^[39m
2025-06-04T22:41:45.5058058Z     [90m313| [39m      expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.5058531Z     [90m314| [39m        model[33m:[39m [32m'fallback-model-1'[39m[33m,[39m
2025-06-04T22:41:45.5058544Z 
2025-06-04T22:41:45.5058923Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[108/523]⎯[22m[39m
2025-06-04T22:41:45.5058934Z 
2025-06-04T22:41:45.5060385Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mSingleton Pattern[2m > [22mshould return the same instance when called multiple times
2025-06-04T22:41:45.5061216Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mSingleton Pattern[2m > [22mshould initialize with default configuration
2025-06-04T22:41:45.5062338Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Loading[2m > [22mshould load default configuration when no environment variables are set
2025-06-04T22:41:45.5063177Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Loading[2m > [22mshould override defaults with environment variables
2025-06-04T22:41:45.5064053Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Loading[2m > [22mshould handle invalid environment variable values gracefully
2025-06-04T22:41:45.5064839Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return thresholds configuration
2025-06-04T22:41:45.5065630Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return layer weights configuration
2025-06-04T22:41:45.5066420Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return python service configuration
2025-06-04T22:41:45.5067176Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return cache configuration
2025-06-04T22:41:45.5067963Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return security configuration
2025-06-04T22:41:45.5068904Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return performance configuration
2025-06-04T22:41:45.5069957Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return ML toolkit configuration
2025-06-04T22:41:45.5070732Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return logging configuration
2025-06-04T22:41:45.5071578Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Updates[2m > [22mshould update configuration successfully with valid data
2025-06-04T22:41:45.5072393Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Updates[2m > [22mshould throw error when updating with invalid data
2025-06-04T22:41:45.5073202Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Updates[2m > [22mshould preserve unchanged configuration sections
2025-06-04T22:41:45.5074019Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Validation[2m > [22mshould return no errors for valid configuration
2025-06-04T22:41:45.5074832Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Validation[2m > [22mshould detect validation errors in configuration
2025-06-04T22:41:45.5075653Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mProduction Readiness Check[2m > [22mshould identify missing production requirements
2025-06-04T22:41:45.5076558Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mProduction Readiness Check[2m > [22mshould pass production readiness check with proper configuration
2025-06-04T22:41:45.5077501Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mProduction Readiness Check[2m > [22mshould warn about debug logging in production
2025-06-04T22:41:45.5078274Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Summary[2m > [22mshould provide configuration summary
2025-06-04T22:41:45.5079227Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Summary[2m > [22mshould include only summary information for ML toolkits
2025-06-04T22:41:45.5080063Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Reload[2m > [22mshould reload configuration from environment variables
2025-06-04T22:41:45.5080884Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mUtility Functions[2m > [22mshould provide configuration through utility functions
2025-06-04T22:41:45.5081743Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mEnvironment Variable Parsing[2m > [22mshould parse boolean environment variables correctly
2025-06-04T22:41:45.5082599Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mEnvironment Variable Parsing[2m > [22mshould parse numeric environment variables correctly
2025-06-04T22:41:45.5083446Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mEnvironment Variable Parsing[2m > [22mshould parse float environment variables correctly
2025-06-04T22:41:45.5084410Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mLayer Weights Validation[2m > [22mshould accept valid layer weights that sum to 1.0
2025-06-04T22:41:45.5085422Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mLayer Weights Validation[2m > [22mshould accept layer weights that do not sum to 1.0 (normalization can be done elsewhere)
2025-06-04T22:41:45.5085784Z [31m[1mTypeError[22m: Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T22:41:45.5086104Z [36m [2m❯[22m src/lib/ai/bias-detection/config.test.ts:[2m46:41[22m[39m
2025-06-04T22:41:45.5086211Z     [90m 44| [39m
2025-06-04T22:41:45.5086409Z     [90m 45| [39m    [90m// Reset singleton instance[39m
2025-06-04T22:41:45.5086857Z     [90m 46| [39m    ([33mBiasDetectionConfigManager[39m [35mas[39m any)[33m.[39minstance [33m=[39m undefined[33m;[39m
2025-06-04T22:41:45.5087062Z     [90m   | [39m                                        [31m^[39m
2025-06-04T22:41:45.5087198Z     [90m 47| [39m  })[33m;[39m
2025-06-04T22:41:45.5087292Z     [90m 48| [39m
2025-06-04T22:41:45.5087301Z 
2025-06-04T22:41:45.5087514Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[109/523]⎯[22m[39m
2025-06-04T22:41:45.5087521Z 
2025-06-04T22:41:45.5088372Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mSingleton Pattern[2m > [22mshould return the same instance when called multiple times
2025-06-04T22:41:45.5089260Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mSingleton Pattern[2m > [22mshould initialize with default configuration
2025-06-04T22:41:45.5090173Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Loading[2m > [22mshould load default configuration when no environment variables are set
2025-06-04T22:41:45.5091000Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Loading[2m > [22mshould override defaults with environment variables
2025-06-04T22:41:45.5091975Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Loading[2m > [22mshould handle invalid environment variable values gracefully
2025-06-04T22:41:45.5092762Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return thresholds configuration
2025-06-04T22:41:45.5093559Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return layer weights configuration
2025-06-04T22:41:45.5094353Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return python service configuration
2025-06-04T22:41:45.5095100Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return cache configuration
2025-06-04T22:41:45.5095866Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return security configuration
2025-06-04T22:41:45.5096637Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return performance configuration
2025-06-04T22:41:45.5097405Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return ML toolkit configuration
2025-06-04T22:41:45.5098313Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Sections[2m > [22mshould return logging configuration
2025-06-04T22:41:45.5099346Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Updates[2m > [22mshould update configuration successfully with valid data
2025-06-04T22:41:45.5100171Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Updates[2m > [22mshould throw error when updating with invalid data
2025-06-04T22:41:45.5100977Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Updates[2m > [22mshould preserve unchanged configuration sections
2025-06-04T22:41:45.5101808Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Validation[2m > [22mshould return no errors for valid configuration
2025-06-04T22:41:45.5102644Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Validation[2m > [22mshould detect validation errors in configuration
2025-06-04T22:41:45.5103482Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mProduction Readiness Check[2m > [22mshould identify missing production requirements
2025-06-04T22:41:45.5104394Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mProduction Readiness Check[2m > [22mshould pass production readiness check with proper configuration
2025-06-04T22:41:45.5105203Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mProduction Readiness Check[2m > [22mshould warn about debug logging in production
2025-06-04T22:41:45.5105973Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Summary[2m > [22mshould provide configuration summary
2025-06-04T22:41:45.5106933Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Summary[2m > [22mshould include only summary information for ML toolkits
2025-06-04T22:41:45.5107776Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mConfiguration Reload[2m > [22mshould reload configuration from environment variables
2025-06-04T22:41:45.5108590Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mUtility Functions[2m > [22mshould provide configuration through utility functions
2025-06-04T22:41:45.5109646Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mEnvironment Variable Parsing[2m > [22mshould parse boolean environment variables correctly
2025-06-04T22:41:45.5110516Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mEnvironment Variable Parsing[2m > [22mshould parse numeric environment variables correctly
2025-06-04T22:41:45.5111371Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mEnvironment Variable Parsing[2m > [22mshould parse float environment variables correctly
2025-06-04T22:41:45.5112189Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mLayer Weights Validation[2m > [22mshould accept valid layer weights that sum to 1.0
2025-06-04T22:41:45.5113185Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mBiasDetectionConfigManager[2m > [22mLayer Weights Validation[2m > [22mshould accept layer weights that do not sum to 1.0 (normalization can be done elsewhere)
2025-06-04T22:41:45.5113665Z [31m[1mTypeError[22m: Cannot set properties of undefined (setting 'instance')[39m
2025-06-04T22:41:45.5113979Z [36m [2m❯[22m src/lib/ai/bias-detection/config.test.ts:[2m54:41[22m[39m
2025-06-04T22:41:45.5114085Z     [90m 52| [39m    
2025-06-04T22:41:45.5114295Z     [90m 53| [39m    [90m// Reset singleton instance[39m
2025-06-04T22:41:45.5114737Z     [90m 54| [39m    ([33mBiasDetectionConfigManager[39m [35mas[39m any)[33m.[39minstance [33m=[39m undefined[33m;[39m
2025-06-04T22:41:45.5114936Z     [90m   | [39m                                        [31m^[39m
2025-06-04T22:41:45.5115067Z     [90m 55| [39m  })[33m;[39m
2025-06-04T22:41:45.5115163Z     [90m 56| [39m
2025-06-04T22:41:45.5115177Z 
2025-06-04T22:41:45.5115382Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[110/523]⎯[22m[39m
2025-06-04T22:41:45.5115396Z 
2025-06-04T22:41:45.5116063Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mConfiguration Integration[2m > [22mshould work with the exported singleton instance
2025-06-04T22:41:45.5116427Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'getConfig')[39m
2025-06-04T22:41:45.5116738Z [36m [2m❯[22m src/lib/ai/bias-detection/config.test.ts:[2m503:40[22m[39m
2025-06-04T22:41:45.5117107Z     [90m501| [39m[34mdescribe[39m([32m'Configuration Integration'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5117517Z     [90m502| [39m  [34mit[39m([32m'should work with the exported singleton instance'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5117920Z     [90m503| [39m    [35mconst[39m config [33m=[39m biasDetectionConfig[33m.[39m[34mgetConfig[39m()[33m;[39m
2025-06-04T22:41:45.5118120Z     [90m   | [39m                                       [31m^[39m
2025-06-04T22:41:45.5118425Z     [90m504| [39m    [34mexpect[39m(config)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
2025-06-04T22:41:45.5118847Z     [90m505| [39m    [34mexpect[39m(config[33m.[39menvironment)[33m.[39m[34mtoBe[39m([32m'development'[39m)[33m;[39m
2025-06-04T22:41:45.5118854Z 
2025-06-04T22:41:45.5119058Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[111/523]⎯[22m[39m
2025-06-04T22:41:45.5119065Z 
2025-06-04T22:41:45.5120037Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/config.test.ts[2m > [22mConfiguration Integration[2m > [22mshould maintain state across multiple calls
2025-06-04T22:41:45.5120415Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'getConfig')[39m
2025-06-04T22:41:45.5120732Z [36m [2m❯[22m src/lib/ai/bias-detection/config.test.ts:[2m509:41[22m[39m
2025-06-04T22:41:45.5120837Z     [90m507| [39m
2025-06-04T22:41:45.5121233Z     [90m508| [39m  [34mit[39m([32m'should maintain state across multiple calls'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5121649Z     [90m509| [39m    [35mconst[39m config1 [33m=[39m biasDetectionConfig[33m.[39m[34mgetConfig[39m()[33m;[39m
2025-06-04T22:41:45.5121845Z     [90m   | [39m                                        [31m^[39m
2025-06-04T22:41:45.5122246Z     [90m510| [39m    [35mconst[39m config2 [33m=[39m biasDetectionConfig[33m.[39m[34mgetConfig[39m()[33m;[39m
2025-06-04T22:41:45.5122347Z     [90m511| [39m    
2025-06-04T22:41:45.5122355Z 
2025-06-04T22:41:45.5122571Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[112/523]⎯[22m[39m
2025-06-04T22:41:45.5122578Z 
2025-06-04T22:41:45.5123448Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mConstructor and Initialization[2m > [22mshould initialize with default options
2025-06-04T22:41:45.5124307Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mConstructor and Initialization[2m > [22mshould initialize with custom options
2025-06-04T22:41:45.5125244Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mConstructor and Initialization[2m > [22mshould log initialization
2025-06-04T22:41:45.5126060Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould analyze emotion successfully
2025-06-04T22:41:45.5126869Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould handle empty text input
2025-06-04T22:41:45.5127685Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould handle null or undefined text
2025-06-04T22:41:45.5128454Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould sanitize HTML input
2025-06-04T22:41:45.5129483Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould use secure processing when enabled
2025-06-04T22:41:45.5130328Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould handle provider errors gracefully
2025-06-04T22:41:45.5131199Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould filter emotions below confidence threshold
2025-06-04T22:41:45.5131999Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mSingle Emotion Analysis[2m > [22mshould handle different languages
2025-06-04T22:41:45.5132847Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould process batch emotions successfully
2025-06-04T22:41:45.5133635Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould handle empty batch input
2025-06-04T22:41:45.5134592Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould split large batches appropriately
2025-06-04T22:41:45.5135697Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould handle batch processing errors
2025-06-04T22:41:45.5136595Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mBatch Emotion Analysis[2m > [22mshould use adaptive batch sizing when enabled
2025-06-04T22:41:45.5137440Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mCaching Functionality[2m > [22mshould cache analysis results when enabled
2025-06-04T22:41:45.5138248Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mCaching Functionality[2m > [22mshould bypass cache when disabled
2025-06-04T22:41:45.5139008Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mCaching Functionality[2m > [22mshould respect cache TTL
2025-06-04T22:41:45.5140038Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mPerformance Monitoring[2m > [22mshould log performance metrics
2025-06-04T22:41:45.5140887Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mPerformance Monitoring[2m > [22mshould track batch processing performance
2025-06-04T22:41:45.5141896Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mRisk Factor Detection[2m > [22mshould detect high-risk emotional states
2025-06-04T22:41:45.5142820Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mRisk Factor Detection[2m > [22mshould provide appropriate recommendations for risk factors
2025-06-04T22:41:45.5143735Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mContextual Factor Analysis[2m > [22mshould identify contextual factors affecting emotions
2025-06-04T22:41:45.5144583Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mContextual Factor Analysis[2m > [22mshould handle multiple contextual factors
2025-06-04T22:41:45.5145429Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle provider unavailability
2025-06-04T22:41:45.5146434Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle FHE service unavailability when secure processing is enabled
2025-06-04T22:41:45.5147286Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle very long text input
2025-06-04T22:41:45.5148155Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle special characters and emojis
2025-06-04T22:41:45.5149018Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould handle network timeouts gracefully
2025-06-04T22:41:45.5150077Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mError Handling and Edge Cases[2m > [22mshould validate emotion data structure
2025-06-04T22:41:45.5151038Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mConfiguration and Options[2m > [22mshould respect sensitivity settings
2025-06-04T22:41:45.5151905Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mConfiguration and Options[2m > [22mshould handle different confidence thresholds
2025-06-04T22:41:45.5152775Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/EmotionDetectionEngine.test.ts[2m > [22mEmotionDetectionEngine[2m > [22mConfiguration and Options[2m > [22mshould handle optional features being disabled
2025-06-04T22:41:45.5153128Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'debug')[39m
2025-06-04T22:41:45.5153632Z [36m [2m❯[22m new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m200:12[22m[39m
2025-06-04T22:41:45.5154144Z     [90m198| [39m    [35mthis[39m[33m.[39moptions [33m=[39m { [33m...[39m[35mthis[39m[33m.[39mdefaultOptions[33m,[39m [33m...[39moptions }
2025-06-04T22:41:45.5154572Z     [90m199| [39m    [35mthis[39m[33m.[39mcurrentBatchSize [33m=[39m [35mthis[39m[33m.[39moptions[33m.[39mbatchSize
2025-06-04T22:41:45.5154954Z     [90m200| [39m    logger[33m.[39m[34mdebug[39m([32m'EmotionDetectionEngine initialized'[39m[33m,[39m {
2025-06-04T22:41:45.5155105Z     [90m   | [39m           [31m^[39m
2025-06-04T22:41:45.5155379Z     [90m201| [39m      options[33m:[39m [35mthis[39m[33m.[39moptions[33m,[39m
2025-06-04T22:41:45.5155612Z     [90m202| [39m    })
2025-06-04T22:41:45.5155990Z [90m [2m❯[22m src/lib/ai/emotions/EmotionDetectionEngine.test.ts:[2m130:21[22m[39m
2025-06-04T22:41:45.5155999Z 
2025-06-04T22:41:45.5156215Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[113/523]⎯[22m[39m
2025-06-04T22:41:45.5156222Z 
2025-06-04T22:41:45.5157045Z [41m[1m FAIL [22m[49m src/lib/analytics/__tests__/breach-analytics.test.ts[2m > [22mbreachAnalytics[2m > [22mgenerateMetrics[2m > [22mshould generate breach metrics for the given timeframe
2025-06-04T22:41:45.5157355Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.5157716Z [36m [2m❯[22m src/lib/analytics/__tests__/breach-analytics.test.ts:[2m141:23[22m[39m
2025-06-04T22:41:45.5158027Z     [90m139| [39m      const metrics = await BreachAnalytics.generateMetrics(mockTimefr…
2025-06-04T22:41:45.5158132Z     [90m140| [39m
2025-06-04T22:41:45.5158380Z     [90m141| [39m      [34mexpect[39m(metrics)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.5158557Z     [90m   | [39m                      [31m^[39m
2025-06-04T22:41:45.5158790Z     [90m142| [39m        totalBreaches[33m:[39m [34m2[39m[33m,[39m
2025-06-04T22:41:45.5158960Z     [90m143| [39m        bySeverity[33m:[39m {
2025-06-04T22:41:45.5158968Z 
2025-06-04T22:41:45.5159285Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[114/523]⎯[22m[39m
2025-06-04T22:41:45.5159293Z 
2025-06-04T22:41:45.5160045Z [41m[1m FAIL [22m[49m src/lib/analytics/__tests__/breach-analytics.test.ts[2m > [22mbreachAnalytics[2m > [22manalyzeTrends[2m > [22mshould analyze breach trends over time
2025-06-04T22:41:45.5160342Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.5160704Z [36m [2m❯[22m src/lib/analytics/__tests__/breach-analytics.test.ts:[2m193:25[22m[39m
2025-06-04T22:41:45.5160801Z     [90m191| [39m
2025-06-04T22:41:45.5161171Z     [90m192| [39m      [34mexpect[39m(trends)[33m.[39m[34mtoHaveLength[39m([34m7[39m) [90m// 7 days[39m
2025-06-04T22:41:45.5161464Z     [90m193| [39m      [34mexpect[39m(trends[[34m0[39m])[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.5161634Z     [90m   | [39m                        [31m^[39m
2025-06-04T22:41:45.5162041Z     [90m194| [39m        timestamp[33m:[39m mockTimeframe[33m.[39m[35mfrom[39m[33m.[39m[34mgetTime[39m()[33m,[39m
2025-06-04T22:41:45.5162532Z     [90m195| [39m        breaches[33m:[39m expect[33m.[39m[34many[39m([33mNumber[39m)[33m,[39m
2025-06-04T22:41:45.5162542Z 
2025-06-04T22:41:45.5162751Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[115/523]⎯[22m[39m
2025-06-04T22:41:45.5162759Z 
2025-06-04T22:41:45.5163480Z [41m[1m FAIL [22m[49m src/lib/analytics/__tests__/breach-analytics.test.ts[2m > [22mbreachAnalytics[2m > [22mpredictBreaches[2m > [22mshould predict future breaches
2025-06-04T22:41:45.5163774Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.5164146Z [36m [2m❯[22m src/lib/analytics/__tests__/breach-analytics.test.ts:[2m214:30[22m[39m
2025-06-04T22:41:45.5164249Z     [90m212| [39m
2025-06-04T22:41:45.5164579Z     [90m213| [39m      [34mexpect[39m(predictions)[33m.[39m[34mtoHaveLength[39m([34m2[39m)
2025-06-04T22:41:45.5164896Z     [90m214| [39m      [34mexpect[39m(predictions[[34m0[39m])[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.5165082Z     [90m   | [39m                             [31m^[39m
2025-06-04T22:41:45.5165421Z     [90m215| [39m        timestamp[33m:[39m expect[33m.[39m[34many[39m([33mNumber[39m)[33m,[39m
2025-06-04T22:41:45.5165666Z     [90m216| [39m        predictedBreaches[33m:[39m [34m3[39m[33m,[39m
2025-06-04T22:41:45.5165674Z 
2025-06-04T22:41:45.5165879Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[116/523]⎯[22m[39m
2025-06-04T22:41:45.5165885Z 
2025-06-04T22:41:45.5166670Z [41m[1m FAIL [22m[49m src/lib/analytics/__tests__/breach-analytics.test.ts[2m > [22mbreachAnalytics[2m > [22mgenerateReport[2m > [22mshould generate a comprehensive analytics report
2025-06-04T22:41:45.5167089Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.5167451Z [36m [2m❯[22m src/lib/analytics/__tests__/breach-analytics.test.ts:[2m313:22[22m[39m
2025-06-04T22:41:45.5167762Z     [90m311| [39m      const report = await BreachAnalytics.generateReport(mockTimefram…
2025-06-04T22:41:45.5167858Z     [90m312| [39m
2025-06-04T22:41:45.5168120Z     [90m313| [39m      [34mexpect[39m(report)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.5168276Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.5168444Z     [90m314| [39m        timeframe[33m:[39m {
2025-06-04T22:41:45.5168879Z     [90m315| [39m          [35mfrom[39m[33m:[39m mockTimeframe[33m.[39m[35mfrom[39m[33m.[39m[34mtoISOString[39m()[33m,[39m
2025-06-04T22:41:45.5168886Z 
2025-06-04T22:41:45.5169187Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[117/523]⎯[22m[39m
2025-06-04T22:41:45.5169204Z 
2025-06-04T22:41:45.5169931Z [41m[1m FAIL [22m[49m src/lib/audit/__tests__/analysis.test.ts[2m > [22mAudit Analysis[2m > [22mdetectHighFrequency[2m > [22mshould detect high frequency access patterns
2025-06-04T22:41:45.5170449Z [31m[1mAssertionError[22m: expected { type: 'high_frequency', …(3) } to match object { type: 'high_frequency', …(3) }[39m
2025-06-04T22:41:45.5170457Z 
2025-06-04T22:41:45.5170573Z [32m- Expected[39m
2025-06-04T22:41:45.5170803Z [31m+ Received[39m
2025-06-04T22:41:45.5170817Z 
2025-06-04T22:41:45.5170909Z [2m  {[22m
2025-06-04T22:41:45.5171129Z [2m    "description": StringContaining "user1",[22m
2025-06-04T22:41:45.5171282Z [32m-   "relatedLogs": {[39m
2025-06-04T22:41:45.5171546Z [32m-     "asymmetricMatch": [Function asymmetricMatch],[39m
2025-06-04T22:41:45.5171742Z [32m-     "toString": [Function toString],[39m
2025-06-04T22:41:45.5171882Z [31m+   "relatedLogs": [[39m
2025-06-04T22:41:45.5171984Z [31m+     {[39m
2025-06-04T22:41:45.5172151Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5172291Z [31m+       "id": "log0",[39m
2025-06-04T22:41:45.5172443Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5172603Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5172790Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5172947Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5173167Z [31m+       "timestamp": 2025-06-04T21:55:09.450Z,[39m
2025-06-04T22:41:45.5173330Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5173433Z [31m+     },[39m
2025-06-04T22:41:45.5173539Z [31m+     {[39m
2025-06-04T22:41:45.5173689Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5173831Z [31m+       "id": "log1",[39m
2025-06-04T22:41:45.5173975Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5174133Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5174321Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5174477Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5174700Z [31m+       "timestamp": 2025-06-04T21:54:09.450Z,[39m
2025-06-04T22:41:45.5174852Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5174959Z [31m+     },[39m
2025-06-04T22:41:45.5175060Z [31m+     {[39m
2025-06-04T22:41:45.5175205Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5175347Z [31m+       "id": "log2",[39m
2025-06-04T22:41:45.5175488Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5175656Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5175832Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5175993Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5176201Z [31m+       "timestamp": 2025-06-04T21:53:09.450Z,[39m
2025-06-04T22:41:45.5176353Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5176458Z [31m+     },[39m
2025-06-04T22:41:45.5176555Z [31m+     {[39m
2025-06-04T22:41:45.5176704Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5176982Z [31m+       "id": "log3",[39m
2025-06-04T22:41:45.5177129Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5177286Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5177462Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5177620Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5177822Z [31m+       "timestamp": 2025-06-04T21:52:09.450Z,[39m
2025-06-04T22:41:45.5177974Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5178075Z [31m+     },[39m
2025-06-04T22:41:45.5178185Z [31m+     {[39m
2025-06-04T22:41:45.5178331Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5178466Z [31m+       "id": "log4",[39m
2025-06-04T22:41:45.5178612Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5178767Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5178947Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5179223Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5179435Z [31m+       "timestamp": 2025-06-04T21:51:09.450Z,[39m
2025-06-04T22:41:45.5179590Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5179692Z [31m+     },[39m
2025-06-04T22:41:45.5179797Z [31m+     {[39m
2025-06-04T22:41:45.5179943Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5180084Z [31m+       "id": "log5",[39m
2025-06-04T22:41:45.5180225Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5180379Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5180558Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5180832Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5181049Z [31m+       "timestamp": 2025-06-04T21:50:09.450Z,[39m
2025-06-04T22:41:45.5181196Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5181301Z [31m+     },[39m
2025-06-04T22:41:45.5181400Z [31m+     {[39m
2025-06-04T22:41:45.5181542Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5181683Z [31m+       "id": "log6",[39m
2025-06-04T22:41:45.5181825Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5181991Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5182165Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5182322Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5182523Z [31m+       "timestamp": 2025-06-04T21:49:09.450Z,[39m
2025-06-04T22:41:45.5182670Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5182775Z [31m+     },[39m
2025-06-04T22:41:45.5182875Z [31m+     {[39m
2025-06-04T22:41:45.5183025Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5183165Z [31m+       "id": "log7",[39m
2025-06-04T22:41:45.5183310Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5183466Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5183643Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5183810Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5184014Z [31m+       "timestamp": 2025-06-04T21:48:09.450Z,[39m
2025-06-04T22:41:45.5184169Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5184274Z [31m+     },[39m
2025-06-04T22:41:45.5184378Z [31m+     {[39m
2025-06-04T22:41:45.5184523Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5184659Z [31m+       "id": "log8",[39m
2025-06-04T22:41:45.5184807Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5184963Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5185142Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5185297Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5185517Z [31m+       "timestamp": 2025-06-04T21:47:09.450Z,[39m
2025-06-04T22:41:45.5185665Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5185766Z [31m+     },[39m
2025-06-04T22:41:45.5185870Z [31m+     {[39m
2025-06-04T22:41:45.5186016Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5186158Z [31m+       "id": "log9",[39m
2025-06-04T22:41:45.5186300Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5186461Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5186634Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5186910Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5187120Z [31m+       "timestamp": 2025-06-04T21:46:09.450Z,[39m
2025-06-04T22:41:45.5187270Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5187376Z [31m+     },[39m
2025-06-04T22:41:45.5187475Z [31m+     {[39m
2025-06-04T22:41:45.5187627Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5187772Z [31m+       "id": "log10",[39m
2025-06-04T22:41:45.5187917Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5188077Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5188249Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5188408Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5188614Z [31m+       "timestamp": 2025-06-04T21:45:09.450Z,[39m
2025-06-04T22:41:45.5188768Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5188869Z [31m+     },[39m
2025-06-04T22:41:45.5188969Z [31m+     {[39m
2025-06-04T22:41:45.5189296Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5189471Z [31m+       "id": "log11",[39m
2025-06-04T22:41:45.5189619Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5189776Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5189962Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5190117Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5190324Z [31m+       "timestamp": 2025-06-04T21:44:09.450Z,[39m
2025-06-04T22:41:45.5190601Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5190716Z [31m+     },[39m
2025-06-04T22:41:45.5190823Z [31m+     {[39m
2025-06-04T22:41:45.5190973Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5191114Z [31m+       "id": "log12",[39m
2025-06-04T22:41:45.5191262Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5191417Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5191596Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5191748Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5191963Z [31m+       "timestamp": 2025-06-04T21:43:09.450Z,[39m
2025-06-04T22:41:45.5192112Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5192213Z [31m+     },[39m
2025-06-04T22:41:45.5192318Z [31m+     {[39m
2025-06-04T22:41:45.5192462Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5192606Z [31m+       "id": "log13",[39m
2025-06-04T22:41:45.5192747Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5192910Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5193090Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5193241Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5193456Z [31m+       "timestamp": 2025-06-04T21:42:09.450Z,[39m
2025-06-04T22:41:45.5193603Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5193708Z [31m+     },[39m
2025-06-04T22:41:45.5193808Z [31m+     {[39m
2025-06-04T22:41:45.5193957Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5194098Z [31m+       "id": "log14",[39m
2025-06-04T22:41:45.5194247Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5194409Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5194583Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5194743Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5194945Z [31m+       "timestamp": 2025-06-04T21:41:09.450Z,[39m
2025-06-04T22:41:45.5195100Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5195201Z [31m+     },[39m
2025-06-04T22:41:45.5195304Z [31m+     {[39m
2025-06-04T22:41:45.5195456Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5195597Z [31m+       "id": "log15",[39m
2025-06-04T22:41:45.5195743Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5195900Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5196078Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5196231Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5196433Z [31m+       "timestamp": 2025-06-04T21:40:09.450Z,[39m
2025-06-04T22:41:45.5196751Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5196852Z [31m+     },[39m
2025-06-04T22:41:45.5196956Z [31m+     {[39m
2025-06-04T22:41:45.5197099Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5197243Z [31m+       "id": "log16",[39m
2025-06-04T22:41:45.5197386Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5197543Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5197724Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5197880Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5198090Z [31m+       "timestamp": 2025-06-04T21:39:09.450Z,[39m
2025-06-04T22:41:45.5198237Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5198341Z [31m+     },[39m
2025-06-04T22:41:45.5198442Z [31m+     {[39m
2025-06-04T22:41:45.5198587Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5198732Z [31m+       "id": "log17",[39m
2025-06-04T22:41:45.5198875Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5199035Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5199327Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5199489Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5199695Z [31m+       "timestamp": 2025-06-04T21:38:09.450Z,[39m
2025-06-04T22:41:45.5206664Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5206865Z [31m+     },[39m
2025-06-04T22:41:45.5206990Z [31m+     {[39m
2025-06-04T22:41:45.5207156Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5207484Z [31m+       "id": "log18",[39m
2025-06-04T22:41:45.5207644Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5207819Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5208021Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5208182Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5208421Z [31m+       "timestamp": 2025-06-04T21:37:09.450Z,[39m
2025-06-04T22:41:45.5208581Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5208692Z [31m+     },[39m
2025-06-04T22:41:45.5208799Z [31m+     {[39m
2025-06-04T22:41:45.5208950Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5209374Z [31m+       "id": "log19",[39m
2025-06-04T22:41:45.5209554Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5209731Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5209918Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5210081Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5210319Z [31m+       "timestamp": 2025-06-04T21:36:09.450Z,[39m
2025-06-04T22:41:45.5210473Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5210582Z [31m+     },[39m
2025-06-04T22:41:45.5210684Z [31m+     {[39m
2025-06-04T22:41:45.5210841Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5210988Z [31m+       "id": "log20",[39m
2025-06-04T22:41:45.5211134Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5211298Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5211477Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5211646Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5211859Z [31m+       "timestamp": 2025-06-04T21:35:09.450Z,[39m
2025-06-04T22:41:45.5212016Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5212119Z [31m+     },[39m
2025-06-04T22:41:45.5212224Z [31m+     {[39m
2025-06-04T22:41:45.5212378Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5212519Z [31m+       "id": "log21",[39m
2025-06-04T22:41:45.5212671Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5212835Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5213022Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5213178Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5213383Z [31m+       "timestamp": 2025-06-04T21:34:09.450Z,[39m
2025-06-04T22:41:45.5213539Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5213640Z [31m+     },[39m
2025-06-04T22:41:45.5213744Z [31m+     {[39m
2025-06-04T22:41:45.5213895Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5214205Z [31m+       "id": "log22",[39m
2025-06-04T22:41:45.5214351Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5214510Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5214695Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5214851Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5215066Z [31m+       "timestamp": 2025-06-04T21:33:09.450Z,[39m
2025-06-04T22:41:45.5215223Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5215339Z [31m+     },[39m
2025-06-04T22:41:45.5215442Z [31m+     {[39m
2025-06-04T22:41:45.5215598Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5215740Z [31m+       "id": "log23",[39m
2025-06-04T22:41:45.5215883Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5216046Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5216226Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5216388Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5216604Z [31m+       "timestamp": 2025-06-04T21:32:09.450Z,[39m
2025-06-04T22:41:45.5216758Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5216862Z [31m+     },[39m
2025-06-04T22:41:45.5216963Z [31m+     {[39m
2025-06-04T22:41:45.5217115Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5217255Z [31m+       "id": "log24",[39m
2025-06-04T22:41:45.5217403Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5217561Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5217861Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5218023Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5218230Z [31m+       "timestamp": 2025-06-04T21:31:09.450Z,[39m
2025-06-04T22:41:45.5218386Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5218489Z [31m+     },[39m
2025-06-04T22:41:45.5218593Z [31m+     {[39m
2025-06-04T22:41:45.5218738Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5218886Z [31m+       "id": "log25",[39m
2025-06-04T22:41:45.5219035Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5219412Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5219606Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5219761Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5219978Z [31m+       "timestamp": 2025-06-04T21:30:09.450Z,[39m
2025-06-04T22:41:45.5220131Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5220240Z [31m+     },[39m
2025-06-04T22:41:45.5220340Z [31m+     {[39m
2025-06-04T22:41:45.5220495Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5220641Z [31m+       "id": "log26",[39m
2025-06-04T22:41:45.5220786Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5220947Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5221124Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5221278Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5221487Z [31m+       "timestamp": 2025-06-04T21:29:09.450Z,[39m
2025-06-04T22:41:45.5221636Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5221753Z [31m+     },[39m
2025-06-04T22:41:45.5221854Z [31m+     {[39m
2025-06-04T22:41:45.5222004Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5222144Z [31m+       "id": "log27",[39m
2025-06-04T22:41:45.5222286Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5222447Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5222621Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5222780Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5222988Z [31m+       "timestamp": 2025-06-04T21:28:09.450Z,[39m
2025-06-04T22:41:45.5223142Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5223248Z [31m+     },[39m
2025-06-04T22:41:45.5223348Z [31m+     {[39m
2025-06-04T22:41:45.5223501Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5223642Z [31m+       "id": "log28",[39m
2025-06-04T22:41:45.5223791Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5223948Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5224275Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5224432Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5224639Z [31m+       "timestamp": 2025-06-04T21:27:09.450Z,[39m
2025-06-04T22:41:45.5224935Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5225126Z [31m+     },[39m
2025-06-04T22:41:45.5225312Z [31m+     {[39m
2025-06-04T22:41:45.5225588Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5225834Z [31m+       "id": "log29",[39m
2025-06-04T22:41:45.5225994Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5226156Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5226339Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5226493Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5226710Z [31m+       "timestamp": 2025-06-04T21:26:09.450Z,[39m
2025-06-04T22:41:45.5226861Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5226968Z [2m      },[22m
2025-06-04T22:41:45.5227070Z [31m+     {[39m
2025-06-04T22:41:45.5227221Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5227368Z [31m+       "id": "log30",[39m
2025-06-04T22:41:45.5227511Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5227675Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5227852Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5228012Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5228216Z [31m+       "timestamp": 2025-06-04T21:25:09.450Z,[39m
2025-06-04T22:41:45.5228503Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5228620Z [31m+     },[39m
2025-06-04T22:41:45.5228724Z [31m+     {[39m
2025-06-04T22:41:45.5228879Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5229020Z [31m+       "id": "log31",[39m
2025-06-04T22:41:45.5229397Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5229570Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5229750Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5229928Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5230136Z [31m+       "timestamp": 2025-06-04T21:24:09.450Z,[39m
2025-06-04T22:41:45.5230292Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5230394Z [31m+     },[39m
2025-06-04T22:41:45.5230500Z [31m+     {[39m
2025-06-04T22:41:45.5230649Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5230788Z [31m+       "id": "log32",[39m
2025-06-04T22:41:45.5230935Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5231096Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5231277Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5231431Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5231641Z [31m+       "timestamp": 2025-06-04T21:23:09.450Z,[39m
2025-06-04T22:41:45.5231790Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5231892Z [31m+     },[39m
2025-06-04T22:41:45.5231999Z [31m+     {[39m
2025-06-04T22:41:45.5232146Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5232296Z [31m+       "id": "log33",[39m
2025-06-04T22:41:45.5232440Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5232598Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5232779Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5232934Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5233143Z [31m+       "timestamp": 2025-06-04T21:22:09.450Z,[39m
2025-06-04T22:41:45.5233292Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5233399Z [31m+     },[39m
2025-06-04T22:41:45.5233504Z [31m+     {[39m
2025-06-04T22:41:45.5233651Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5233797Z [31m+       "id": "log34",[39m
2025-06-04T22:41:45.5233939Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5234102Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5234278Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5234436Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5234644Z [31m+       "timestamp": 2025-06-04T21:21:09.450Z,[39m
2025-06-04T22:41:45.5234928Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5235035Z [31m+     },[39m
2025-06-04T22:41:45.5235135Z [31m+     {[39m
2025-06-04T22:41:45.5235290Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5235431Z [31m+       "id": "log35",[39m
2025-06-04T22:41:45.5235580Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5235738Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5235918Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5236081Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5236285Z [31m+       "timestamp": 2025-06-04T21:20:09.450Z,[39m
2025-06-04T22:41:45.5236441Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5236544Z [31m+     },[39m
2025-06-04T22:41:45.5236650Z [31m+     {[39m
2025-06-04T22:41:45.5236797Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5236936Z [31m+       "id": "log36",[39m
2025-06-04T22:41:45.5237083Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5237244Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5237426Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5237579Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5237788Z [31m+       "timestamp": 2025-06-04T21:19:09.450Z,[39m
2025-06-04T22:41:45.5237937Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5238038Z [31m+     },[39m
2025-06-04T22:41:45.5238142Z [31m+     {[39m
2025-06-04T22:41:45.5238412Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5238565Z [31m+       "id": "log37",[39m
2025-06-04T22:41:45.5238708Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5238871Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5239046Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5239323Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5239533Z [31m+       "timestamp": 2025-06-04T21:18:09.450Z,[39m
2025-06-04T22:41:45.5239682Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5239795Z [31m+     },[39m
2025-06-04T22:41:45.5239896Z [31m+     {[39m
2025-06-04T22:41:45.5240046Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5240186Z [31m+       "id": "log38",[39m
2025-06-04T22:41:45.5240329Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5240488Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5240666Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5240826Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5241035Z [31m+       "timestamp": 2025-06-04T21:17:09.450Z,[39m
2025-06-04T22:41:45.5241190Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5241291Z [31m+     },[39m
2025-06-04T22:41:45.5241391Z [31m+     {[39m
2025-06-04T22:41:45.5241544Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5241684Z [31m+       "id": "log39",[39m
2025-06-04T22:41:45.5241833Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5241990Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5242177Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5242332Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5242535Z [31m+       "timestamp": 2025-06-04T21:16:09.450Z,[39m
2025-06-04T22:41:45.5242691Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5242793Z [31m+     },[39m
2025-06-04T22:41:45.5242898Z [31m+     {[39m
2025-06-04T22:41:45.5243045Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5243185Z [31m+       "id": "log40",[39m
2025-06-04T22:41:45.5243338Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5243494Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5243676Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5243836Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5244045Z [31m+       "timestamp": 2025-06-04T21:15:09.450Z,[39m
2025-06-04T22:41:45.5244194Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5244296Z [31m+     },[39m
2025-06-04T22:41:45.5244403Z [31m+     {[39m
2025-06-04T22:41:45.5244680Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5244826Z [31m+       "id": "log41",[39m
2025-06-04T22:41:45.5244968Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5245191Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5245516Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5245789Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5246158Z [31m+       "timestamp": 2025-06-04T21:14:09.450Z,[39m
2025-06-04T22:41:45.5246372Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5246515Z [31m+     },[39m
2025-06-04T22:41:45.5246700Z [31m+     {[39m
2025-06-04T22:41:45.5246964Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5247209Z [31m+       "id": "log42",[39m
2025-06-04T22:41:45.5247455Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5247702Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5247883Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5248048Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5248259Z [31m+       "timestamp": 2025-06-04T21:13:09.450Z,[39m
2025-06-04T22:41:45.5248412Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5248515Z [31m+     },[39m
2025-06-04T22:41:45.5248638Z [31m+     {[39m
2025-06-04T22:41:45.5248914Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5249307Z [31m+       "id": "log43",[39m
2025-06-04T22:41:45.5249568Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5249843Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5250239Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5250560Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5250930Z [31m+       "timestamp": 2025-06-04T21:12:09.450Z,[39m
2025-06-04T22:41:45.5251202Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5251381Z [31m+     },[39m
2025-06-04T22:41:45.5251496Z [31m+     {[39m
2025-06-04T22:41:45.5251647Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5251794Z [31m+       "id": "log44",[39m
2025-06-04T22:41:45.5251953Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5252115Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5252400Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5252680Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5253053Z [31m+       "timestamp": 2025-06-04T21:11:09.450Z,[39m
2025-06-04T22:41:45.5253309Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5253422Z [31m+     },[39m
2025-06-04T22:41:45.5253590Z [31m+     {[39m
2025-06-04T22:41:45.5253854Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5254107Z [31m+       "id": "log45",[39m
2025-06-04T22:41:45.5254361Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5254631Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5254815Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5254980Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5255190Z [31m+       "timestamp": 2025-06-04T21:10:09.450Z,[39m
2025-06-04T22:41:45.5255347Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5255502Z [31m+     },[39m
2025-06-04T22:41:45.5255681Z [31m+     {[39m
2025-06-04T22:41:45.5255944Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5256188Z [31m+       "id": "log46",[39m
2025-06-04T22:41:45.5256443Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5256647Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5256958Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5257246Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5257608Z [31m+       "timestamp": 2025-06-04T21:09:09.450Z,[39m
2025-06-04T22:41:45.5257853Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5257958Z [31m+     },[39m
2025-06-04T22:41:45.5258061Z [31m+     {[39m
2025-06-04T22:41:45.5258215Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5258356Z [31m+       "id": "log47",[39m
2025-06-04T22:41:45.5258505Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5258980Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5259436Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5259711Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5260030Z [31m+       "timestamp": 2025-06-04T21:08:09.450Z,[39m
2025-06-04T22:41:45.5260193Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5260363Z [31m+     },[39m
2025-06-04T22:41:45.5260542Z [31m+     {[39m
2025-06-04T22:41:45.5260798Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5261058Z [31m+       "id": "log48",[39m
2025-06-04T22:41:45.5261310Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5261511Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5261699Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5261856Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5262069Z [31m+       "timestamp": 2025-06-04T21:07:09.450Z,[39m
2025-06-04T22:41:45.5262301Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5262489Z [31m+     },[39m
2025-06-04T22:41:45.5262669Z [31m+     {[39m
2025-06-04T22:41:45.5262927Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5263177Z [31m+       "id": "log49",[39m
2025-06-04T22:41:45.5263415Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5263589Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5263836Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5264121Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5264645Z [31m+       "timestamp": 2025-06-04T21:06:09.450Z,[39m
2025-06-04T22:41:45.5264902Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5265015Z [31m+     },[39m
2025-06-04T22:41:45.5265118Z [31m+     {[39m
2025-06-04T22:41:45.5265284Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5265430Z [31m+       "id": "log50",[39m
2025-06-04T22:41:45.5265578Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5265735Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5265911Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5266080Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5266283Z [31m+       "timestamp": 2025-06-04T21:05:09.450Z,[39m
2025-06-04T22:41:45.5266439Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5266547Z [31m+     },[39m
2025-06-04T22:41:45.5266740Z [31m+     {[39m
2025-06-04T22:41:45.5266999Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5267242Z [31m+       "id": "log51",[39m
2025-06-04T22:41:45.5267504Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5267778Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5268090Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5268284Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5268495Z [31m+       "timestamp": 2025-06-04T21:04:09.450Z,[39m
2025-06-04T22:41:45.5268645Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5268746Z [31m+     },[39m
2025-06-04T22:41:45.5268896Z [31m+     {[39m
2025-06-04T22:41:45.5269328Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5269597Z [31m+       "id": "log52",[39m
2025-06-04T22:41:45.5269846Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5270136Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5270443Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5270715Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5271082Z [31m+       "timestamp": 2025-06-04T21:03:09.450Z,[39m
2025-06-04T22:41:45.5271341Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5271517Z [31m+     },[39m
2025-06-04T22:41:45.5271626Z [31m+     {[39m
2025-06-04T22:41:45.5271782Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5271922Z [31m+       "id": "log53",[39m
2025-06-04T22:41:45.5272065Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5272227Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5272404Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5272564Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5272933Z [31m+       "timestamp": 2025-06-04T21:02:09.450Z,[39m
2025-06-04T22:41:45.5273226Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5273399Z [31m+     },[39m
2025-06-04T22:41:45.5273569Z [31m+     {[39m
2025-06-04T22:41:45.5273842Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5274084Z [31m+       "id": "log54",[39m
2025-06-04T22:41:45.5274342Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5274507Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5274691Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5274850Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5275068Z [31m+       "timestamp": 2025-06-04T21:01:09.450Z,[39m
2025-06-04T22:41:45.5275348Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5275523Z [31m+     },[39m
2025-06-04T22:41:45.5275695Z [31m+     {[39m
2025-06-04T22:41:45.5275950Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5276193Z [31m+       "id": "log55",[39m
2025-06-04T22:41:45.5276453Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5276729Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5277055Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5277326Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5277690Z [31m+       "timestamp": 2025-06-04T21:00:09.450Z,[39m
2025-06-04T22:41:45.5277948Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5278125Z [31m+     },[39m
2025-06-04T22:41:45.5278237Z [31m+     {[39m
2025-06-04T22:41:45.5278517Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5278782Z [31m+       "id": "log56",[39m
2025-06-04T22:41:45.5279036Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5279459Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5279775Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5279963Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5280177Z [31m+       "timestamp": 2025-06-04T20:59:09.450Z,[39m
2025-06-04T22:41:45.5280330Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5280446Z [31m+     },[39m
2025-06-04T22:41:45.5280548Z [31m+     {[39m
2025-06-04T22:41:45.5280699Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5280841Z [31m+       "id": "log57",[39m
2025-06-04T22:41:45.5280983Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5281148Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5281328Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5281494Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5281896Z [31m+       "timestamp": 2025-06-04T20:58:09.450Z,[39m
2025-06-04T22:41:45.5282061Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5282163Z [31m+     },[39m
2025-06-04T22:41:45.5282266Z [31m+     {[39m
2025-06-04T22:41:45.5282419Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5282562Z [31m+       "id": "log58",[39m
2025-06-04T22:41:45.5282710Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5282868Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5283058Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5283217Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5283435Z [31m+       "timestamp": 2025-06-04T20:57:09.450Z,[39m
2025-06-04T22:41:45.5283593Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5283696Z [31m+     },[39m
2025-06-04T22:41:45.5283800Z [31m+     {[39m
2025-06-04T22:41:45.5283949Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5284103Z [31m+       "id": "log59",[39m
2025-06-04T22:41:45.5284250Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5284412Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5284597Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5284755Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5284969Z [31m+       "timestamp": 2025-06-04T20:56:09.450Z,[39m
2025-06-04T22:41:45.5285120Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5285229Z [31m+     },[39m
2025-06-04T22:41:45.5285467Z [31m+   ],[39m
2025-06-04T22:41:45.5285619Z [2m    "severity": "high",[22m
2025-06-04T22:41:45.5285784Z [2m    "type": "high_frequency",[22m
2025-06-04T22:41:45.5285874Z [2m  }[22m
2025-06-04T22:41:45.5285884Z 
2025-06-04T22:41:45.5286219Z [36m [2m❯[22m src/lib/audit/__tests__/analysis.test.ts:[2m34:27[22m[39m
2025-06-04T22:41:45.5286322Z     [90m 32| [39m
2025-06-04T22:41:45.5286651Z     [90m 33| [39m      [34mexpect[39m(patterns)[33m.[39m[34mtoHaveLength[39m([34m1[39m)
2025-06-04T22:41:45.5286982Z     [90m 34| [39m      [34mexpect[39m(patterns[[34m0[39m])[33m.[39m[34mtoMatchObject[39m({
2025-06-04T22:41:45.5287160Z     [90m   | [39m                          [31m^[39m
2025-06-04T22:41:45.5287402Z     [90m 35| [39m        type[33m:[39m [32m'high_frequency'[39m[33m,[39m
2025-06-04T22:41:45.5287633Z     [90m 36| [39m        severity[33m:[39m [32m'high'[39m[33m,[39m
2025-06-04T22:41:45.5287641Z 
2025-06-04T22:41:45.5287869Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[118/523]⎯[22m[39m
2025-06-04T22:41:45.5287883Z 
2025-06-04T22:41:45.5288581Z [41m[1m FAIL [22m[49m src/lib/audit/__tests__/analysis.test.ts[2m > [22mAudit Analysis[2m > [22mdetectOddHours[2m > [22mshould detect access during unusual hours
2025-06-04T22:41:45.5289056Z [31m[1mAssertionError[22m: expected { type: 'odd_hours', …(3) } to match object { type: 'odd_hours', …(3) }[39m
2025-06-04T22:41:45.5289064Z 
2025-06-04T22:41:45.5289369Z [32m- Expected[39m
2025-06-04T22:41:45.5289611Z [31m+ Received[39m
2025-06-04T22:41:45.5289620Z 
2025-06-04T22:41:45.5289726Z [2m  {[22m
2025-06-04T22:41:45.5289985Z [2m    "description": StringContaining "user1",[22m
2025-06-04T22:41:45.5290139Z [32m-   "relatedLogs": {[39m
2025-06-04T22:41:45.5290410Z [32m-     "asymmetricMatch": [Function asymmetricMatch],[39m
2025-06-04T22:41:45.5290610Z [32m-     "toString": [Function toString],[39m
2025-06-04T22:41:45.5290761Z [31m+   "relatedLogs": [[39m
2025-06-04T22:41:45.5290865Z [31m+     {[39m
2025-06-04T22:41:45.5291029Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5291176Z [31m+       "id": "log0",[39m
2025-06-04T22:41:45.5291324Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5291493Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5291676Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5291842Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5292060Z [31m+       "timestamp": 2024-01-01T23:30:00.000Z,[39m
2025-06-04T22:41:45.5292221Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5292331Z [2m      },[22m
2025-06-04T22:41:45.5292480Z [32m-   "severity": "low",[39m
2025-06-04T22:41:45.5292585Z [31m+     {[39m
2025-06-04T22:41:45.5292734Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5292879Z [31m+       "id": "log1",[39m
2025-06-04T22:41:45.5293023Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5293182Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5293367Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5293530Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5293745Z [31m+       "timestamp": 2024-01-01T23:30:00.000Z,[39m
2025-06-04T22:41:45.5293896Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5294005Z [31m+     },[39m
2025-06-04T22:41:45.5294107Z [31m+     {[39m
2025-06-04T22:41:45.5294253Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5294397Z [31m+       "id": "log2",[39m
2025-06-04T22:41:45.5294545Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5294709Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5294887Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5295055Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5295269Z [31m+       "timestamp": 2024-01-02T00:30:00.000Z,[39m
2025-06-04T22:41:45.5295418Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5295525Z [31m+     },[39m
2025-06-04T22:41:45.5295626Z [31m+     {[39m
2025-06-04T22:41:45.5295777Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5296080Z [31m+       "id": "log3",[39m
2025-06-04T22:41:45.5296227Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5296385Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5296562Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5296724Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5296988Z [31m+       "timestamp": 2024-01-02T00:30:00.000Z,[39m
2025-06-04T22:41:45.5297270Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5297452Z [31m+     },[39m
2025-06-04T22:41:45.5297632Z [31m+     {[39m
2025-06-04T22:41:45.5297891Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5298132Z [31m+       "id": "log4",[39m
2025-06-04T22:41:45.5298385Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5298551Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5298735Z [31m+       "resourceType": "document",[39m
2025-06-04T22:41:45.5298965Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5299480Z [31m+       "timestamp": 2024-01-02T01:30:00.000Z,[39m
2025-06-04T22:41:45.5299753Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5299925Z [31m+     },[39m
2025-06-04T22:41:45.5300084Z [31m+   ],[39m
2025-06-04T22:41:45.5300240Z [31m+   "severity": "medium",[39m
2025-06-04T22:41:45.5300392Z [2m    "type": "odd_hours",[22m
2025-06-04T22:41:45.5300483Z [2m  }[22m
2025-06-04T22:41:45.5300490Z 
2025-06-04T22:41:45.5300957Z [36m [2m❯[22m src/lib/audit/__tests__/analysis.test.ts:[2m74:27[22m[39m
2025-06-04T22:41:45.5301196Z     [90m 72| [39m
2025-06-04T22:41:45.5301530Z     [90m 73| [39m      [34mexpect[39m(patterns)[33m.[39m[34mtoHaveLength[39m([34m1[39m)
2025-06-04T22:41:45.5301861Z     [90m 74| [39m      [34mexpect[39m(patterns[[34m0[39m])[33m.[39m[34mtoMatchObject[39m({
2025-06-04T22:41:45.5302035Z     [90m   | [39m                          [31m^[39m
2025-06-04T22:41:45.5302274Z     [90m 75| [39m        type[33m:[39m [32m'odd_hours'[39m[33m,[39m
2025-06-04T22:41:45.5302504Z     [90m 76| [39m        severity[33m:[39m [32m'low'[39m[33m,[39m
2025-06-04T22:41:45.5302512Z 
2025-06-04T22:41:45.5302728Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[119/523]⎯[22m[39m
2025-06-04T22:41:45.5302736Z 
2025-06-04T22:41:45.5303504Z [41m[1m FAIL [22m[49m src/lib/audit/__tests__/analysis.test.ts[2m > [22mAudit Analysis[2m > [22mdetectSensitiveAccess[2m > [22mshould detect frequent access to sensitive resources
2025-06-04T22:41:45.5304509Z [31m[1mAssertionError[22m: expected { type: 'sensitive_access', …(3) } to match object { type: 'sensitive_access', …(3) }[39m
2025-06-04T22:41:45.5304526Z 
2025-06-04T22:41:45.5304753Z [32m- Expected[39m
2025-06-04T22:41:45.5304880Z [31m+ Received[39m
2025-06-04T22:41:45.5304887Z 
2025-06-04T22:41:45.5304979Z [2m  {[22m
2025-06-04T22:41:45.5305206Z [2m    "description": StringContaining "user1",[22m
2025-06-04T22:41:45.5305355Z [32m-   "relatedLogs": {[39m
2025-06-04T22:41:45.5305622Z [32m-     "asymmetricMatch": [Function asymmetricMatch],[39m
2025-06-04T22:41:45.5305828Z [32m-     "toString": [Function toString],[39m
2025-06-04T22:41:45.5305971Z [31m+   "relatedLogs": [[39m
2025-06-04T22:41:45.5306081Z [31m+     {[39m
2025-06-04T22:41:45.5306234Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5306381Z [31m+       "id": "log0",[39m
2025-06-04T22:41:45.5306528Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5306695Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5306871Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5307029Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5307257Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5307417Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5307526Z [31m+     },[39m
2025-06-04T22:41:45.5307627Z [31m+     {[39m
2025-06-04T22:41:45.5307779Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5307925Z [31m+       "id": "log1",[39m
2025-06-04T22:41:45.5308222Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5308387Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5308554Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5308716Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5308933Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5309272Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5309442Z [31m+     },[39m
2025-06-04T22:41:45.5309547Z [31m+     {[39m
2025-06-04T22:41:45.5309710Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5309850Z [31m+       "id": "log2",[39m
2025-06-04T22:41:45.5310000Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5310167Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5310336Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5310497Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5310718Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5310874Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5310989Z [31m+     },[39m
2025-06-04T22:41:45.5311096Z [31m+     {[39m
2025-06-04T22:41:45.5311249Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5311389Z [31m+       "id": "log3",[39m
2025-06-04T22:41:45.5311537Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5311695Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5311865Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5312019Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5312360Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5312518Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5312620Z [31m+     },[39m
2025-06-04T22:41:45.5312726Z [31m+     {[39m
2025-06-04T22:41:45.5312875Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5313020Z [31m+       "id": "log4",[39m
2025-06-04T22:41:45.5313164Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5313328Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5313498Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5313650Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5313863Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5314012Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5314119Z [31m+     },[39m
2025-06-04T22:41:45.5314221Z [31m+     {[39m
2025-06-04T22:41:45.5314373Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5314511Z [31m+       "id": "log5",[39m
2025-06-04T22:41:45.5314659Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5314821Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5314986Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5315148Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5315354Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5315508Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5315611Z [31m+     },[39m
2025-06-04T22:41:45.5315717Z [31m+     {[39m
2025-06-04T22:41:45.5315873Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5316010Z [31m+       "id": "log6",[39m
2025-06-04T22:41:45.5316288Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5316566Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5316858Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5317125Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5317340Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5317501Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5317604Z [31m+     },[39m
2025-06-04T22:41:45.5317755Z [31m+     {[39m
2025-06-04T22:41:45.5318019Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5318256Z [31m+       "id": "log7",[39m
2025-06-04T22:41:45.5318511Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5318787Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5318996Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5319368Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5319792Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5320076Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5320250Z [31m+     },[39m
2025-06-04T22:41:45.5320424Z [31m+     {[39m
2025-06-04T22:41:45.5320681Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5320929Z [31m+       "id": "log8",[39m
2025-06-04T22:41:45.5321178Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5321465Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5321777Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5322055Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5322422Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5322675Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5322793Z [31m+     },[39m
2025-06-04T22:41:45.5322898Z [31m+     {[39m
2025-06-04T22:41:45.5323053Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5323259Z [31m+       "id": "log9",[39m
2025-06-04T22:41:45.5323521Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5323803Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5324087Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5324339Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5324554Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5324710Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5324813Z [31m+     },[39m
2025-06-04T22:41:45.5324998Z [31m+     {[39m
2025-06-04T22:41:45.5325423Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5325682Z [31m+       "id": "log10",[39m
2025-06-04T22:41:45.5325936Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5326212Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5326503Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5326728Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5326939Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5327172Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5327352Z [31m+     },[39m
2025-06-04T22:41:45.5327527Z [31m+     {[39m
2025-06-04T22:41:45.5327781Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5328030Z [31m+       "id": "log11",[39m
2025-06-04T22:41:45.5328251Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5328415Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5328584Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5328745Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5329042Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5329450Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5329629Z [31m+     },[39m
2025-06-04T22:41:45.5329799Z [31m+     {[39m
2025-06-04T22:41:45.5330054Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5330305Z [31m+       "id": "log12",[39m
2025-06-04T22:41:45.5330559Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5330783Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5330958Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5331157Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5331533Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5331796Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5331972Z [2m      },[22m
2025-06-04T22:41:45.5332144Z [31m+     {[39m
2025-06-04T22:41:45.5332346Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5332498Z [31m+       "id": "log13",[39m
2025-06-04T22:41:45.5332641Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5332806Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5333013Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5333304Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5333675Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5333944Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5334117Z [31m+     },[39m
2025-06-04T22:41:45.5334459Z [31m+     {[39m
2025-06-04T22:41:45.5334708Z [31m+       "action": "read",[39m
2025-06-04T22:41:45.5334857Z [31m+       "id": "log14",[39m
2025-06-04T22:41:45.5335009Z [31m+       "metadata": {},[39m
2025-06-04T22:41:45.5335286Z [31m+       "resourceId": "doc1",[39m
2025-06-04T22:41:45.5335581Z [31m+       "resourceType": "pii",[39m
2025-06-04T22:41:45.5335853Z [31m+       "status": "success",[39m
2025-06-04T22:41:45.5336221Z [31m+       "timestamp": 2025-06-04T21:55:09.489Z,[39m
2025-06-04T22:41:45.5336392Z [31m+       "userId": "user1",[39m
2025-06-04T22:41:45.5336495Z [31m+     },[39m
2025-06-04T22:41:45.5336591Z [31m+   ],[39m
2025-06-04T22:41:45.5336743Z [2m    "severity": "medium",[22m
2025-06-04T22:41:45.5336970Z [2m    "type": "sensitive_access",[22m
2025-06-04T22:41:45.5337126Z [2m  }[22m
2025-06-04T22:41:45.5337138Z 
2025-06-04T22:41:45.5337689Z [36m [2m❯[22m src/lib/audit/__tests__/analysis.test.ts:[2m114:27[22m[39m
2025-06-04T22:41:45.5337860Z     [90m112| [39m
2025-06-04T22:41:45.5338425Z     [90m113| [39m      [34mexpect[39m(patterns)[33m.[39m[34mtoHaveLength[39m([34m1[39m)
2025-06-04T22:41:45.5338825Z     [90m114| [39m      [34mexpect[39m(patterns[[34m0[39m])[33m.[39m[34mtoMatchObject[39m({
2025-06-04T22:41:45.5339024Z     [90m   | [39m                          [31m^[39m
2025-06-04T22:41:45.5339617Z     [90m115| [39m        type[33m:[39m [32m'sensitive_access'[39m[33m,[39m
2025-06-04T22:41:45.5340217Z     [90m116| [39m        severity[33m:[39m [32m'medium'[39m[33m,[39m
2025-06-04T22:41:45.5340227Z 
2025-06-04T22:41:45.5340468Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[120/523]⎯[22m[39m
2025-06-04T22:41:45.5340475Z 
2025-06-04T22:41:45.5341478Z [41m[1m FAIL [22m[49m src/lib/audit/__tests__/analysis.test.ts[2m > [22mAudit Analysis[2m > [22mdetectUnusualPatterns[2m > [22mshould combine all detection methods
2025-06-04T22:41:45.5342286Z [31m[1mAssertionError[22m: expected [ { type: 'odd_hours', …(3) }, …(3) ] to have a length of 3 but got 4[39m
2025-06-04T22:41:45.5342309Z 
2025-06-04T22:41:45.5342487Z [32m- Expected[39m
2025-06-04T22:41:45.5342607Z [31m+ Received[39m
2025-06-04T22:41:45.5342614Z 
2025-06-04T22:41:45.5342704Z [32m- 3[39m
2025-06-04T22:41:45.5342797Z [31m+ 4[39m
2025-06-04T22:41:45.5342804Z 
2025-06-04T22:41:45.5343315Z [36m [2m❯[22m src/lib/audit/__tests__/analysis.test.ts:[2m176:24[22m[39m
2025-06-04T22:41:45.5343913Z     [90m174| [39m      [35mconst[39m patterns [33m=[39m [34mdetectUnusualPatterns[39m(logs)
2025-06-04T22:41:45.5344049Z     [90m175| [39m
2025-06-04T22:41:45.5344365Z     [90m176| [39m      [34mexpect[39m(patterns)[33m.[39m[34mtoHaveLength[39m([34m3[39m)
2025-06-04T22:41:45.5344585Z     [90m   | [39m                       [31m^[39m
2025-06-04T22:41:45.5345025Z     [90m177| [39m      [34mexpect[39m(patterns)[33m.[39m[34mtoEqual[39m(
2025-06-04T22:41:45.5345421Z     [90m178| [39m        expect[33m.[39m[34marrayContaining[39m([
2025-06-04T22:41:45.5345447Z 
2025-06-04T22:41:45.5345800Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[121/523]⎯[22m[39m
2025-06-04T22:41:45.5345811Z 
2025-06-04T22:41:45.5346737Z [41m[1m FAIL [22m[49m src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22mFHEParameterOptimizer[2m > [22msetStrategy updates the active strategy
2025-06-04T22:41:45.5347289Z [31m[1mError[22m: expected balanced-approach to be security-focused[39m
2025-06-04T22:41:45.5347852Z [36m [2m❯[22m src/lib/fhe/__tests__/parameter-optimizer.test.ts:[2m54:22[22m[39m
2025-06-04T22:41:45.5348442Z     [90m 52| [39m      )[33m?.[39m[35mget[39m[33m?.[39m[34mcall[39m(optimizer) [33m||[39m [33mOptimizationStrategy[39m[33m.[39m[33mBalancedApproach[39m
2025-06-04T22:41:45.5348620Z     [90m 53| [39m
2025-06-04T22:41:45.5349586Z     [90m 54| [39m    [34mexpect[39m(strategy)[33m.[39m[34mtoBe[39m([33mOptimizationStrategy[39m[33m.[39m[33mSecurityFocused[39m)
2025-06-04T22:41:45.5349871Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.5350225Z     [90m 55| [39m  })
2025-06-04T22:41:45.5350394Z     [90m 56| [39m
2025-06-04T22:41:45.5350402Z 
2025-06-04T22:41:45.5350614Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[122/523]⎯[22m[39m
2025-06-04T22:41:45.5350622Z 
2025-06-04T22:41:45.5351890Z [41m[1m FAIL [22m[49m src/lib/fhe/__tests__/parameter-optimizer.test.ts[2m > [22mFHEParameterOptimizer[2m > [22msetConstraints updates the constraints with partial updates
2025-06-04T22:41:45.5352214Z [31m[1mError[22m: expected [object Object] to equal [object Object][39m
2025-06-04T22:41:45.5352712Z [36m [2m❯[22m src/lib/fhe/__tests__/parameter-optimizer.test.ts:[2m70:25[22m[39m
2025-06-04T22:41:45.5353249Z     [90m 68| [39m      )[33m?.[39m[35mget[39m[33m?.[39m[34mcall[39m(optimizer) [33m||[39m {}
2025-06-04T22:41:45.5353415Z     [90m 69| [39m
2025-06-04T22:41:45.5353859Z     [90m 70| [39m    [34mexpect[39m(constraints)[33m.[39m[34mtoEqual[39m({
2025-06-04T22:41:45.5354124Z     [90m   | [39m                        [31m^[39m
2025-06-04T22:41:45.5354652Z     [90m 71| [39m      minimumSecurityLevel[33m:[39m [32m'tc192'[39m [35mas[39m [33mSealSecurityLevel[39m[33m,[39m
2025-06-04T22:41:45.5355073Z     [90m 72| [39m      maximumMemoryMB[33m:[39m [34m2048[39m[33m,[39m
2025-06-04T22:41:45.5355084Z 
2025-06-04T22:41:45.5355431Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[123/523]⎯[22m[39m
2025-06-04T22:41:45.5355441Z 
2025-06-04T22:41:45.5356456Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/audit.logging.test.ts[2m > [22mauditLoggingService[2m > [22mlogEvent[2m > [22mshould log an event with sanitized details
2025-06-04T22:41:45.5357359Z [31m[1mAssertionError[22m: promise rejected "SecurityError: Failed to log audit event" instead of resolving[39m
2025-06-04T22:41:45.5357952Z [36m [2m❯[22m src/lib/security/__tests__/audit.logging.test.ts:[2m52:7[22m[39m
2025-06-04T22:41:45.5358152Z     [90m 50| [39m      [35mawait[39m [34mexpect[39m(
2025-06-04T22:41:45.5358618Z     [90m 51| [39m        auditLoggingService[33m.[39m[34mlogEvent[39m(testEntry)[33m,[39m
2025-06-04T22:41:45.5359228Z     [90m 52| [39m      )[33m.[39mresolves[33m.[39mnot[33m.[39m[34mtoThrow[39m()
2025-06-04T22:41:45.5359462Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.5359859Z     [90m 53| [39m      [34mexpect[39m(mockLogger[33m.[39minfo)[33m.[39m[34mtoHaveBeenCalled[39m()
2025-06-04T22:41:45.5360730Z     [90m 54| [39m      [35mconst[39m loggedEntry [33m=[39m [33mJSON[39m[33m.[39m[34mparse[39m(mockLogger[33m.[39minfo[33m.[39mmock[33m.[39mcalls[[34m0[39m][[34m0[39m])
2025-06-04T22:41:45.5360749Z 
2025-06-04T22:41:45.5361248Z [31m[1mCaused by: SecurityError[22m: Failed to log audit event[39m
2025-06-04T22:41:45.5361789Z [36m [2m❯[22m AuditLoggingService.logEvent src/lib/security/audit.logging.ts:[2m91:13[22m[39m
2025-06-04T22:41:45.5362435Z [90m [2m❯[22m src/lib/security/__tests__/audit.logging.test.ts:[2m51:29[22m[39m
2025-06-04T22:41:45.5362456Z 
2025-06-04T22:41:45.5362783Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[124/523]⎯[22m[39m
2025-06-04T22:41:45.5362791Z 
2025-06-04T22:41:45.5363694Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/audit.logging.test.ts[2m > [22mauditLoggingService[2m > [22mlogEvent[2m > [22mshould handle logging errors gracefully
2025-06-04T22:41:45.5364252Z [31m[1mAssertionError[22m: expected "spy" to be called at least once[39m
2025-06-04T22:41:45.5364684Z [36m [2m❯[22m src/lib/security/__tests__/audit.logging.test.ts:[2m65:32[22m[39m
2025-06-04T22:41:45.5365074Z     [90m 63| [39m        [32m'Failed to log audit event'[39m[33m,[39m
2025-06-04T22:41:45.5365256Z     [90m 64| [39m      )
2025-06-04T22:41:45.5365856Z     [90m 65| [39m      [34mexpect[39m(mockLogger[33m.[39merror)[33m.[39m[34mtoHaveBeenCalled[39m()
2025-06-04T22:41:45.5366055Z     [90m   | [39m                               [31m^[39m
2025-06-04T22:41:45.5366161Z     [90m 66| [39m    })
2025-06-04T22:41:45.5366557Z     [90m 67| [39m  })
2025-06-04T22:41:45.5366569Z 
2025-06-04T22:41:45.5366922Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[125/523]⎯[22m[39m
2025-06-04T22:41:45.5366933Z 
2025-06-04T22:41:45.5368139Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/audit.logging.test.ts[2m > [22mauditLoggingService[2m > [22msanitizeEntry[2m > [22mshould hash sensitive identifiers when PII is not included
2025-06-04T22:41:45.5368661Z [31m[1mTypeError[22m: this.config.redactFields is not iterable[39m
2025-06-04T22:41:45.5369431Z [36m [2m❯[22m AuditLoggingService.sanitizeEntry src/lib/security/audit.logging.ts:[2m112:39[22m[39m
2025-06-04T22:41:45.5369770Z     [90m110| [39m    [90m// Redact specified fields in details[39m
2025-06-04T22:41:45.5370147Z     [90m111| [39m    [35mif[39m (sanitized[33m.[39mdetails) {
2025-06-04T22:41:45.5370878Z     [90m112| [39m      [35mfor[39m ([35mconst[39m field [35mof[39m [35mthis[39m[33m.[39mconfig[33m.[39mredactFields) {
2025-06-04T22:41:45.5371208Z     [90m   | [39m                                      [31m^[39m
2025-06-04T22:41:45.5371553Z     [90m113| [39m        [35mif[39m (field [35min[39m sanitized[33m.[39mdetails) {
2025-06-04T22:41:45.5372001Z     [90m114| [39m          sanitized[33m.[39mdetails[field] [33m=[39m [32m'[REDACTED]'[39m
2025-06-04T22:41:45.5372608Z [90m [2m❯[22m src/lib/security/__tests__/audit.logging.test.ts:[2m73:59[22m[39m
2025-06-04T22:41:45.5372620Z 
2025-06-04T22:41:45.5373077Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[126/523]⎯[22m[39m
2025-06-04T22:41:45.5373089Z 
2025-06-04T22:41:45.5374086Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/audit.logging.test.ts[2m > [22mauditLoggingService[2m > [22mcleanup[2m > [22mshould log cleanup message
2025-06-04T22:41:45.5374943Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 'Audit logging service cleaned up' ][90m
2025-06-04T22:41:45.5374954Z 
2025-06-04T22:41:45.5375176Z Number of calls: [1m0[22m
2025-06-04T22:41:45.5375312Z [31m[39m
2025-06-04T22:41:45.5375726Z [36m [2m❯[22m src/lib/security/__tests__/audit.logging.test.ts:[2m93:31[22m[39m
2025-06-04T22:41:45.5376388Z     [90m 91| [39m    [34mit[39m([32m'should log cleanup message'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.5376842Z     [90m 92| [39m      [35mawait[39m auditLoggingService[33m.[39m[34mcleanup[39m()
2025-06-04T22:41:45.5377210Z     [90m 93| [39m      [34mexpect[39m(mockLogger[33m.[39minfo)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.5377529Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.5377959Z     [90m 94| [39m        [32m'Audit logging service cleaned up'[39m[33m,[39m
2025-06-04T22:41:45.5378136Z     [90m 95| [39m      )
2025-06-04T22:41:45.5378155Z 
2025-06-04T22:41:45.5378406Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[127/523]⎯[22m[39m
2025-06-04T22:41:45.5378414Z 
2025-06-04T22:41:45.5379255Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/dlp.test.ts[2m > [22mDLP Service[2m > [22mContent Scanning[2m > [22mshould allow content with no triggered rules
2025-06-04T22:41:45.5379874Z [31m[1mError[22m: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.5380163Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.5380258Z [39m
2025-06-04T22:41:45.5380741Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../audit"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.5381016Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.5381119Z   [35mreturn[39m {
2025-06-04T22:41:45.5381260Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.5381400Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.5381474Z   }
2025-06-04T22:41:45.5381546Z })
2025-06-04T22:41:45.5381553Z 
2025-06-04T22:41:45.5381862Z [36m [2m❯[22m AuditLogger.log src/lib/security/dlp.ts:[2m27:5[22m[39m
2025-06-04T22:41:45.5382223Z     [90m 25| [39m    severity[33m?[39m[33m:[39m string
2025-06-04T22:41:45.5382331Z     [90m 26| [39m  }) {
2025-06-04T22:41:45.5382791Z     [90m 27| [39m    [34mlogAuditEvent[39m(type[33m,[39m userId[33m,[39m [32m'dlp'[39m[33m,[39m [32m'security'[39m[33m,[39m data)
2025-06-04T22:41:45.5382920Z     [90m   | [39m    [31m^[39m
2025-06-04T22:41:45.5383023Z     [90m 28| [39m  }
2025-06-04T22:41:45.5383131Z     [90m 29| [39m}
2025-06-04T22:41:45.5383483Z [90m [2m❯[22m DLPService.logDLPEvent src/lib/security/dlp.ts:[2m274:17[22m[39m
2025-06-04T22:41:45.5383818Z [90m [2m❯[22m DLPService.scanContent src/lib/security/dlp.ts:[2m216:10[22m[39m
2025-06-04T22:41:45.5384117Z [90m [2m❯[22m src/lib/security/__tests__/dlp.test.ts:[2m144:33[22m[39m
2025-06-04T22:41:45.5384130Z 
2025-06-04T22:41:45.5384337Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[128/523]⎯[22m[39m
2025-06-04T22:41:45.5384344Z 
2025-06-04T22:41:45.5385117Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/dlp.test.ts[2m > [22mDLP Service[2m > [22mContent Scanning[2m > [22mshould redact content when rules with REDACT action are triggered
2025-06-04T22:41:45.5385662Z [31m[1mError[22m: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.5385947Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.5386036Z [39m
2025-06-04T22:41:45.5386630Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../audit"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.5386912Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.5387015Z   [35mreturn[39m {
2025-06-04T22:41:45.5387153Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.5387293Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.5387365Z   }
2025-06-04T22:41:45.5387433Z })
2025-06-04T22:41:45.5387445Z 
2025-06-04T22:41:45.5387746Z [36m [2m❯[22m AuditLogger.log src/lib/security/dlp.ts:[2m27:5[22m[39m
2025-06-04T22:41:45.5387943Z     [90m 25| [39m    severity[33m?[39m[33m:[39m string
2025-06-04T22:41:45.5388048Z     [90m 26| [39m  }) {
2025-06-04T22:41:45.5388497Z     [90m 27| [39m    [34mlogAuditEvent[39m(type[33m,[39m userId[33m,[39m [32m'dlp'[39m[33m,[39m [32m'security'[39m[33m,[39m data)
2025-06-04T22:41:45.5388635Z     [90m   | [39m    [31m^[39m
2025-06-04T22:41:45.5388740Z     [90m 28| [39m  }
2025-06-04T22:41:45.5388836Z     [90m 29| [39m}
2025-06-04T22:41:45.5389307Z [90m [2m❯[22m DLPService.logDLPEvent src/lib/security/dlp.ts:[2m274:17[22m[39m
2025-06-04T22:41:45.5389647Z [90m [2m❯[22m DLPService.scanContent src/lib/security/dlp.ts:[2m216:10[22m[39m
2025-06-04T22:41:45.5389940Z [90m [2m❯[22m src/lib/security/__tests__/dlp.test.ts:[2m155:33[22m[39m
2025-06-04T22:41:45.5389953Z 
2025-06-04T22:41:45.5390157Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[129/523]⎯[22m[39m
2025-06-04T22:41:45.5390173Z 
2025-06-04T22:41:45.5390920Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/dlp.test.ts[2m > [22mDLP Service[2m > [22mContent Scanning[2m > [22mshould block content when rules with BLOCK action are triggered
2025-06-04T22:41:45.5391462Z [31m[1mError[22m: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.5391769Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.5391934Z [39m
2025-06-04T22:41:45.5392769Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../audit"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.5393236Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.5393407Z   [35mreturn[39m {
2025-06-04T22:41:45.5393632Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.5393867Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.5394141Z   }
2025-06-04T22:41:45.5394257Z })
2025-06-04T22:41:45.5394269Z 
2025-06-04T22:41:45.5394636Z [36m [2m❯[22m AuditLogger.log src/lib/security/dlp.ts:[2m27:5[22m[39m
2025-06-04T22:41:45.5394844Z     [90m 25| [39m    severity[33m?[39m[33m:[39m string
2025-06-04T22:41:45.5395028Z     [90m 26| [39m  }) {
2025-06-04T22:41:45.5395843Z     [90m 27| [39m    [34mlogAuditEvent[39m(type[33m,[39m userId[33m,[39m [32m'dlp'[39m[33m,[39m [32m'security'[39m[33m,[39m data)
2025-06-04T22:41:45.5396035Z     [90m   | [39m    [31m^[39m
2025-06-04T22:41:45.5396141Z     [90m 28| [39m  }
2025-06-04T22:41:45.5396238Z     [90m 29| [39m}
2025-06-04T22:41:45.5396620Z [90m [2m❯[22m DLPService.logDLPEvent src/lib/security/dlp.ts:[2m274:17[22m[39m
2025-06-04T22:41:45.5397236Z [90m [2m❯[22m DLPService.scanContent src/lib/security/dlp.ts:[2m216:10[22m[39m
2025-06-04T22:41:45.5397755Z [90m [2m❯[22m src/lib/security/__tests__/dlp.test.ts:[2m178:33[22m[39m
2025-06-04T22:41:45.5397785Z 
2025-06-04T22:41:45.5398136Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[130/523]⎯[22m[39m
2025-06-04T22:41:45.5398147Z 
2025-06-04T22:41:45.5399206Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/dlp.test.ts[2m > [22mDLP Service[2m > [22mContent Scanning[2m > [22mshould generate alerts for BLOCK_AND_ALERT actions
2025-06-04T22:41:45.5400295Z [31m[1mError[22m: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.5400739Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.5400903Z [39m
2025-06-04T22:41:45.5401669Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../audit"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.5401951Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.5402055Z   [35mreturn[39m {
2025-06-04T22:41:45.5402210Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.5402352Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.5402424Z   }
2025-06-04T22:41:45.5402500Z })
2025-06-04T22:41:45.5402507Z 
2025-06-04T22:41:45.5402815Z [36m [2m❯[22m AuditLogger.log src/lib/security/dlp.ts:[2m27:5[22m[39m
2025-06-04T22:41:45.5403018Z     [90m 25| [39m    severity[33m?[39m[33m:[39m string
2025-06-04T22:41:45.5403123Z     [90m 26| [39m  }) {
2025-06-04T22:41:45.5403588Z     [90m 27| [39m    [34mlogAuditEvent[39m(type[33m,[39m userId[33m,[39m [32m'dlp'[39m[33m,[39m [32m'security'[39m[33m,[39m data)
2025-06-04T22:41:45.5403718Z     [90m   | [39m    [31m^[39m
2025-06-04T22:41:45.5403821Z     [90m 28| [39m  }
2025-06-04T22:41:45.5403918Z     [90m 29| [39m}
2025-06-04T22:41:45.5404278Z [90m [2m❯[22m DLPService.logDLPEvent src/lib/security/dlp.ts:[2m274:17[22m[39m
2025-06-04T22:41:45.5404616Z [90m [2m❯[22m DLPService.scanContent src/lib/security/dlp.ts:[2m216:10[22m[39m
2025-06-04T22:41:45.5405072Z [90m [2m❯[22m src/lib/security/__tests__/dlp.test.ts:[2m208:18[22m[39m
2025-06-04T22:41:45.5405089Z 
2025-06-04T22:41:45.5405296Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[131/523]⎯[22m[39m
2025-06-04T22:41:45.5405304Z 
2025-06-04T22:41:45.5406360Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/dlp.test.ts[2m > [22mDLP Service[2m > [22mPHI Detection Integration[2m > [22mshould use PHI detection for scanning
2025-06-04T22:41:45.5407362Z [31m[1mError[22m: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.5407780Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.5407875Z [39m
2025-06-04T22:41:45.5408348Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../audit"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.5408624Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.5408736Z   [35mreturn[39m {
2025-06-04T22:41:45.5408876Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.5409018Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.5409255Z   }
2025-06-04T22:41:45.5409370Z })
2025-06-04T22:41:45.5409378Z 
2025-06-04T22:41:45.5409705Z [36m [2m❯[22m AuditLogger.log src/lib/security/dlp.ts:[2m27:5[22m[39m
2025-06-04T22:41:45.5409908Z     [90m 25| [39m    severity[33m?[39m[33m:[39m string
2025-06-04T22:41:45.5410021Z     [90m 26| [39m  }) {
2025-06-04T22:41:45.5410659Z     [90m 27| [39m    [34mlogAuditEvent[39m(type[33m,[39m userId[33m,[39m [32m'dlp'[39m[33m,[39m [32m'security'[39m[33m,[39m data)
2025-06-04T22:41:45.5410917Z     [90m   | [39m    [31m^[39m
2025-06-04T22:41:45.5411088Z     [90m 28| [39m  }
2025-06-04T22:41:45.5411189Z     [90m 29| [39m}
2025-06-04T22:41:45.5411551Z [90m [2m❯[22m DLPService.logDLPEvent src/lib/security/dlp.ts:[2m274:17[22m[39m
2025-06-04T22:41:45.5411887Z [90m [2m❯[22m DLPService.scanContent src/lib/security/dlp.ts:[2m216:10[22m[39m
2025-06-04T22:41:45.5412201Z [90m [2m❯[22m src/lib/security/__tests__/dlp.test.ts:[2m232:33[22m[39m
2025-06-04T22:41:45.5412213Z 
2025-06-04T22:41:45.5412418Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[132/523]⎯[22m[39m
2025-06-04T22:41:45.5412424Z 
2025-06-04T22:41:45.5413247Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/dlp.test.ts[2m > [22mDLP Service[2m > [22mDefault Rules[2m > [22mshould redact PHI in content with default rules
2025-06-04T22:41:45.5413832Z [31m[1mError[22m: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.5414126Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.5414216Z [39m
2025-06-04T22:41:45.5414694Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../audit"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.5414981Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.5415083Z   [35mreturn[39m {
2025-06-04T22:41:45.5415223Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.5415361Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.5415427Z   }
2025-06-04T22:41:45.5415498Z })
2025-06-04T22:41:45.5415504Z 
2025-06-04T22:41:45.5415805Z [36m [2m❯[22m AuditLogger.log src/lib/security/dlp.ts:[2m27:5[22m[39m
2025-06-04T22:41:45.5416011Z     [90m 25| [39m    severity[33m?[39m[33m:[39m string
2025-06-04T22:41:45.5416117Z     [90m 26| [39m  }) {
2025-06-04T22:41:45.5416572Z     [90m 27| [39m    [34mlogAuditEvent[39m(type[33m,[39m userId[33m,[39m [32m'dlp'[39m[33m,[39m [32m'security'[39m[33m,[39m data)
2025-06-04T22:41:45.5416698Z     [90m   | [39m    [31m^[39m
2025-06-04T22:41:45.5416800Z     [90m 28| [39m  }
2025-06-04T22:41:45.5416896Z     [90m 29| [39m}
2025-06-04T22:41:45.5417236Z [90m [2m❯[22m DLPService.logDLPEvent src/lib/security/dlp.ts:[2m274:17[22m[39m
2025-06-04T22:41:45.5417702Z [90m [2m❯[22m DLPService.scanContent src/lib/security/dlp.ts:[2m216:10[22m[39m
2025-06-04T22:41:45.5417999Z [90m [2m❯[22m src/lib/security/__tests__/dlp.test.ts:[2m274:33[22m[39m
2025-06-04T22:41:45.5418006Z 
2025-06-04T22:41:45.5418217Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[133/523]⎯[22m[39m
2025-06-04T22:41:45.5418224Z 
2025-06-04T22:41:45.5418929Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/dlp.test.ts[2m > [22mDLP Service[2m > [22mDefault Rules[2m > [22mshould block large data exports that might contain PHI
2025-06-04T22:41:45.5419712Z [31m[1mError[22m: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.5419992Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.5420091Z [39m
2025-06-04T22:41:45.5420559Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../audit"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.5420849Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.5420951Z   [35mreturn[39m {
2025-06-04T22:41:45.5421092Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.5421228Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.5421295Z   }
2025-06-04T22:41:45.5421365Z })
2025-06-04T22:41:45.5421371Z 
2025-06-04T22:41:45.5421677Z [36m [2m❯[22m AuditLogger.log src/lib/security/dlp.ts:[2m27:5[22m[39m
2025-06-04T22:41:45.5421873Z     [90m 25| [39m    severity[33m?[39m[33m:[39m string
2025-06-04T22:41:45.5421978Z     [90m 26| [39m  }) {
2025-06-04T22:41:45.5422430Z     [90m 27| [39m    [34mlogAuditEvent[39m(type[33m,[39m userId[33m,[39m [32m'dlp'[39m[33m,[39m [32m'security'[39m[33m,[39m data)
2025-06-04T22:41:45.5422557Z     [90m   | [39m    [31m^[39m
2025-06-04T22:41:45.5422661Z     [90m 28| [39m  }
2025-06-04T22:41:45.5422756Z     [90m 29| [39m}
2025-06-04T22:41:45.5423101Z [90m [2m❯[22m DLPService.logDLPEvent src/lib/security/dlp.ts:[2m274:17[22m[39m
2025-06-04T22:41:45.5423436Z [90m [2m❯[22m DLPService.scanContent src/lib/security/dlp.ts:[2m216:10[22m[39m
2025-06-04T22:41:45.5423728Z [90m [2m❯[22m src/lib/security/__tests__/dlp.test.ts:[2m297:33[22m[39m
2025-06-04T22:41:45.5423736Z 
2025-06-04T22:41:45.5423943Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[134/523]⎯[22m[39m
2025-06-04T22:41:45.5423950Z 
2025-06-04T22:41:45.5424753Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/dlp.test.ts[2m > [22mDLP Service[2m > [22mAudit Logging[2m > [22mshould log allowed events with DLP_ALLOWED type
2025-06-04T22:41:45.5425310Z [31m[1mError[22m: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.5425590Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.5425680Z [39m
2025-06-04T22:41:45.5426150Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../audit"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.5426432Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.5426535Z   [35mreturn[39m {
2025-06-04T22:41:45.5426671Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.5426809Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.5426875Z   }
2025-06-04T22:41:45.5426947Z })
2025-06-04T22:41:45.5426954Z 
2025-06-04T22:41:45.5427259Z [36m [2m❯[22m AuditLogger.log src/lib/security/dlp.ts:[2m27:5[22m[39m
2025-06-04T22:41:45.5427456Z     [90m 25| [39m    severity[33m?[39m[33m:[39m string
2025-06-04T22:41:45.5427558Z     [90m 26| [39m  }) {
2025-06-04T22:41:45.5428010Z     [90m 27| [39m    [34mlogAuditEvent[39m(type[33m,[39m userId[33m,[39m [32m'dlp'[39m[33m,[39m [32m'security'[39m[33m,[39m data)
2025-06-04T22:41:45.5428139Z     [90m   | [39m    [31m^[39m
2025-06-04T22:41:45.5428365Z     [90m 28| [39m  }
2025-06-04T22:41:45.5428462Z     [90m 29| [39m}
2025-06-04T22:41:45.5428802Z [90m [2m❯[22m DLPService.logDLPEvent src/lib/security/dlp.ts:[2m274:17[22m[39m
2025-06-04T22:41:45.5429262Z [90m [2m❯[22m DLPService.scanContent src/lib/security/dlp.ts:[2m216:10[22m[39m
2025-06-04T22:41:45.5429557Z [90m [2m❯[22m src/lib/security/__tests__/dlp.test.ts:[2m316:18[22m[39m
2025-06-04T22:41:45.5429565Z 
2025-06-04T22:41:45.5429770Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[135/523]⎯[22m[39m
2025-06-04T22:41:45.5429788Z 
2025-06-04T22:41:45.5430446Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/dlp.test.ts[2m > [22mDLP Service[2m > [22mAudit Logging[2m > [22mshould log blocked events with DLP_BLOCKED type
2025-06-04T22:41:45.5430993Z [31m[1mError[22m: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.5431269Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.5431368Z [39m
2025-06-04T22:41:45.5431834Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"../../audit"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.5432104Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.5432206Z   [35mreturn[39m {
2025-06-04T22:41:45.5432344Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.5432481Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.5432555Z   }
2025-06-04T22:41:45.5432627Z })
2025-06-04T22:41:45.5432633Z 
2025-06-04T22:41:45.5432929Z [36m [2m❯[22m AuditLogger.log src/lib/security/dlp.ts:[2m27:5[22m[39m
2025-06-04T22:41:45.5433123Z     [90m 25| [39m    severity[33m?[39m[33m:[39m string
2025-06-04T22:41:45.5433224Z     [90m 26| [39m  }) {
2025-06-04T22:41:45.5433673Z     [90m 27| [39m    [34mlogAuditEvent[39m(type[33m,[39m userId[33m,[39m [32m'dlp'[39m[33m,[39m [32m'security'[39m[33m,[39m data)
2025-06-04T22:41:45.5433804Z     [90m   | [39m    [31m^[39m
2025-06-04T22:41:45.5433905Z     [90m 28| [39m  }
2025-06-04T22:41:45.5434003Z     [90m 29| [39m}
2025-06-04T22:41:45.5434338Z [90m [2m❯[22m DLPService.logDLPEvent src/lib/security/dlp.ts:[2m274:17[22m[39m
2025-06-04T22:41:45.5434674Z [90m [2m❯[22m DLPService.scanContent src/lib/security/dlp.ts:[2m216:10[22m[39m
2025-06-04T22:41:45.5434963Z [90m [2m❯[22m src/lib/security/__tests__/dlp.test.ts:[2m349:18[22m[39m
2025-06-04T22:41:45.5434970Z 
2025-06-04T22:41:45.5435303Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[136/523]⎯[22m[39m
2025-06-04T22:41:45.5435311Z 
2025-06-04T22:41:45.5435847Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/phiDetection.test.ts[2m > [22mdetectAndRedactPHI[2m > [22mredacts emails
2025-06-04T22:41:45.5436174Z [31m[1mError[22m: expected [REDACTED]: [REDACTED] to be Contact: [EMAIL][39m
2025-06-04T22:41:45.5436503Z [36m [2m❯[22m src/lib/security/__tests__/phiDetection.test.ts:[2m5:62[22m[39m
2025-06-04T22:41:45.5436843Z     [90m  3| [39m[34mdescribe[39m([32m'detectAndRedactPHI'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5437113Z     [90m  4| [39m  [34mit[39m([32m'redacts emails'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5437573Z     [90m  5| [39m    [34mexpect[39m([34mdetectAndRedactPHI[39m([32m'Contact: alice@example.com'[39m))[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.5437796Z     [90m   | [39m                                                             [31m^[39m
2025-06-04T22:41:45.5438015Z     [90m  6| [39m      [32m'Contact: [EMAIL]'[39m[33m,[39m
2025-06-04T22:41:45.5438118Z     [90m  7| [39m    )
2025-06-04T22:41:45.5438125Z 
2025-06-04T22:41:45.5438331Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[137/523]⎯[22m[39m
2025-06-04T22:41:45.5438338Z 
2025-06-04T22:41:45.5438888Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/phiDetection.test.ts[2m > [22mdetectAndRedactPHI[2m > [22mredacts phone numbers
2025-06-04T22:41:45.5439357Z [31m[1mError[22m: expected [REDACTED] me at [REDACTED] to be Call me at [PHONE][39m
2025-06-04T22:41:45.5439825Z [36m [2m❯[22m src/lib/security/__tests__/phiDetection.test.ts:[2m11:59[22m[39m
2025-06-04T22:41:45.5439924Z     [90m  9| [39m
2025-06-04T22:41:45.5440229Z     [90m 10| [39m  [34mit[39m([32m'redacts phone numbers'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5440659Z     [90m 11| [39m    [34mexpect[39m([34mdetectAndRedactPHI[39m([32m'Call me at 555-123-4567'[39m))[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.5440890Z     [90m   | [39m                                                          [31m^[39m
2025-06-04T22:41:45.5441104Z     [90m 12| [39m      [32m'Call me at [PHONE]'[39m[33m,[39m
2025-06-04T22:41:45.5441212Z     [90m 13| [39m    )
2025-06-04T22:41:45.5441219Z 
2025-06-04T22:41:45.5441418Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[138/523]⎯[22m[39m
2025-06-04T22:41:45.5441425Z 
2025-06-04T22:41:45.5441943Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/phiDetection.test.ts[2m > [22mdetectAndRedactPHI[2m > [22mredacts SSNs
2025-06-04T22:41:45.5442226Z [31m[1mError[22m: expected SSN: [REDACTED] to be SSN: [ID][39m
2025-06-04T22:41:45.5442563Z [36m [2m❯[22m src/lib/security/__tests__/phiDetection.test.ts:[2m21:52[22m[39m
2025-06-04T22:41:45.5442659Z     [90m 19| [39m
2025-06-04T22:41:45.5442923Z     [90m 20| [39m  [34mit[39m([32m'redacts SSNs'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5443541Z     [90m 21| [39m    [34mexpect[39m([34mdetectAndRedactPHI[39m([32m'SSN: 123-45-6789'[39m))[33m.[39m[34mtoBe[39m([32m'SSN: [ID]'[39m)
2025-06-04T22:41:45.5443762Z     [90m   | [39m                                                   [31m^[39m
2025-06-04T22:41:45.5444355Z     [90m 22| [39m    [34mexpect[39m([34mdetectAndRedactPHI[39m([32m'ID: 123456789'[39m))[33m.[39m[34mtoBe[39m([32m'ID: [ID]'[39m)
2025-06-04T22:41:45.5444543Z     [90m 23| [39m  })
2025-06-04T22:41:45.5444554Z 
2025-06-04T22:41:45.5444901Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[139/523]⎯[22m[39m
2025-06-04T22:41:45.5444923Z 
2025-06-04T22:41:45.5445809Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/phiDetection.test.ts[2m > [22mdetectAndRedactPHI[2m > [22mredacts full names
2025-06-04T22:41:45.5446433Z [31m[1mError[22m: expected [REDACTED]ED]ACTED] [REDACTED] to be Patient [NAME][39m
2025-06-04T22:41:45.5446957Z [36m [2m❯[22m src/lib/security/__tests__/phiDetection.test.ts:[2m26:52[22m[39m
2025-06-04T22:41:45.5447071Z     [90m 24| [39m
2025-06-04T22:41:45.5447372Z     [90m 25| [39m  [34mit[39m([32m'redacts full names'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5447698Z     [90m 26| [39m    expect(detectAndRedactPHI('Patient John Doe')).toBe('Patient [NAME…
2025-06-04T22:41:45.5447911Z     [90m   | [39m                                                   [31m^[39m
2025-06-04T22:41:45.5448392Z     [90m 27| [39m    [34mexpect[39m([34mdetectAndRedactPHI[39m([32m'Dr. Jane Smith'[39m))[33m.[39m[34mtoBe[39m([32m'Dr. [NAME]'[39m)
2025-06-04T22:41:45.5448502Z     [90m 28| [39m  })
2025-06-04T22:41:45.5448509Z 
2025-06-04T22:41:45.5448715Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[140/523]⎯[22m[39m
2025-06-04T22:41:45.5448722Z 
2025-06-04T22:41:45.5449777Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/phiDetection.test.ts[2m > [22mdetectAndRedactPHI[2m > [22mredacts mixed PHI/PII
2025-06-04T22:41:45.5450796Z [31m[1mError[22m: expected [REDACTED]ACTED]DACTED], SSN: [REDACTED], email: [REDACTED], phone: [REDACTED] to be [NAME], SSN: [ID], email: [EMAIL], phone: [PHONE][39m
2025-06-04T22:41:45.5451371Z [36m [2m❯[22m src/lib/security/__tests__/phiDetection.test.ts:[2m34:39[22m[39m
2025-06-04T22:41:45.5451869Z     [90m 32| [39m      'John Doe, SSN: 123-45-6789, email: john@example.com, phone: 555…
2025-06-04T22:41:45.5452232Z     [90m 33| [39m    const expected = '[NAME], SSN: [ID], email: [EMAIL], phone: [PHONE…
2025-06-04T22:41:45.5452613Z     [90m 34| [39m    [34mexpect[39m([34mdetectAndRedactPHI[39m(input))[33m.[39m[34mtoBe[39m(expected)
2025-06-04T22:41:45.5452984Z     [90m   | [39m                                      [31m^[39m
2025-06-04T22:41:45.5453090Z     [90m 35| [39m  })
2025-06-04T22:41:45.5453186Z     [90m 36| [39m
2025-06-04T22:41:45.5453194Z 
2025-06-04T22:41:45.5453396Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[141/523]⎯[22m[39m
2025-06-04T22:41:45.5453410Z 
2025-06-04T22:41:45.5454010Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/phiDetection.test.ts[2m > [22mdetectAndRedactPHI[2m > [22mhandles text with no PHI/PII
2025-06-04T22:41:45.5454403Z [31m[1mError[22m: expected [REDACTED] sensitive info here. to be No sensitive info here.[39m
2025-06-04T22:41:45.5454748Z [36m [2m❯[22m src/lib/security/__tests__/phiDetection.test.ts:[2m38:59[22m[39m
2025-06-04T22:41:45.5454846Z     [90m 36| [39m
2025-06-04T22:41:45.5455176Z     [90m 37| [39m  [34mit[39m([32m'handles text with no PHI/PII'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5455609Z     [90m 38| [39m    [34mexpect[39m([34mdetectAndRedactPHI[39m([32m'No sensitive info here.'[39m))[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.5455838Z     [90m   | [39m                                                          [31m^[39m
2025-06-04T22:41:45.5456057Z     [90m 39| [39m      [32m'No sensitive info here.'[39m[33m,[39m
2025-06-04T22:41:45.5456164Z     [90m 40| [39m    )
2025-06-04T22:41:45.5456171Z 
2025-06-04T22:41:45.5456368Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[142/523]⎯[22m[39m
2025-06-04T22:41:45.5456376Z 
2025-06-04T22:41:45.5457474Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/security-scanning.test.ts[2m > [22msecurity Scanning Configuration[2m > [22mgitHub Workflow Configuration[2m > [22mshould have proper security scanning workflow configuration
2025-06-04T22:41:45.5457729Z [31m[1mTypeError[22m: content.trim is not a function[39m
2025-06-04T22:41:45.5458095Z [36m [2m❯[22m src/lib/security/__tests__/security-scanning.test.ts:[2m93:22[22m[39m
2025-06-04T22:41:45.5458191Z     [90m 91| [39m
2025-06-04T22:41:45.5458352Z     [90m 92| [39m      [90m// Assert[39m
2025-06-04T22:41:45.5458809Z     [90m 93| [39m      [34mexpect[39m(content[33m.[39m[34mtrim[39m())[33m.[39m[34mtoContain[39m([32m'name: Security Scanning'[39m)
2025-06-04T22:41:45.5458968Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.5459665Z     [90m 94| [39m      [34mexpect[39m(content[33m.[39m[34mtrim[39m())[33m.[39m[34mtoContain[39m([32m'run: ubuntu-latest'[39m)
2025-06-04T22:41:45.5459985Z     [90m 95| [39m      expect(content.trim()).toContain('uses: aquasecurity/trivy-actio…
2025-06-04T22:41:45.5459998Z 
2025-06-04T22:41:45.5460200Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[143/523]⎯[22m[39m
2025-06-04T22:41:45.5460207Z 
2025-06-04T22:41:45.5461185Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/security-scanning.test.ts[2m > [22msecurity Scanning Configuration[2m > [22mgitleaks Configuration[2m > [22mshould have proper Gitleaks configuration with healthcare patterns
2025-06-04T22:41:45.5461456Z [31m[1mTypeError[22m: content.trim is not a function[39m
2025-06-04T22:41:45.5461823Z [36m [2m❯[22m src/lib/security/__tests__/security-scanning.test.ts:[2m160:22[22m[39m
2025-06-04T22:41:45.5461927Z     [90m158| [39m
2025-06-04T22:41:45.5462078Z     [90m159| [39m      [90m// Assert[39m
2025-06-04T22:41:45.5462461Z     [90m160| [39m      [34mexpect[39m(content[33m.[39m[34mtrim[39m())[33m.[39m[34mtoContain[39m(
2025-06-04T22:41:45.5462629Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.5462923Z     [90m161| [39m        [32m'title = "Gitleaks Healthcare Configuration"'[39m[33m,[39m
2025-06-04T22:41:45.5463028Z     [90m162| [39m      )
2025-06-04T22:41:45.5463035Z 
2025-06-04T22:41:45.5463240Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[144/523]⎯[22m[39m
2025-06-04T22:41:45.5463246Z 
2025-06-04T22:41:45.5464200Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/security-scanning.test.ts[2m > [22msecurity Scanning Configuration[2m > [22mcodeQL Configuration[2m > [22mshould have proper CodeQL configuration with EHR security queries
2025-06-04T22:41:45.5464607Z [31m[1mTypeError[22m: content.trim is not a function[39m
2025-06-04T22:41:45.5464969Z [36m [2m❯[22m src/lib/security/__tests__/security-scanning.test.ts:[2m215:22[22m[39m
2025-06-04T22:41:45.5465073Z     [90m213| [39m
2025-06-04T22:41:45.5465334Z     [90m214| [39m      [90m// Assert[39m
2025-06-04T22:41:45.5466170Z     [90m215| [39m      [34mexpect[39m(content[33m.[39m[34mtrim[39m())[33m.[39m[34mtoContain[39m([32m'name: "EHR Security Analysis"'[39m)
2025-06-04T22:41:45.5466357Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.5466663Z     [90m216| [39m      expect(content.trim()).toContain('custom-queries/ehr-security.ql…
2025-06-04T22:41:45.5466962Z     [90m217| [39m      expect(content.trim()).toContain('custom-queries/fhir-security.q…
2025-06-04T22:41:45.5466970Z 
2025-06-04T22:41:45.5467168Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[145/523]⎯[22m[39m
2025-06-04T22:41:45.5467182Z 
2025-06-04T22:41:45.5468073Z [41m[1m FAIL [22m[49m src/lib/security/__tests__/security-scanning.test.ts[2m > [22msecurity Scanning Configuration[2m > [22mcustom FHIR Security Queries[2m > [22mshould have proper FHIR security queries
2025-06-04T22:41:45.5468323Z [31m[1mTypeError[22m: content.trim is not a function[39m
2025-06-04T22:41:45.5468692Z [36m [2m❯[22m src/lib/security/__tests__/security-scanning.test.ts:[2m265:22[22m[39m
2025-06-04T22:41:45.5468934Z     [90m263| [39m
2025-06-04T22:41:45.5469271Z     [90m264| [39m      [90m// Assert[39m
2025-06-04T22:41:45.5469599Z     [90m265| [39m      expect(content.trim()).toContain('@name Unvalidated FHIR Resourc…
2025-06-04T22:41:45.5469762Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.5470116Z     [90m266| [39m      [34mexpect[39m(content[33m.[39m[34mtrim[39m())[33m.[39m[34mtoContain[39m(
2025-06-04T22:41:45.5470412Z     [90m267| [39m        [32m'@description Detects FHIR resource access'[39m[33m,[39m
2025-06-04T22:41:45.5470430Z 
2025-06-04T22:41:45.5470627Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[146/523]⎯[22m[39m
2025-06-04T22:41:45.5470634Z 
2025-06-04T22:41:45.5471389Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould add new client on connection
2025-06-04T22:41:45.5472108Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle message events
2025-06-04T22:41:45.5472874Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle encrypted messages with FHE
2025-06-04T22:41:45.5473581Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle status updates
2025-06-04T22:41:45.5474321Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle client disconnection
2025-06-04T22:41:45.5475228Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22mhandleConnection[2m > [22mshould handle message parsing errors
2025-06-04T22:41:45.5476843Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22mbroadcast methods[2m > [22mshould broadcast to specific session
2025-06-04T22:41:45.5478171Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22mbroadcast methods[2m > [22mshould broadcast to all clients
2025-06-04T22:41:45.5479783Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22merror handling[2m > [22mshould handle FHE initialization errors
2025-06-04T22:41:45.5481556Z [41m[1m FAIL [22m[49m src/lib/websocket/__tests__/server.test.ts[2m > [22mtherapyChatWebSocketServer[2m > [22merror handling[2m > [22mshould handle missing session ID
2025-06-04T22:41:45.5482322Z [31m[1mSyntaxError[22m: Invalid URL: undefined[39m
2025-06-04T22:41:45.5483001Z [90m [2m❯[22m initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:[2m692:13[22m[39m
2025-06-04T22:41:45.5483795Z [90m [2m❯[22m new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:[2m88:7[22m[39m
2025-06-04T22:41:45.5484445Z [36m [2m❯[22m src/lib/websocket/__tests__/server.test.ts:[2m72:21[22m[39m
2025-06-04T22:41:45.5484812Z     [90m 70| [39m
2025-06-04T22:41:45.5485220Z     [90m 71| [39m    // Create a mock WebSocket client instance for tests using the moc…
2025-06-04T22:41:45.5486039Z     [90m 72| [39m    mockWebSocket [33m=[39m [35mnew[39m ([34mrequire[39m([32m'ws'[39m)[33m.[39m[33mWebSocket[39m)() [35mas[39m [33mWebSocket[39m [33m&[39m {
2025-06-04T22:41:45.5486655Z     [90m   | [39m                    [31m^[39m
2025-06-04T22:41:45.5487008Z     [90m 73| [39m      send[33m:[39m [33mMockFn[39m
2025-06-04T22:41:45.5487360Z     [90m 74| [39m      on[33m:[39m [33mMockFn[39m
2025-06-04T22:41:45.5487544Z 
2025-06-04T22:41:45.5487756Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[147/523]⎯[22m[39m
2025-06-04T22:41:45.5487939Z 
2025-06-04T22:41:45.5489255Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/dashboard.test.ts[2m > [22mBias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould successfully return dashboard data with default parameters
2025-06-04T22:41:45.5490275Z [31m[1mError[22m: expected undefined to be true[39m
2025-06-04T22:41:45.5490842Z [36m [2m❯[22m src/pages/api/bias-detection/dashboard.test.ts:[2m201:36[22m[39m
2025-06-04T22:41:45.5491267Z     [90m199| [39m      
2025-06-04T22:41:45.5491970Z     [90m200| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5492729Z     [90m201| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2025-06-04T22:41:45.5493268Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5494193Z     [90m202| [39m      [34mexpect[39m(responseData[33m.[39mdata)[33m.[39m[34mtoEqual[39m(mockDashboardData)[33m;[39m
2025-06-04T22:41:45.5495872Z     [90m203| [39m      [34mexpect[39m([35mtypeof[39m responseData[33m.[39mprocessingTime)[33m.[39m[34mtoBe[39m([32m'number'[39m)[33m;[39m
2025-06-04T22:41:45.5496650Z 
2025-06-04T22:41:45.5497073Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[148/523]⎯[22m[39m
2025-06-04T22:41:45.5497388Z 
2025-06-04T22:41:45.5499330Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/dashboard.test.ts[2m > [22mBias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle custom time range parameter
2025-06-04T22:41:45.5501000Z [31m[1mError[22m: expected undefined to be true[39m
2025-06-04T22:41:45.5502044Z [36m [2m❯[22m src/pages/api/bias-detection/dashboard.test.ts:[2m228:36[22m[39m
2025-06-04T22:41:45.5502761Z     [90m226| [39m      
2025-06-04T22:41:45.5503772Z     [90m227| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5505197Z     [90m228| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2025-06-04T22:41:45.5506209Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5506691Z     [90m229| [39m
2025-06-04T22:41:45.5507368Z     [90m230| [39m      [90m// Verify bias engine was called with custom time range[39m
2025-06-04T22:41:45.5507818Z 
2025-06-04T22:41:45.5508211Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[149/523]⎯[22m[39m
2025-06-04T22:41:45.5508853Z 
2025-06-04T22:41:45.5510955Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/dashboard.test.ts[2m > [22mBias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle custom demographic filter parameter
2025-06-04T22:41:45.5512680Z [31m[1mError[22m: expected undefined to be true[39m
2025-06-04T22:41:45.5513652Z [36m [2m❯[22m src/pages/api/bias-detection/dashboard.test.ts:[2m244:36[22m[39m
2025-06-04T22:41:45.5514340Z     [90m242| [39m      
2025-06-04T22:41:45.5515271Z     [90m243| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5516700Z     [90m244| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2025-06-04T22:41:45.5517754Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5518293Z     [90m245| [39m
2025-06-04T22:41:45.5519071Z     [90m246| [39m      [90m// Verify bias engine was called with custom demographic filter[39m
2025-06-04T22:41:45.5519847Z 
2025-06-04T22:41:45.5520227Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[150/523]⎯[22m[39m
2025-06-04T22:41:45.5520531Z 
2025-06-04T22:41:45.5522183Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/dashboard.test.ts[2m > [22mBias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle multiple query parameters
2025-06-04T22:41:45.5524052Z [31m[1mError[22m: expected undefined to be true[39m
2025-06-04T22:41:45.5525141Z [36m [2m❯[22m src/pages/api/bias-detection/dashboard.test.ts:[2m263:36[22m[39m
2025-06-04T22:41:45.5525876Z     [90m261| [39m      
2025-06-04T22:41:45.5526870Z     [90m262| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5528249Z     [90m263| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2025-06-04T22:41:45.5529449Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5529965Z     [90m264| [39m
2025-06-04T22:41:45.5530666Z     [90m265| [39m      [90m// Verify bias engine was called with both parameters[39m
2025-06-04T22:41:45.5531136Z 
2025-06-04T22:41:45.5531520Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[151/523]⎯[22m[39m
2025-06-04T22:41:45.5531836Z 
2025-06-04T22:41:45.5533583Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/dashboard.test.ts[2m > [22mBias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle bias detection engine errors
2025-06-04T22:41:45.5535210Z [31m[1mError[22m: expected undefined to be false[39m
2025-06-04T22:41:45.5536200Z [36m [2m❯[22m src/pages/api/bias-detection/dashboard.test.ts:[2m292:36[22m[39m
2025-06-04T22:41:45.5536886Z     [90m290| [39m      
2025-06-04T22:41:45.5537871Z     [90m291| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5539484Z     [90m292| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
2025-06-04T22:41:45.5540495Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5541404Z     [90m293| [39m      expect(responseData.error).toBe('Dashboard Data Retrieval Failed…
2025-06-04T22:41:45.5542850Z     [90m294| [39m      [34mexpect[39m(responseData[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Database connection failed'[39m)[33m;[39m
2025-06-04T22:41:45.5543584Z 
2025-06-04T22:41:45.5543971Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[152/523]⎯[22m[39m
2025-06-04T22:41:45.5544303Z 
2025-06-04T22:41:45.5545977Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/dashboard.test.ts[2m > [22mBias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle empty dashboard data
2025-06-04T22:41:45.5547779Z [31m[1mError[22m: expected undefined to be true[39m
2025-06-04T22:41:45.5548787Z [36m [2m❯[22m src/pages/api/bias-detection/dashboard.test.ts:[2m332:36[22m[39m
2025-06-04T22:41:45.5549664Z     [90m330| [39m      
2025-06-04T22:41:45.5550671Z     [90m331| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5552068Z     [90m332| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2025-06-04T22:41:45.5553044Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5554163Z     [90m333| [39m      [34mexpect[39m(responseData[33m.[39mdata)[33m.[39m[34mtoEqual[39m(emptyDashboardData)[33m;[39m
2025-06-04T22:41:45.5555813Z     [90m334| [39m      [34mexpect[39m(responseData[33m.[39mdata[33m.[39msummary[33m.[39mtotalSessions)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m
2025-06-04T22:41:45.5556616Z 
2025-06-04T22:41:45.5556998Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[153/523]⎯[22m[39m
2025-06-04T22:41:45.5557294Z 
2025-06-04T22:41:45.5558926Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/dashboard.test.ts[2m > [22mBias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle large dataset responses
2025-06-04T22:41:45.5560794Z [31m[1mError[22m: expected undefined to be true[39m
2025-06-04T22:41:45.5562087Z [36m [2m❯[22m src/pages/api/bias-detection/dashboard.test.ts:[2m427:36[22m[39m
2025-06-04T22:41:45.5562844Z     [90m425| [39m      
2025-06-04T22:41:45.5563787Z     [90m426| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5565230Z     [90m427| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2025-06-04T22:41:45.5566285Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5567564Z     [90m428| [39m      [34mexpect[39m(responseData[33m.[39mdata[33m.[39malerts)[33m.[39m[34mtoHaveLength[39m([34m1000[39m)[33m;[39m
2025-06-04T22:41:45.5569379Z     [90m429| [39m      [34mexpect[39m(responseData[33m.[39mdata[33m.[39mtrends)[33m.[39m[34mtoHaveLength[39m([34m90[39m)[33m;[39m
2025-06-04T22:41:45.5570105Z 
2025-06-04T22:41:45.5570511Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[154/523]⎯[22m[39m
2025-06-04T22:41:45.5570832Z 
2025-06-04T22:41:45.5572563Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/dashboard.test.ts[2m > [22mBias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould handle network timeout scenarios
2025-06-04T22:41:45.5574100Z [31m[1mError[22m: expected undefined to be false[39m
2025-06-04T22:41:45.5575080Z [36m [2m❯[22m src/pages/api/bias-detection/dashboard.test.ts:[2m456:36[22m[39m
2025-06-04T22:41:45.5575774Z     [90m454| [39m      
2025-06-04T22:41:45.5577039Z     [90m455| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5578446Z     [90m456| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
2025-06-04T22:41:45.5579621Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5580549Z     [90m457| [39m      expect(responseData.error).toBe('Dashboard Data Retrieval Failed…
2025-06-04T22:41:45.5581928Z     [90m458| [39m      [34mexpect[39m(responseData[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Request timeout'[39m)[33m;[39m
2025-06-04T22:41:45.5582613Z 
2025-06-04T22:41:45.5583006Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[155/523]⎯[22m[39m
2025-06-04T22:41:45.5583332Z 
2025-06-04T22:41:45.5584981Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/dashboard.test.ts[2m > [22mBias Detection Dashboard API Endpoint[2m > [22mGET /api/bias-detection/dashboard[2m > [22mshould log performance metrics
2025-06-04T22:41:45.5586563Z [31m[1mError[22m: expected undefined to be number[39m
2025-06-04T22:41:45.5587565Z [36m [2m❯[22m src/pages/api/bias-detection/dashboard.test.ts:[2m468:50[22m[39m
2025-06-04T22:41:45.5588259Z     [90m466| [39m      
2025-06-04T22:41:45.5589396Z     [90m467| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5591002Z     [90m468| [39m      [34mexpect[39m([35mtypeof[39m responseData[33m.[39mprocessingTime)[33m.[39m[34mtoBe[39m([32m'number'[39m)[33m;[39m
2025-06-04T22:41:45.5592154Z     [90m   | [39m                                                 [31m^[39m
2025-06-04T22:41:45.5593391Z     [90m469| [39m      [34mexpect[39m(responseData[33m.[39mprocessingTime)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
2025-06-04T22:41:45.5594296Z     [90m470| [39m
2025-06-04T22:41:45.5594488Z 
2025-06-04T22:41:45.5594875Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[156/523]⎯[22m[39m
2025-06-04T22:41:45.5595199Z 
2025-06-04T22:41:45.5596858Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/export.test.ts[2m > [22mBias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould export data as JSON format by default
2025-06-04T22:41:45.5598658Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ …(2) ][90m
2025-06-04T22:41:45.5599326Z 
2025-06-04T22:41:45.5599569Z Number of calls: [1m0[22m
2025-06-04T22:41:45.5600172Z [31m[39m
2025-06-04T22:41:45.5600969Z [36m [2m❯[22m src/pages/api/bias-detection/export.test.ts:[2m172:31[22m[39m
2025-06-04T22:41:45.5601632Z     [90m170| [39m
2025-06-04T22:41:45.5602127Z     [90m171| [39m      [90m// Verify logging[39m
2025-06-04T22:41:45.5603116Z     [90m172| [39m      [34mexpect[39m(mockLogger[33m.[39minfo)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.5604018Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.5604809Z     [90m173| [39m        [32m'Exporting bias detection data'[39m[33m,[39m
2025-06-04T22:41:45.5605408Z     [90m174| [39m        {
2025-06-04T22:41:45.5605639Z 
2025-06-04T22:41:45.5606021Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[157/523]⎯[22m[39m
2025-06-04T22:41:45.5606335Z 
2025-06-04T22:41:45.5607924Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/export.test.ts[2m > [22mBias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle multiple parameters
2025-06-04T22:41:45.5610006Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ …(2) ][90m
2025-06-04T22:41:45.5610533Z 
2025-06-04T22:41:45.5610774Z Number of calls: [1m0[22m
2025-06-04T22:41:45.5611167Z [31m[39m
2025-06-04T22:41:45.5611927Z [36m [2m❯[22m src/pages/api/bias-detection/export.test.ts:[2m313:31[22m[39m
2025-06-04T22:41:45.5612582Z     [90m311| [39m
2025-06-04T22:41:45.5613084Z     [90m312| [39m      [90m// Verify logging[39m
2025-06-04T22:41:45.5614283Z     [90m313| [39m      [34mexpect[39m(mockLogger[33m.[39minfo)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.5615175Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.5615936Z     [90m314| [39m        [32m'Exporting bias detection data'[39m[33m,[39m
2025-06-04T22:41:45.5616531Z     [90m315| [39m        {
2025-06-04T22:41:45.5616767Z 
2025-06-04T22:41:45.5617137Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[158/523]⎯[22m[39m
2025-06-04T22:41:45.5617458Z 
2025-06-04T22:41:45.5619049Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/export.test.ts[2m > [22mBias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle bias detection engine errors
2025-06-04T22:41:45.5620705Z [31m[1mError[22m: expected undefined to be false[39m
2025-06-04T22:41:45.5621624Z [36m [2m❯[22m src/pages/api/bias-detection/export.test.ts:[2m342:36[22m[39m
2025-06-04T22:41:45.5622256Z     [90m340| [39m      
2025-06-04T22:41:45.5623302Z     [90m341| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5624808Z     [90m342| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
2025-06-04T22:41:45.5625802Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5626905Z     [90m343| [39m      [34mexpect[39m(responseData[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Export Failed'[39m)[33m;[39m
2025-06-04T22:41:45.5628483Z     [90m344| [39m      [34mexpect[39m(responseData[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Database connection failed'[39m)[33m;[39m
2025-06-04T22:41:45.5629429Z 
2025-06-04T22:41:45.5629862Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[159/523]⎯[22m[39m
2025-06-04T22:41:45.5630176Z 
2025-06-04T22:41:45.5631821Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/export.test.ts[2m > [22mBias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle invalid format parameter gracefully
2025-06-04T22:41:45.5633444Z [31m[1mError[22m: expected 400 to be 200[39m
2025-06-04T22:41:45.5634391Z [36m [2m❯[22m src/pages/api/bias-detection/export.test.ts:[2m367:31[22m[39m
2025-06-04T22:41:45.5635581Z     [90m365| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mGET[39m({ request } [35mas[39m any)[33m;[39m
2025-06-04T22:41:45.5636377Z     [90m366| [39m
2025-06-04T22:41:45.5637633Z     [90m367| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
2025-06-04T22:41:45.5638633Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.5639300Z     [90m368| [39m
2025-06-04T22:41:45.5639872Z     [90m369| [39m      [90m// Should fall back to JSON format[39m
2025-06-04T22:41:45.5640234Z 
2025-06-04T22:41:45.5640598Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[160/523]⎯[22m[39m
2025-06-04T22:41:45.5640917Z 
2025-06-04T22:41:45.5642496Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/export.test.ts[2m > [22mBias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould handle export timeout scenarios
2025-06-04T22:41:45.5651248Z [31m[1mError[22m: expected undefined to be false[39m
2025-06-04T22:41:45.5652201Z [36m [2m❯[22m src/pages/api/bias-detection/export.test.ts:[2m484:36[22m[39m
2025-06-04T22:41:45.5652844Z     [90m482| [39m      
2025-06-04T22:41:45.5653844Z     [90m483| [39m      [35mconst[39m responseData [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
2025-06-04T22:41:45.5655299Z     [90m484| [39m      [34mexpect[39m(responseData[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
2025-06-04T22:41:45.5656357Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.5657504Z     [90m485| [39m      [34mexpect[39m(responseData[33m.[39merror)[33m.[39m[34mtoBe[39m([32m'Export Failed'[39m)[33m;[39m
2025-06-04T22:41:45.5659496Z     [90m486| [39m      [34mexpect[39m(responseData[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m'Export timeout'[39m)[33m;[39m
2025-06-04T22:41:45.5660179Z 
2025-06-04T22:41:45.5660603Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[161/523]⎯[22m[39m
2025-06-04T22:41:45.5660929Z 
2025-06-04T22:41:45.5662621Z [41m[1m FAIL [22m[49m src/pages/api/bias-detection/export.test.ts[2m > [22mBias Detection Export API Endpoint[2m > [22mGET /api/bias-detection/export[2m > [22mshould log export completion with metrics
2025-06-04T22:41:45.5664408Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ …(2) ][90m
2025-06-04T22:41:45.5664943Z 
2025-06-04T22:41:45.5665176Z Number of calls: [1m0[22m
2025-06-04T22:41:45.5665574Z [31m[39m
2025-06-04T22:41:45.5666349Z [36m [2m❯[22m src/pages/api/bias-detection/export.test.ts:[2m504:31[22m[39m
2025-06-04T22:41:45.5667013Z     [90m502| [39m
2025-06-04T22:41:45.5667591Z     [90m503| [39m      [90m// Verify completion logging[39m
2025-06-04T22:41:45.5668626Z     [90m504| [39m      [34mexpect[39m(mockLogger[33m.[39minfo)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.5669684Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.5670531Z     [90m505| [39m        [32m'Bias detection data exported successfully'[39m[33m,[39m
2025-06-04T22:41:45.5671614Z     [90m506| [39m        expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.5672015Z 
2025-06-04T22:41:45.5672407Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[162/523]⎯[22m[39m
2025-06-04T22:41:45.5672725Z 
2025-06-04T22:41:45.5673988Z [41m[1m FAIL [22m[49m src/simulator/components/__tests__/EmotionDisplay.test.tsx[2m > [22mEmotionDisplay[2m > [22mrenders progress bars with correct widths
2025-06-04T22:41:45.5675311Z [31m[1mError[22m: Invalid Chai property: toHaveStyle[39m
2025-06-04T22:41:45.5676490Z [36m [2m❯[22m src/simulator/components/__tests__/EmotionDisplay.test.tsx:[2m60:17[22m[39m
2025-06-04T22:41:45.5677780Z     [90m 58| [39m    [35mconst[39m expectedWidths [33m=[39m [[34m75[39m[33m,[39m [34m60[39m[33m,[39m [34m40[39m]
2025-06-04T22:41:45.5678789Z     [90m 59| [39m    progressBars[33m.[39m[34mforEach[39m((bar[33m,[39m index) [33m=>[39m {
2025-06-04T22:41:45.5680304Z     [90m 60| [39m      [34mexpect[39m(bar)[33m.[39m[34mtoHaveStyle[39m({ width[33m:[39m [32m`[39m[36m${[39mexpectedWidths[index][36m}[39m[32m%`[39m })
2025-06-04T22:41:45.5681366Z     [90m   | [39m                [31m^[39m
2025-06-04T22:41:45.5681919Z     [90m 61| [39m    })
2025-06-04T22:41:45.5682352Z     [90m 62| [39m  })
2025-06-04T22:41:45.5683268Z [90m [2m❯[22m src/simulator/components/__tests__/EmotionDisplay.test.tsx:[2m59:18[22m[39m
2025-06-04T22:41:45.5683813Z 
2025-06-04T22:41:45.5684211Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[163/523]⎯[22m[39m
2025-06-04T22:41:45.5684545Z 
2025-06-04T22:41:45.5686005Z [41m[1m FAIL [22m[49m src/simulator/components/__tests__/TechniqueDisplay.test.tsx[2m > [22mTechniqueDisplay[2m > [22mdisplays detected techniques with confidence levels
2025-06-04T22:41:45.5689403Z [31m[1mTestingLibraryElementError[22m: Unable to find an element with the text: Cognitive Reframing (95.0%). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
2025-06-04T22:41:45.5690927Z 
2025-06-04T22:41:45.5691225Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.5691739Z [36m<body>[31m
2025-06-04T22:41:45.5692077Z   [36m<div>[31m
2025-06-04T22:41:45.5692408Z     [36m<div[31m
2025-06-04T22:41:45.5692906Z       [33mclass[31m=[32m"p-4 border rounded-lg"[31m
2025-06-04T22:41:45.5693432Z     [36m>[31m
2025-06-04T22:41:45.5693836Z       [36m<h2[31m
2025-06-04T22:41:45.5694443Z         [33mclass[31m=[32m"text-lg font-semibold mb-2"[31m
2025-06-04T22:41:45.5694977Z       [36m>[31m
2025-06-04T22:41:45.5695730Z         [0mDetected Techniques[0m
2025-06-04T22:41:45.5696249Z       [36m</h2>[31m
2025-06-04T22:41:45.5696636Z       [36m<p[31m
2025-06-04T22:41:45.5697175Z         [33mclass[31m=[32m"text-muted-foreground"[31m
2025-06-04T22:41:45.5697693Z       [36m>[31m
2025-06-04T22:41:45.5698220Z         [0mNo therapeutic techniques detected yet.[0m
2025-06-04T22:41:45.5698735Z       [36m</p>[31m
2025-06-04T22:41:45.5699307Z     [36m</div>[31m
2025-06-04T22:41:45.5699707Z   [36m</div>[31m
2025-06-04T22:41:45.5699950Z [36m</body>[31m[39m
2025-06-04T22:41:45.5700781Z [90m [2m❯[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
2025-06-04T22:41:45.5701889Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
2025-06-04T22:41:45.5702911Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
2025-06-04T22:41:45.5703916Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
2025-06-04T22:41:45.5704768Z [36m [2m❯[22m src/simulator/components/__tests__/TechniqueDisplay.test.tsx:[2m34:21[22m[39m
2025-06-04T22:41:45.5705398Z     [90m 32| [39m    mockTechniques[33m.[39m[34mforEach[39m((technique) [33m=>[39m {
2025-06-04T22:41:45.5706145Z     [90m 33| [39m      const expectedText = `${technique.name} (${(technique.confidence…
2025-06-04T22:41:45.5706870Z     [90m 34| [39m      [34mexpect[39m(screen[33m.[39m[34mgetByText[39m(expectedText))[33m.[39m[34mtoBeInTheDocument[39m()
2025-06-04T22:41:45.5707658Z     [90m   | [39m                    [31m^[39m
2025-06-04T22:41:45.5708117Z     [90m 35| [39m    })
2025-06-04T22:41:45.5708435Z     [90m 36| [39m  })
2025-06-04T22:41:45.5709319Z [90m [2m❯[22m src/simulator/components/__tests__/TechniqueDisplay.test.tsx:[2m32:20[22m[39m
2025-06-04T22:41:45.5709888Z 
2025-06-04T22:41:45.5710180Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[164/523]⎯[22m[39m
2025-06-04T22:41:45.5710365Z 
2025-06-04T22:41:45.5711676Z [41m[1m FAIL [22m[49m src/simulator/components/__tests__/TechniqueDisplay.test.tsx[2m > [22mTechniqueDisplay[2m > [22mapplies correct badge variants based on confidence levels
2025-06-04T22:41:45.5713850Z [31m[1mTestingLibraryElementError[22m: Unable to find an element with the text: /.*\(\d+\.\d+%\)/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
2025-06-04T22:41:45.5714604Z 
2025-06-04T22:41:45.5714743Z Ignored nodes: comments, script, style
2025-06-04T22:41:45.5715011Z [36m<body>[31m
2025-06-04T22:41:45.5715225Z   [36m<div>[31m
2025-06-04T22:41:45.5715423Z     [36m<div[31m
2025-06-04T22:41:45.5715727Z       [33mclass[31m=[32m"p-4 border rounded-lg"[31m
2025-06-04T22:41:45.5716027Z     [36m>[31m
2025-06-04T22:41:45.5716226Z       [36m<h2[31m
2025-06-04T22:41:45.5716545Z         [33mclass[31m=[32m"text-lg font-semibold mb-2"[31m
2025-06-04T22:41:45.5716845Z       [36m>[31m
2025-06-04T22:41:45.5717087Z         [0mDetected Techniques[0m
2025-06-04T22:41:45.5717342Z       [36m</h2>[31m
2025-06-04T22:41:45.5717547Z       [36m<p[31m
2025-06-04T22:41:45.5717843Z         [33mclass[31m=[32m"text-muted-foreground"[31m
2025-06-04T22:41:45.5718134Z       [36m>[31m
2025-06-04T22:41:45.5718415Z         [0mNo therapeutic techniques detected yet.[0m
2025-06-04T22:41:45.5718700Z       [36m</p>[31m
2025-06-04T22:41:45.5718906Z     [36m</div>[31m
2025-06-04T22:41:45.5719314Z   [36m</div>[31m
2025-06-04T22:41:45.5719548Z [36m</body>[31m[39m
2025-06-04T22:41:45.5720349Z [90m [2m❯[22m Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
2025-06-04T22:41:45.5721578Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
2025-06-04T22:41:45.5722631Z [90m [2m❯[22m node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:[2m109:15[22m[39m
2025-06-04T22:41:45.5724077Z [36m [2m❯[22m src/simulator/components/__tests__/TechniqueDisplay.test.tsx:[2m41:27[22m[39m
2025-06-04T22:41:45.5724992Z     [90m 39| [39m    [34mrenderWithContext[39m(mockTechniques)
2025-06-04T22:41:45.5725307Z     [90m 40| [39m
2025-06-04T22:41:45.5726147Z     [90m 41| [39m    [35mconst[39m badges [33m=[39m screen[33m.[39m[34mgetAllByText[39m([36m/.*\(\d+\.\d+%\)/[39m)
2025-06-04T22:41:45.5726853Z     [90m   | [39m                          [31m^[39m
2025-06-04T22:41:45.5727315Z     [90m 42| [39m
2025-06-04T22:41:45.5727949Z     [90m 43| [39m    [90m// High confidence techniques should have default variant[39m
2025-06-04T22:41:45.5728301Z 
2025-06-04T22:41:45.5728672Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[165/523]⎯[22m[39m
2025-06-04T22:41:45.5728966Z 
2025-06-04T22:41:45.5730422Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mInitialization[2m > [22mshould initialize with default configuration
2025-06-04T22:41:45.5732004Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'pythonServiceUrl')[39m
2025-06-04T22:41:45.5733554Z [36m [2m❯[22m new BiasDetectionEngine src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m30:62[22m[39m
2025-06-04T22:41:45.5734558Z     [90m 28| [39m  [34mconstructor[39m(config[33m:[39m [33mBiasDetectionConfig[39m) {
2025-06-04T22:41:45.5735358Z     [90m 29| [39m    [35mthis[39m[33m.[39mconfig [33m=[39m config[33m;[39m
2025-06-04T22:41:45.5736319Z     [90m 30| [39m    this.pythonBridge = new PythonBiasDetectionBridge(config.pythonSer…
2025-06-04T22:41:45.5737103Z     [90m   | [39m                                                             [31m^[39m
2025-06-04T22:41:45.5737986Z     [90m 31| [39m    this.metricsCollector = new BiasMetricsCollector(config.metricsCon…
2025-06-04T22:41:45.5739280Z     [90m 32| [39m    [35mthis[39m[33m.[39malertSystem [33m=[39m [35mnew[39m [33mBiasAlertSystem[39m(config[33m.[39malertConfig)[33m;[39m
2025-06-04T22:41:45.5740607Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m108:29[22m[39m
2025-06-04T22:41:45.5741184Z 
2025-06-04T22:41:45.5741560Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[166/523]⎯[22m[39m
2025-06-04T22:41:45.5741810Z 
2025-06-04T22:41:45.5742648Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mInitialization[2m > [22mshould validate configuration parameters
2025-06-04T22:41:45.5743549Z [31m[1mAssertionError[22m: expected [Function] to throw an error[39m
2025-06-04T22:41:45.5743819Z 
2025-06-04T22:41:45.5743938Z [32m- Expected:[39m 
2025-06-04T22:41:45.5744129Z null
2025-06-04T22:41:45.5744223Z 
2025-06-04T22:41:45.5744354Z [31m+ Received:[39m 
2025-06-04T22:41:45.5744541Z undefined
2025-06-04T22:41:45.5744636Z 
2025-06-04T22:41:45.5745060Z [36m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m125:10[22m[39m
2025-06-04T22:41:45.5745718Z     [90m123| [39m          criticalThreshold[33m:[39m [34m0.8[39m
2025-06-04T22:41:45.5746089Z     [90m124| [39m        })[33m;[39m
2025-06-04T22:41:45.5746571Z     [90m125| [39m      })[33m.[39m[34mtoThrow[39m([32m'Invalid threshold values'[39m)[33m;[39m
2025-06-04T22:41:45.5746982Z     [90m   | [39m         [31m^[39m
2025-06-04T22:41:45.5747260Z     [90m126| [39m    })[33m;[39m
2025-06-04T22:41:45.5747535Z     [90m127| [39m  })[33m;[39m
2025-06-04T22:41:45.5747683Z 
2025-06-04T22:41:45.5747887Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[167/523]⎯[22m[39m
2025-06-04T22:41:45.5748062Z 
2025-06-04T22:41:45.5749740Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mSession Analysis[2m > [22mshould analyze session and return bias results
2025-06-04T22:41:45.5751249Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5752627Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5753777Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5754680Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5755495Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5756200Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5756643Z     [90m266| [39m    }
2025-06-04T22:41:45.5756961Z     [90m267| [39m  }
2025-06-04T22:41:45.5758021Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5759482Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m131:39[22m[39m
2025-06-04T22:41:45.5760022Z 
2025-06-04T22:41:45.5760401Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[168/523]⎯[22m[39m
2025-06-04T22:41:45.5760694Z 
2025-06-04T22:41:45.5762059Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mSession Analysis[2m > [22mshould handle missing required fields
2025-06-04T22:41:45.5764064Z [31m[1mAssertionError[22m: expected [Function] to throw error including 'Missing required session data' but got 'Bias Detection Engine not initialized…'[39m
2025-06-04T22:41:45.5764964Z 
2025-06-04T22:41:45.5765244Z Expected: [32m"Missing required session data"[39m
2025-06-04T22:41:45.5766208Z Received: [31m"Bias Detection Engine not initialized. Call initialize() first."[39m
2025-06-04T22:41:45.5766574Z 
2025-06-04T22:41:45.5766942Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[169/523]⎯[22m[39m
2025-06-04T22:41:45.5767240Z 
2025-06-04T22:41:45.5768670Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mSession Analysis[2m > [22mshould apply HIPAA compliance when enabled
2025-06-04T22:41:45.5770376Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5771515Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5772291Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5772901Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5773861Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5774333Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5774782Z     [90m266| [39m    }
2025-06-04T22:41:45.5775150Z     [90m267| [39m  }
2025-06-04T22:41:45.5776189Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5777476Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m150:39[22m[39m
2025-06-04T22:41:45.5778066Z 
2025-06-04T22:41:45.5778351Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[170/523]⎯[22m[39m
2025-06-04T22:41:45.5778660Z 
2025-06-04T22:41:45.5780224Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mSession Analysis[2m > [22mshould calculate correct alert levels
2025-06-04T22:41:45.5781497Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5782341Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5783269Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5783823Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5784369Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5784790Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5785047Z     [90m266| [39m    }
2025-06-04T22:41:45.5785267Z     [90m267| [39m  }
2025-06-04T22:41:45.5785904Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5786727Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m159:46[22m[39m
2025-06-04T22:41:45.5787058Z 
2025-06-04T22:41:45.5787262Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[171/523]⎯[22m[39m
2025-06-04T22:41:45.5787449Z 
2025-06-04T22:41:45.5788657Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mMulti-Layer Analysis[2m > [22mshould perform preprocessing layer analysis
2025-06-04T22:41:45.5790495Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5791993Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5793256Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5794245Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5795187Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5795909Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5796317Z     [90m266| [39m    }
2025-06-04T22:41:45.5796541Z     [90m267| [39m  }
2025-06-04T22:41:45.5797183Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5797995Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m185:39[22m[39m
2025-06-04T22:41:45.5798328Z 
2025-06-04T22:41:45.5798535Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[172/523]⎯[22m[39m
2025-06-04T22:41:45.5798713Z 
2025-06-04T22:41:45.5799782Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mMulti-Layer Analysis[2m > [22mshould perform model-level analysis
2025-06-04T22:41:45.5800754Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5801599Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5802354Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5802901Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5803429Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5803834Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5804092Z     [90m266| [39m    }
2025-06-04T22:41:45.5804315Z     [90m267| [39m  }
2025-06-04T22:41:45.5804947Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5805762Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m192:39[22m[39m
2025-06-04T22:41:45.5806093Z 
2025-06-04T22:41:45.5806296Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[173/523]⎯[22m[39m
2025-06-04T22:41:45.5806472Z 
2025-06-04T22:41:45.5807310Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mMulti-Layer Analysis[2m > [22mshould perform interactive analysis
2025-06-04T22:41:45.5808441Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5809387Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5810145Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5810693Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5811222Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5811629Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5811886Z     [90m266| [39m    }
2025-06-04T22:41:45.5812101Z     [90m267| [39m  }
2025-06-04T22:41:45.5812736Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5813559Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m199:39[22m[39m
2025-06-04T22:41:45.5813887Z 
2025-06-04T22:41:45.5814096Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[174/523]⎯[22m[39m
2025-06-04T22:41:45.5814270Z 
2025-06-04T22:41:45.5815253Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mMulti-Layer Analysis[2m > [22mshould perform evaluation layer analysis
2025-06-04T22:41:45.5816234Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5817070Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5817812Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5818370Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5818903Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5819505Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5819756Z     [90m266| [39m    }
2025-06-04T22:41:45.5819973Z     [90m267| [39m  }
2025-06-04T22:41:45.5820626Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5821437Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m206:39[22m[39m
2025-06-04T22:41:45.5821764Z 
2025-06-04T22:41:45.5821973Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[175/523]⎯[22m[39m
2025-06-04T22:41:45.5822148Z 
2025-06-04T22:41:45.5823237Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mDashboard Data[2m > [22mshould generate dashboard data
2025-06-04T22:41:45.5824776Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5825861Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5826601Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5827360Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5828228Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5828944Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5829496Z     [90m266| [39m    }
2025-06-04T22:41:45.5829721Z     [90m267| [39m  }
2025-06-04T22:41:45.5830380Z [90m [2m❯[22m BiasDetectionEngine.getDashboardData src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m229:10[22m[39m
2025-06-04T22:41:45.5831356Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m215:46[22m[39m
2025-06-04T22:41:45.5831954Z 
2025-06-04T22:41:45.5832223Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[176/523]⎯[22m[39m
2025-06-04T22:41:45.5832531Z 
2025-06-04T22:41:45.5833734Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mDashboard Data[2m > [22mshould filter dashboard data by time range
2025-06-04T22:41:45.5834701Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5836072Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5837365Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5837916Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5838451Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5838964Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5839545Z     [90m266| [39m    }
2025-06-04T22:41:45.5839909Z     [90m267| [39m  }
2025-06-04T22:41:45.5841037Z [90m [2m❯[22m BiasDetectionEngine.getDashboardData src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m229:10[22m[39m
2025-06-04T22:41:45.5842563Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m228:40[22m[39m
2025-06-04T22:41:45.5842921Z 
2025-06-04T22:41:45.5843153Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[177/523]⎯[22m[39m
2025-06-04T22:41:45.5843333Z 
2025-06-04T22:41:45.5844194Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mDashboard Data[2m > [22mshould filter dashboard data by demographics
2025-06-04T22:41:45.5845350Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5846788Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5847799Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5848351Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5849036Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5849920Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5850298Z     [90m266| [39m    }
2025-06-04T22:41:45.5850665Z     [90m267| [39m  }
2025-06-04T22:41:45.5851596Z [90m [2m❯[22m BiasDetectionEngine.getDashboardData src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m229:10[22m[39m
2025-06-04T22:41:45.5852440Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m237:40[22m[39m
2025-06-04T22:41:45.5852872Z 
2025-06-04T22:41:45.5853488Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[178/523]⎯[22m[39m
2025-06-04T22:41:45.5853799Z 
2025-06-04T22:41:45.5855126Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mReal-time Monitoring[2m > [22mshould start monitoring
2025-06-04T22:41:45.5856016Z [31m[1mTypeError[22m: biasEngine.startMonitoring is not a function[39m
2025-06-04T22:41:45.5856985Z [36m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m249:24[22m[39m
2025-06-04T22:41:45.5858212Z     [90m247| [39m    [34mit[39m([32m'should start monitoring'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.5859056Z     [90m248| [39m      [35mconst[39m mockCallback [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
2025-06-04T22:41:45.5859937Z     [90m249| [39m      [35mawait[39m biasEngine[33m.[39m[34mstartMonitoring[39m(mockCallback)[33m;[39m
2025-06-04T22:41:45.5860677Z     [90m   | [39m                       [31m^[39m
2025-06-04T22:41:45.5861161Z     [90m250| [39m      
2025-06-04T22:41:45.5862142Z     [90m251| [39m      [34mexpect[39m(biasEngine[[32m'isMonitoring'[39m])[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2025-06-04T22:41:45.5862622Z 
2025-06-04T22:41:45.5862838Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[179/523]⎯[22m[39m
2025-06-04T22:41:45.5863013Z 
2025-06-04T22:41:45.5863812Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mReal-time Monitoring[2m > [22mshould stop monitoring
2025-06-04T22:41:45.5864689Z [31m[1mTypeError[22m: biasEngine.startMonitoring is not a function[39m
2025-06-04T22:41:45.5865368Z [36m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m256:24[22m[39m
2025-06-04T22:41:45.5866078Z     [90m254| [39m    [34mit[39m([32m'should stop monitoring'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.5866732Z     [90m255| [39m      [35mconst[39m mockCallback [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
2025-06-04T22:41:45.5867395Z     [90m256| [39m      [35mawait[39m biasEngine[33m.[39m[34mstartMonitoring[39m(mockCallback)[33m;[39m
2025-06-04T22:41:45.5867872Z     [90m   | [39m                       [31m^[39m
2025-06-04T22:41:45.5868363Z     [90m257| [39m      [35mawait[39m biasEngine[33m.[39m[34mstopMonitoring[39m()[33m;[39m
2025-06-04T22:41:45.5868743Z     [90m258| [39m      
2025-06-04T22:41:45.5868876Z 
2025-06-04T22:41:45.5869332Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[180/523]⎯[22m[39m
2025-06-04T22:41:45.5869528Z 
2025-06-04T22:41:45.5870414Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mReal-time Monitoring[2m > [22mshould trigger alerts for high bias scores
2025-06-04T22:41:45.5871341Z [31m[1mTypeError[22m: biasEngine.startMonitoring is not a function[39m
2025-06-04T22:41:45.5872018Z [36m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m264:24[22m[39m
2025-06-04T22:41:45.5872801Z     [90m262| [39m    [34mit[39m([32m'should trigger alerts for high bias scores'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.5873493Z     [90m263| [39m      [35mconst[39m mockCallback [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
2025-06-04T22:41:45.5874143Z     [90m264| [39m      [35mawait[39m biasEngine[33m.[39m[34mstartMonitoring[39m(mockCallback)[33m;[39m
2025-06-04T22:41:45.5874630Z     [90m   | [39m                       [31m^[39m
2025-06-04T22:41:45.5874898Z     [90m265| [39m
2025-06-04T22:41:45.5875237Z     [90m266| [39m      [90m// Simulate high bias session[39m
2025-06-04T22:41:45.5875443Z 
2025-06-04T22:41:45.5875647Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[181/523]⎯[22m[39m
2025-06-04T22:41:45.5875824Z 
2025-06-04T22:41:45.5876785Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mPerformance Requirements[2m > [22mshould complete analysis within 100ms for simple sessions
2025-06-04T22:41:45.5877963Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5878810Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5879778Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5880353Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5880885Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5881301Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5881557Z     [90m266| [39m    }
2025-06-04T22:41:45.5881778Z     [90m267| [39m  }
2025-06-04T22:41:45.5882423Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5883252Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m293:24[22m[39m
2025-06-04T22:41:45.5883585Z 
2025-06-04T22:41:45.5883791Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[182/523]⎯[22m[39m
2025-06-04T22:41:45.5883967Z 
2025-06-04T22:41:45.5884960Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mPerformance Requirements[2m > [22mshould handle concurrent sessions
2025-06-04T22:41:45.5885942Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5887074Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5888245Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5889363Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5889937Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5890347Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5890607Z     [90m266| [39m    }
2025-06-04T22:41:45.5890824Z     [90m267| [39m  }
2025-06-04T22:41:45.5891460Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5892284Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m307:44[22m[39m
2025-06-04T22:41:45.5893014Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m307:18[22m[39m
2025-06-04T22:41:45.5893339Z 
2025-06-04T22:41:45.5893553Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[183/523]⎯[22m[39m
2025-06-04T22:41:45.5893731Z 
2025-06-04T22:41:45.5894591Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mError Handling[2m > [22mshould handle Python service errors gracefully
2025-06-04T22:41:45.5895591Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'analyze_session')[39m
2025-06-04T22:41:45.5896312Z [36m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m318:45[22m[39m
2025-06-04T22:41:45.5896940Z     [90m316| [39m  [34mdescribe[39m([32m'Error Handling'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.5897687Z     [90m317| [39m    [34mit[39m([32m'should handle Python service errors gracefully'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.5898373Z     [90m318| [39m      vi.mocked(biasEngine['pythonService'].analyze_session).mockRejec…
2025-06-04T22:41:45.5898846Z     [90m   | [39m                                            [31m^[39m
2025-06-04T22:41:45.5899537Z     [90m319| [39m        [35mnew[39m [33mError[39m([32m'Python service unavailable'[39m)
2025-06-04T22:41:45.5900114Z     [90m320| [39m      )[33m;[39m
2025-06-04T22:41:45.5900274Z 
2025-06-04T22:41:45.5900481Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[184/523]⎯[22m[39m
2025-06-04T22:41:45.5900656Z 
2025-06-04T22:41:45.5901583Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mError Handling[2m > [22mshould provide fallback analysis when toolkits are unavailable
2025-06-04T22:41:45.5902629Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'analyze_session')[39m
2025-06-04T22:41:45.5903351Z [36m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m328:45[22m[39m
2025-06-04T22:41:45.5903976Z     [90m326| [39m    it('should provide fallback analysis when toolkits are unavailable…
2025-06-04T22:41:45.5904475Z     [90m327| [39m      [90m// Mock toolkit unavailability[39m
2025-06-04T22:41:45.5904977Z     [90m328| [39m      vi.mocked(biasEngine['pythonService'].analyze_session).mockResol…
2025-06-04T22:41:45.5905453Z     [90m   | [39m                                            [31m^[39m
2025-06-04T22:41:45.5905946Z     [90m329| [39m        session_id[33m:[39m mockSessionData[33m.[39msessionId[33m,[39m
2025-06-04T22:41:45.5906551Z     [90m330| [39m        overall_bias_score[33m:[39m [34m0.5[39m[33m,[39m [90m// Fallback score[39m
2025-06-04T22:41:45.5906884Z 
2025-06-04T22:41:45.5907256Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[185/523]⎯[22m[39m
2025-06-04T22:41:45.5907560Z 
2025-06-04T22:41:45.5909362Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mData Privacy and Security[2m > [22mshould mask sensitive demographic data
2025-06-04T22:41:45.5910714Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5911570Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5912336Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5913276Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5913936Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5914664Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5915114Z     [90m266| [39m    }
2025-06-04T22:41:45.5915354Z     [90m267| [39m  }
2025-06-04T22:41:45.5916005Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5916827Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m351:39[22m[39m
2025-06-04T22:41:45.5917163Z 
2025-06-04T22:41:45.5917369Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[186/523]⎯[22m[39m
2025-06-04T22:41:45.5917544Z 
2025-06-04T22:41:45.5918412Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mData Privacy and Security[2m > [22mshould create audit logs when enabled
2025-06-04T22:41:45.5919612Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5920468Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5921224Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5921785Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5922420Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5923135Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5923462Z     [90m266| [39m    }
2025-06-04T22:41:45.5923739Z     [90m267| [39m  }
2025-06-04T22:41:45.5924864Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5926627Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m361:24[22m[39m
2025-06-04T22:41:45.5927216Z 
2025-06-04T22:41:45.5927595Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[187/523]⎯[22m[39m
2025-06-04T22:41:45.5927900Z 
2025-06-04T22:41:45.5929844Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mData Privacy and Security[2m > [22mshould not create audit logs when disabled
2025-06-04T22:41:45.5931626Z [31m[1mError[22m: Bias Detection Engine not initialized. Call initialize() first.[39m
2025-06-04T22:41:45.5933157Z [36m [2m❯[22m BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m265:13[22m[39m
2025-06-04T22:41:45.5934536Z     [90m263| [39m  [35mprivate[39m [34mensureInitialized[39m()[33m:[39m [35mvoid[39m {
2025-06-04T22:41:45.5935592Z     [90m264| [39m    [35mif[39m ([33m![39m[35mthis[39m[33m.[39misInitialized) {
2025-06-04T22:41:45.5935926Z     [90m265| [39m      throw new Error('Bias Detection Engine not initialized. Call ini…
2025-06-04T22:41:45.5936083Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5936274Z     [90m266| [39m    }
2025-06-04T22:41:45.5936457Z     [90m267| [39m  }
2025-06-04T22:41:45.5937558Z [90m [2m❯[22m BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:[2m63:10[22m[39m
2025-06-04T22:41:45.5938369Z [90m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m374:27[22m[39m
2025-06-04T22:41:45.5938384Z 
2025-06-04T22:41:45.5938793Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[188/523]⎯[22m[39m
2025-06-04T22:41:45.5938808Z 
2025-06-04T22:41:45.5940825Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mIntegration with Existing Systems[2m > [22mshould integrate with session management system
2025-06-04T22:41:45.5941545Z [31m[1mTypeError[22m: biasEngine.getSessionAnalysis is not a function[39m
2025-06-04T22:41:45.5942276Z [36m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m384:39[22m[39m
2025-06-04T22:41:45.5942501Z     [90m382| [39m      [90m// Mock session retrieval[39m
2025-06-04T22:41:45.5942874Z     [90m383| [39m      [35mconst[39m sessionId [33m=[39m [32m'existing-session-123'[39m[33m;[39m
2025-06-04T22:41:45.5943764Z     [90m384| [39m      [35mconst[39m result [33m=[39m [35mawait[39m biasEngine[33m.[39m[34mgetSessionAnalysis[39m(sessionId)[33m;[39m
2025-06-04T22:41:45.5944117Z     [90m   | [39m                                      [31m^[39m
2025-06-04T22:41:45.5944303Z     [90m385| [39m      
2025-06-04T22:41:45.5944620Z     [90m386| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
2025-06-04T22:41:45.5944629Z 
2025-06-04T22:41:45.5944857Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[189/523]⎯[22m[39m
2025-06-04T22:41:45.5944865Z 
2025-06-04T22:41:45.5946335Z [41m[1m FAIL [22m[49m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts[2m > [22mBiasDetectionEngine[2m > [22mIntegration with Existing Systems[2m > [22mshould provide metrics for analytics dashboard
2025-06-04T22:41:45.5946855Z [31m[1mTypeError[22m: biasEngine.getMetrics is not a function[39m
2025-06-04T22:41:45.5947658Z [36m [2m❯[22m src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:[2m391:40[22m[39m
2025-06-04T22:41:45.5947796Z     [90m389| [39m
2025-06-04T22:41:45.5948652Z     [90m390| [39m    [34mit[39m([32m'should provide metrics for analytics dashboard'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.5949507Z     [90m391| [39m      [35mconst[39m metrics [33m=[39m [35mawait[39m biasEngine[33m.[39m[34mgetMetrics[39m({
2025-06-04T22:41:45.5949879Z     [90m   | [39m                                       [31m^[39m
2025-06-04T22:41:45.5950544Z     [90m392| [39m        timeRange[33m:[39m [32m'24h'[39m[33m,[39m
2025-06-04T22:41:45.5950939Z     [90m393| [39m        includeDetails[33m:[39m [35mtrue[39m
2025-06-04T22:41:45.5950952Z 
2025-06-04T22:41:45.5951312Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[190/523]⎯[22m[39m
2025-06-04T22:41:45.5951324Z 
2025-06-04T22:41:45.5953197Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22mPatientPsiInsightsService[2m > [22mComprehensive Insights Generation[2m > [22mshould generate complete insights with all focus areas
2025-06-04T22:41:45.5954024Z [31m[1mError[22m: Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.5955082Z [36m [2m❯[22m PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m218:13[22m[39m
2025-06-04T22:41:45.5955385Z     [90m216| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.5956072Z     [90m217| [39m      console[33m.[39m[34merror[39m([32m'Error generating insights:'[39m[33m,[39m error)
2025-06-04T22:41:45.5956471Z     [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.5956722Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5957125Z     [90m219| [39m        `Failed to generate insights: ${error instanceof Error ? error…
2025-06-04T22:41:45.5957237Z     [90m220| [39m      )
2025-06-04T22:41:45.5957816Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:[2m253:24[22m[39m
2025-06-04T22:41:45.5957827Z 
2025-06-04T22:41:45.5958061Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[191/523]⎯[22m[39m
2025-06-04T22:41:45.5958070Z 
2025-06-04T22:41:45.5958994Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22mPatientPsiInsightsService[2m > [22mComprehensive Insights Generation[2m > [22mshould handle caching correctly
2025-06-04T22:41:45.5959692Z [31m[1mError[22m: Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.5960299Z [36m [2m❯[22m PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m218:13[22m[39m
2025-06-04T22:41:45.5960471Z     [90m216| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.5960844Z     [90m217| [39m      console[33m.[39m[34merror[39m([32m'Error generating insights:'[39m[33m,[39m error)
2025-06-04T22:41:45.5961077Z     [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.5961224Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5961643Z     [90m219| [39m        `Failed to generate insights: ${error instanceof Error ? error…
2025-06-04T22:41:45.5961844Z     [90m220| [39m      )
2025-06-04T22:41:45.5962611Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:[2m294:25[22m[39m
2025-06-04T22:41:45.5962625Z 
2025-06-04T22:41:45.5963015Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[192/523]⎯[22m[39m
2025-06-04T22:41:45.5963042Z 
2025-06-04T22:41:45.5964683Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22mPatientPsiInsightsService[2m > [22mEmotional Pattern Analysis[2m > [22mshould analyze emotional patterns correctly
2025-06-04T22:41:45.5965221Z [31m[1mAssertionError[22m: expected undefined to be defined[39m
2025-06-04T22:41:45.5965934Z [36m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:[2m380:52[22m[39m
2025-06-04T22:41:45.5966122Z     [90m378| [39m
2025-06-04T22:41:45.5966483Z     [90m379| [39m      [90m// Check duration patterns[39m
2025-06-04T22:41:45.5967320Z     [90m380| [39m      [34mexpect[39m(patterns[33m.[39mdurationPatterns[[32m'anxiety'[39m])[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.5967712Z     [90m   | [39m                                                   [31m^[39m
2025-06-04T22:41:45.5968427Z     [90m381| [39m      [34mexpect[39m(patterns[33m.[39mdurationPatterns[[32m'anxiety'[39m][33m.[39mmoderate)[33m.[39m[34mtoBe[39m([34m1[39m)
2025-06-04T22:41:45.5969402Z     [90m382| [39m      [34mexpect[39m(patterns[33m.[39mdurationPatterns[[32m'anxiety'[39m][33m.[39mextended)[33m.[39m[34mtoBe[39m([34m1[39m)
2025-06-04T22:41:45.5969414Z 
2025-06-04T22:41:45.5969638Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[193/523]⎯[22m[39m
2025-06-04T22:41:45.5969652Z 
2025-06-04T22:41:45.5970609Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22mPatientPsiInsightsService[2m > [22mTherapeutic Insights Generation[2m > [22mshould generate therapeutic insights correctly
2025-06-04T22:41:45.5970957Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.5971302Z [36m [2m❯[22m src/lib/ai/datasets/patient-psi-insights.ts:[2m962:28[22m[39m
2025-06-04T22:41:45.5971408Z     [90m960| [39m
2025-06-04T22:41:45.5971818Z     [90m961| [39m    [35mconst[39m withdrawalPatterns [33m=[39m models[33m.[39m[34mfilter[39m((m) [33m=>[39m
2025-06-04T22:41:45.5972084Z     [90m962| [39m      m[33m.[39mbehavioralPatterns[33m.[39m[34msome[39m(
2025-06-04T22:41:45.5972265Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.5972416Z     [90m963| [39m        (bp) [33m=>[39m
2025-06-04T22:41:45.5973077Z     [90m964| [39m          bp[33m.[39mresponse[33m.[39m[34mtoLowerCase[39m()[33m.[39m[34mincludes[39m([32m'withdraw'[39m) [33m||[39m
2025-06-04T22:41:45.5974337Z [90m [2m❯[22m PatientPsiInsightsService.analyzeInterventionEffectiveness src/lib/ai/datasets/patient-psi-insights.ts:[2m961:39[22m[39m
2025-06-04T22:41:45.5975489Z [90m [2m❯[22m PatientPsiInsightsService.generateTherapeuticInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m555:12[22m[39m
2025-06-04T22:41:45.5976211Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:[2m435:32[22m[39m
2025-06-04T22:41:45.5976225Z 
2025-06-04T22:41:45.5976611Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[194/523]⎯[22m[39m
2025-06-04T22:41:45.5976622Z 
2025-06-04T22:41:45.5978216Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22mPatientPsiInsightsService[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle models with minimal data
2025-06-04T22:41:45.5979022Z [31m[1mError[22m: Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.5980212Z [36m [2m❯[22m PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m218:13[22m[39m
2025-06-04T22:41:45.5980542Z     [90m216| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.5981195Z     [90m217| [39m      console[33m.[39m[34merror[39m([32m'Error generating insights:'[39m[33m,[39m error)
2025-06-04T22:41:45.5981590Z     [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.5981832Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5982386Z     [90m219| [39m        `Failed to generate insights: ${error instanceof Error ? error…
2025-06-04T22:41:45.5982582Z     [90m220| [39m      )
2025-06-04T22:41:45.5983283Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:[2m572:24[22m[39m
2025-06-04T22:41:45.5983295Z 
2025-06-04T22:41:45.5983653Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[195/523]⎯[22m[39m
2025-06-04T22:41:45.5983663Z 
2025-06-04T22:41:45.5985312Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22mPatientPsiInsightsService[2m > [22mPerformance and Caching[2m > [22mshould cache results and improve performance on subsequent calls
2025-06-04T22:41:45.5985782Z [31m[1mError[22m: Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.5986348Z [36m [2m❯[22m PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m218:13[22m[39m
2025-06-04T22:41:45.5986691Z     [90m216| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.5987061Z     [90m217| [39m      console[33m.[39m[34merror[39m([32m'Error generating insights:'[39m[33m,[39m error)
2025-06-04T22:41:45.5987286Z     [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.5987435Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5987738Z     [90m219| [39m        `Failed to generate insights: ${error instanceof Error ? error…
2025-06-04T22:41:45.5987852Z     [90m220| [39m      )
2025-06-04T22:41:45.5988498Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:[2m615:25[22m[39m
2025-06-04T22:41:45.5988514Z 
2025-06-04T22:41:45.5988891Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[196/523]⎯[22m[39m
2025-06-04T22:41:45.5988906Z 
2025-06-04T22:41:45.5990023Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22mPatientPsiInsightsService[2m > [22mPerformance and Caching[2m > [22mshould handle large datasets efficiently
2025-06-04T22:41:45.5990491Z [31m[1mError[22m: Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.5991060Z [36m [2m❯[22m PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m218:13[22m[39m
2025-06-04T22:41:45.5991234Z     [90m216| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.5991757Z     [90m217| [39m      console[33m.[39m[34merror[39m([32m'Error generating insights:'[39m[33m,[39m error)
2025-06-04T22:41:45.5992001Z     [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.5992145Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5992441Z     [90m219| [39m        `Failed to generate insights: ${error instanceof Error ? error…
2025-06-04T22:41:45.5992547Z     [90m220| [39m      )
2025-06-04T22:41:45.5992960Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:[2m646:24[22m[39m
2025-06-04T22:41:45.5992975Z 
2025-06-04T22:41:45.5993180Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[197/523]⎯[22m[39m
2025-06-04T22:41:45.5993188Z 
2025-06-04T22:41:45.5994094Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[2m > [22mPatientPsiInsightsService[2m > [22mStatistical Accuracy[2m > [22mshould maintain data consistency across analyses
2025-06-04T22:41:45.5994544Z [31m[1mError[22m: Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.5995125Z [36m [2m❯[22m PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m218:13[22m[39m
2025-06-04T22:41:45.5995295Z     [90m216| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.5995667Z     [90m217| [39m      console[33m.[39m[34merror[39m([32m'Error generating insights:'[39m[33m,[39m error)
2025-06-04T22:41:45.5995891Z     [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.5996042Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.5996456Z     [90m219| [39m        `Failed to generate insights: ${error instanceof Error ? error…
2025-06-04T22:41:45.5996561Z     [90m220| [39m      )
2025-06-04T22:41:45.5996965Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:[2m678:24[22m[39m
2025-06-04T22:41:45.5996972Z 
2025-06-04T22:41:45.5997211Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[198/523]⎯[22m[39m
2025-06-04T22:41:45.5997237Z 
2025-06-04T22:41:45.5998611Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mshould validate minimal patient model structure
2025-06-04T22:41:45.5999006Z [31m[1mError[22m: expected null to be null[39m
2025-06-04T22:41:45.5999910Z [36m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m73:31[22m[39m
2025-06-04T22:41:45.6000239Z     [90m 71| [39m      [90m// Parse the mock data - this returns a CognitiveModel directly[39m
2025-06-04T22:41:45.6000563Z     [90m 72| [39m      const parsedModel = await parser.parsePatientPsiModel(mockPatien…
2025-06-04T22:41:45.6000879Z     [90m 73| [39m      [34mexpect[39m(parsedModel)[33m.[39mnot[33m.[39m[34mtoBeNull[39m()
2025-06-04T22:41:45.6001072Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.6001502Z     [90m 74| [39m      [34mexpect[39m(parsedModel[33m![39m[33m.[39mid)[33m.[39m[34mtoBe[39m([32m'test-patient-1'[39m)
2025-06-04T22:41:45.6001929Z     [90m 75| [39m      [34mexpect[39m(parsedModel[33m![39m[33m.[39mname)[33m.[39m[34mtoBe[39m([32m'Test Patient'[39m)
2025-06-04T22:41:45.6001938Z 
2025-06-04T22:41:45.6002143Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[199/523]⎯[22m[39m
2025-06-04T22:41:45.6002151Z 
2025-06-04T22:41:45.6002945Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mshould handle batch normalization of multiple models
2025-06-04T22:41:45.6003141Z [31m[1mError[22m: expected 0 to be 2[39m
2025-06-04T22:41:45.6003564Z [36m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m160:40[22m[39m
2025-06-04T22:41:45.6003672Z     [90m158| [39m      )
2025-06-04T22:41:45.6003774Z     [90m159| [39m
2025-06-04T22:41:45.6004160Z     [90m160| [39m      [34mexpect[39m(normalizedResults[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m2[39m)
2025-06-04T22:41:45.6004524Z     [90m   | [39m                                       [31m^[39m
2025-06-04T22:41:45.6005046Z     [90m161| [39m      [34mexpect[39m(normalizedResults[[34m0[39m][33m.[39mmodel[33m.[39mid)[33m.[39m[34mtoBe[39m([32m'patient-1'[39m)
2025-06-04T22:41:45.6005544Z     [90m162| [39m      [34mexpect[39m(normalizedResults[[34m1[39m][33m.[39mmodel[33m.[39mid)[33m.[39m[34mtoBe[39m([32m'patient-2'[39m)
2025-06-04T22:41:45.6005551Z 
2025-06-04T22:41:45.6005754Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[200/523]⎯[22m[39m
2025-06-04T22:41:45.6005769Z 
2025-06-04T22:41:45.6006549Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mshould generate appropriate conversion statistics
2025-06-04T22:41:45.6007043Z [31m[1mError[22m: Normalization failed for model stats-patient: Model completeness 0.25 below required 0.7[39m
2025-06-04T22:41:45.6007612Z [36m [2m❯[22m PatientPsiIntegration.normalizeModel src/lib/ai/datasets/patient-psi-integration.ts:[2m269:13[22m[39m
2025-06-04T22:41:45.6007720Z     [90m267| [39m      }
2025-06-04T22:41:45.6007816Z     [90m268| [39m
2025-06-04T22:41:45.6008047Z     [90m269| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.6008186Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6008495Z     [90m270| [39m        `Normalization failed for model ${parsedModel.id}: ${errorMess…
2025-06-04T22:41:45.6008598Z     [90m271| [39m      )
2025-06-04T22:41:45.6009011Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m219:7[22m[39m
2025-06-04T22:41:45.6009368Z 
2025-06-04T22:41:45.6009621Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[201/523]⎯[22m[39m
2025-06-04T22:41:45.6009628Z 
2025-06-04T22:41:45.6010483Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mError Handling[2m > [22mshould handle parser errors gracefully
2025-06-04T22:41:45.6011091Z [31m[1mAssertionError[22m: expected 'Normalization failed for model error-…' to contain 'Parser failed: Invalid data structure'[39m
2025-06-04T22:41:45.6011100Z 
2025-06-04T22:41:45.6011360Z Expected: [32m"Parser failed: Invalid data structure"[39m
2025-06-04T22:41:45.6011825Z Received: [31m"Normalization failed for model error-test: Model completeness 0.25 below required 0.7"[39m
2025-06-04T22:41:45.6011832Z 
2025-06-04T22:41:45.6012259Z [36m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m264:34[22m[39m
2025-06-04T22:41:45.6012582Z     [90m262| [39m        [35mconst[39m errorObj [33m=[39m error [35mas[39m [33mError[39m
2025-06-04T22:41:45.6012890Z     [90m263| [39m        expect(errorObj.message).toContain('Normalization failed for m…
2025-06-04T22:41:45.6013218Z     [90m264| [39m        [34mexpect[39m(errorObj[33m.[39mmessage)[33m.[39m[34mtoContain[39m(
2025-06-04T22:41:45.6013420Z     [90m   | [39m                                 [31m^[39m
2025-06-04T22:41:45.6013700Z     [90m265| [39m          [32m'Parser failed: Invalid data structure'[39m[33m,[39m
2025-06-04T22:41:45.6013809Z     [90m266| [39m        )
2025-06-04T22:41:45.6013821Z 
2025-06-04T22:41:45.6014027Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[202/523]⎯[22m[39m
2025-06-04T22:41:45.6014034Z 
2025-06-04T22:41:45.6014863Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mError Handling[2m > [22mshould handle indexer errors gracefully
2025-06-04T22:41:45.6015472Z [31m[1mAssertionError[22m: expected 'Normalization failed for model indexe…' to contain 'Database connection lost'[39m
2025-06-04T22:41:45.6015486Z 
2025-06-04T22:41:45.6015850Z Expected: [32m"Database connection lost"[39m
2025-06-04T22:41:45.6016768Z Received: [31m"Normalization failed for model indexer-error-test: Model completeness 0.25 below required 0.7"[39m
2025-06-04T22:41:45.6016782Z 
2025-06-04T22:41:45.6017715Z [36m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m319:34[22m[39m
2025-06-04T22:41:45.6018199Z     [90m317| [39m        [34mexpect[39m(error [35minstanceof[39m [33mError[39m)[33m.[39m[34mtoBe[39m([35mtrue[39m)
2025-06-04T22:41:45.6018732Z     [90m318| [39m        [35mconst[39m errorObj [33m=[39m error [35mas[39m [33mError[39m
2025-06-04T22:41:45.6019712Z     [90m319| [39m        [34mexpect[39m(errorObj[33m.[39mmessage)[33m.[39m[34mtoContain[39m([32m'Database connection lost'[39m)
2025-06-04T22:41:45.6020077Z     [90m   | [39m                                 [31m^[39m
2025-06-04T22:41:45.6020259Z     [90m320| [39m      }
2025-06-04T22:41:45.6020429Z     [90m321| [39m    })
2025-06-04T22:41:45.6020441Z 
2025-06-04T22:41:45.6020759Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[203/523]⎯[22m[39m
2025-06-04T22:41:45.6020767Z 
2025-06-04T22:41:45.6022057Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mError Handling[2m > [22mshould handle malformed data with descriptive error messages
2025-06-04T22:41:45.6023005Z [31m[1mAssertionError[22m: expected 'Cannot read properties of null (readi…' to contain 'Normalization failed'[39m
2025-06-04T22:41:45.6023018Z 
2025-06-04T22:41:45.6023349Z Expected: [32m"Normalization failed"[39m
2025-06-04T22:41:45.6023675Z Received: [31m"Cannot read properties of null (reading 'id')"[39m
2025-06-04T22:41:45.6023682Z 
2025-06-04T22:41:45.6024297Z [36m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m359:36[22m[39m
2025-06-04T22:41:45.6025262Z     [90m357| [39m          [34mexpect[39m(error [35minstanceof[39m [33mError[39m)[33m.[39m[34mtoBe[39m([35mtrue[39m)
2025-06-04T22:41:45.6025809Z     [90m358| [39m          [35mconst[39m errorObj [33m=[39m error [35mas[39m [33mError[39m
2025-06-04T22:41:45.6026348Z     [90m359| [39m          [34mexpect[39m(errorObj[33m.[39mmessage)[33m.[39m[34mtoContain[39m([32m'Normalization failed'[39m)
2025-06-04T22:41:45.6026619Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.6027171Z     [90m360| [39m          [90m// The error should provide context about what went wrong[39m
2025-06-04T22:41:45.6027704Z     [90m361| [39m          expect(errorObj.message.length).toBeGreaterThan(20) // Ensur…
2025-06-04T22:41:45.6027718Z 
2025-06-04T22:41:45.6028080Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[204/523]⎯[22m[39m
2025-06-04T22:41:45.6028091Z 
2025-06-04T22:41:45.6029658Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mConcurrent Operations[2m > [22mshould handle multiple concurrent normalization requests
2025-06-04T22:41:45.6030637Z [31m[1mError[22m: Normalization failed for model concurrent-patient-0: Model completeness 0.25 below required 0.7[39m
2025-06-04T22:41:45.6031783Z [36m [2m❯[22m PatientPsiIntegration.normalizeModel src/lib/ai/datasets/patient-psi-integration.ts:[2m269:13[22m[39m
2025-06-04T22:41:45.6031932Z     [90m267| [39m      }
2025-06-04T22:41:45.6032034Z     [90m268| [39m
2025-06-04T22:41:45.6032358Z     [90m269| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.6032630Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6033159Z     [90m270| [39m        `Normalization failed for model ${parsedModel.id}: ${errorMess…
2025-06-04T22:41:45.6033349Z     [90m271| [39m      )
2025-06-04T22:41:45.6034078Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m443:23[22m[39m
2025-06-04T22:41:45.6034103Z 
2025-06-04T22:41:45.6034404Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[205/523]⎯[22m[39m
2025-06-04T22:41:45.6034412Z 
2025-06-04T22:41:45.6035843Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mConcurrent Operations[2m > [22mshould handle concurrent batch operations without race conditions
2025-06-04T22:41:45.6036208Z [31m[1mError[22m: expected 0 to be 3[39m
2025-06-04T22:41:45.6036935Z [36m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m497:31[22m[39m
2025-06-04T22:41:45.6037089Z     [90m495| [39m
2025-06-04T22:41:45.6037340Z     [90m496| [39m      [90m// Verify both batches completed correctly[39m
2025-06-04T22:41:45.6037854Z     [90m497| [39m      [34mexpect[39m(results1[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m3[39m)
2025-06-04T22:41:45.6038175Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.6038787Z     [90m498| [39m      [34mexpect[39m(results2[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m3[39m)
2025-06-04T22:41:45.6038955Z     [90m499| [39m
2025-06-04T22:41:45.6038966Z 
2025-06-04T22:41:45.6039475Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[206/523]⎯[22m[39m
2025-06-04T22:41:45.6039488Z 
2025-06-04T22:41:45.6040793Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mConcurrent Operations[2m > [22mshould maintain data integrity under high concurrent load
2025-06-04T22:41:45.6041663Z [31m[1mError[22m: Normalization failed for model load-test-0: Model completeness 0.25 below required 0.7[39m
2025-06-04T22:41:45.6042644Z [36m [2m❯[22m PatientPsiIntegration.normalizeModel src/lib/ai/datasets/patient-psi-integration.ts:[2m269:13[22m[39m
2025-06-04T22:41:45.6042763Z     [90m267| [39m      }
2025-06-04T22:41:45.6042866Z     [90m268| [39m
2025-06-04T22:41:45.6043376Z     [90m269| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.6043639Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6044175Z     [90m270| [39m        `Normalization failed for model ${parsedModel.id}: ${errorMess…
2025-06-04T22:41:45.6044368Z     [90m271| [39m      )
2025-06-04T22:41:45.6045111Z [90m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m560:28[22m[39m
2025-06-04T22:41:45.6045124Z 
2025-06-04T22:41:45.6045376Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[207/523]⎯[22m[39m
2025-06-04T22:41:45.6045385Z 
2025-06-04T22:41:45.6046766Z [41m[1m FAIL [22m[49m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts[2m > [22mPatientPsiIntegration[2m > [22mConcurrent Operations[2m > [22mshould handle mixed concurrent success and failure scenarios
2025-06-04T22:41:45.6047284Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6047946Z [36m [2m❯[22m src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:[2m617:32[22m[39m
2025-06-04T22:41:45.6048271Z     [90m615| [39m      const rejected = settledResults.filter((r) => r.status === 'reje…
2025-06-04T22:41:45.6048369Z     [90m616| [39m
2025-06-04T22:41:45.6048861Z     [90m617| [39m      expect(fulfilled.length).toBeGreaterThan(0) // Some should succe…
2025-06-04T22:41:45.6049365Z     [90m   | [39m                               [31m^[39m
2025-06-04T22:41:45.6050440Z     [90m618| [39m      [34mexpect[39m(rejected[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m) [90m// Some should fail[39m
2025-06-04T22:41:45.6050653Z     [90m619| [39m
2025-06-04T22:41:45.6050665Z 
2025-06-04T22:41:45.6051025Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[208/523]⎯[22m[39m
2025-06-04T22:41:45.6051036Z 
2025-06-04T22:41:45.6052077Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22mEmotionAlertSystem[2m > [22mshould not generate an alert for normal emotion patterns
2025-06-04T22:41:45.6052728Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T22:41:45.6053638Z [36m [2m❯[22m EmotionAlertSystem.detectCrisis src/lib/ai/emotions/EmotionAlertSystem.ts:[2m242:56[22m[39m
2025-06-04T22:41:45.6053812Z     [90m240| [39m
2025-06-04T22:41:45.6054084Z     [90m241| [39m      [90m// Check for severe negative emotions[39m
2025-06-04T22:41:45.6054701Z     [90m242| [39m      [35mconst[39m severeNegativeEmotions [33m=[39m analysis[33m.[39memotions[33m.[39m[34mfilter[39m(
2025-06-04T22:41:45.6055105Z     [90m   | [39m                                                       [31m^[39m
2025-06-04T22:41:45.6055384Z     [90m243| [39m        (emotion) [33m=>[39m
2025-06-04T22:41:45.6056288Z     [90m244| [39m          [[32m'sadness'[39m[33m,[39m [32m'fear'[39m[33m,[39m [32m'anger'[39m][33m.[39m[34mincludes[39m(emotion[33m.[39mtype) [33m&&[39m
2025-06-04T22:41:45.6056867Z [90m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:[2m51:31[22m[39m
2025-06-04T22:41:45.6056893Z 
2025-06-04T22:41:45.6057285Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[209/523]⎯[22m[39m
2025-06-04T22:41:45.6057299Z 
2025-06-04T22:41:45.6058298Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22mEmotionAlertSystem[2m > [22mshould generate a high-risk alert for severe negative emotions
2025-06-04T22:41:45.6058678Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T22:41:45.6059344Z [36m [2m❯[22m EmotionAlertSystem.detectCrisis src/lib/ai/emotions/EmotionAlertSystem.ts:[2m242:56[22m[39m
2025-06-04T22:41:45.6059463Z     [90m240| [39m
2025-06-04T22:41:45.6059790Z     [90m241| [39m      [90m// Check for severe negative emotions[39m
2025-06-04T22:41:45.6060412Z     [90m242| [39m      [35mconst[39m severeNegativeEmotions [33m=[39m analysis[33m.[39memotions[33m.[39m[34mfilter[39m(
2025-06-04T22:41:45.6060635Z     [90m   | [39m                                                       [31m^[39m
2025-06-04T22:41:45.6060974Z     [90m243| [39m        (emotion) [33m=>[39m
2025-06-04T22:41:45.6061632Z     [90m244| [39m          [[32m'sadness'[39m[33m,[39m [32m'fear'[39m[33m,[39m [32m'anger'[39m][33m.[39m[34mincludes[39m(emotion[33m.[39mtype) [33m&&[39m
2025-06-04T22:41:45.6062115Z [90m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:[2m93:31[22m[39m
2025-06-04T22:41:45.6062129Z 
2025-06-04T22:41:45.6062342Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[210/523]⎯[22m[39m
2025-06-04T22:41:45.6062349Z 
2025-06-04T22:41:45.6063185Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22mEmotionAlertSystem[2m > [22mshould generate a medium-risk alert for moderate anxiety patterns
2025-06-04T22:41:45.6063641Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T22:41:45.6064273Z [36m [2m❯[22m EmotionAlertSystem.detectCrisis src/lib/ai/emotions/EmotionAlertSystem.ts:[2m242:56[22m[39m
2025-06-04T22:41:45.6064392Z     [90m240| [39m
2025-06-04T22:41:45.6064629Z     [90m241| [39m      [90m// Check for severe negative emotions[39m
2025-06-04T22:41:45.6065149Z     [90m242| [39m      [35mconst[39m severeNegativeEmotions [33m=[39m analysis[33m.[39memotions[33m.[39m[34mfilter[39m(
2025-06-04T22:41:45.6065533Z     [90m   | [39m                                                       [31m^[39m
2025-06-04T22:41:45.6065858Z     [90m243| [39m        (emotion) [33m=>[39m
2025-06-04T22:41:45.6066385Z     [90m244| [39m          [[32m'sadness'[39m[33m,[39m [32m'fear'[39m[33m,[39m [32m'anger'[39m][33m.[39m[34mincludes[39m(emotion[33m.[39mtype) [33m&&[39m
2025-06-04T22:41:45.6066792Z [90m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:[2m139:31[22m[39m
2025-06-04T22:41:45.6066801Z 
2025-06-04T22:41:45.6067001Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[211/523]⎯[22m[39m
2025-06-04T22:41:45.6067017Z 
2025-06-04T22:41:45.6068185Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22mEmotionAlertSystem[2m > [22mshould generate a low-risk alert for significant baseline deviation
2025-06-04T22:41:45.6068626Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T22:41:45.6069704Z [36m [2m❯[22m EmotionAlertSystem.detectCrisis src/lib/ai/emotions/EmotionAlertSystem.ts:[2m242:56[22m[39m
2025-06-04T22:41:45.6069939Z     [90m240| [39m
2025-06-04T22:41:45.6070365Z     [90m241| [39m      [90m// Check for severe negative emotions[39m
2025-06-04T22:41:45.6071193Z     [90m242| [39m      [35mconst[39m severeNegativeEmotions [33m=[39m analysis[33m.[39memotions[33m.[39m[34mfilter[39m(
2025-06-04T22:41:45.6071629Z     [90m   | [39m                                                       [31m^[39m
2025-06-04T22:41:45.6071933Z     [90m243| [39m        (emotion) [33m=>[39m
2025-06-04T22:41:45.6072907Z     [90m244| [39m          [[32m'sadness'[39m[33m,[39m [32m'fear'[39m[33m,[39m [32m'anger'[39m][33m.[39m[34mincludes[39m(emotion[33m.[39mtype) [33m&&[39m
2025-06-04T22:41:45.6073663Z [90m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:[2m182:31[22m[39m
2025-06-04T22:41:45.6073679Z 
2025-06-04T22:41:45.6074065Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[212/523]⎯[22m[39m
2025-06-04T22:41:45.6074084Z 
2025-06-04T22:41:45.6075507Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22mEmotionAlertSystem[2m > [22mshould consider previous analyses when detecting patterns
2025-06-04T22:41:45.6076297Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'fetchPreviousAnalyses')[39m
2025-06-04T22:41:45.6077015Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:[2m231:36[22m[39m
2025-06-04T22:41:45.6077194Z     [90m229| [39m
2025-06-04T22:41:45.6077699Z     [90m230| [39m    [90m// Mock the database function to return our test data[39m
2025-06-04T22:41:45.6078569Z     [90m231| [39m    vi.mocked(alertSystem.database.fetchPreviousAnalyses).mockResolved…
2025-06-04T22:41:45.6078922Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.6079451Z     [90m232| [39m      previousAnalyses[33m,[39m
2025-06-04T22:41:45.6079653Z     [90m233| [39m    )
2025-06-04T22:41:45.6079665Z 
2025-06-04T22:41:45.6080043Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[213/523]⎯[22m[39m
2025-06-04T22:41:45.6080071Z 
2025-06-04T22:41:45.6081227Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts[2m > [22mEmotionAlertSystem[2m > [22mshould acknowledge an alert
2025-06-04T22:41:45.6081953Z [31m[1mTypeError[22m: Cannot set properties of undefined (setting 'updateAlertStatus')[39m
2025-06-04T22:41:45.6082664Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:[2m291:26[22m[39m
2025-06-04T22:41:45.6082847Z     [90m289| [39m
2025-06-04T22:41:45.6083272Z     [90m290| [39m    [90m// Mock the acknowledgeAlert method[39m
2025-06-04T22:41:45.6083884Z     [90m291| [39m    alertSystem.database.updateAlertStatus = vi.fn().mockResolvedValue…
2025-06-04T22:41:45.6084185Z     [90m   | [39m                         [31m^[39m
2025-06-04T22:41:45.6084362Z     [90m292| [39m
2025-06-04T22:41:45.6084920Z     [90m293| [39m    const result = await alertSystem.acknowledgeAlert(mockAlert.id, 'u…
2025-06-04T22:41:45.6084933Z 
2025-06-04T22:41:45.6085515Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[214/523]⎯[22m[39m
2025-06-04T22:41:45.6085531Z 
2025-06-04T22:41:45.6086751Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts[2m > [22mEmotionDetector[2m > [22mshould detect emotions from text input
2025-06-04T22:41:45.6087301Z [31m[1mError[22m: expected undefined to be I am happy to see you![39m
2025-06-04T22:41:45.6087957Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:[2m51:28[22m[39m
2025-06-04T22:41:45.6088713Z     [90m 49| [39m    [34mexpect[39m(result[33m.[39memotions)[33m.[39m[34mtoEqual[39m(mockLLMResponse[33m.[39mdata)
2025-06-04T22:41:45.6089501Z     [90m 50| [39m    [34mexpect[39m(result[33m.[39msource)[33m.[39m[34mtoBe[39m([32m'text'[39m)
2025-06-04T22:41:45.6090049Z     [90m 51| [39m    [34mexpect[39m(result[33m.[39mcontent)[33m.[39m[34mtoBe[39m(text)
2025-06-04T22:41:45.6090353Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6090899Z     [90m 52| [39m    [34mexpect[39m(result[33m.[39muserId)[33m.[39m[34mtoBe[39m(userId)
2025-06-04T22:41:45.6091744Z     [90m 53| [39m    [34mexpect[39m(detector[33m.[39mllm[33m.[39manalyzeEmotionsWithLLM)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.6091758Z 
2025-06-04T22:41:45.6092135Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[215/523]⎯[22m[39m
2025-06-04T22:41:45.6092147Z 
2025-06-04T22:41:45.6093417Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts[2m > [22mEmotionDetector[2m > [22mshould detect emotions from facial expression data
2025-06-04T22:41:45.6094313Z [31m[1mError[22m: expected undefined to equal {"smile":0.85,"eyebrowPosition":"raised","mouthOpenness":0.2}[39m
2025-06-04T22:41:45.6094983Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:[2m96:28[22m[39m
2025-06-04T22:41:45.6095747Z     [90m 94| [39m    [34mexpect[39m(result[33m.[39memotions)[33m.[39m[34mtoEqual[39m(mockLLMResponse[33m.[39mdata)
2025-06-04T22:41:45.6096361Z     [90m 95| [39m    [34mexpect[39m(result[33m.[39msource)[33m.[39m[34mtoBe[39m([32m'facial'[39m)
2025-06-04T22:41:45.6097246Z     [90m 96| [39m    [34mexpect[39m(result[33m.[39mcontent)[33m.[39m[34mtoEqual[39m([33mJSON[39m[33m.[39m[34mstringify[39m(facialData))
2025-06-04T22:41:45.6097562Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6098106Z     [90m 97| [39m    [34mexpect[39m(result[33m.[39muserId)[33m.[39m[34mtoBe[39m(userId)
2025-06-04T22:41:45.6099373Z     [90m 98| [39m    [34mexpect[39m(detector[33m.[39mllm[33m.[39manalyzeEmotionsWithLLM)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.6099390Z 
2025-06-04T22:41:45.6099787Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[216/523]⎯[22m[39m
2025-06-04T22:41:45.6099800Z 
2025-06-04T22:41:45.6101028Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts[2m > [22mEmotionDetector[2m > [22mshould identify risk factors from emotions
2025-06-04T22:41:45.6102404Z [31m[1mError[22m: expected [object Object],[object Object] to equal ArrayContaining([{"sample":{"type":{"sample":{},"inverse":false},"severity":"high"},"inverse":false}])[39m
2025-06-04T22:41:45.6103107Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:[2m182:29[22m[39m
2025-06-04T22:41:45.6103727Z     [90m180| [39m    const highRiskFactors = detector.identifyRiskFactors(highRiskEmoti…
2025-06-04T22:41:45.6103910Z     [90m181| [39m
2025-06-04T22:41:45.6104450Z     [90m182| [39m    [34mexpect[39m(highRiskFactors)[33m.[39m[34mtoEqual[39m(
2025-06-04T22:41:45.6104786Z     [90m   | [39m                            [31m^[39m
2025-06-04T22:41:45.6105196Z     [90m183| [39m      expect[33m.[39m[34marrayContaining[39m([
2025-06-04T22:41:45.6105631Z     [90m184| [39m        expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.6105645Z 
2025-06-04T22:41:45.6106036Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[217/523]⎯[22m[39m
2025-06-04T22:41:45.6106269Z 
2025-06-04T22:41:45.6107558Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts[2m > [22mEmotionDetector[2m > [22mshould store analysis results in the database
2025-06-04T22:41:45.6108119Z [31m[1mTypeError[22m: detector.storeAnalysis is not a function[39m
2025-06-04T22:41:45.6108825Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:[2m227:35[22m[39m
2025-06-04T22:41:45.6109568Z     [90m225| [39m      [33m.[39m[34mmockResolvedValue[39m([32m'analysis-id-456'[39m)
2025-06-04T22:41:45.6109780Z     [90m226| [39m
2025-06-04T22:41:45.6110556Z     [90m227| [39m    [35mconst[39m result [33m=[39m [35mawait[39m detector[33m.[39m[34mstoreAnalysis[39m(mockAnalysis)
2025-06-04T22:41:45.6110918Z     [90m   | [39m                                  [31m^[39m
2025-06-04T22:41:45.6111097Z     [90m228| [39m
2025-06-04T22:41:45.6111705Z     [90m229| [39m    [34mexpect[39m(result)[33m.[39m[34mtoBe[39m([32m'analysis-id-456'[39m)
2025-06-04T22:41:45.6111726Z 
2025-06-04T22:41:45.6112105Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[218/523]⎯[22m[39m
2025-06-04T22:41:45.6112117Z 
2025-06-04T22:41:45.6113360Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts[2m > [22mEmotionDetector[2m > [22mshould handle empty emotion data gracefully
2025-06-04T22:41:45.6113757Z [31m[1mError[22m: expected undefined to be 0[39m
2025-06-04T22:41:45.6114435Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:[2m262:37[22m[39m
2025-06-04T22:41:45.6115142Z     [90m260| [39m    [34mexpect[39m(result)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6115732Z     [90m261| [39m    [34mexpect[39m(result[33m.[39memotions)[33m.[39m[34mtoEqual[39m([])
2025-06-04T22:41:45.6116318Z     [90m262| [39m    expect(result.overallSentiment).toBe(0) // Neutral sentiment for e…
2025-06-04T22:41:45.6116665Z     [90m   | [39m                                    [31m^[39m
2025-06-04T22:41:45.6117241Z     [90m263| [39m    expect(result.riskFactors).toEqual([]) // No risk factors for empt…
2025-06-04T22:41:45.6117426Z     [90m264| [39m  })
2025-06-04T22:41:45.6117439Z 
2025-06-04T22:41:45.6117822Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[219/523]⎯[22m[39m
2025-06-04T22:41:45.6117834Z 
2025-06-04T22:41:45.6119254Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts[2m > [22mEmotionDetector[2m > [22mshould combine emotions from multiple sources
2025-06-04T22:41:45.6119918Z [31m[1mTypeError[22m: detector.combineEmotionAnalyses is not a function[39m
2025-06-04T22:41:45.6120613Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:[2m310:39[22m[39m
2025-06-04T22:41:45.6120832Z     [90m308| [39m    }
2025-06-04T22:41:45.6121002Z     [90m309| [39m
2025-06-04T22:41:45.6121754Z     [90m310| [39m    [35mconst[39m combinedAnalysis [33m=[39m detector[33m.[39m[34mcombineEmotionAnalyses[39m([
2025-06-04T22:41:45.6122130Z     [90m   | [39m                                      [31m^[39m
2025-06-04T22:41:45.6122423Z     [90m311| [39m      textAnalysis[33m,[39m
2025-06-04T22:41:45.6122732Z     [90m312| [39m      facialAnalysis[33m,[39m
2025-06-04T22:41:45.6122745Z 
2025-06-04T22:41:45.6123116Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[220/523]⎯[22m[39m
2025-06-04T22:41:45.6123127Z 
2025-06-04T22:41:45.6124471Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts[2m > [22mEmotionDetector[2m > [22mshould handle errors gracefully during emotion detection
2025-06-04T22:41:45.6124936Z [31m[1mError[22m: expected [object Object] to equal [39m
2025-06-04T22:41:45.6125620Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:[2m341:29[22m[39m
2025-06-04T22:41:45.6125804Z     [90m339| [39m
2025-06-04T22:41:45.6126287Z     [90m340| [39m    [34mexpect[39m(result)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6127065Z     [90m341| [39m    [34mexpect[39m(result[33m.[39memotions)[33m.[39m[34mtoEqual[39m([])
2025-06-04T22:41:45.6127426Z     [90m   | [39m                            [31m^[39m
2025-06-04T22:41:45.6127997Z     [90m342| [39m    [34mexpect[39m(result[33m.[39mcontent)[33m.[39m[34mtoBe[39m(text)
2025-06-04T22:41:45.6128577Z     [90m343| [39m    [34mexpect[39m(result[33m.[39muserId)[33m.[39m[34mtoBe[39m(userId)
2025-06-04T22:41:45.6128593Z 
2025-06-04T22:41:45.6128980Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[221/523]⎯[22m[39m
2025-06-04T22:41:45.6129010Z 
2025-06-04T22:41:45.6130562Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould map joy to positive valence and moderate arousal
2025-06-04T22:41:45.6130930Z [31m[1mTypeError[22m: mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T22:41:45.6131402Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m27:28[22m[39m
2025-06-04T22:41:45.6131660Z     [90m 25| [39m    }
2025-06-04T22:41:45.6131761Z     [90m 26| [39m
2025-06-04T22:41:45.6132261Z     [90m 27| [39m    [35mconst[39m mapping [33m=[39m mapper[33m.[39m[34mmapEmotionToDimensions[39m(joyEmotion)
2025-06-04T22:41:45.6132575Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6132742Z     [90m 28| [39m
2025-06-04T22:41:45.6133189Z     [90m 29| [39m    [34mexpect[39m(mapping)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6133199Z 
2025-06-04T22:41:45.6133619Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[222/523]⎯[22m[39m
2025-06-04T22:41:45.6133628Z 
2025-06-04T22:41:45.6135055Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould map sadness to negative valence and low arousal
2025-06-04T22:41:45.6135415Z [31m[1mTypeError[22m: mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T22:41:45.6135891Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m42:28[22m[39m
2025-06-04T22:41:45.6136006Z     [90m 40| [39m    }
2025-06-04T22:41:45.6136103Z     [90m 41| [39m
2025-06-04T22:41:45.6136749Z     [90m 42| [39m    [35mconst[39m mapping [33m=[39m mapper[33m.[39m[34mmapEmotionToDimensions[39m(sadnessEmotion)
2025-06-04T22:41:45.6137051Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6137215Z     [90m 43| [39m
2025-06-04T22:41:45.6137614Z     [90m 44| [39m    [34mexpect[39m(mapping)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6137641Z 
2025-06-04T22:41:45.6138006Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[223/523]⎯[22m[39m
2025-06-04T22:41:45.6138023Z 
2025-06-04T22:41:45.6139370Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould map anger to negative valence and high arousal
2025-06-04T22:41:45.6139727Z [31m[1mTypeError[22m: mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T22:41:45.6140334Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m57:28[22m[39m
2025-06-04T22:41:45.6140518Z     [90m 55| [39m    }
2025-06-04T22:41:45.6140688Z     [90m 56| [39m
2025-06-04T22:41:45.6141365Z     [90m 57| [39m    [35mconst[39m mapping [33m=[39m mapper[33m.[39m[34mmapEmotionToDimensions[39m(angerEmotion)
2025-06-04T22:41:45.6141681Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6141845Z     [90m 58| [39m
2025-06-04T22:41:45.6142310Z     [90m 59| [39m    [34mexpect[39m(mapping)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6142323Z 
2025-06-04T22:41:45.6142573Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[224/523]⎯[22m[39m
2025-06-04T22:41:45.6142581Z 
2025-06-04T22:41:45.6143510Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould map fear to negative valence and high arousal, low dominance
2025-06-04T22:41:45.6144037Z [31m[1mTypeError[22m: mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T22:41:45.6144885Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m72:28[22m[39m
2025-06-04T22:41:45.6145066Z     [90m 70| [39m    }
2025-06-04T22:41:45.6145228Z     [90m 71| [39m
2025-06-04T22:41:45.6145779Z     [90m 72| [39m    [35mconst[39m mapping [33m=[39m mapper[33m.[39m[34mmapEmotionToDimensions[39m(fearEmotion)
2025-06-04T22:41:45.6146106Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6146274Z     [90m 73| [39m
2025-06-04T22:41:45.6146721Z     [90m 74| [39m    [34mexpect[39m(mapping)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6146733Z 
2025-06-04T22:41:45.6146988Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[225/523]⎯[22m[39m
2025-06-04T22:41:45.6146996Z 
2025-06-04T22:41:45.6147891Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould combine multiple emotions with weighted importance
2025-06-04T22:41:45.6148233Z [31m[1mTypeError[22m: mapper.createDimensionalMapping is not a function[39m
2025-06-04T22:41:45.6148678Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m97:28[22m[39m
2025-06-04T22:41:45.6148786Z     [90m 95| [39m    }
2025-06-04T22:41:45.6148880Z     [90m 96| [39m
2025-06-04T22:41:45.6149417Z     [90m 97| [39m    [35mconst[39m mapping [33m=[39m mapper[33m.[39m[34mcreateDimensionalMapping[39m(mockAnalysis)
2025-06-04T22:41:45.6149754Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6149851Z     [90m 98| [39m
2025-06-04T22:41:45.6150116Z     [90m 99| [39m    [34mexpect[39m(mapping)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6150123Z 
2025-06-04T22:41:45.6150325Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[226/523]⎯[22m[39m
2025-06-04T22:41:45.6150338Z 
2025-06-04T22:41:45.6151226Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould determine the correct quadrant based on dimensions
2025-06-04T22:41:45.6151662Z [31m[1mError[22m: expected high-arousal positive-valence high-dominance to be positive-high[39m
2025-06-04T22:41:45.6152118Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m110:7[22m[39m
2025-06-04T22:41:45.6152271Z     [90m108| [39m    [34mexpect[39m(
2025-06-04T22:41:45.6152618Z     [90m109| [39m      mapper.determineQuadrant({ valence: 0.7, arousal: 0.6, dominance…
2025-06-04T22:41:45.6152869Z     [90m110| [39m    )[33m.[39m[34mtoBe[39m([32m'positive-high'[39m)
2025-06-04T22:41:45.6153010Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.6153152Z     [90m111| [39m    [34mexpect[39m(
2025-06-04T22:41:45.6153471Z     [90m112| [39m      mapper.determineQuadrant({ valence: 0.6, arousal: -0.4, dominanc…
2025-06-04T22:41:45.6153479Z 
2025-06-04T22:41:45.6153808Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[227/523]⎯[22m[39m
2025-06-04T22:41:45.6153817Z 
2025-06-04T22:41:45.6154755Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould determine the dominant dimension based on absolute values
2025-06-04T22:41:45.6155109Z [31m[1mTypeError[22m: mapper.determineDominantDimension is not a function[39m
2025-06-04T22:41:45.6155575Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m132:14[22m[39m
2025-06-04T22:41:45.6155894Z     [90m130| [39m  it('should determine the dominant dimension based on absolute values…
2025-06-04T22:41:45.6156044Z     [90m131| [39m    [34mexpect[39m(
2025-06-04T22:41:45.6156306Z     [90m132| [39m      mapper[33m.[39m[34mdetermineDominantDimension[39m({
2025-06-04T22:41:45.6156451Z     [90m   | [39m             [31m^[39m
2025-06-04T22:41:45.6156682Z     [90m133| [39m        valence[33m:[39m [34m0.8[39m[33m,[39m
2025-06-04T22:41:45.6156892Z     [90m134| [39m        arousal[33m:[39m [34m0.3[39m[33m,[39m
2025-06-04T22:41:45.6156900Z 
2025-06-04T22:41:45.6157108Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[228/523]⎯[22m[39m
2025-06-04T22:41:45.6157115Z 
2025-06-04T22:41:45.6157915Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould store mapping in the database
2025-06-04T22:41:45.6158355Z [31m[1mTypeError[22m: Cannot set properties of undefined (setting 'storeDimensionalMapping')[39m
2025-06-04T22:41:45.6158803Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m180:21[22m[39m
2025-06-04T22:41:45.6158910Z     [90m178| [39m
2025-06-04T22:41:45.6159250Z     [90m179| [39m    [90m// Mock the database store function[39m
2025-06-04T22:41:45.6159599Z     [90m180| [39m    mapper[33m.[39mdatabase[33m.[39mstoreDimensionalMapping [33m=[39m vi
2025-06-04T22:41:45.6159760Z     [90m   | [39m                    [31m^[39m
2025-06-04T22:41:45.6159929Z     [90m181| [39m      [33m.[39m[34mfn[39m()
2025-06-04T22:41:45.6160226Z     [90m182| [39m      [33m.[39m[34mmockResolvedValue[39m([32m'mapping-id-123'[39m)
2025-06-04T22:41:45.6160233Z 
2025-06-04T22:41:45.6160439Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[229/523]⎯[22m[39m
2025-06-04T22:41:45.6160446Z 
2025-06-04T22:41:45.6161288Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould handle an unknown emotion type gracefully
2025-06-04T22:41:45.6161750Z [31m[1mTypeError[22m: mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T22:41:45.6162203Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m206:28[22m[39m
2025-06-04T22:41:45.6162303Z     [90m204| [39m
2025-06-04T22:41:45.6162635Z     [90m205| [39m    [90m// Should not throw an error for unknown emotion types[39m
2025-06-04T22:41:45.6163060Z     [90m206| [39m    [35mconst[39m mapping [33m=[39m mapper[33m.[39m[34mmapEmotionToDimensions[39m(unknownEmotion)
2025-06-04T22:41:45.6163241Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6163338Z     [90m207| [39m
2025-06-04T22:41:45.6163584Z     [90m208| [39m    [90m// Should return a default neutral mapping[39m
2025-06-04T22:41:45.6163591Z 
2025-06-04T22:41:45.6163792Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[230/523]⎯[22m[39m
2025-06-04T22:41:45.6163805Z 
2025-06-04T22:41:45.6164667Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould correctly scale dimensions based on intensity
2025-06-04T22:41:45.6164990Z [31m[1mTypeError[22m: mapper.mapEmotionToDimensions is not a function[39m
2025-06-04T22:41:45.6165557Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m228:32[22m[39m
2025-06-04T22:41:45.6165669Z     [90m226| [39m    }
2025-06-04T22:41:45.6165769Z     [90m227| [39m
2025-06-04T22:41:45.6166212Z     [90m228| [39m    [35mconst[39m highMapping [33m=[39m mapper[33m.[39m[34mmapEmotionToDimensions[39m(joyHighIntensity)
2025-06-04T22:41:45.6166401Z     [90m   | [39m                               [31m^[39m
2025-06-04T22:41:45.6166825Z     [90m229| [39m    [35mconst[39m lowMapping [33m=[39m mapper[33m.[39m[34mmapEmotionToDimensions[39m(joyLowIntensity)
2025-06-04T22:41:45.6166934Z     [90m230| [39m
2025-06-04T22:41:45.6166941Z 
2025-06-04T22:41:45.6167143Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[231/523]⎯[22m[39m
2025-06-04T22:41:45.6167150Z 
2025-06-04T22:41:45.6167987Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts[2m > [22mMultidimensionalEmotionMapper[2m > [22mshould normalize dimensions to a -1 to 1 range
2025-06-04T22:41:45.6168299Z [31m[1mTypeError[22m: mapper.normalizeDimensions is not a function[39m
2025-06-04T22:41:45.6168742Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:[2m247:31[22m[39m
2025-06-04T22:41:45.6168850Z     [90m245| [39m    }
2025-06-04T22:41:45.6168945Z     [90m246| [39m
2025-06-04T22:41:45.6169469Z     [90m247| [39m    [35mconst[39m normalized [33m=[39m mapper[33m.[39m[34mnormalizeDimensions[39m(mockDimensions)
2025-06-04T22:41:45.6169652Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.6169761Z     [90m248| [39m
2025-06-04T22:41:45.6170171Z     [90m249| [39m    [34mexpect[39m(normalized[33m.[39mvalence)[33m.[39m[34mtoBeLessThanOrEqual[39m([34m1[39m)
2025-06-04T22:41:45.6170178Z 
2025-06-04T22:41:45.6170386Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[232/523]⎯[22m[39m
2025-06-04T22:41:45.6170393Z 
2025-06-04T22:41:45.6171292Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22mReal-Time Emotion Analysis Optimization[2m > [22mshould process real-time requests with higher priority
2025-06-04T22:41:45.6171615Z [31m[1mAssertionError[22m: expected "spy" to be called at least once[39m
2025-06-04T22:41:45.6172056Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:[2m112:41[22m[39m
2025-06-04T22:41:45.6172266Z     [90m110| [39m    [90m// Check performance logging[39m
2025-06-04T22:41:45.6172714Z     [90m111| [39m    [35mconst[39m performanceLogger [33m=[39m [33mPerformanceLogger[39m[33m.[39m[34mgetInstance[39m()
2025-06-04T22:41:45.6173263Z     [90m112| [39m    [34mexpect[39m(performanceLogger[33m.[39mlogMetric)[33m.[39m[34mtoHaveBeenCalled[39m()
2025-06-04T22:41:45.6173464Z     [90m   | [39m                                        [31m^[39m
2025-06-04T22:41:45.6173560Z     [90m113| [39m
2025-06-04T22:41:45.6173846Z     [90m114| [39m    [90m// At least one call should be for real-time processing[39m
2025-06-04T22:41:45.6173853Z 
2025-06-04T22:41:45.6174062Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[233/523]⎯[22m[39m
2025-06-04T22:41:45.6174074Z 
2025-06-04T22:41:45.6174938Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22mReal-Time Emotion Analysis Optimization[2m > [22mshould adapt batch size based on processing time
2025-06-04T22:41:45.6175252Z [31m[1mAssertionError[22m: expected "spy" to be called at least once[39m
2025-06-04T22:41:45.6175694Z [36m [2m❯[22m src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:[2m151:29[22m[39m
2025-06-04T22:41:45.6175798Z     [90m149| [39m
2025-06-04T22:41:45.6176044Z     [90m150| [39m    [90m// Verify that batch processing was called[39m
2025-06-04T22:41:45.6176365Z     [90m151| [39m    [34mexpect[39m(processBatchSpy)[33m.[39m[34mtoHaveBeenCalled[39m()
2025-06-04T22:41:45.6176545Z     [90m   | [39m                            [31m^[39m
2025-06-04T22:41:45.6176642Z     [90m152| [39m
2025-06-04T22:41:45.6177052Z     [90m153| [39m    [90m// Set processing times for testing adaptive batch sizing[39m
2025-06-04T22:41:45.6177060Z 
2025-06-04T22:41:45.6177268Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[234/523]⎯[22m[39m
2025-06-04T22:41:45.6177275Z 
2025-06-04T22:41:45.6178170Z [41m[1m FAIL [22m[49m src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[2m > [22mReal-Time Emotion Analysis Optimization[2m > [22mshould handle errors gracefully during batch processing
2025-06-04T22:41:45.6178329Z [31m[1mError[22m: Test error[39m
2025-06-04T22:41:45.6178958Z [36m [2m❯[22m EmotionDetectionEngine.<anonymous> src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:[2m216:31[22m[39m
2025-06-04T22:41:45.6179816Z     [90m214| [39m    [35mconst[39m analyzeStub [33m=[39m vi[33m.[39m[34mfn[39m()[33m.[39m[34mmockImplementation[39m((text) [33m=>[39m {
2025-06-04T22:41:45.6180217Z     [90m215| [39m      [35mif[39m (text[33m.[39m[34mincludes[39m([32m'error'[39m)) {
2025-06-04T22:41:45.6180841Z     [90m216| [39m        [35mreturn[39m [33mPromise[39m[33m.[39m[34mreject[39m([35mnew[39m [33mError[39m([32m'Test error'[39m))
2025-06-04T22:41:45.6181184Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.6181362Z     [90m217| [39m      }
2025-06-04T22:41:45.6181838Z     [90m218| [39m      [35mreturn[39m [33mPromise[39m[33m.[39m[34mresolve[39m([
2025-06-04T22:41:45.6182875Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:35[22m[39m
2025-06-04T22:41:45.6183660Z [90m [2m❯[22m src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:[2m245:38[22m[39m
2025-06-04T22:41:45.6183681Z 
2025-06-04T22:41:45.6184032Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[235/523]⎯[22m[39m
2025-06-04T22:41:45.6184043Z 
2025-06-04T22:41:45.6185790Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mRealTimeInterventionEngine[2m > [22mSession Initialization[2m > [22mshould initialize session without cognitive model
2025-06-04T22:41:45.6186853Z [31m[1mAssertionError[22m: expected [ { type: 'neutral', …(2) }, …(2) ] to deep equally contain ObjectContaining {"emotion": "neutral"}[39m
2025-06-04T22:41:45.6186868Z 
2025-06-04T22:41:45.6187088Z [32m- Expected:[39m 
2025-06-04T22:41:45.6187257Z ObjectContaining {
2025-06-04T22:41:45.6187392Z   "emotion": "neutral",
2025-06-04T22:41:45.6187512Z }
2025-06-04T22:41:45.6187521Z 
2025-06-04T22:41:45.6187892Z [31m+ Received:[39m 
2025-06-04T22:41:45.6187966Z [
2025-06-04T22:41:45.6188035Z   {
2025-06-04T22:41:45.6188119Z     "confidence": 0.8,
2025-06-04T22:41:45.6188263Z     "intensity": 0.7,
2025-06-04T22:41:45.6188398Z     "type": "neutral",
2025-06-04T22:41:45.6188523Z   },
2025-06-04T22:41:45.6188637Z   {
2025-06-04T22:41:45.6188774Z     "confidence": 0.6,
2025-06-04T22:41:45.6188900Z     "intensity": 0.3,
2025-06-04T22:41:45.6189024Z     "type": "curious",
2025-06-04T22:41:45.6189283Z   },
2025-06-04T22:41:45.6189411Z   {
2025-06-04T22:41:45.6189548Z     "confidence": 0.7,
2025-06-04T22:41:45.6189687Z     "intensity": 0.4,
2025-06-04T22:41:45.6189781Z     "type": "cautious",
2025-06-04T22:41:45.6189846Z   },
2025-06-04T22:41:45.6189911Z ]
2025-06-04T22:41:45.6189918Z 
2025-06-04T22:41:45.6190566Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m183:9[22m[39m
2025-06-04T22:41:45.6190731Z     [90m181| [39m      [34mexpect[39m(
2025-06-04T22:41:45.6191151Z     [90m182| [39m        session[33m.[39mcontextualFactors[33m.[39memotionalBaseline[33m.[39memotions[33m,[39m
2025-06-04T22:41:45.6191664Z     [90m183| [39m      )[33m.[39m[34mtoContainEqual[39m(expect[33m.[39m[34mobjectContaining[39m({ emotion[33m:[39m [32m'neutral'[39m }))
2025-06-04T22:41:45.6191808Z     [90m   | [39m        [31m^[39m
2025-06-04T22:41:45.6191914Z     [90m184| [39m    })
2025-06-04T22:41:45.6192015Z     [90m185| [39m
2025-06-04T22:41:45.6192022Z 
2025-06-04T22:41:45.6192407Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[236/523]⎯[22m[39m
2025-06-04T22:41:45.6192423Z 
2025-06-04T22:41:45.6194226Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mRealTimeInterventionEngine[2m > [22mSession Initialization[2m > [22mshould handle initialization errors gracefully
2025-06-04T22:41:45.6195007Z [31m[1mAssertionError[22m: promise resolved "{ sessionId: 'test-session-3', …(7) }" instead of rejecting[39m
2025-06-04T22:41:45.6195027Z 
2025-06-04T22:41:45.6195161Z [32m- Expected[39m
2025-06-04T22:41:45.6195271Z [31m+ Received[39m
2025-06-04T22:41:45.6195278Z 
2025-06-04T22:41:45.6195382Z [32m- Error {[39m
2025-06-04T22:41:45.6195581Z [32m-   "message": "rejected promise",[39m
2025-06-04T22:41:45.6195672Z [31m+ {[39m
2025-06-04T22:41:45.6195860Z [31m+   "clientId": "test-client-3",[39m
2025-06-04T22:41:45.6196028Z [31m+   "contextualFactors": {[39m
2025-06-04T22:41:45.6196220Z [31m+     "communicationPatterns": [],[39m
2025-06-04T22:41:45.6196501Z [31m+     "emotionalBaseline": {[39m
2025-06-04T22:41:45.6196820Z [31m+       "contextualFactors": [],[39m
2025-06-04T22:41:45.6197077Z [31m+       "emotions": [[39m
2025-06-04T22:41:45.6197259Z [31m+         {[39m
2025-06-04T22:41:45.6197572Z [31m+           "confidence": 0.8,[39m
2025-06-04T22:41:45.6197875Z [31m+           "intensity": 0.7,[39m
2025-06-04T22:41:45.6198167Z [31m+           "type": "neutral",[39m
2025-06-04T22:41:45.6198354Z [31m+         },[39m
2025-06-04T22:41:45.6198547Z [31m+         {[39m
2025-06-04T22:41:45.6198769Z [31m+           "confidence": 0.6,[39m
2025-06-04T22:41:45.6198926Z [31m+           "intensity": 0.3,[39m
2025-06-04T22:41:45.6199296Z [31m+           "type": "curious",[39m
2025-06-04T22:41:45.6199420Z [31m+         },[39m
2025-06-04T22:41:45.6199533Z [31m+         {[39m
2025-06-04T22:41:45.6199699Z [31m+           "confidence": 0.7,[39m
2025-06-04T22:41:45.6199854Z [31m+           "intensity": 0.4,[39m
2025-06-04T22:41:45.6200031Z [31m+           "type": "cautious",[39m
2025-06-04T22:41:45.6200140Z [31m+         },[39m
2025-06-04T22:41:45.6200327Z [31m+       ],[39m
2025-06-04T22:41:45.6200775Z [31m+       "id": "baseline-test-client-3-1749074074881",[39m
2025-06-04T22:41:45.6201122Z [31m+       "input": "baseline-assessment",[39m
2025-06-04T22:41:45.6201464Z [31m+       "requiresAttention": false,[39m
2025-06-04T22:41:45.6201748Z [31m+       "riskFactors": [],[39m
2025-06-04T22:41:45.6202213Z [31m+       "source": "text",[39m
2025-06-04T22:41:45.6202550Z [31m+       "timestamp": "2025-06-04T21:54:34.881Z",[39m
2025-06-04T22:41:45.6202740Z [31m+       "userId": "test-client-3",[39m
2025-06-04T22:41:45.6202844Z [31m+     },[39m
2025-06-04T22:41:45.6203011Z [31m+     "engagementMetrics": {[39m
2025-06-04T22:41:45.6203187Z [31m+       "emotionalVariability": 0,[39m
2025-06-04T22:41:45.6203342Z [31m+       "messageLength": [],[39m
2025-06-04T22:41:45.6203529Z [31m+       "participationLevel": 0,[39m
2025-06-04T22:41:45.6203690Z [31m+       "responseLatency": [],[39m
2025-06-04T22:41:45.6203971Z [31m+       "topicCoherence": 0,[39m
2025-06-04T22:41:45.6204164Z [31m+     },[39m
2025-06-04T22:41:45.6204472Z [31m+     "environmentalContext": {[39m
2025-06-04T22:41:45.6204771Z [31m+       "deviceType": "desktop",[39m
2025-06-04T22:41:45.6205086Z [31m+       "externalDisruptions": [],[39m
2025-06-04T22:41:45.6205397Z [31m+       "privacyLevel": "high",[39m
2025-06-04T22:41:45.6205691Z [31m+       "sessionDuration": 0,[39m
2025-06-04T22:41:45.6205970Z [31m+       "timeOfDay": "night",[39m
2025-06-04T22:41:45.6206151Z [31m+     },[39m
2025-06-04T22:41:45.6206317Z [31m+     "sessionGoals": [],[39m
2025-06-04T22:41:45.6206500Z [31m+     "therapeuticAlliance": 0.3,[39m
2025-06-04T22:41:45.6206594Z [31m+   },[39m
2025-06-04T22:41:45.6206772Z [31m+   "currentPhase": "opening",[39m
2025-06-04T22:41:45.6206942Z [31m+   "interventionHistory": [],[39m
2025-06-04T22:41:45.6207252Z [31m+   "riskLevel": "minimal",[39m
2025-06-04T22:41:45.6207439Z [31m+   "sessionId": "test-session-3",[39m
2025-06-04T22:41:45.6207811Z [31m+   "startTime": 2025-06-04T21:54:34.882Z,[39m
2025-06-04T22:41:45.6208163Z [31m+   "therapistId": "test-therapist-3",[39m
2025-06-04T22:41:45.6208316Z [2m  }[22m
2025-06-04T22:41:45.6208333Z 
2025-06-04T22:41:45.6209297Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m197:7[22m[39m
2025-06-04T22:41:45.6209715Z     [90m195| [39m          [32m'test-therapist-3'[39m[33m,[39m
2025-06-04T22:41:45.6209958Z     [90m196| [39m        )[33m,[39m
2025-06-04T22:41:45.6210397Z     [90m197| [39m      )[33m.[39mrejects[33m.[39m[34mtoThrow[39m([32m'Failed to initialize real-time session'[39m)
2025-06-04T22:41:45.6210533Z     [90m   | [39m      [31m^[39m
2025-06-04T22:41:45.6210636Z     [90m198| [39m    })
2025-06-04T22:41:45.6210741Z     [90m199| [39m  })
2025-06-04T22:41:45.6210748Z 
2025-06-04T22:41:45.6210965Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[237/523]⎯[22m[39m
2025-06-04T22:41:45.6210973Z 
2025-06-04T22:41:45.6212386Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mRealTimeInterventionEngine[2m > [22mReal-Time Input Processing[2m > [22mshould detect crisis language and escalate appropriately
2025-06-04T22:41:45.6212808Z [31m[1mError[22m: expected minimal to be critical[39m
2025-06-04T22:41:45.6213636Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m258:43[22m[39m
2025-06-04T22:41:45.6214162Z     [90m256| [39m      const result = await engine.processRealTimeInput(session.session…
2025-06-04T22:41:45.6214275Z     [90m257| [39m
2025-06-04T22:41:45.6214739Z     [90m258| [39m      [34mexpect[39m(result[33m.[39mriskAssessment[33m.[39mlevel)[33m.[39m[34mtoBe[39m([32m'critical'[39m)
2025-06-04T22:41:45.6214940Z     [90m   | [39m                                          [31m^[39m
2025-06-04T22:41:45.6215468Z     [90m259| [39m      [34mexpect[39m(result[33m.[39mriskAssessment[33m.[39mprimaryFactors)[33m.[39m[34mtoHaveLength[39m([34m1[39m)
2025-06-04T22:41:45.6216423Z     [90m260| [39m      [34mexpect[39m(result[33m.[39mriskAssessment[33m.[39mprimaryFactors[[34m0[39m][33m.[39mfactor)[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.6216445Z 
2025-06-04T22:41:45.6216818Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[238/523]⎯[22m[39m
2025-06-04T22:41:45.6216831Z 
2025-06-04T22:41:45.6218318Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mRealTimeInterventionEngine[2m > [22mReal-Time Input Processing[2m > [22mshould handle moderate risk scenarios
2025-06-04T22:41:45.6218557Z [31m[1mError[22m: expected minimal to be moderate[39m
2025-06-04T22:41:45.6219017Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m293:43[22m[39m
2025-06-04T22:41:45.6219759Z     [90m291| [39m      const result = await engine.processRealTimeInput(session.session…
2025-06-04T22:41:45.6219933Z     [90m292| [39m
2025-06-04T22:41:45.6220770Z     [90m293| [39m      [34mexpect[39m(result[33m.[39mriskAssessment[33m.[39mlevel)[33m.[39m[34mtoBe[39m([32m'moderate'[39m)
2025-06-04T22:41:45.6221141Z     [90m   | [39m                                          [31m^[39m
2025-06-04T22:41:45.6221852Z     [90m294| [39m      [34mexpect[39m(result[33m.[39mriskAssessment[33m.[39mrecommendedActions)[33m.[39m[34mtoHaveLength[39m([34m1[39m)
2025-06-04T22:41:45.6222397Z     [90m295| [39m      [34mexpect[39m(result[33m.[39mriskAssessment[33m.[39mrecommendedActions[[34m0[39m][33m.[39mtype)[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.6222405Z 
2025-06-04T22:41:45.6222620Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[239/523]⎯[22m[39m
2025-06-04T22:41:45.6222627Z 
2025-06-04T22:41:45.6224159Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mRealTimeInterventionEngine[2m > [22mRisk Assessment[2m > [22mshould calculate risk levels correctly
2025-06-04T22:41:45.6224603Z [31m[1mError[22m: expected minimal to be low[39m
2025-06-04T22:41:45.6225332Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m391:45[22m[39m
2025-06-04T22:41:45.6225502Z     [90m389| [39m          input[33m,[39m
2025-06-04T22:41:45.6225612Z     [90m390| [39m        )
2025-06-04T22:41:45.6226110Z     [90m391| [39m        [34mexpect[39m(result[33m.[39mriskAssessment[33m.[39mlevel)[33m.[39m[34mtoBe[39m(testCase[33m.[39mexpectedRisk)
2025-06-04T22:41:45.6226323Z     [90m   | [39m                                            [31m^[39m
2025-06-04T22:41:45.6226436Z     [90m392| [39m      }
2025-06-04T22:41:45.6226566Z     [90m393| [39m    })
2025-06-04T22:41:45.6226578Z 
2025-06-04T22:41:45.6226960Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[240/523]⎯[22m[39m
2025-06-04T22:41:45.6226972Z 
2025-06-04T22:41:45.6228581Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mRealTimeInterventionEngine[2m > [22mRisk Assessment[2m > [22mshould consider historical risk factors
2025-06-04T22:41:45.6228809Z [31m[1mError[22m: expected false to be true[39m
2025-06-04T22:41:45.6229473Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m441:9[22m[39m
2025-06-04T22:41:45.6229874Z     [90m439| [39m          (f) [33m=>[39m f[33m.[39mfactor [33m===[39m [32m'recent-high-risk-episodes'[39m[33m,[39m
2025-06-04T22:41:45.6230185Z     [90m440| [39m        )[33m,[39m
2025-06-04T22:41:45.6230405Z     [90m441| [39m      )[33m.[39m[34mtoBe[39m([35mtrue[39m)
2025-06-04T22:41:45.6230548Z     [90m   | [39m        [31m^[39m
2025-06-04T22:41:45.6230650Z     [90m442| [39m    })
2025-06-04T22:41:45.6230754Z     [90m443| [39m  })
2025-06-04T22:41:45.6230762Z 
2025-06-04T22:41:45.6230962Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[241/523]⎯[22m[39m
2025-06-04T22:41:45.6230979Z 
2025-06-04T22:41:45.6231988Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mRealTimeInterventionEngine[2m > [22mIntervention Effectiveness Tracking[2m > [22mshould update intervention effectiveness
2025-06-04T22:41:45.6232282Z [31m[1mError[22m: expected undefined to equal [object Object][39m
2025-06-04T22:41:45.6232739Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m645:62[22m[39m
2025-06-04T22:41:45.6232852Z     [90m643| [39m      )
2025-06-04T22:41:45.6232952Z     [90m644| [39m
2025-06-04T22:41:45.6233427Z     [90m645| [39m      [34mexpect[39m(intervention[33m?.[39meffectiveness[33m?.[39mimmediateResponse)[33m.[39m[34mtoEqual[39m(
2025-06-04T22:41:45.6233662Z     [90m   | [39m                                                             [31m^[39m
2025-06-04T22:41:45.6233926Z     [90m646| [39m        effectiveness[33m.[39mimmediateResponse[33m,[39m
2025-06-04T22:41:45.6234031Z     [90m647| [39m      )
2025-06-04T22:41:45.6234043Z 
2025-06-04T22:41:45.6234247Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[242/523]⎯[22m[39m
2025-06-04T22:41:45.6234254Z 
2025-06-04T22:41:45.6235575Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mRealTimeInterventionEngine[2m > [22mSession Phase Detection[2m > [22mshould transition through session phases based on time
2025-06-04T22:41:45.6236002Z [31m[1mError[22m: expected opening to be working[39m
2025-06-04T22:41:45.6236814Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m758:44[22m[39m
2025-06-04T22:41:45.6236985Z     [90m756| [39m
2025-06-04T22:41:45.6237508Z     [90m757| [39m      [35mconst[39m status [33m=[39m engine[33m.[39m[34mgetSessionStatus[39m(session[33m.[39msessionId)
2025-06-04T22:41:45.6238112Z     [90m758| [39m      [34mexpect[39m(status[33m.[39msession[33m?.[39mcurrentPhase)[33m.[39m[34mtoBe[39m([32m'working'[39m)
2025-06-04T22:41:45.6238327Z     [90m   | [39m                                           [31m^[39m
2025-06-04T22:41:45.6238438Z     [90m759| [39m    })
2025-06-04T22:41:45.6238536Z     [90m760| [39m  })
2025-06-04T22:41:45.6238543Z 
2025-06-04T22:41:45.6238752Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[243/523]⎯[22m[39m
2025-06-04T22:41:45.6238759Z 
2025-06-04T22:41:45.6239781Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mUtility Functions[2m > [22mperformQuickRiskAssessment[2m > [22mshould detect high-risk content
2025-06-04T22:41:45.6240034Z [31m[1mError[22m: expected minimal to be critical[39m
2025-06-04T22:41:45.6240492Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m817:32[22m[39m
2025-06-04T22:41:45.6240602Z     [90m815| [39m      )
2025-06-04T22:41:45.6240698Z     [90m816| [39m
2025-06-04T22:41:45.6241084Z     [90m817| [39m      [34mexpect[39m(result[33m.[39mriskLevel)[33m.[39m[34mtoBe[39m([32m'critical'[39m)
2025-06-04T22:41:45.6241273Z     [90m   | [39m                               [31m^[39m
2025-06-04T22:41:45.6241620Z     [90m818| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBe[39m([34m0.8[39m)
2025-06-04T22:41:45.6242047Z     [90m819| [39m      [34mexpect[39m(result[33m.[39mfactors)[33m.[39m[34mtoContain[39m([32m'suicidal-ideation'[39m)
2025-06-04T22:41:45.6242055Z 
2025-06-04T22:41:45.6242388Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[244/523]⎯[22m[39m
2025-06-04T22:41:45.6242400Z 
2025-06-04T22:41:45.6243193Z [41m[1m FAIL [22m[49m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle very long session durations
2025-06-04T22:41:45.6243426Z [31m[1mError[22m: expected undefined to be closing[39m
2025-06-04T22:41:45.6243886Z [36m [2m❯[22m src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:[2m947:48[22m[39m
2025-06-04T22:41:45.6243990Z     [90m945| [39m    })
2025-06-04T22:41:45.6244091Z     [90m946| [39m
2025-06-04T22:41:45.6244568Z     [90m947| [39m    [34mexpect[39m(result[33m.[39msessionUpdates[33m.[39mcurrentPhase)[33m.[39m[34mtoBe[39m([32m'closing'[39m)
2025-06-04T22:41:45.6244776Z     [90m   | [39m                                               [31m^[39m
2025-06-04T22:41:45.6244874Z     [90m948| [39m  })
2025-06-04T22:41:45.6244973Z     [90m949| [39m
2025-06-04T22:41:45.6244988Z 
2025-06-04T22:41:45.6245185Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[245/523]⎯[22m[39m
2025-06-04T22:41:45.6245191Z 
2025-06-04T22:41:45.6246155Z [41m[1m FAIL [22m[49m src/lib/ai/mental-arena/__tests__/MentalArenaAdapter.test.ts[2m > [22mMentalArenaAdapter[2m > [22mfineTuneModelWithPythonBridge[2m > [22mshould format data and call Python bridge for fine-tuning
2025-06-04T22:41:45.6246593Z [31m[1mError[22m: Fine-tuning failed: Cannot read properties of undefined (reading 'model_path')[39m
2025-06-04T22:41:45.6247201Z [36m [2m❯[22m MentalArenaAdapter.fineTuneModelWithPythonBridge src/lib/ai/mental-arena/MentalArenaAdapter.ts:[2m808:13[22m[39m
2025-06-04T22:41:45.6247369Z     [90m806| [39m    } [35mcatch[39m (_error) {
2025-06-04T22:41:45.6255577Z     [90m807| [39m      logger[33m.[39m[34merror[39m([32m'Fine-tuning process failed'[39m[33m,[39m { error[33m:[39m _error })
2025-06-04T22:41:45.6255934Z     [90m808| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.6256114Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6256354Z     [90m809| [39m        [32m`Fine-tuning failed: [39m[36m${[39m
2025-06-04T22:41:45.6256836Z     [90m810| [39m          _error [35minstanceof[39m [33mError[39m [33m?[39m _error[33m.[39mmessage [33m:[39m [33mString[39m(_error)
2025-06-04T22:41:45.6257276Z [90m [2m❯[22m src/lib/ai/mental-arena/__tests__/MentalArenaAdapter.test.ts:[2m147:7[22m[39m
2025-06-04T22:41:45.6257287Z 
2025-06-04T22:41:45.6257737Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[246/523]⎯[22m[39m
2025-06-04T22:41:45.6257749Z 
2025-06-04T22:41:45.6258775Z [41m[1m FAIL [22m[49m src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22mPerformanceOptimizationEngine[2m > [22mAdvanced Caching Strategy[2m > [22mshould cache high-value patterns in Redis
2025-06-04T22:41:45.6259311Z [31m[1mAssertionError[22m: expected "spy" to be called at least once[39m
2025-06-04T22:41:45.6259846Z [36m [2m❯[22m src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:[2m299:36[22m[39m
2025-06-04T22:41:45.6259971Z     [90m297| [39m
2025-06-04T22:41:45.6260290Z     [90m298| [39m      [90m// Should attempt to store in Redis for high-value patterns[39m
2025-06-04T22:41:45.6260709Z     [90m299| [39m      [34mexpect[39m(mockRedisService[33m.[39m[35mset[39m)[33m.[39m[34mtoHaveBeenCalled[39m()
2025-06-04T22:41:45.6260922Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.6261042Z     [90m300| [39m    })
2025-06-04T22:41:45.6261139Z     [90m301| [39m
2025-06-04T22:41:45.6261146Z 
2025-06-04T22:41:45.6261362Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[247/523]⎯[22m[39m
2025-06-04T22:41:45.6261371Z 
2025-06-04T22:41:45.6262287Z [41m[1m FAIL [22m[49m src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts[2m > [22mPerformance Optimization Integration[2m > [22mshould demonstrate end-to-end performance improvement
2025-06-04T22:41:45.6262755Z [31m[1mAssertionError[22m: expected 0 to be less than 0[39m
2025-06-04T22:41:45.6263235Z [36m [2m❯[22m src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:[2m727:27[22m[39m
2025-06-04T22:41:45.6263335Z     [90m725| [39m
2025-06-04T22:41:45.6263602Z     [90m726| [39m    [90m// Cached queries should be significantly faster[39m
2025-06-04T22:41:45.6263954Z     [90m727| [39m    [34mexpect[39m(avgCachedTime)[33m.[39m[34mtoBeLessThan[39m(avgUncachedTime)
2025-06-04T22:41:45.6264143Z     [90m   | [39m                          [31m^[39m
2025-06-04T22:41:45.6264463Z     [90m728| [39m    expect(avgCachedTime).toBeLessThan(50) // Should be very fast from…
2025-06-04T22:41:45.6264566Z     [90m729| [39m
2025-06-04T22:41:45.6264573Z 
2025-06-04T22:41:45.6264781Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[248/523]⎯[22m[39m
2025-06-04T22:41:45.6264788Z 
2025-06-04T22:41:45.6265870Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/dimensionDominance.test.ts[2m > [22mDimension Dominance Pattern Detection[2m > [22manalyzePatterns - dimension dominance[2m > [22mshould generate insights for dimension dominance patterns
2025-06-04T22:41:45.6266088Z [31m[1mError[22m: expected false to be true[39m
2025-06-04T22:41:45.6266600Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/dimensionDominance.test.ts:[2m234:9[22m[39m
2025-06-04T22:41:45.6266867Z     [90m232| [39m      [34mexpect[39m(
2025-06-04T22:41:45.6267320Z     [90m233| [39m        insights.some((i) => i.includes('strongest') && i.includes('ar…
2025-06-04T22:41:45.6267629Z     [90m234| [39m      )[33m.[39m[34mtoBe[39m([35mtrue[39m)
2025-06-04T22:41:45.6267902Z     [90m   | [39m        [31m^[39m
2025-06-04T22:41:45.6268165Z     [90m235| [39m      [34mexpect[39m(
2025-06-04T22:41:45.6268674Z     [90m236| [39m        insights.some((i) => i.includes('energy') || i.includes('activ…
2025-06-04T22:41:45.6268696Z 
2025-06-04T22:41:45.6269002Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[249/523]⎯[22m[39m
2025-06-04T22:41:45.6269025Z 
2025-06-04T22:41:45.6269946Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/integration.test.ts[2m > [22mOscillation Detection[2m > [22mshould detect simple oscillation patterns
2025-06-04T22:41:45.6270309Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6270952Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/integration.test.ts:[2m62:29[22m[39m
2025-06-04T22:41:45.6271724Z     [90m 60| [39m    [35mconst[39m patterns [33m=[39m [34mdetectOscillations[39m(data[33m,[39m [32m'valence'[39m)
2025-06-04T22:41:45.6271893Z     [90m 61| [39m
2025-06-04T22:41:45.6272393Z     [90m 62| [39m    [34mexpect[39m(patterns[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6272575Z     [90m   | [39m                            [31m^[39m
2025-06-04T22:41:45.6272985Z     [90m 63| [39m    [34mexpect[39m(patterns[[34m0[39m][33m.[39mtype)[33m.[39m[34mtoBe[39m([32m'oscillation'[39m)
2025-06-04T22:41:45.6273549Z     [90m 64| [39m    [34mexpect[39m(patterns[[34m0[39m][33m.[39mdimension)[33m.[39m[34mtoBe[39m([32m'valence'[39m)
2025-06-04T22:41:45.6273563Z 
2025-06-04T22:41:45.6273945Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[250/523]⎯[22m[39m
2025-06-04T22:41:45.6273956Z 
2025-06-04T22:41:45.6275175Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/integration.test.ts[2m > [22mOscillation Detection[2m > [22mshould detect patterns with different frequencies
2025-06-04T22:41:45.6275487Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6275858Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/integration.test.ts:[2m79:29[22m[39m
2025-06-04T22:41:45.6276300Z     [90m 77| [39m    [35mconst[39m patterns [33m=[39m [34mdetectOscillations[39m(data[33m,[39m [32m'valence'[39m)
2025-06-04T22:41:45.6276475Z     [90m 78| [39m
2025-06-04T22:41:45.6277142Z     [90m 79| [39m    [34mexpect[39m(patterns[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6277592Z     [90m   | [39m                            [31m^[39m
2025-06-04T22:41:45.6278380Z     [90m 80| [39m    [34mexpect[39m(patterns[[34m0[39m][33m.[39mstrength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6278557Z     [90m 81| [39m  })
2025-06-04T22:41:45.6278569Z 
2025-06-04T22:41:45.6278940Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[251/523]⎯[22m[39m
2025-06-04T22:41:45.6278950Z 
2025-06-04T22:41:45.6279727Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/integration.test.ts[2m > [22mOscillation Detection[2m > [22mshould handle multiple dimensions
2025-06-04T22:41:45.6280035Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6280393Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/integration.test.ts:[2m90:36[22m[39m
2025-06-04T22:41:45.6280711Z     [90m 88| [39m    const dominancePatterns = detectOscillations(dominanceData, 'domin…
2025-06-04T22:41:45.6280810Z     [90m 89| [39m
2025-06-04T22:41:45.6281224Z     [90m 90| [39m    [34mexpect[39m(arousalPatterns[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6281433Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.6281842Z     [90m 91| [39m    [34mexpect[39m(dominancePatterns[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6282431Z     [90m 92| [39m    [34mexpect[39m(arousalPatterns[[34m0[39m][33m.[39mdimension)[33m.[39m[34mtoBe[39m([32m'arousal'[39m)
2025-06-04T22:41:45.6282440Z 
2025-06-04T22:41:45.6282656Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[252/523]⎯[22m[39m
2025-06-04T22:41:45.6282663Z 
2025-06-04T22:41:45.6283649Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/integration.test.ts[2m > [22mPattern Detection Integration[2m > [22mOscillation Detection Integration[2m > [22mshould detect oscillations consistently between both systems
2025-06-04T22:41:45.6283930Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6284293Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/integration.test.ts:[2m165:35[22m[39m
2025-06-04T22:41:45.6284407Z     [90m163| [39m      )
2025-06-04T22:41:45.6284510Z     [90m164| [39m
2025-06-04T22:41:45.6284914Z     [90m165| [39m      [34mexpect[39m(oscillations[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6285120Z     [90m   | [39m                                  [31m^[39m
2025-06-04T22:41:45.6285564Z     [90m166| [39m      [34mexpect[39m(patternOscillations[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6286013Z     [90m167| [39m      [34mexpect[39m(oscillations[33m.[39mlength)[33m.[39m[34mtoBe[39m(patternOscillations[33m.[39mlength)
2025-06-04T22:41:45.6286021Z 
2025-06-04T22:41:45.6286220Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[253/523]⎯[22m[39m
2025-06-04T22:41:45.6286228Z 
2025-06-04T22:41:45.6287131Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/integration.test.ts[2m > [22mPattern Detection Integration[2m > [22mOscillation Detection Integration[2m > [22mshould detect multi-dimensional oscillations
2025-06-04T22:41:45.6287325Z [31m[1mError[22m: expected 0 to be 2[39m
2025-06-04T22:41:45.6287678Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/integration.test.ts:[2m187:35[22m[39m
2025-06-04T22:41:45.6287997Z     [90m185| [39m      const oscillations = patterns.filter((p) => p.type === 'oscillat…
2025-06-04T22:41:45.6288108Z     [90m186| [39m
2025-06-04T22:41:45.6288597Z     [90m187| [39m      [34mexpect[39m(oscillations[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m2[39m) [90m// One for each dimension[39m
2025-06-04T22:41:45.6288802Z     [90m   | [39m                                  [31m^[39m
2025-06-04T22:41:45.6289696Z     [90m188| [39m      [34mexpect[39m(oscillations[33m.[39m[34mmap[39m((o) [33m=>[39m o[33m.[39mdimension))[33m.[39m[34mtoContain[39m([32m'valence'[39m)
2025-06-04T22:41:45.6290857Z     [90m189| [39m      [34mexpect[39m(oscillations[33m.[39m[34mmap[39m((o) [33m=>[39m o[33m.[39mdimension))[33m.[39m[34mtoContain[39m([32m'arousal'[39m)
2025-06-04T22:41:45.6290873Z 
2025-06-04T22:41:45.6291264Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[254/523]⎯[22m[39m
2025-06-04T22:41:45.6291275Z 
2025-06-04T22:41:45.6293016Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/integration.test.ts[2m > [22mPattern Detection Integration[2m > [22mPattern Analysis Integration[2m > [22mshould generate insights that reflect detected oscillations
2025-06-04T22:41:45.6293540Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6294176Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/integration.test.ts:[2m202:35[22m[39m
2025-06-04T22:41:45.6294742Z     [90m200| [39m      [35mconst[39m analysis [33m=[39m [34manalyzePatterns[39m(patterns)
2025-06-04T22:41:45.6294909Z     [90m201| [39m
2025-06-04T22:41:45.6295631Z     [90m202| [39m      [34mexpect[39m(oscillations[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6296000Z     [90m   | [39m                                  [31m^[39m
2025-06-04T22:41:45.6296262Z     [90m203| [39m      [34mexpect[39m(
2025-06-04T22:41:45.6296611Z     [90m204| [39m        analysis[33m.[39m[34msome[39m(
2025-06-04T22:41:45.6296623Z 
2025-06-04T22:41:45.6296986Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[255/523]⎯[22m[39m
2025-06-04T22:41:45.6296997Z 
2025-06-04T22:41:45.6298863Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/integration.test.ts[2m > [22mPattern Detection Integration[2m > [22mPattern Analysis Integration[2m > [22mshould reflect oscillation characteristics in insights
2025-06-04T22:41:45.6299443Z [31m[1mError[22m: expected false to be true[39m
2025-06-04T22:41:45.6300051Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/integration.test.ts:[2m226:9[22m[39m
2025-06-04T22:41:45.6300565Z     [90m224| [39m              i[33m.[39m[34mincludes[39m([32m'intense'[39m))[33m,[39m
2025-06-04T22:41:45.6300829Z     [90m225| [39m        )[33m,[39m
2025-06-04T22:41:45.6301198Z     [90m226| [39m      )[33m.[39m[34mtoBe[39m([35mtrue[39m)
2025-06-04T22:41:45.6301435Z     [90m   | [39m        [31m^[39m
2025-06-04T22:41:45.6301622Z     [90m227| [39m    })
2025-06-04T22:41:45.6301785Z     [90m228| [39m
2025-06-04T22:41:45.6301796Z 
2025-06-04T22:41:45.6302153Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[256/523]⎯[22m[39m
2025-06-04T22:41:45.6302184Z 
2025-06-04T22:41:45.6303826Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/integration.test.ts[2m > [22mPattern Detection Integration[2m > [22mPattern Analysis Integration[2m > [22mshould handle multiple pattern types together
2025-06-04T22:41:45.6304199Z [31m[1mError[22m: expected false to be true[39m
2025-06-04T22:41:45.6304805Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/integration.test.ts:[2m266:63[22m[39m
2025-06-04T22:41:45.6304996Z     [90m264| [39m
2025-06-04T22:41:45.6305607Z     [90m265| [39m      [90m// Should have insights about both oscillations and transitions[39m
2025-06-04T22:41:45.6306138Z     [90m266| [39m      expect(analysis.some((i) => i.includes('oscillation'))).toBe(tru…
2025-06-04T22:41:45.6306547Z     [90m   | [39m                                                              [31m^[39m
2025-06-04T22:41:45.6307642Z     [90m267| [39m      [34mexpect[39m(analysis[33m.[39m[34msome[39m((i) [33m=>[39m i[33m.[39m[34mincludes[39m([32m'transition'[39m)))[33m.[39m[34mtoBe[39m([35mtrue[39m)
2025-06-04T22:41:45.6307836Z     [90m268| [39m    })
2025-06-04T22:41:45.6307847Z 
2025-06-04T22:41:45.6308206Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[257/523]⎯[22m[39m
2025-06-04T22:41:45.6308217Z 
2025-06-04T22:41:45.6309764Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/oscillations.test.ts[2m > [22moscillations[2m > [22mdetectOscillations[2m > [22mshould detect simple oscillation pattern
2025-06-04T22:41:45.6310584Z [31m[1mAssertionError[22m: expected [] to have a length of 1 but got +0[39m
2025-06-04T22:41:45.6310598Z 
2025-06-04T22:41:45.6310812Z [32m- Expected[39m
2025-06-04T22:41:45.6311003Z [31m+ Received[39m
2025-06-04T22:41:45.6311013Z 
2025-06-04T22:41:45.6311166Z [32m- 1[39m
2025-06-04T22:41:45.6311316Z [31m+ 0[39m
2025-06-04T22:41:45.6311326Z 
2025-06-04T22:41:45.6311977Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/oscillations.test.ts:[2m65:22[22m[39m
2025-06-04T22:41:45.6312167Z     [90m 63| [39m
2025-06-04T22:41:45.6312918Z     [90m 64| [39m      [35mconst[39m result [33m=[39m [34mdetectOscillations[39m(points[33m,[39m [32m'pleasure'[39m)
2025-06-04T22:41:45.6313452Z     [90m 65| [39m      [34mexpect[39m(result)[33m.[39m[34mtoHaveLength[39m([34m1[39m)
2025-06-04T22:41:45.6313737Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6314304Z     [90m 66| [39m      [34mexpect[39m(result[[34m0[39m])[33m.[39m[34mtoMatchObject[39m({
2025-06-04T22:41:45.6314722Z     [90m 67| [39m        type[33m:[39m [32m'oscillation'[39m[33m,[39m
2025-06-04T22:41:45.6314734Z 
2025-06-04T22:41:45.6315105Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[258/523]⎯[22m[39m
2025-06-04T22:41:45.6315115Z 
2025-06-04T22:41:45.6316525Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/oscillations.test.ts[2m > [22moscillations[2m > [22mdetectOscillations[2m > [22mshould detect oscillations in all dimensions
2025-06-04T22:41:45.6317316Z [31m[1mAssertionError[22m: expected [] to have a length of 1 but got +0[39m
2025-06-04T22:41:45.6317333Z 
2025-06-04T22:41:45.6317539Z [32m- Expected[39m
2025-06-04T22:41:45.6317733Z [31m+ Received[39m
2025-06-04T22:41:45.6317744Z 
2025-06-04T22:41:45.6317891Z [32m- 1[39m
2025-06-04T22:41:45.6318052Z [31m+ 0[39m
2025-06-04T22:41:45.6318063Z 
2025-06-04T22:41:45.6318697Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/oscillations.test.ts:[2m143:24[22m[39m
2025-06-04T22:41:45.6319375Z     [90m141| [39m      dimensions[33m.[39m[34mforEach[39m((dimension) [33m=>[39m {
2025-06-04T22:41:45.6320100Z     [90m142| [39m        [35mconst[39m result [33m=[39m [34mdetectOscillations[39m(points[33m,[39m dimension)
2025-06-04T22:41:45.6320533Z     [90m143| [39m        [34mexpect[39m(result)[33m.[39m[34mtoHaveLength[39m([34m1[39m)
2025-06-04T22:41:45.6320707Z     [90m   | [39m                       [31m^[39m
2025-06-04T22:41:45.6321034Z     [90m144| [39m        [34mexpect[39m(result[[34m0[39m])[33m.[39m[34mtoMatchObject[39m({
2025-06-04T22:41:45.6321295Z     [90m145| [39m          type[33m:[39m [32m'oscillation'[39m[33m,[39m
2025-06-04T22:41:45.6321928Z [90m [2m❯[22m src/lib/ai/temporal/__tests__/oscillations.test.ts:[2m141:18[22m[39m
2025-06-04T22:41:45.6321945Z 
2025-06-04T22:41:45.6322167Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[259/523]⎯[22m[39m
2025-06-04T22:41:45.6322175Z 
2025-06-04T22:41:45.6322925Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/oscillations.test.ts[2m > [22moscillations[2m > [22mdetectOscillations[2m > [22mshould include frequency in description
2025-06-04T22:41:45.6323265Z [31m[1mAssertionError[22m: expected [] to have a length of 1 but got +0[39m
2025-06-04T22:41:45.6323272Z 
2025-06-04T22:41:45.6323386Z [32m- Expected[39m
2025-06-04T22:41:45.6323500Z [31m+ Received[39m
2025-06-04T22:41:45.6323507Z 
2025-06-04T22:41:45.6323597Z [32m- 1[39m
2025-06-04T22:41:45.6323692Z [31m+ 0[39m
2025-06-04T22:41:45.6323698Z 
2025-06-04T22:41:45.6324058Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/oscillations.test.ts:[2m177:22[22m[39m
2025-06-04T22:41:45.6324164Z     [90m175| [39m
2025-06-04T22:41:45.6324599Z     [90m176| [39m      [35mconst[39m result [33m=[39m [34mdetectOscillations[39m(points[33m,[39m [32m'pleasure'[39m)
2025-06-04T22:41:45.6324907Z     [90m177| [39m      [34mexpect[39m(result)[33m.[39m[34mtoHaveLength[39m([34m1[39m)
2025-06-04T22:41:45.6325067Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6325534Z     [90m178| [39m      expect(result[0].description).toMatch(/frequency of \d+\.\d+ per…
2025-06-04T22:41:45.6325644Z     [90m179| [39m    })
2025-06-04T22:41:45.6325652Z 
2025-06-04T22:41:45.6325857Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[260/523]⎯[22m[39m
2025-06-04T22:41:45.6325870Z 
2025-06-04T22:41:45.6326753Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/patternDetection.test.ts[2m > [22mpatternDetection[2m > [22mdetectTemporalPatterns[2m > [22mshould detect oscillation patterns in emotional data
2025-06-04T22:41:45.6327076Z [31m[1mAssertionError[22m: expected [] to have a length of 2 but got +0[39m
2025-06-04T22:41:45.6327088Z 
2025-06-04T22:41:45.6327204Z [32m- Expected[39m
2025-06-04T22:41:45.6327313Z [31m+ Received[39m
2025-06-04T22:41:45.6327320Z 
2025-06-04T22:41:45.6327413Z [32m- 2[39m
2025-06-04T22:41:45.6327502Z [31m+ 0[39m
2025-06-04T22:41:45.6327508Z 
2025-06-04T22:41:45.6327884Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/patternDetection.test.ts:[2m37:28[22m[39m
2025-06-04T22:41:45.6328201Z     [90m 35| [39m      const oscillations = patterns.filter((p) => p.type === 'oscillat…
2025-06-04T22:41:45.6328305Z     [90m 36| [39m
2025-06-04T22:41:45.6328597Z     [90m 37| [39m      expect(oscillations).toHaveLength(2) // One for pleasure, one fo…
2025-06-04T22:41:45.6328778Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6329398Z     [90m 38| [39m      expect(oscillations.map((o) => o.dimension)).toContain('pleasure…
2025-06-04T22:41:45.6329976Z     [90m 39| [39m      [34mexpect[39m(oscillations[33m.[39m[34mmap[39m((o) [33m=>[39m o[33m.[39mdimension))[33m.[39m[34mtoContain[39m([32m'arousal'[39m)
2025-06-04T22:41:45.6329985Z 
2025-06-04T22:41:45.6330193Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[261/523]⎯[22m[39m
2025-06-04T22:41:45.6330201Z 
2025-06-04T22:41:45.6331098Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/patternDetection.test.ts[2m > [22mpatternDetection[2m > [22mdetectTemporalPatterns[2m > [22mshould detect both quadrant transitions and oscillations
2025-06-04T22:41:45.6331400Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6331792Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/patternDetection.test.ts:[2m70:35[22m[39m
2025-06-04T22:41:45.6331899Z     [90m 68| [39m      )
2025-06-04T22:41:45.6331995Z     [90m 69| [39m
2025-06-04T22:41:45.6332415Z     [90m 70| [39m      [34mexpect[39m(oscillations[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6332619Z     [90m   | [39m                                  [31m^[39m
2025-06-04T22:41:45.6333006Z     [90m 71| [39m      [34mexpect[39m(transitions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6333108Z     [90m 72| [39m    })
2025-06-04T22:41:45.6333115Z 
2025-06-04T22:41:45.6333367Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[262/523]⎯[22m[39m
2025-06-04T22:41:45.6333381Z 
2025-06-04T22:41:45.6334904Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/patternDetection.test.ts[2m > [22mpatternDetection[2m > [22manalyzePatterns[2m > [22mshould analyze oscillation patterns and generate insights
2025-06-04T22:41:45.6335445Z [31m[1mAssertionError[22m: expected undefined to be defined[39m
2025-06-04T22:41:45.6336145Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/patternDetection.test.ts:[2m101:33[22m[39m
2025-06-04T22:41:45.6336731Z     [90m 99| [39m      [35mconst[39m analysis [33m=[39m [34manalyzePatterns[39m(patterns)
2025-06-04T22:41:45.6336905Z     [90m100| [39m
2025-06-04T22:41:45.6337516Z     [90m101| [39m      [34mexpect[39m(analysis[33m.[39minsights)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6337838Z     [90m   | [39m                                [31m^[39m
2025-06-04T22:41:45.6338605Z     [90m102| [39m      [34mexpect[39m(analysis[33m.[39minsights[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6339251Z     [90m103| [39m      expect(analysis.insights.some((i) => i.includes('oscillation')))…
2025-06-04T22:41:45.6339446Z 
2025-06-04T22:41:45.6339854Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[263/523]⎯[22m[39m
2025-06-04T22:41:45.6339866Z 
2025-06-04T22:41:45.6341263Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/patternDetection.test.ts[2m > [22mpatternDetection[2m > [22manalyzePatterns[2m > [22mshould combine insights from different pattern types
2025-06-04T22:41:45.6341798Z [31m[1mAssertionError[22m: expected undefined to be defined[39m
2025-06-04T22:41:45.6342471Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/patternDetection.test.ts:[2m133:33[22m[39m
2025-06-04T22:41:45.6343033Z     [90m131| [39m      [35mconst[39m analysis [33m=[39m [34manalyzePatterns[39m(patterns)
2025-06-04T22:41:45.6343205Z     [90m132| [39m
2025-06-04T22:41:45.6343576Z     [90m133| [39m      [34mexpect[39m(analysis[33m.[39minsights)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6343776Z     [90m   | [39m                                [31m^[39m
2025-06-04T22:41:45.6344242Z     [90m134| [39m      [34mexpect[39m(analysis[33m.[39minsights[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m1[39m)
2025-06-04T22:41:45.6344556Z     [90m135| [39m      expect(analysis.insights.some((i) => i.includes('oscillation')))…
2025-06-04T22:41:45.6344564Z 
2025-06-04T22:41:45.6344769Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[264/523]⎯[22m[39m
2025-06-04T22:41:45.6344776Z 
2025-06-04T22:41:45.6345676Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/patternDetection.test.ts[2m > [22mpatternDetection[2m > [22manalyzePatterns[2m > [22mshould handle empty pattern list
2025-06-04T22:41:45.6345918Z [31m[1mError[22m: expected undefined to equal [39m
2025-06-04T22:41:45.6346299Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/patternDetection.test.ts:[2m143:33[22m[39m
2025-06-04T22:41:45.6346658Z     [90m141| [39m    [34mit[39m([32m'should handle empty pattern list'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.6346959Z     [90m142| [39m      [35mconst[39m analysis [33m=[39m [34manalyzePatterns[39m([])
2025-06-04T22:41:45.6347285Z     [90m143| [39m      [34mexpect[39m(analysis[33m.[39minsights)[33m.[39m[34mtoEqual[39m([])
2025-06-04T22:41:45.6347483Z     [90m   | [39m                                [31m^[39m
2025-06-04T22:41:45.6347589Z     [90m144| [39m    })
2025-06-04T22:41:45.6347690Z     [90m145| [39m
2025-06-04T22:41:45.6347697Z 
2025-06-04T22:41:45.6347906Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[265/523]⎯[22m[39m
2025-06-04T22:41:45.6347913Z 
2025-06-04T22:41:45.6348722Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/patternDetection.test.ts[2m > [22mpatternDetection[2m > [22manalyzePatterns[2m > [22mshould prioritize stronger patterns in insights
2025-06-04T22:41:45.6349271Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'findIndex')[39m
2025-06-04T22:41:45.6349697Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/patternDetection.test.ts:[2m172:47[22m[39m
2025-06-04T22:41:45.6349944Z     [90m170| [39m
2025-06-04T22:41:45.6350216Z     [90m171| [39m      [90m// Pleasure has stronger oscillation than arousal[39m
2025-06-04T22:41:45.6350647Z     [90m172| [39m      [35mconst[39m pleasureIndex [33m=[39m analysis[33m.[39minsights[33m.[39m[34mfindIndex[39m(
2025-06-04T22:41:45.6350855Z     [90m   | [39m                                              [31m^[39m
2025-06-04T22:41:45.6351405Z     [90m173| [39m        (i) [33m=>[39m i[33m.[39m[34mincludes[39m([32m'pleasure'[39m) [33m&&[39m i[33m.[39m[34mincludes[39m([32m'oscillation'[39m)[33m,[39m
2025-06-04T22:41:45.6351513Z     [90m174| [39m      )
2025-06-04T22:41:45.6351521Z 
2025-06-04T22:41:45.6351727Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[266/523]⎯[22m[39m
2025-06-04T22:41:45.6351734Z 
2025-06-04T22:41:45.6352647Z [41m[1m FAIL [22m[49m src/lib/ai/temporal/__tests__/quadrantTransitions.test.ts[2m > [22mquadrantTransitions[2m > [22mdetectQuadrantTransitions[2m > [22mshould handle data with valence instead of pleasure
2025-06-04T22:41:45.6352989Z [31m[1mAssertionError[22m: expected [] to have a length of 1 but got +0[39m
2025-06-04T22:41:45.6352996Z 
2025-06-04T22:41:45.6353108Z [32m- Expected[39m
2025-06-04T22:41:45.6353224Z [31m+ Received[39m
2025-06-04T22:41:45.6353230Z 
2025-06-04T22:41:45.6353321Z [32m- 1[39m
2025-06-04T22:41:45.6353414Z [31m+ 0[39m
2025-06-04T22:41:45.6353421Z 
2025-06-04T22:41:45.6353830Z [36m [2m❯[22m src/lib/ai/temporal/__tests__/quadrantTransitions.test.ts:[2m100:22[22m[39m
2025-06-04T22:41:45.6353932Z     [90m 98| [39m
2025-06-04T22:41:45.6354262Z     [90m 99| [39m      [35mconst[39m result [33m=[39m [34mdetectQuadrantTransitions[39m(points)
2025-06-04T22:41:45.6354566Z     [90m100| [39m      [34mexpect[39m(result)[33m.[39m[34mtoHaveLength[39m([34m1[39m)
2025-06-04T22:41:45.6354726Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6355037Z     [90m101| [39m      [34mexpect[39m(result[[34m0[39m])[33m.[39m[34mtoMatchObject[39m({
2025-06-04T22:41:45.6355284Z     [90m102| [39m        fromQuadrant[33m:[39m [32m'Q1'[39m[33m,[39m
2025-06-04T22:41:45.6355291Z 
2025-06-04T22:41:45.6355498Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[267/523]⎯[22m[39m
2025-06-04T22:41:45.6355510Z 
2025-06-04T22:41:45.6356577Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mBelief Consistency Checking[2m > [22mshould assess belief alignment correctly
2025-06-04T22:41:45.6357001Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6357641Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m131:38[22m[39m
2025-06-04T22:41:45.6357826Z     [90m129| [39m
2025-06-04T22:41:45.6358326Z     [90m130| [39m      [90m// Access the private method through the public API[39m
2025-06-04T22:41:45.6358898Z     [90m131| [39m      const response = await service.generateCognitivelyConsistentResp…
2025-06-04T22:41:45.6359413Z     [90m   | [39m                                     [31m^[39m
2025-06-04T22:41:45.6359774Z     [90m132| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6359958Z     [90m133| [39m        statement[33m,[39m
2025-06-04T22:41:45.6359966Z 
2025-06-04T22:41:45.6360222Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[268/523]⎯[22m[39m
2025-06-04T22:41:45.6360234Z 
2025-06-04T22:41:45.6362020Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mBelief Consistency Checking[2m > [22mshould detect inconsistencies in statements
2025-06-04T22:41:45.6362816Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6363597Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m152:38[22m[39m
2025-06-04T22:41:45.6364114Z     [90m150| [39m        [32m"I'm actually really confident and successful"[39m
2025-06-04T22:41:45.6364219Z     [90m151| [39m
2025-06-04T22:41:45.6364542Z     [90m152| [39m      const response = await service.generateCognitivelyConsistentResp…
2025-06-04T22:41:45.6364746Z     [90m   | [39m                                     [31m^[39m
2025-06-04T22:41:45.6364957Z     [90m153| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6365164Z     [90m154| [39m        contradictoryStatement[33m,[39m
2025-06-04T22:41:45.6365172Z 
2025-06-04T22:41:45.6365380Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[269/523]⎯[22m[39m
2025-06-04T22:41:45.6365387Z 
2025-06-04T22:41:45.6366444Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mBelief Consistency Checking[2m > [22mshould provide consistency adjustments for misaligned statements
2025-06-04T22:41:45.6366858Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6367306Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m170:38[22m[39m
2025-06-04T22:41:45.6367723Z     [90m168| [39m      [35mconst[39m inconsistentStatement [33m=[39m [32m'Everything is perfect in my life'[39m
2025-06-04T22:41:45.6367821Z     [90m169| [39m
2025-06-04T22:41:45.6368146Z     [90m170| [39m      const response = await service.generateCognitivelyConsistentResp…
2025-06-04T22:41:45.6368350Z     [90m   | [39m                                     [31m^[39m
2025-06-04T22:41:45.6368558Z     [90m171| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6368755Z     [90m172| [39m        inconsistentStatement[33m,[39m
2025-06-04T22:41:45.6368762Z 
2025-06-04T22:41:45.6368969Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[270/523]⎯[22m[39m
2025-06-04T22:41:45.6368976Z 
2025-06-04T22:41:45.6370153Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mStatement Memory System[2m > [22mshould record and retrieve statements correctly
2025-06-04T22:41:45.6370595Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6371025Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m195:21[22m[39m
2025-06-04T22:41:45.6371129Z     [90m193| [39m
2025-06-04T22:41:45.6371657Z     [90m194| [39m      [90m// Generate a response which should record the statement[39m
2025-06-04T22:41:45.6372365Z     [90m195| [39m      [35mawait[39m service[33m.[39m[34mgenerateCognitivelyConsistentResponse[39m(
2025-06-04T22:41:45.6372642Z     [90m   | [39m                    [31m^[39m
2025-06-04T22:41:45.6373015Z     [90m196| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6373317Z     [90m197| [39m        statement[33m,[39m
2025-06-04T22:41:45.6373329Z 
2025-06-04T22:41:45.6373683Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[271/523]⎯[22m[39m
2025-06-04T22:41:45.6373707Z 
2025-06-04T22:41:45.6374829Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mStatement Memory System[2m > [22mshould maintain statement history across sessions
2025-06-04T22:41:45.6375251Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6375706Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m231:21[22m[39m
2025-06-04T22:41:45.6375806Z     [90m229| [39m
2025-06-04T22:41:45.6375990Z     [90m230| [39m      [90m// First statement[39m
2025-06-04T22:41:45.6376356Z     [90m231| [39m      [35mawait[39m service[33m.[39m[34mgenerateCognitivelyConsistentResponse[39m(
2025-06-04T22:41:45.6376519Z     [90m   | [39m                    [31m^[39m
2025-06-04T22:41:45.6376724Z     [90m232| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6377050Z     [90m233| [39m        statement1[33m,[39m
2025-06-04T22:41:45.6377057Z 
2025-06-04T22:41:45.6377258Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[272/523]⎯[22m[39m
2025-06-04T22:41:45.6377265Z 
2025-06-04T22:41:45.6378223Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mContradiction Avoidance System[2m > [22mshould generate consistent responses
2025-06-04T22:41:45.6378644Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6379276Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m259:38[22m[39m
2025-06-04T22:41:45.6379677Z     [90m257| [39m      [35mconst[39m prompt [33m=[39m [32m'Tell me about your strengths'[39m
2025-06-04T22:41:45.6379831Z     [90m258| [39m
2025-06-04T22:41:45.6380432Z     [90m259| [39m      const response = await service.generateCognitivelyConsistentResp…
2025-06-04T22:41:45.6380792Z     [90m   | [39m                                     [31m^[39m
2025-06-04T22:41:45.6381157Z     [90m260| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6381419Z     [90m261| [39m        prompt[33m,[39m
2025-06-04T22:41:45.6381430Z 
2025-06-04T22:41:45.6381796Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[273/523]⎯[22m[39m
2025-06-04T22:41:45.6381807Z 
2025-06-04T22:41:45.6383596Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mContradiction Avoidance System[2m > [22mshould validate response consistency
2025-06-04T22:41:45.6384057Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6384494Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m273:38[22m[39m
2025-06-04T22:41:45.6384598Z     [90m271| [39m
2025-06-04T22:41:45.6385036Z     [90m272| [39m    [34mit[39m([32m'should validate response consistency'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.6385368Z     [90m273| [39m      const response = await service.generateCognitivelyConsistentResp…
2025-06-04T22:41:45.6385570Z     [90m   | [39m                                     [31m^[39m
2025-06-04T22:41:45.6385789Z     [90m274| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6386029Z     [90m275| [39m        [32m"I'm feeling confident today"[39m[33m,[39m
2025-06-04T22:41:45.6386044Z 
2025-06-04T22:41:45.6386252Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[274/523]⎯[22m[39m
2025-06-04T22:41:45.6386260Z 
2025-06-04T22:41:45.6387316Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mContradiction Avoidance System[2m > [22mshould provide alternative responses when consistency is low
2025-06-04T22:41:45.6387736Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6388176Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m291:38[22m[39m
2025-06-04T22:41:45.6388577Z     [90m289| [39m      [35mconst[39m contradictoryPrompt [33m=[39m [32m"I'm the best at everything I do"[39m
2025-06-04T22:41:45.6388678Z     [90m290| [39m
2025-06-04T22:41:45.6388996Z     [90m291| [39m      const response = await service.generateCognitivelyConsistentResp…
2025-06-04T22:41:45.6389354Z     [90m   | [39m                                     [31m^[39m
2025-06-04T22:41:45.6389564Z     [90m292| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6389762Z     [90m293| [39m        contradictoryPrompt[33m,[39m
2025-06-04T22:41:45.6389769Z 
2025-06-04T22:41:45.6389970Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[275/523]⎯[22m[39m
2025-06-04T22:41:45.6389977Z 
2025-06-04T22:41:45.6390911Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mCognitive Coherence Tracking[2m > [22mshould assess overall model coherence
2025-06-04T22:41:45.6391534Z [31m[1mTypeError[22m: service.assessModelCoherence is not a function[39m
2025-06-04T22:41:45.6392260Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m309:44[22m[39m
2025-06-04T22:41:45.6392644Z     [90m307| [39m  [34mdescribe[39m([32m'Cognitive Coherence Tracking'[39m[33m,[39m () [33m=>[39m {
2025-06-04T22:41:45.6393090Z     [90m308| [39m    [34mit[39m([32m'should assess overall model coherence'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.6393404Z     [90m309| [39m      const coherenceScore = await service.assessModelCoherence('test-…
2025-06-04T22:41:45.6393614Z     [90m   | [39m                                           [31m^[39m
2025-06-04T22:41:45.6393718Z     [90m310| [39m
2025-06-04T22:41:45.6394019Z     [90m311| [39m      [34mexpect[39m(coherenceScore)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6394035Z 
2025-06-04T22:41:45.6394236Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[276/523]⎯[22m[39m
2025-06-04T22:41:45.6394243Z 
2025-06-04T22:41:45.6395166Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mCognitive Coherence Tracking[2m > [22mshould generate coherence reports
2025-06-04T22:41:45.6395525Z [31m[1mTypeError[22m: service.generateModelCoherenceReport is not a function[39m
2025-06-04T22:41:45.6396114Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m340:36[22m[39m
2025-06-04T22:41:45.6396235Z     [90m338| [39m      }
2025-06-04T22:41:45.6396333Z     [90m339| [39m
2025-06-04T22:41:45.6396785Z     [90m340| [39m      [35mconst[39m report [33m=[39m [35mawait[39m service[33m.[39m[34mgenerateModelCoherenceReport[39m(
2025-06-04T22:41:45.6396988Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.6397202Z     [90m341| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6397372Z     [90m342| [39m        timeRange[33m,[39m
2025-06-04T22:41:45.6397379Z 
2025-06-04T22:41:45.6397598Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[277/523]⎯[22m[39m
2025-06-04T22:41:45.6397604Z 
2025-06-04T22:41:45.6398560Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mCognitive Coherence Tracking[2m > [22mshould track coherence evolution over time
2025-06-04T22:41:45.6398985Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6399589Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m367:23[22m[39m
2025-06-04T22:41:45.6399696Z     [90m365| [39m
2025-06-04T22:41:45.6399984Z     [90m366| [39m      [35mfor[39m ([35mconst[39m statement [35mof[39m statements) {
2025-06-04T22:41:45.6400358Z     [90m367| [39m        [35mawait[39m service[33m.[39m[34mgenerateCognitivelyConsistentResponse[39m(
2025-06-04T22:41:45.6400530Z     [90m   | [39m                      [31m^[39m
2025-06-04T22:41:45.6400751Z     [90m368| [39m          [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6400909Z     [90m369| [39m          statement[33m,[39m
2025-06-04T22:41:45.6400917Z 
2025-06-04T22:41:45.6401119Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[278/523]⎯[22m[39m
2025-06-04T22:41:45.6401125Z 
2025-06-04T22:41:45.6402089Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mIntegration Tests[2m > [22mshould maintain consistency across multiple interactions
2025-06-04T22:41:45.6402504Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6402922Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m395:40[22m[39m
2025-06-04T22:41:45.6403020Z     [90m393| [39m
2025-06-04T22:41:45.6403647Z     [90m394| [39m      [35mfor[39m ([35mlet[39m i [33m=[39m [34m0[39m[33m;[39m i [33m<[39m interactions[33m.[39mlength[33m;[39m i[33m++[39m) {
2025-06-04T22:41:45.6403963Z     [90m395| [39m        const response = await service.generateCognitivelyConsistentRe…
2025-06-04T22:41:45.6404176Z     [90m   | [39m                                       [31m^[39m
2025-06-04T22:41:45.6404389Z     [90m396| [39m          [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6404579Z     [90m397| [39m          interactions[i][33m,[39m
2025-06-04T22:41:45.6404587Z 
2025-06-04T22:41:45.6404783Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[279/523]⎯[22m[39m
2025-06-04T22:41:45.6404790Z 
2025-06-04T22:41:45.6405699Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mIntegration Tests[2m > [22mshould handle belief conflicts appropriately
2025-06-04T22:41:45.6406103Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6406542Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m436:38[22m[39m
2025-06-04T22:41:45.6406812Z     [90m434| [39m      service[33m.[39mgetModelById [33m=[39m getModelByIdSpy
2025-06-04T22:41:45.6406914Z     [90m435| [39m
2025-06-04T22:41:45.6407230Z     [90m436| [39m      const response = await service.generateCognitivelyConsistentResp…
2025-06-04T22:41:45.6407553Z     [90m   | [39m                                     [31m^[39m
2025-06-04T22:41:45.6407762Z     [90m437| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6408027Z     [90m438| [39m        [32m"I'm confused about how I see myself"[39m[33m,[39m
2025-06-04T22:41:45.6408035Z 
2025-06-04T22:41:45.6408231Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[280/523]⎯[22m[39m
2025-06-04T22:41:45.6408246Z 
2025-06-04T22:41:45.6409494Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mIntegration Tests[2m > [22mshould adapt to therapeutic context changes
2025-06-04T22:41:45.6410292Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6411061Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m460:23[22m[39m
2025-06-04T22:41:45.6411232Z     [90m458| [39m
2025-06-04T22:41:45.6411541Z     [90m459| [39m      [35mconst[39m supportiveResponse [33m=[39m
2025-06-04T22:41:45.6411932Z     [90m460| [39m        [35mawait[39m service[33m.[39m[34mgenerateCognitivelyConsistentResponse[39m(
2025-06-04T22:41:45.6412244Z     [90m   | [39m                      [31m^[39m
2025-06-04T22:41:45.6412601Z     [90m461| [39m          [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6412964Z     [90m462| [39m          [32m"I'm worthless"[39m[33m,[39m
2025-06-04T22:41:45.6412976Z 
2025-06-04T22:41:45.6413327Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[281/523]⎯[22m[39m
2025-06-04T22:41:45.6413350Z 
2025-06-04T22:41:45.6414684Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mError Handling[2m > [22mshould handle missing model gracefully
2025-06-04T22:41:45.6415441Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6416109Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m489:38[22m[39m
2025-06-04T22:41:45.6416485Z     [90m487| [39m      service[33m.[39mgetModelById [33m=[39m getModelByIdSpy
2025-06-04T22:41:45.6416668Z     [90m488| [39m
2025-06-04T22:41:45.6417237Z     [90m489| [39m      const response = await service.generateCognitivelyConsistentResp…
2025-06-04T22:41:45.6417576Z     [90m   | [39m                                     [31m^[39m
2025-06-04T22:41:45.6417961Z     [90m490| [39m        [32m'non-existent-model'[39m[33m,[39m
2025-06-04T22:41:45.6418375Z     [90m491| [39m        [32m'Test statement'[39m[33m,[39m
2025-06-04T22:41:45.6418401Z 
2025-06-04T22:41:45.6418786Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[282/523]⎯[22m[39m
2025-06-04T22:41:45.6418799Z 
2025-06-04T22:41:45.6420554Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mError Handling[2m > [22mshould handle invalid input gracefully
2025-06-04T22:41:45.6421066Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6421867Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m505:38[22m[39m
2025-06-04T22:41:45.6422049Z     [90m503| [39m
2025-06-04T22:41:45.6422828Z     [90m504| [39m    [34mit[39m([32m'should handle invalid input gracefully'[39m[33m,[39m [35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.6423191Z     [90m505| [39m      const response = await service.generateCognitivelyConsistentResp…
2025-06-04T22:41:45.6423564Z     [90m   | [39m                                     [31m^[39m
2025-06-04T22:41:45.6423920Z     [90m506| [39m        [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6424334Z     [90m507| [39m        [32m''[39m[33m,[39m [90m// Empty statement[39m
2025-06-04T22:41:45.6424346Z 
2025-06-04T22:41:45.6424705Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[283/523]⎯[22m[39m
2025-06-04T22:41:45.6424716Z 
2025-06-04T22:41:45.6426338Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mError Handling[2m > [22mshould handle coherence assessment errors gracefully
2025-06-04T22:41:45.6426954Z [31m[1mTypeError[22m: service.assessModelCoherence is not a function[39m
2025-06-04T22:41:45.6427492Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m523:44[22m[39m
2025-06-04T22:41:45.6427994Z     [90m521| [39m      service[33m.[39mgetModelById [33m=[39m getModelByIdSpy
2025-06-04T22:41:45.6428177Z     [90m522| [39m
2025-06-04T22:41:45.6428737Z     [90m523| [39m      const coherenceScore = await service.assessModelCoherence('test-…
2025-06-04T22:41:45.6429253Z     [90m   | [39m                                           [31m^[39m
2025-06-04T22:41:45.6429428Z     [90m524| [39m
2025-06-04T22:41:45.6429824Z     [90m525| [39m      [34mexpect[39m(coherenceScore)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6429832Z 
2025-06-04T22:41:45.6430047Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[284/523]⎯[22m[39m
2025-06-04T22:41:45.6430054Z 
2025-06-04T22:41:45.6430980Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mPerformance Tests[2m > [22mshould process multiple requests efficiently
2025-06-04T22:41:45.6431392Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6431843Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m538:17[22m[39m
2025-06-04T22:41:45.6431974Z     [90m536| [39m
2025-06-04T22:41:45.6432972Z     [90m537| [39m      [35mconst[39m promises [33m=[39m [33mArray[39m[33m.[39m[35mfrom[39m({ length[33m:[39m [34m10[39m }[33m,[39m (_[33m,[39m i) [33m=>[39m
2025-06-04T22:41:45.6433488Z     [90m538| [39m        service[33m.[39m[34mgenerateCognitivelyConsistentResponse[39m(
2025-06-04T22:41:45.6433761Z     [90m   | [39m                [31m^[39m
2025-06-04T22:41:45.6434134Z     [90m539| [39m          [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6434644Z     [90m540| [39m          [32m`Statement [39m[36m${[39mi[36m}[39m[32m`[39m[33m,[39m
2025-06-04T22:41:45.6435422Z [90m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m537:30[22m[39m
2025-06-04T22:41:45.6435434Z 
2025-06-04T22:41:45.6435800Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[285/523]⎯[22m[39m
2025-06-04T22:41:45.6435998Z 
2025-06-04T22:41:45.6437733Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts[2m > [22mCognitiveConsistencyEngine[2m > [22mPerformance Tests[2m > [22mshould handle large statement histories efficiently
2025-06-04T22:41:45.6438422Z [31m[1mTypeError[22m: service.generateCognitivelyConsistentResponse is not a function[39m
2025-06-04T22:41:45.6439283Z [36m [2m❯[22m src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:[2m562:23[22m[39m
2025-06-04T22:41:45.6439740Z     [90m560| [39m      [90m// Generate a large number of statements[39m
2025-06-04T22:41:45.6440221Z     [90m561| [39m      [35mfor[39m ([35mlet[39m i [33m=[39m [34m0[39m[33m;[39m i [33m<[39m [34m50[39m[33m;[39m i[33m++[39m) {
2025-06-04T22:41:45.6440829Z     [90m562| [39m        [35mawait[39m service[33m.[39m[34mgenerateCognitivelyConsistentResponse[39m(
2025-06-04T22:41:45.6441122Z     [90m   | [39m                      [31m^[39m
2025-06-04T22:41:45.6441500Z     [90m563| [39m          [32m'test-model-1'[39m[33m,[39m
2025-06-04T22:41:45.6441925Z     [90m564| [39m          [32m`Historical statement [39m[36m${[39mi[36m}[39m[32m`[39m[33m,[39m
2025-06-04T22:41:45.6441934Z 
2025-06-04T22:41:45.6442149Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[286/523]⎯[22m[39m
2025-06-04T22:41:45.6442157Z 
2025-06-04T22:41:45.6443222Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts[2m > [22mIntegration Tests[2m > [22mshould demonstrate end-to-end prediction workflow
2025-06-04T22:41:45.6443939Z [31m[1mAssertionError[22m: expected 1749074073506 to be greater than 1749074073506[39m
2025-06-04T22:41:45.6444858Z [36m [2m❯[22m src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts:[2m1074:49[22m[39m
2025-06-04T22:41:45.6445048Z     [90m1072| [39m
2025-06-04T22:41:45.6445505Z     [90m1073| [39m    [34mexpect[39m(updatedReport[33m.[39mreportType)[33m.[39m[34mtoBe[39m([32m'summary'[39m)
2025-06-04T22:41:45.6446012Z     [90m1074| [39m    [34mexpect[39m(updatedReport[33m.[39mgeneratedAt[33m.[39m[34mgetTime[39m())[33m.[39m[34mtoBeGreaterThan[39m(
2025-06-04T22:41:45.6446230Z     [90m   | [39m                                                [31m^[39m
2025-06-04T22:41:45.6446734Z     [90m1075| [39m      report[33m.[39mgeneratedAt[33m.[39m[34mgetTime[39m()[33m,[39m
2025-06-04T22:41:45.6446925Z     [90m1076| [39m    )
2025-06-04T22:41:45.6446948Z 
2025-06-04T22:41:45.6447311Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[287/523]⎯[22m[39m
2025-06-04T22:41:45.6447322Z 
2025-06-04T22:41:45.6448759Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts[2m > [22mCopingStrategyResponseService[2m > [22mResponse Text Generation[2m > [22mshould handle cases with no effective strategies
2025-06-04T22:41:45.6449492Z [31m[1mAssertionError[22m: expected 'When I\'m stressed about crisis situa…' to contain 'don\'t know what to do'[39m
2025-06-04T22:41:45.6449656Z 
2025-06-04T22:41:45.6449878Z Expected: [32m"don't know what to do"[39m
2025-06-04T22:41:45.6451173Z Received: [31m"When I'm stressed about crisis situation, I try to go for a walk. it usually helps and helps me clear my head. Sometimes I also try cognitive_reframing."[39m
2025-06-04T22:41:45.6451186Z 
2025-06-04T22:41:45.6451969Z [36m [2m❯[22m src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts:[2m379:37[22m[39m
2025-06-04T22:41:45.6452251Z     [90m377| [39m      )
2025-06-04T22:41:45.6452363Z     [90m378| [39m
2025-06-04T22:41:45.6452843Z     [90m379| [39m      [34mexpect[39m(response[33m.[39mresponseText)[33m.[39m[34mtoContain[39m([32m"don't know what to do"[39m)
2025-06-04T22:41:45.6453055Z     [90m   | [39m                                    [31m^[39m
2025-06-04T22:41:45.6453577Z     [90m380| [39m      [34mexpect[39m(response[33m.[39meffectivenessPredict[33m.[39mshortTerm)[33m.[39m[34mtoBeLessThan[39m([34m0.2[39m)
2025-06-04T22:41:45.6453784Z     [90m381| [39m    })
2025-06-04T22:41:45.6453796Z 
2025-06-04T22:41:45.6454167Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[288/523]⎯[22m[39m
2025-06-04T22:41:45.6454178Z 
2025-06-04T22:41:45.6455856Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts[2m > [22mCopingStrategyResponseService[2m > [22mDefensive Mechanisms[2m > [22mshould apply relationship-specific defensive mechanisms
2025-06-04T22:41:45.6456085Z [31m[1mError[22m: expected false to be true[39m
2025-06-04T22:41:45.6456540Z [36m [2m❯[22m src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts:[2m415:9[22m[39m
2025-06-04T22:41:45.6456691Z     [90m413| [39m      [34mexpect[39m(
2025-06-04T22:41:45.6457212Z     [90m414| [39m        response[33m.[39mdefensiveMechanisms[33m.[39m[34msome[39m((dm) [33m=>[39m dm [33m===[39m [32m'projection'[39m)[33m,[39m
2025-06-04T22:41:45.6457434Z     [90m415| [39m      )[33m.[39m[34mtoBe[39m([35mtrue[39m)
2025-06-04T22:41:45.6457644Z     [90m   | [39m        [31m^[39m
2025-06-04T22:41:45.6457837Z     [90m416| [39m    })
2025-06-04T22:41:45.6458010Z     [90m417| [39m
2025-06-04T22:41:45.6458021Z 
2025-06-04T22:41:45.6458383Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[289/523]⎯[22m[39m
2025-06-04T22:41:45.6458393Z 
2025-06-04T22:41:45.6460250Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts[2m > [22mCopingStrategyResponseService[2m > [22mContextual Adaptations[2m > [22mshould acknowledge lack of social support
2025-06-04T22:41:45.6460505Z [31m[1mError[22m: expected false to be true[39m
2025-06-04T22:41:45.6460971Z [36m [2m❯[22m src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts:[2m490:36[22m[39m
2025-06-04T22:41:45.6461281Z     [90m488| [39m        (adaptation) => adaptation.adaptation.includes('someone to tal…
2025-06-04T22:41:45.6461390Z     [90m489| [39m      )
2025-06-04T22:41:45.6461848Z     [90m490| [39m      [34mexpect[39m(hasSupportAdaptation)[33m.[39m[34mtoBe[39m([35mtrue[39m)
2025-06-04T22:41:45.6462214Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.6462396Z     [90m491| [39m    })
2025-06-04T22:41:45.6462609Z     [90m492| [39m
2025-06-04T22:41:45.6462621Z 
2025-06-04T22:41:45.6462983Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[290/523]⎯[22m[39m
2025-06-04T22:41:45.6462994Z 
2025-06-04T22:41:45.6464654Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts[2m > [22mCopingStrategyResponseService[2m > [22mTherapeutic Opportunities Identification[2m > [22mshould identify opportunities for high stress with low effective coping
2025-06-04T22:41:45.6465114Z [31m[1mAssertionError[22m: expected [ Array(2) ] to include 'Introduce stress management techniques'[39m
2025-06-04T22:41:45.6465564Z [36m [2m❯[22m src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts:[2m582:49[22m[39m
2025-06-04T22:41:45.6465826Z     [90m580| [39m      )
2025-06-04T22:41:45.6465928Z     [90m581| [39m
2025-06-04T22:41:45.6466344Z     [90m582| [39m      [34mexpect[39m(response[33m.[39mtherapeuticOpportunities)[33m.[39m[34mtoContain[39m(
2025-06-04T22:41:45.6466574Z     [90m   | [39m                                                [31m^[39m
2025-06-04T22:41:45.6467098Z     [90m583| [39m        [32m'Introduce stress management techniques'[39m[33m,[39m
2025-06-04T22:41:45.6467287Z     [90m584| [39m      )
2025-06-04T22:41:45.6467311Z 
2025-06-04T22:41:45.6467665Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[291/523]⎯[22m[39m
2025-06-04T22:41:45.6467677Z 
2025-06-04T22:41:45.6469716Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Enhanced NLU Detection[2m > [22mdetectTherapistChallenge[2m > [22mshould detect therapist challenges with high confidence patterns
2025-06-04T22:41:45.6470010Z [31m[1mAssertionError[22m: expected null to be truthy[39m
2025-06-04T22:41:45.6470029Z 
2025-06-04T22:41:45.6470156Z [32m- Expected:[39m 
2025-06-04T22:41:45.6470226Z true
2025-06-04T22:41:45.6470233Z 
2025-06-04T22:41:45.6470350Z [31m+ Received:[39m 
2025-06-04T22:41:45.6470416Z null
2025-06-04T22:41:45.6470422Z 
2025-06-04T22:41:45.6470995Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m622:22[22m[39m
2025-06-04T22:41:45.6471361Z     [90m620| [39m      )[33m.[39m[34mdetectTherapistChallenge[39m(utterance[33m,[39m testBeliefs)
2025-06-04T22:41:45.6471466Z     [90m621| [39m
2025-06-04T22:41:45.6471958Z     [90m622| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBeTruthy[39m()
2025-06-04T22:41:45.6472243Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6472904Z     [90m623| [39m      [34mexpect[39m(result[33m?.[39mbeliefId)[33m.[39m[34mtoBe[39m([32m'belief1'[39m)
2025-06-04T22:41:45.6473465Z     [90m624| [39m      [34mexpect[39m(result[33m?.[39mchallengeType)[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.6473496Z 
2025-06-04T22:41:45.6473841Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[292/523]⎯[22m[39m
2025-06-04T22:41:45.6473850Z 
2025-06-04T22:41:45.6475038Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Enhanced NLU Detection[2m > [22mdetectTherapistChallenge[2m > [22mshould detect evidence-based challenges
2025-06-04T22:41:45.6475453Z [31m[1mAssertionError[22m: expected null to be truthy[39m
2025-06-04T22:41:45.6475462Z 
2025-06-04T22:41:45.6475587Z [32m- Expected:[39m 
2025-06-04T22:41:45.6475660Z true
2025-06-04T22:41:45.6475667Z 
2025-06-04T22:41:45.6475779Z [31m+ Received:[39m 
2025-06-04T22:41:45.6475848Z null
2025-06-04T22:41:45.6475855Z 
2025-06-04T22:41:45.6476411Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m636:22[22m[39m
2025-06-04T22:41:45.6477070Z     [90m634| [39m      )[33m.[39m[34mdetectTherapistChallenge[39m(utterance[33m,[39m testBeliefs)
2025-06-04T22:41:45.6477243Z     [90m635| [39m
2025-06-04T22:41:45.6477703Z     [90m636| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBeTruthy[39m()
2025-06-04T22:41:45.6477981Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6478550Z     [90m637| [39m      [34mexpect[39m(result[33m?.[39mchallengeType)[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.6479003Z     [90m638| [39m        [33mChallengeType[39m[33m.[39m[33mTHERAPIST_COUNTER_EVIDENCE[39m[33m,[39m
2025-06-04T22:41:45.6479011Z 
2025-06-04T22:41:45.6479358Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[293/523]⎯[22m[39m
2025-06-04T22:41:45.6479366Z 
2025-06-04T22:41:45.6480698Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Enhanced NLU Detection[2m > [22mdetectPatientDoubtOrContradiction[2m > [22mshould handle multiple beliefs and select the most relevant
2025-06-04T22:41:45.6481153Z [31m[1mAssertionError[22m: expected null to be truthy[39m
2025-06-04T22:41:45.6481161Z 
2025-06-04T22:41:45.6481278Z [32m- Expected:[39m 
2025-06-04T22:41:45.6481345Z true
2025-06-04T22:41:45.6481356Z 
2025-06-04T22:41:45.6481493Z [31m+ Received:[39m 
2025-06-04T22:41:45.6481611Z null
2025-06-04T22:41:45.6481623Z 
2025-06-04T22:41:45.6482677Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m685:22[22m[39m
2025-06-04T22:41:45.6483400Z     [90m683| [39m      )[33m.[39m[34mdetectPatientDoubtOrContradiction[39m(utterance[33m,[39m testBeliefs)
2025-06-04T22:41:45.6483573Z     [90m684| [39m
2025-06-04T22:41:45.6483906Z     [90m685| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBeTruthy[39m()
2025-06-04T22:41:45.6484073Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6484373Z     [90m686| [39m      expect(result?.beliefId).toBe('belief2') // Should match the saf…
2025-06-04T22:41:45.6484496Z     [90m687| [39m    })
2025-06-04T22:41:45.6484503Z 
2025-06-04T22:41:45.6484707Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[294/523]⎯[22m[39m
2025-06-04T22:41:45.6484714Z 
2025-06-04T22:41:45.6485761Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould calculate belief relevance accurately
2025-06-04T22:41:45.6486204Z [31m[1mAssertionError[22m: expected 0.5 to be greater than 0.5[39m
2025-06-04T22:41:45.6487240Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m727:27[22m[39m
2025-06-04T22:41:45.6487417Z     [90m725| [39m
2025-06-04T22:41:45.6488050Z     [90m726| [39m    [34mexpect[39m(highRelevance)[33m.[39m[34mtoBeGreaterThan[39m(lowRelevance)
2025-06-04T22:41:45.6488626Z     [90m727| [39m    [34mexpect[39m(highRelevance)[33m.[39m[34mtoBeGreaterThan[39m([34m0.5[39m)
2025-06-04T22:41:45.6488819Z     [90m   | [39m                          [31m^[39m
2025-06-04T22:41:45.6489284Z     [90m728| [39m    [34mexpect[39m(lowRelevance)[33m.[39m[34mtoBeLessThan[39m([34m0.3[39m)
2025-06-04T22:41:45.6489398Z     [90m729| [39m  })
2025-06-04T22:41:45.6489406Z 
2025-06-04T22:41:45.6489622Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[295/523]⎯[22m[39m
2025-06-04T22:41:45.6489630Z 
2025-06-04T22:41:45.6490733Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould detect therapist challenges with enhanced patterns
2025-06-04T22:41:45.6490994Z [31m[1mAssertionError[22m: expected null to be truthy[39m
2025-06-04T22:41:45.6491002Z 
2025-06-04T22:41:45.6491119Z [32m- Expected:[39m 
2025-06-04T22:41:45.6491193Z true
2025-06-04T22:41:45.6491199Z 
2025-06-04T22:41:45.6491310Z [31m+ Received:[39m 
2025-06-04T22:41:45.6491427Z null
2025-06-04T22:41:45.6491439Z 
2025-06-04T22:41:45.6492471Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m745:22[22m[39m
2025-06-04T22:41:45.6493125Z     [90m743| [39m        service [35mas[39m unknown [35mas[39m [33mServiceWithTestableApplyBelief[39m
2025-06-04T22:41:45.6493690Z     [90m744| [39m      )[33m.[39m[34mdetectTherapistChallenge[39m(utterance[33m,[39m testBeliefs)
2025-06-04T22:41:45.6493971Z     [90m745| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBeTruthy[39m()
2025-06-04T22:41:45.6494137Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6494455Z     [90m746| [39m      [34mexpect[39m(result[33m?.[39mchallengeType)[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.6494802Z     [90m747| [39m        [33mChallengeType[39m[33m.[39m[33mTHERAPIST_COUNTER_EVIDENCE[39m[33m,[39m
2025-06-04T22:41:45.6495361Z [90m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m741:25[22m[39m
2025-06-04T22:41:45.6495520Z 
2025-06-04T22:41:45.6495732Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[296/523]⎯[22m[39m
2025-06-04T22:41:45.6495740Z 
2025-06-04T22:41:45.6497381Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould detect patient doubt with enhanced patterns
2025-06-04T22:41:45.6497853Z [31m[1mAssertionError[22m: expected null to be truthy[39m
2025-06-04T22:41:45.6497865Z 
2025-06-04T22:41:45.6498059Z [32m- Expected:[39m 
2025-06-04T22:41:45.6498186Z true
2025-06-04T22:41:45.6498197Z 
2025-06-04T22:41:45.6498316Z [31m+ Received:[39m 
2025-06-04T22:41:45.6498388Z null
2025-06-04T22:41:45.6498394Z 
2025-06-04T22:41:45.6498952Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m768:22[22m[39m
2025-06-04T22:41:45.6499458Z     [90m766| [39m        service [35mas[39m unknown [35mas[39m [33mServiceWithTestableApplyBelief[39m
2025-06-04T22:41:45.6499858Z     [90m767| [39m      )[33m.[39m[34mdetectPatientDoubtOrContradiction[39m(utterance[33m,[39m testBeliefs)
2025-06-04T22:41:45.6500122Z     [90m768| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBeTruthy[39m()
2025-06-04T22:41:45.6500281Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6500737Z     [90m769| [39m      expect(result?.challengeType).toBe(ChallengeType.PATIENT_EXPRESS…
2025-06-04T22:41:45.6501075Z     [90m770| [39m      [34mexpect[39m(result[33m?.[39mbeliefId)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6501642Z [90m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m764:21[22m[39m
2025-06-04T22:41:45.6501650Z 
2025-06-04T22:41:45.6501853Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[297/523]⎯[22m[39m
2025-06-04T22:41:45.6501859Z 
2025-06-04T22:41:45.6503033Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould detect patient contradictory experiences with enhanced patterns
2025-06-04T22:41:45.6503285Z [31m[1mAssertionError[22m: expected null to be truthy[39m
2025-06-04T22:41:45.6503292Z 
2025-06-04T22:41:45.6503411Z [32m- Expected:[39m 
2025-06-04T22:41:45.6503478Z true
2025-06-04T22:41:45.6503484Z 
2025-06-04T22:41:45.6503609Z [31m+ Received:[39m 
2025-06-04T22:41:45.6503675Z null
2025-06-04T22:41:45.6503681Z 
2025-06-04T22:41:45.6504234Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m788:22[22m[39m
2025-06-04T22:41:45.6504600Z     [90m786| [39m        service [35mas[39m unknown [35mas[39m [33mServiceWithTestableApplyBelief[39m
2025-06-04T22:41:45.6504994Z     [90m787| [39m      )[33m.[39m[34mdetectPatientDoubtOrContradiction[39m(utterance[33m,[39m testBeliefs)
2025-06-04T22:41:45.6505261Z     [90m788| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBeTruthy[39m()
2025-06-04T22:41:45.6505419Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6505737Z     [90m789| [39m      [34mexpect[39m(result[33m?.[39mchallengeType)[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.6506149Z     [90m790| [39m        [33mChallengeType[39m[33m.[39m[33mPATIENT_RECALLS_CONTRADICTORY_EXPERIENCE[39m[33m,[39m
2025-06-04T22:41:45.6506710Z [90m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m784:29[22m[39m
2025-06-04T22:41:45.6506718Z 
2025-06-04T22:41:45.6506917Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[298/523]⎯[22m[39m
2025-06-04T22:41:45.6506923Z 
2025-06-04T22:41:45.6507980Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Enhanced NLU Detection[2m > [22mshould prioritize beliefs with higher relevance
2025-06-04T22:41:45.6508361Z [31m[1mAssertionError[22m: expected null to be truthy[39m
2025-06-04T22:41:45.6508368Z 
2025-06-04T22:41:45.6508489Z [32m- Expected:[39m 
2025-06-04T22:41:45.6508555Z true
2025-06-04T22:41:45.6508561Z 
2025-06-04T22:41:45.6508677Z [31m+ Received:[39m 
2025-06-04T22:41:45.6508743Z null
2025-06-04T22:41:45.6508749Z 
2025-06-04T22:41:45.6509547Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m845:20[22m[39m
2025-06-04T22:41:45.6509970Z     [90m843| [39m    )[33m.[39m[34mdetectTherapistChallenge[39m(workRelatedChallenge[33m,[39m mixedBeliefs)
2025-06-04T22:41:45.6510074Z     [90m844| [39m
2025-06-04T22:41:45.6510332Z     [90m845| [39m    [34mexpect[39m(result)[33m.[39m[34mtoBeTruthy[39m()
2025-06-04T22:41:45.6510487Z     [90m   | [39m                   [31m^[39m
2025-06-04T22:41:45.6510866Z     [90m846| [39m    [34mexpect[39m(result[33m?.[39mbeliefId)[33m.[39m[34mtoBe[39m([32m'relevant'[39m)
2025-06-04T22:41:45.6510975Z     [90m847| [39m  })
2025-06-04T22:41:45.6510981Z 
2025-06-04T22:41:45.6511188Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[299/523]⎯[22m[39m
2025-06-04T22:41:45.6511194Z 
2025-06-04T22:41:45.6512481Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Therapeutic Progress Tracking[2m > [22mshould track insights when beliefs are significantly challenged
2025-06-04T22:41:45.6512792Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6513360Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m937:62[22m[39m
2025-06-04T22:41:45.6513471Z     [90m935| [39m    )
2025-06-04T22:41:45.6513568Z     [90m936| [39m
2025-06-04T22:41:45.6513914Z     [90m937| [39m    expect(updatedModel.therapeuticProgress.insights.length).toBeGreat…
2025-06-04T22:41:45.6514150Z     [90m   | [39m                                                             [31m^[39m
2025-06-04T22:41:45.6514710Z     [90m938| [39m    [34mexpect[39m(updatedModel[33m.[39mtherapeuticProgress[33m.[39minsights[[34m0[39m][33m.[39mbelief)[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.6514921Z     [90m939| [39m      [32m'I am worthless'[39m[33m,[39m
2025-06-04T22:41:45.6514927Z 
2025-06-04T22:41:45.6515132Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[300/523]⎯[22m[39m
2025-06-04T22:41:45.6515139Z 
2025-06-04T22:41:45.6516298Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Therapeutic Progress Tracking[2m > [22mshould update resistance level based on patient responses
2025-06-04T22:41:45.6516616Z [31m[1mError[22m: Invalid Chai property: slice. Did you mean "which"?[39m
2025-06-04T22:41:45.6517172Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m964:20[22m[39m
2025-06-04T22:41:45.6517491Z     [90m962| [39m    // Resistance should be updated (weighted average of previous and …
2025-06-04T22:41:45.6517865Z     [90m963| [39m    [34mexpect[39m(updatedModel[33m.[39mtherapeuticProgress[33m.[39mresistanceLevel)
2025-06-04T22:41:45.6518063Z     [90m964| [39m      [33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6518212Z     [90m   | [39m                   [31m^[39m
2025-06-04T22:41:45.6518388Z     [90m965| [39m      [33m.[39m[34mslice[39m()
2025-06-04T22:41:45.6518494Z     [90m966| [39m  })
2025-06-04T22:41:45.6518501Z 
2025-06-04T22:41:45.6518698Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[301/523]⎯[22m[39m
2025-06-04T22:41:45.6518704Z 
2025-06-04T22:41:45.6520046Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Therapeutic Progress Tracking[2m > [22mshould advance change readiness when insights are gained with low resistance
2025-06-04T22:41:45.6520467Z [31m[1mError[22m: expected contemplation to be preparation[39m
2025-06-04T22:41:45.6521027Z [36m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m998:62[22m[39m
2025-06-04T22:41:45.6521130Z     [90m996| [39m    )
2025-06-04T22:41:45.6521231Z     [90m997| [39m
2025-06-04T22:41:45.6521563Z     [90m998| [39m    expect(updatedModel.therapeuticProgress.changeReadiness).toBe('pre…
2025-06-04T22:41:45.6521806Z     [90m   | [39m                                                             [31m^[39m
2025-06-04T22:41:45.6521906Z     [90m999| [39m  })
2025-06-04T22:41:45.6522006Z     [90m1000| [39m
2025-06-04T22:41:45.6522013Z 
2025-06-04T22:41:45.6522210Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[302/523]⎯[22m[39m
2025-06-04T22:41:45.6522216Z 
2025-06-04T22:41:45.6523368Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts[2m > [22mEnhancedPatientModelService - Integration Tests[2m > [22mshould process a complete therapeutic turn with reinforcement and challenge
2025-06-04T22:41:45.6523726Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2025-06-04T22:41:45.6524089Z [36m [2m❯[22m getActiveBeliefs src/lib/ai/types/CognitiveModel.ts:[2m196:6[22m[39m
2025-06-04T22:41:45.6524365Z     [90m194| [39m  [90m// Find beliefs that match themes in the conversation[39m
2025-06-04T22:41:45.6524712Z     [90m195| [39m  [35mreturn[39m model[33m.[39mcoreBeliefs
2025-06-04T22:41:45.6524956Z     [90m196| [39m    [33m.[39m[34mfilter[39m((belief) [33m=>[39m {
2025-06-04T22:41:45.6525090Z     [90m   | [39m     [31m^[39m
2025-06-04T22:41:45.6525382Z     [90m197| [39m      // Check if any domains or specific words related to the belief …
2025-06-04T22:41:45.6525778Z     [90m198| [39m      [35mconst[39m domainMatch [33m=[39m belief[33m.[39mrelatedDomains[33m.[39m[34msome[39m(
2025-06-04T22:41:45.6526534Z [90m [2m❯[22m EnhancedPatientModelService.processBeliefReinforcementForTurn src/lib/ai/services/EnhancedPatientModelService.ts:[2m1129:27[22m[39m
2025-06-04T22:41:45.6527105Z [90m [2m❯[22m src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:[2m1107:20[22m[39m
2025-06-04T22:41:45.6527113Z 
2025-06-04T22:41:45.6527315Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[303/523]⎯[22m[39m
2025-06-04T22:41:45.6527321Z 
2025-06-04T22:41:45.6528337Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22mTreatmentPlanningService[2m > [22mSession Documentation Integration[2m > [22mshould generate progress updates from session content
2025-06-04T22:41:45.6528625Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6529039Z [36m [2m❯[22m src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts:[2m450:50[22m[39m
2025-06-04T22:41:45.6529264Z     [90m448| [39m      )
2025-06-04T22:41:45.6529365Z     [90m449| [39m
2025-06-04T22:41:45.6529884Z     [90m450| [39m      [34mexpect[39m(integration[33m.[39mprogressUpdates[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6530092Z     [90m   | [39m                                                 [31m^[39m
2025-06-04T22:41:45.6530491Z     [90m451| [39m      [35mconst[39m progressUpdate [33m=[39m integration[33m.[39mprogressUpdates[[34m0[39m]
2025-06-04T22:41:45.6530876Z     [90m452| [39m      [34mexpect[39m(progressUpdate[33m.[39mgoalId)[33m.[39m[34mtoBe[39m(goal[33m.[39mid)
2025-06-04T22:41:45.6530884Z 
2025-06-04T22:41:45.6531091Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[304/523]⎯[22m[39m
2025-06-04T22:41:45.6531098Z 
2025-06-04T22:41:45.6532025Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22mTreatmentPlanningService[2m > [22mOutcome Forecasting[2m > [22mshould generate outcome forecasts for treatment plan
2025-06-04T22:41:45.6532319Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-06-04T22:41:45.6532880Z [36m [2m❯[22m src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts:[2m531:36[22m[39m
2025-06-04T22:41:45.6533258Z     [90m529| [39m        (f) [33m=>[39m f[33m.[39mforecastType [33m===[39m [32m'goal_achievement'[39m[33m,[39m
2025-06-04T22:41:45.6533364Z     [90m530| [39m      )
2025-06-04T22:41:45.6533782Z     [90m531| [39m      [34mexpect[39m(goalForecasts[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
2025-06-04T22:41:45.6533984Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.6534087Z     [90m532| [39m
2025-06-04T22:41:45.6534380Z     [90m533| [39m      [35mconst[39m goalForecast [33m=[39m goalForecasts[[34m0[39m]
2025-06-04T22:41:45.6534387Z 
2025-06-04T22:41:45.6534593Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[305/523]⎯[22m[39m
2025-06-04T22:41:45.6534600Z 
2025-06-04T22:41:45.6535492Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22mTreatmentPlanningService[2m > [22mTemplate System[2m > [22mshould use anxiety template for anxiety diagnosis
2025-06-04T22:41:45.6535806Z [31m[1mAssertionError[22m: expected undefined to be defined[39m
2025-06-04T22:41:45.6536389Z [36m [2m❯[22m src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts:[2m651:27[22m[39m
2025-06-04T22:41:45.6537204Z     [90m649| [39m        g[33m?.[39mtitle[33m.[39m[34mtoLowerCase[39m()[33m.[39m[34mincludes[39m([32m'anxiety'[39m)[33m,[39m
2025-06-04T22:41:45.6537332Z     [90m650| [39m      )
2025-06-04T22:41:45.6537623Z     [90m651| [39m      [34mexpect[39m(anxietyGoal)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6537797Z     [90m   | [39m                          [31m^[39m
2025-06-04T22:41:45.6537897Z     [90m652| [39m
2025-06-04T22:41:45.6538128Z     [90m653| [39m      [90m// Should have CBT intervention[39m
2025-06-04T22:41:45.6538135Z 
2025-06-04T22:41:45.6538347Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[306/523]⎯[22m[39m
2025-06-04T22:41:45.6538360Z 
2025-06-04T22:41:45.6539468Z [41m[1m FAIL [22m[49m src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts[2m > [22mTreatmentPlanningService[2m > [22mTemplate System[2m > [22mshould use depression template for depression diagnosis
2025-06-04T22:41:45.6539777Z [31m[1mAssertionError[22m: expected undefined to be defined[39m
2025-06-04T22:41:45.6540215Z [36m [2m❯[22m src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts:[2m692:30[22m[39m
2025-06-04T22:41:45.6540666Z     [90m690| [39m          g[33m?.[39mtitle[33m.[39m[34mtoLowerCase[39m()[33m.[39m[34mincludes[39m([32m'depression'[39m)[33m,[39m
2025-06-04T22:41:45.6540775Z     [90m691| [39m      )
2025-06-04T22:41:45.6541074Z     [90m692| [39m      [34mexpect[39m(depressionGoal)[33m.[39m[34mtoBeDefined[39m()
2025-06-04T22:41:45.6541260Z     [90m   | [39m                             [31m^[39m
2025-06-04T22:41:45.6541363Z     [90m693| [39m
2025-06-04T22:41:45.6541601Z     [90m694| [39m      [90m// Should have PHQ-9 outcome measure[39m
2025-06-04T22:41:45.6541609Z 
2025-06-04T22:41:45.6541811Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[307/523]⎯[22m[39m
2025-06-04T22:41:45.6541818Z 
2025-06-04T22:41:45.6542706Z [41m[1m FAIL [22m[49m src/lib/ai/validation/__tests__/ContinuousValidationPipeline.test.ts[2m > [22mContinuousValidationPipeline[2m > [22mrunValidation[2m > [22mshould track performance metrics
2025-06-04T22:41:45.6543139Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ ObjectContaining{…} ][90m
2025-06-04T22:41:45.6543146Z 
2025-06-04T22:41:45.6543225Z Received: 
2025-06-04T22:41:45.6543232Z 
2025-06-04T22:41:45.6543340Z [1m  1st spy call:
2025-06-04T22:41:45.6543347Z 
2025-06-04T22:41:45.6543452Z [22m[2m  [[22m
2025-06-04T22:41:45.6543611Z [32m-   ObjectContaining {[90m
2025-06-04T22:41:45.6543702Z [31m+   {[90m
2025-06-04T22:41:45.6543851Z [31m+     "cached": false,[90m
2025-06-04T22:41:45.6544141Z [31m+     "input_tokens": 0,[90m
2025-06-04T22:41:45.6544273Z [31m+     "latency": 0,[90m
2025-06-04T22:41:45.6544433Z [2m      "model": "test-model",[22m
2025-06-04T22:41:45.6544688Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T22:41:45.6544840Z [32m-     "requestId": "123",[90m
2025-06-04T22:41:45.6544991Z [31m+     "optimized": false,[90m
2025-06-04T22:41:45.6545144Z [31m+     "output_tokens": 0,[90m
2025-06-04T22:41:45.6545303Z [31m+     "request_id": "123",[90m
2025-06-04T22:41:45.6545453Z [2m      "success": true,[22m
2025-06-04T22:41:45.6545600Z [31m+     "total_tokens": 0,[90m
2025-06-04T22:41:45.6545696Z [2m    },[22m
2025-06-04T22:41:45.6545786Z [2m  ][22m
2025-06-04T22:41:45.6545793Z 
2025-06-04T22:41:45.6545900Z [1m  2nd spy call:
2025-06-04T22:41:45.6545912Z 
2025-06-04T22:41:45.6546012Z [22m[2m  [[22m
2025-06-04T22:41:45.6546162Z [32m-   ObjectContaining {[90m
2025-06-04T22:41:45.6546257Z [31m+   {[90m
2025-06-04T22:41:45.6546405Z [31m+     "cached": false,[90m
2025-06-04T22:41:45.6546558Z [31m+     "input_tokens": 0,[90m
2025-06-04T22:41:45.6546683Z [31m+     "latency": 0,[90m
2025-06-04T22:41:45.6546839Z [2m      "model": "test-model",[22m
2025-06-04T22:41:45.6547084Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T22:41:45.6547232Z [32m-     "requestId": "123",[90m
2025-06-04T22:41:45.6547387Z [31m+     "optimized": false,[90m
2025-06-04T22:41:45.6547653Z [31m+     "output_tokens": 0,[90m
2025-06-04T22:41:45.6547825Z [31m+     "request_id": "test1",[90m
2025-06-04T22:41:45.6547966Z [2m      "success": true,[22m
2025-06-04T22:41:45.6548115Z [31m+     "total_tokens": 0,[90m
2025-06-04T22:41:45.6548214Z [2m    },[22m
2025-06-04T22:41:45.6548304Z [2m  ][22m
2025-06-04T22:41:45.6548310Z 
2025-06-04T22:41:45.6548419Z [1m  3rd spy call:
2025-06-04T22:41:45.6548425Z 
2025-06-04T22:41:45.6548526Z [22m[2m  [[22m
2025-06-04T22:41:45.6548679Z [32m-   ObjectContaining {[90m
2025-06-04T22:41:45.6548775Z [31m+   {[90m
2025-06-04T22:41:45.6548918Z [31m+     "cached": false,[90m
2025-06-04T22:41:45.6549069Z [31m+     "input_tokens": 0,[90m
2025-06-04T22:41:45.6549427Z [31m+     "latency": 0,[90m
2025-06-04T22:41:45.6549597Z [2m      "model": "test-model",[22m
2025-06-04T22:41:45.6549844Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T22:41:45.6550004Z [32m-     "requestId": "123",[90m
2025-06-04T22:41:45.6550150Z [32m-     "success": true,[90m
2025-06-04T22:41:45.6550304Z [31m+     "optimized": false,[90m
2025-06-04T22:41:45.6550459Z [31m+     "output_tokens": 0,[90m
2025-06-04T22:41:45.6550620Z [31m+     "request_id": "test2",[90m
2025-06-04T22:41:45.6550770Z [31m+     "success": false,[90m
2025-06-04T22:41:45.6550917Z [31m+     "total_tokens": 0,[90m
2025-06-04T22:41:45.6551011Z [2m    },[22m
2025-06-04T22:41:45.6551099Z [2m  ][22m
2025-06-04T22:41:45.6551105Z 
2025-06-04T22:41:45.6551212Z [1m  4th spy call:
2025-06-04T22:41:45.6551229Z 
2025-06-04T22:41:45.6551328Z [22m[2m  [[22m
2025-06-04T22:41:45.6551475Z [32m-   ObjectContaining {[90m
2025-06-04T22:41:45.6551573Z [31m+   {[90m
2025-06-04T22:41:45.6551714Z [31m+     "cached": false,[90m
2025-06-04T22:41:45.6551868Z [31m+     "input_tokens": 0,[90m
2025-06-04T22:41:45.6551990Z [31m+     "latency": 0,[90m
2025-06-04T22:41:45.6552152Z [2m      "model": "test-model",[22m
2025-06-04T22:41:45.6552413Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T22:41:45.6552710Z [32m-     "requestId": "123",[90m
2025-06-04T22:41:45.6552990Z [31m+     "optimized": false,[90m
2025-06-04T22:41:45.6553251Z [31m+     "output_tokens": 0,[90m
2025-06-04T22:41:45.6553537Z [31m+     "request_id": "test3",[90m
2025-06-04T22:41:45.6553809Z [2m      "success": true,[22m
2025-06-04T22:41:45.6554083Z [31m+     "total_tokens": 0,[90m
2025-06-04T22:41:45.6554236Z [2m    },[22m
2025-06-04T22:41:45.6554384Z [2m  ][22m
2025-06-04T22:41:45.6554395Z 
2025-06-04T22:41:45.6554777Z [1m  5th spy call:
2025-06-04T22:41:45.6554789Z 
2025-06-04T22:41:45.6554960Z [22m[2m  [[22m
2025-06-04T22:41:45.6555229Z [32m-   ObjectContaining {[90m
2025-06-04T22:41:45.6555381Z [31m+   {[90m
2025-06-04T22:41:45.6555614Z [31m+     "cached": false,[90m
2025-06-04T22:41:45.6555767Z [31m+     "input_tokens": 0,[90m
2025-06-04T22:41:45.6555890Z [31m+     "latency": 0,[90m
2025-06-04T22:41:45.6556054Z [2m      "model": "test-model",[22m
2025-06-04T22:41:45.6556307Z [32m-     "operation": "validation-emotion-detection",[90m
2025-06-04T22:41:45.6556469Z [32m-     "requestId": "123",[90m
2025-06-04T22:41:45.6556621Z [31m+     "optimized": false,[90m
2025-06-04T22:41:45.6556775Z [31m+     "output_tokens": 0,[90m
2025-06-04T22:41:45.6556927Z [31m+     "request_id": "123",[90m
2025-06-04T22:41:45.6557070Z [2m      "success": true,[22m
2025-06-04T22:41:45.6557221Z [31m+     "total_tokens": 0,[90m
2025-06-04T22:41:45.6557312Z [2m    },[22m
2025-06-04T22:41:45.6557408Z [2m  ][22m
2025-06-04T22:41:45.6557492Z [31m[90m
2025-06-04T22:41:45.6557500Z 
2025-06-04T22:41:45.6557629Z Number of calls: [1m5[22m
2025-06-04T22:41:45.6557714Z [31m[39m
2025-06-04T22:41:45.6558310Z [36m [2m❯[22m src/lib/ai/validation/__tests__/ContinuousValidationPipeline.test.ts:[2m165:51[22m[39m
2025-06-04T22:41:45.6559283Z     [90m163| [39m      [34mexpect[39m(performanceTracker[33m.[39mtrackPerformance)[33m.[39m[34mtoHaveBeenCalled[39m()
2025-06-04T22:41:45.6559875Z     [90m164| [39m      // Check that it was called with the expected parameters for our…
2025-06-04T22:41:45.6560773Z     [90m165| [39m      [34mexpect[39m(performanceTracker[33m.[39mtrackPerformance)[33m.[39m[34mtoHaveBeenCalledWith[39m(
2025-06-04T22:41:45.6561151Z     [90m   | [39m                                                  [31m^[39m
2025-06-04T22:41:45.6561564Z     [90m166| [39m        expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.6561866Z     [90m167| [39m          requestId[33m:[39m [32m'123'[39m[33m,[39m
2025-06-04T22:41:45.6561886Z 
2025-06-04T22:41:45.6562106Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[308/523]⎯[22m[39m
2025-06-04T22:41:45.6562113Z 
2025-06-04T22:41:45.6562923Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mtrackEvent[2m > [22mshould track an event successfully
2025-06-04T22:41:45.6563215Z [31m[1mTypeError[22m: crypto.randomUUID is not a function[39m
2025-06-04T22:41:45.6563720Z [36m [2m❯[22m AnalyticsService.trackEvent src/lib/services/analytics/AnalyticsService.ts:[2m86:30[22m[39m
2025-06-04T22:41:45.6563826Z     [90m 84| [39m
2025-06-04T22:41:45.6564011Z     [90m 85| [39m      [90m// Generate event ID[39m
2025-06-04T22:41:45.6564331Z     [90m 86| [39m      [35mconst[39m eventId [33m=[39m crypto[33m.[39m[34mrandomUUID[39m()
2025-06-04T22:41:45.6564508Z     [90m   | [39m                             [31m^[39m
2025-06-04T22:41:45.6564606Z     [90m 87| [39m
2025-06-04T22:41:45.6564943Z     [90m 88| [39m      [90m// Create event object[39m
2025-06-04T22:41:45.6565365Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m129:46[22m[39m
2025-06-04T22:41:45.6565372Z 
2025-06-04T22:41:45.6565580Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[309/523]⎯[22m[39m
2025-06-04T22:41:45.6565587Z 
2025-06-04T22:41:45.6566365Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mtrackEvent[2m > [22mshould notify WebSocket subscribers
2025-06-04T22:41:45.6566839Z [31m[1mTypeError[22m: crypto.randomUUID is not a function[39m
2025-06-04T22:41:45.6567734Z [36m [2m❯[22m AnalyticsService.trackEvent src/lib/services/analytics/AnalyticsService.ts:[2m86:30[22m[39m
2025-06-04T22:41:45.6567908Z     [90m 84| [39m
2025-06-04T22:41:45.6568223Z     [90m 85| [39m      [90m// Generate event ID[39m
2025-06-04T22:41:45.6568777Z     [90m 86| [39m      [35mconst[39m eventId [33m=[39m crypto[33m.[39m[34mrandomUUID[39m()
2025-06-04T22:41:45.6569219Z     [90m   | [39m                             [31m^[39m
2025-06-04T22:41:45.6569423Z     [90m 87| [39m
2025-06-04T22:41:45.6569746Z     [90m 88| [39m      [90m// Create event object[39m
2025-06-04T22:41:45.6570393Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m169:30[22m[39m
2025-06-04T22:41:45.6570409Z 
2025-06-04T22:41:45.6570636Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[310/523]⎯[22m[39m
2025-06-04T22:41:45.6570644Z 
2025-06-04T22:41:45.6571416Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mtrackMetric[2m > [22mshould track a metric successfully
2025-06-04T22:41:45.6572201Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6572710Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6572830Z [39m
2025-06-04T22:41:45.6573362Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6573640Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6573743Z   [35mreturn[39m {
2025-06-04T22:41:45.6573887Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6574027Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6574284Z   }
2025-06-04T22:41:45.6574360Z })
2025-06-04T22:41:45.6574368Z 
2025-06-04T22:41:45.6575012Z [36m [2m❯[22m AnalyticsService.trackMetric src/lib/services/analytics/AnalyticsService.ts:[2m119:13[22m[39m
2025-06-04T22:41:45.6575190Z     [90m117| [39m
2025-06-04T22:41:45.6575548Z     [90m118| [39m      [90m// Store metric in time series[39m
2025-06-04T22:41:45.6575941Z     [90m119| [39m      [35mawait[39m redis[33m.[39m[34mzadd[39m(
2025-06-04T22:41:45.6576202Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6576870Z     [90m120| [39m        [32m`analytics:metrics:[39m[36m${[39mmetric[33m.[39mname[36m}[39m[32m`[39m[33m,[39m
2025-06-04T22:41:45.6577231Z     [90m121| [39m        metric[33m.[39mtimestamp[33m,[39m
2025-06-04T22:41:45.6577939Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m179:30[22m[39m
2025-06-04T22:41:45.6577954Z 
2025-06-04T22:41:45.6578326Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[311/523]⎯[22m[39m
2025-06-04T22:41:45.6578338Z 
2025-06-04T22:41:45.6579831Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mtrackMetric[2m > [22mshould store metric tags
2025-06-04T22:41:45.6580884Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6581421Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6581830Z [39m
2025-06-04T22:41:45.6582805Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6583319Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6583517Z   [35mreturn[39m {
2025-06-04T22:41:45.6583776Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6584034Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6584172Z   }
2025-06-04T22:41:45.6584288Z })
2025-06-04T22:41:45.6584302Z 
2025-06-04T22:41:45.6585261Z [36m [2m❯[22m AnalyticsService.trackMetric src/lib/services/analytics/AnalyticsService.ts:[2m119:13[22m[39m
2025-06-04T22:41:45.6585449Z     [90m117| [39m
2025-06-04T22:41:45.6585835Z     [90m118| [39m      [90m// Store metric in time series[39m
2025-06-04T22:41:45.6586239Z     [90m119| [39m      [35mawait[39m redis[33m.[39m[34mzadd[39m(
2025-06-04T22:41:45.6586518Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6587237Z     [90m120| [39m        [32m`analytics:metrics:[39m[36m${[39mmetric[33m.[39mname[36m}[39m[32m`[39m[33m,[39m
2025-06-04T22:41:45.6587614Z     [90m121| [39m        metric[33m.[39mtimestamp[33m,[39m
2025-06-04T22:41:45.6588379Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m189:30[22m[39m
2025-06-04T22:41:45.6588395Z 
2025-06-04T22:41:45.6588787Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[312/523]⎯[22m[39m
2025-06-04T22:41:45.6588801Z 
2025-06-04T22:41:45.6590428Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mprocessEvents[2m > [22mshould process queued events
2025-06-04T22:41:45.6591471Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6591995Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6592165Z [39m
2025-06-04T22:41:45.6593128Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6593627Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6593815Z   [35mreturn[39m {
2025-06-04T22:41:45.6594055Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6594298Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6594629Z   }
2025-06-04T22:41:45.6594752Z })
2025-06-04T22:41:45.6594765Z 
2025-06-04T22:41:45.6595729Z [36m [2m❯[22m AnalyticsService.processEvents src/lib/services/analytics/AnalyticsService.ts:[2m145:28[22m[39m
2025-06-04T22:41:45.6595987Z     [90m143| [39m    [35mtry[39m {
2025-06-04T22:41:45.6596377Z     [90m144| [39m      [90m// Process events in batches[39m
2025-06-04T22:41:45.6597006Z     [90m145| [39m      [35mconst[39m events [33m=[39m [35mawait[39m redis[33m.[39m[34mlrange[39m(
2025-06-04T22:41:45.6597341Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6597753Z     [90m146| [39m        [32m'analytics:events:queue'[39m[33m,[39m
2025-06-04T22:41:45.6598050Z     [90m147| [39m        [34m0[39m[33m,[39m
2025-06-04T22:41:45.6598819Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m231:30[22m[39m
2025-06-04T22:41:45.6598832Z 
2025-06-04T22:41:45.6599424Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[313/523]⎯[22m[39m
2025-06-04T22:41:45.6599441Z 
2025-06-04T22:41:45.6600845Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mprocessEvents[2m > [22mshould handle empty queue
2025-06-04T22:41:45.6601886Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6602401Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6602767Z [39m
2025-06-04T22:41:45.6603741Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6604223Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6604405Z   [35mreturn[39m {
2025-06-04T22:41:45.6604640Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6604900Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6605010Z   }
2025-06-04T22:41:45.6605117Z })
2025-06-04T22:41:45.6605134Z 
2025-06-04T22:41:45.6606077Z [36m [2m❯[22m AnalyticsService.processEvents src/lib/services/analytics/AnalyticsService.ts:[2m145:28[22m[39m
2025-06-04T22:41:45.6606325Z     [90m143| [39m    [35mtry[39m {
2025-06-04T22:41:45.6606698Z     [90m144| [39m      [90m// Process events in batches[39m
2025-06-04T22:41:45.6607295Z     [90m145| [39m      [35mconst[39m events [33m=[39m [35mawait[39m redis[33m.[39m[34mlrange[39m(
2025-06-04T22:41:45.6607611Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6608006Z     [90m146| [39m        [32m'analytics:events:queue'[39m[33m,[39m
2025-06-04T22:41:45.6608287Z     [90m147| [39m        [34m0[39m[33m,[39m
2025-06-04T22:41:45.6609025Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m248:30[22m[39m
2025-06-04T22:41:45.6609039Z 
2025-06-04T22:41:45.6609617Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[314/523]⎯[22m[39m
2025-06-04T22:41:45.6609631Z 
2025-06-04T22:41:45.6611047Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mprocessEvents[2m > [22mshould handle processing errors
2025-06-04T22:41:45.6612053Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6612565Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6612747Z [39m
2025-06-04T22:41:45.6613713Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6614214Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6614394Z   [35mreturn[39m {
2025-06-04T22:41:45.6614626Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6615099Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6615225Z   }
2025-06-04T22:41:45.6615339Z })
2025-06-04T22:41:45.6615351Z 
2025-06-04T22:41:45.6616305Z [36m [2m❯[22m AnalyticsService.processEvents src/lib/services/analytics/AnalyticsService.ts:[2m145:28[22m[39m
2025-06-04T22:41:45.6616567Z     [90m143| [39m    [35mtry[39m {
2025-06-04T22:41:45.6616942Z     [90m144| [39m      [90m// Process events in batches[39m
2025-06-04T22:41:45.6617564Z     [90m145| [39m      [35mconst[39m events [33m=[39m [35mawait[39m redis[33m.[39m[34mlrange[39m(
2025-06-04T22:41:45.6617888Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6618296Z     [90m146| [39m        [32m'analytics:events:queue'[39m[33m,[39m
2025-06-04T22:41:45.6618579Z     [90m147| [39m        [34m0[39m[33m,[39m
2025-06-04T22:41:45.6619509Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m257:30[22m[39m
2025-06-04T22:41:45.6619528Z 
2025-06-04T22:41:45.6619941Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[315/523]⎯[22m[39m
2025-06-04T22:41:45.6619954Z 
2025-06-04T22:41:45.6621410Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mgetEvents[2m > [22mshould get events by type and time range
2025-06-04T22:41:45.6622474Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6623001Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6623409Z [39m
2025-06-04T22:41:45.6624399Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6624927Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6625115Z   [35mreturn[39m {
2025-06-04T22:41:45.6625361Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6625627Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6625743Z   }
2025-06-04T22:41:45.6625862Z })
2025-06-04T22:41:45.6625875Z 
2025-06-04T22:41:45.6626796Z [36m [2m❯[22m AnalyticsService.getEvents src/lib/services/analytics/AnalyticsService.ts:[2m202:32[22m[39m
2025-06-04T22:41:45.6627071Z     [90m200| [39m    [35mtry[39m {
2025-06-04T22:41:45.6627458Z     [90m201| [39m      [90m// Get events from time series[39m
2025-06-04T22:41:45.6628193Z     [90m202| [39m      [35mconst[39m eventJsons [33m=[39m [35mawait[39m redis[33m.[39m[34mzrangebyscore[39m(
2025-06-04T22:41:45.6628544Z     [90m   | [39m                               [31m^[39m
2025-06-04T22:41:45.6629431Z     [90m203| [39m        [32m`analytics:events:time:[39m[36m${[39mtype[36m}[39m[32m`[39m[33m,[39m
2025-06-04T22:41:45.6629738Z     [90m204| [39m        startTime[33m,[39m
2025-06-04T22:41:45.6630513Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m284:45[22m[39m
2025-06-04T22:41:45.6630761Z 
2025-06-04T22:41:45.6631167Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[316/523]⎯[22m[39m
2025-06-04T22:41:45.6631181Z 
2025-06-04T22:41:45.6632647Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mgetEvents[2m > [22mshould handle time range and pagination
2025-06-04T22:41:45.6633667Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6634209Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6634365Z [39m
2025-06-04T22:41:45.6635336Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6635850Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6636040Z   [35mreturn[39m {
2025-06-04T22:41:45.6636313Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6636566Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6636688Z   }
2025-06-04T22:41:45.6636806Z })
2025-06-04T22:41:45.6636819Z 
2025-06-04T22:41:45.6637431Z [36m [2m❯[22m AnalyticsService.getEvents src/lib/services/analytics/AnalyticsService.ts:[2m202:32[22m[39m
2025-06-04T22:41:45.6637584Z     [90m200| [39m    [35mtry[39m {
2025-06-04T22:41:45.6637817Z     [90m201| [39m      [90m// Get events from time series[39m
2025-06-04T22:41:45.6638234Z     [90m202| [39m      [35mconst[39m eventJsons [33m=[39m [35mawait[39m redis[33m.[39m[34mzrangebyscore[39m(
2025-06-04T22:41:45.6638418Z     [90m   | [39m                               [31m^[39m
2025-06-04T22:41:45.6638770Z     [90m203| [39m        [32m`analytics:events:time:[39m[36m${[39mtype[36m}[39m[32m`[39m[33m,[39m
2025-06-04T22:41:45.6638930Z     [90m204| [39m        startTime[33m,[39m
2025-06-04T22:41:45.6639793Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m293:30[22m[39m
2025-06-04T22:41:45.6639811Z 
2025-06-04T22:41:45.6640189Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[317/523]⎯[22m[39m
2025-06-04T22:41:45.6640200Z 
2025-06-04T22:41:45.6641121Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mgetMetrics[2m > [22mshould get metrics by name and time range
2025-06-04T22:41:45.6641805Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6642538Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6642641Z [39m
2025-06-04T22:41:45.6643182Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6643503Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6643700Z   [35mreturn[39m {
2025-06-04T22:41:45.6643934Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6644172Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6644289Z   }
2025-06-04T22:41:45.6644404Z })
2025-06-04T22:41:45.6644412Z 
2025-06-04T22:41:45.6644940Z [36m [2m❯[22m AnalyticsService.getMetrics src/lib/services/analytics/AnalyticsService.ts:[2m236:33[22m[39m
2025-06-04T22:41:45.6645085Z     [90m234| [39m    [35mtry[39m {
2025-06-04T22:41:45.6645357Z     [90m235| [39m      [90m// Get metrics from time series[39m
2025-06-04T22:41:45.6646070Z     [90m236| [39m      [35mconst[39m metricJsons [33m=[39m [35mawait[39m redis[33m.[39m[34mzrangebyscore[39m(
2025-06-04T22:41:45.6646347Z     [90m   | [39m                                [31m^[39m
2025-06-04T22:41:45.6646682Z     [90m237| [39m        [32m`analytics:metrics:[39m[36m${[39mname[36m}[39m[32m`[39m[33m,[39m
2025-06-04T22:41:45.6646847Z     [90m238| [39m        startTime[33m,[39m
2025-06-04T22:41:45.6647434Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m327:45[22m[39m
2025-06-04T22:41:45.6647453Z 
2025-06-04T22:41:45.6647854Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[318/523]⎯[22m[39m
2025-06-04T22:41:45.6647865Z 
2025-06-04T22:41:45.6648912Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mgetMetrics[2m > [22mshould filter metrics by tags
2025-06-04T22:41:45.6649629Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6650083Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6650231Z [39m
2025-06-04T22:41:45.6650978Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6651270Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6651381Z   [35mreturn[39m {
2025-06-04T22:41:45.6651528Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6651678Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6651745Z   }
2025-06-04T22:41:45.6651817Z })
2025-06-04T22:41:45.6651825Z 
2025-06-04T22:41:45.6652329Z [36m [2m❯[22m AnalyticsService.getMetrics src/lib/services/analytics/AnalyticsService.ts:[2m236:33[22m[39m
2025-06-04T22:41:45.6652470Z     [90m234| [39m    [35mtry[39m {
2025-06-04T22:41:45.6652713Z     [90m235| [39m      [90m// Get metrics from time series[39m
2025-06-04T22:41:45.6653105Z     [90m236| [39m      [35mconst[39m metricJsons [33m=[39m [35mawait[39m redis[33m.[39m[34mzrangebyscore[39m(
2025-06-04T22:41:45.6653309Z     [90m   | [39m                                [31m^[39m
2025-06-04T22:41:45.6653638Z     [90m237| [39m        [32m`analytics:metrics:[39m[36m${[39mname[36m}[39m[32m`[39m[33m,[39m
2025-06-04T22:41:45.6653809Z     [90m238| [39m        startTime[33m,[39m
2025-06-04T22:41:45.6654232Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m351:45[22m[39m
2025-06-04T22:41:45.6654239Z 
2025-06-04T22:41:45.6654455Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[319/523]⎯[22m[39m
2025-06-04T22:41:45.6654462Z 
2025-06-04T22:41:45.6655229Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mcleanup[2m > [22mshould clean up old events and metrics
2025-06-04T22:41:45.6656402Z [31m[1mError[22m: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
2025-06-04T22:41:45.6656706Z If you need to partially mock a module, you can use "importOriginal" helper inside:
2025-06-04T22:41:45.6656800Z [39m
2025-06-04T22:41:45.6657564Z vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@/lib/services/redis"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
2025-06-04T22:41:45.6658029Z   [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
2025-06-04T22:41:45.6658139Z   [35mreturn[39m {
2025-06-04T22:41:45.6658276Z     [33m...[39mactual[33m,[39m
2025-06-04T22:41:45.6658421Z     [90m// your mocked methods[39m
2025-06-04T22:41:45.6658488Z   }
2025-06-04T22:41:45.6658560Z })
2025-06-04T22:41:45.6658567Z 
2025-06-04T22:41:45.6659054Z [36m [2m❯[22m AnalyticsService.cleanup src/lib/services/analytics/AnalyticsService.ts:[2m287:15[22m[39m
2025-06-04T22:41:45.6659377Z     [90m285| [39m      [90m// Clean up events[39m
2025-06-04T22:41:45.6659824Z     [90m286| [39m      [35mfor[39m ([35mconst[39m type [35mof[39m [33mObject[39m[33m.[39m[34mvalues[39m([33mEventType[39m)) {
2025-06-04T22:41:45.6660145Z     [90m287| [39m        await redis.zremrangebyscore(`analytics:events:time:${type}`, …
2025-06-04T22:41:45.6660295Z     [90m   | [39m              [31m^[39m
2025-06-04T22:41:45.6660408Z     [90m288| [39m      }
2025-06-04T22:41:45.6660645Z     [90m289| [39m
2025-06-04T22:41:45.6661086Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m368:30[22m[39m
2025-06-04T22:41:45.6661100Z 
2025-06-04T22:41:45.6661309Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[320/523]⎯[22m[39m
2025-06-04T22:41:45.6661316Z 
2025-06-04T22:41:45.6662053Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mcleanup[2m > [22mshould handle cleanup errors
2025-06-04T22:41:45.6662712Z [31m[1mAssertionError[22m: expected [Function] to throw error including 'Cleanup error' but got '[vitest] No "redis" export is defined…'[39m
2025-06-04T22:41:45.6662720Z 
2025-06-04T22:41:45.6662836Z [32m- Expected[39m
2025-06-04T22:41:45.6662950Z [31m+ Received[39m
2025-06-04T22:41:45.6662957Z 
2025-06-04T22:41:45.6663075Z [32m- Cleanup error[39m
2025-06-04T22:41:45.6663610Z [31m+ [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?[39m
2025-06-04T22:41:45.6664000Z [31m+ If you need to partially mock a module, you can use "importOriginal" helper inside:[39m
2025-06-04T22:41:45.6664095Z [31m+[39m
2025-06-04T22:41:45.6664102Z 
2025-06-04T22:41:45.6664304Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[321/523]⎯[22m[39m
2025-06-04T22:41:45.6664311Z 
2025-06-04T22:41:45.6665182Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mwebSocket integration[2m > [22mshould register and unregister WebSocket clients
2025-06-04T22:41:45.6665399Z [31m[1mError[22m: expected true to be false[39m
2025-06-04T22:41:45.6665817Z [36m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m408:50[22m[39m
2025-06-04T22:41:45.6665918Z     [90m406| [39m
2025-06-04T22:41:45.6666154Z     [90m407| [39m      ws[33m.[39m[34memit[39m([32m'close'[39m)
2025-06-04T22:41:45.6666631Z     [90m408| [39m      [34mexpect[39m(analyticsService[33m.[39m[34mhasClient[39m(userId))[33m.[39m[34mtoBe[39m([35mfalse[39m)
2025-06-04T22:41:45.6666842Z     [90m   | [39m                                                 [31m^[39m
2025-06-04T22:41:45.6666953Z     [90m409| [39m    })
2025-06-04T22:41:45.6667047Z     [90m410| [39m
2025-06-04T22:41:45.6667054Z 
2025-06-04T22:41:45.6667262Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[322/523]⎯[22m[39m
2025-06-04T22:41:45.6667269Z 
2025-06-04T22:41:45.6668099Z [41m[1m FAIL [22m[49m src/lib/services/analytics/__tests__/AnalyticsService.test.ts[2m > [22manalyticsService[2m > [22mwebSocket integration[2m > [22mshould notify only relevant subscribers
2025-06-04T22:41:45.6668520Z [31m[1mTypeError[22m: crypto.randomUUID is not a function[39m
2025-06-04T22:41:45.6669017Z [36m [2m❯[22m AnalyticsService.trackEvent src/lib/services/analytics/AnalyticsService.ts:[2m86:30[22m[39m
2025-06-04T22:41:45.6669242Z     [90m 84| [39m
2025-06-04T22:41:45.6669439Z     [90m 85| [39m      [90m// Generate event ID[39m
2025-06-04T22:41:45.6669759Z     [90m 86| [39m      [35mconst[39m eventId [33m=[39m crypto[33m.[39m[34mrandomUUID[39m()
2025-06-04T22:41:45.6669937Z     [90m   | [39m                             [31m^[39m
2025-06-04T22:41:45.6670038Z     [90m 87| [39m
2025-06-04T22:41:45.6670220Z     [90m 88| [39m      [90m// Create event object[39m
2025-06-04T22:41:45.6670630Z [90m [2m❯[22m src/lib/services/analytics/__tests__/AnalyticsService.test.ts:[2m420:30[22m[39m
2025-06-04T22:41:45.6670649Z 
2025-06-04T22:41:45.6670852Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[323/523]⎯[22m[39m
2025-06-04T22:41:45.6670858Z 
2025-06-04T22:41:45.6671637Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mevent Tracking[2m > [22mshould track individual events
2025-06-04T22:41:45.6672573Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mevent Tracking[2m > [22mshould handle concurrent event tracking
2025-06-04T22:41:45.6673528Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mevent Tracking[2m > [22mshould maintain event order
2025-06-04T22:41:45.6674603Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mmetrics Tracking[2m > [22mshould track metrics over time
2025-06-04T22:41:45.6675832Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mmetrics Tracking[2m > [22mshould maintain metric history
2025-06-04T22:41:45.6676760Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mmetrics Tracking[2m > [22mshould handle metric expiration
2025-06-04T22:41:45.6677850Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mreal-time Analytics[2m > [22mshould track active users
2025-06-04T22:41:45.6679245Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mreal-time Analytics[2m > [22mshould handle user session timeouts
2025-06-04T22:41:45.6680281Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mreal-time Analytics[2m > [22mshould track concurrent sessions
2025-06-04T22:41:45.6681395Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22merror Handling[2m > [22mshould handle Redis connection failures
2025-06-04T22:41:45.6682633Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22merror Handling[2m > [22mshould handle invalid metric values
2025-06-04T22:41:45.6683627Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22merror Handling[2m > [22mshould handle Redis memory limits
2025-06-04T22:41:45.6684647Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mperformance[2m > [22mshould handle high event throughput
2025-06-04T22:41:45.6685477Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mperformance[2m > [22mshould maintain performance with large datasets
2025-06-04T22:41:45.6685917Z [31m[1mRedisServiceError[22m: Failed to connect to Redis[39m
2025-06-04T22:41:45.6686343Z [36m [2m❯[22m RedisService.connect src/lib/services/redis/RedisService.ts:[2m125:13[22m[39m
2025-06-04T22:41:45.6686454Z     [90m123| [39m      }
2025-06-04T22:41:45.6686567Z     [90m124| [39m
2025-06-04T22:41:45.6686838Z     [90m125| [39m      [35mthrow[39m [35mnew[39m [33mRedisServiceError[39m(
2025-06-04T22:41:45.6686989Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6687313Z     [90m126| [39m        [33mRedisErrorCode[39m[33m.[39m[33mCONNECTION_FAILED[39m[33m,[39m
2025-06-04T22:41:45.6687553Z     [90m127| [39m        [32m'Failed to connect to Redis'[39m[33m,[39m
2025-06-04T22:41:45.6687964Z [90m [2m❯[22m src/lib/services/redis/__tests__/Analytics.integration.test.ts:[2m42:5[22m[39m
2025-06-04T22:41:45.6687980Z 
2025-06-04T22:41:45.6688278Z [31m[1mCaused by: Error[22m: Redis is already connecting/connected[39m
2025-06-04T22:41:45.6688707Z [90m [2m❯[22m node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:[2m107:24[22m[39m
2025-06-04T22:41:45.6689366Z [90m [2m❯[22m EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:[2m103:25[22m[39m
2025-06-04T22:41:45.6689901Z [36m [2m❯[22m RedisService.connect src/lib/services/redis/RedisService.ts:[2m107:25[22m[39m
2025-06-04T22:41:45.6690319Z [90m [2m❯[22m src/lib/services/redis/__tests__/Analytics.integration.test.ts:[2m42:17[22m[39m
2025-06-04T22:41:45.6690331Z 
2025-06-04T22:41:45.6690539Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[324/523]⎯[22m[39m
2025-06-04T22:41:45.6690546Z 
2025-06-04T22:41:45.6691324Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mevent Tracking[2m > [22mshould track individual events
2025-06-04T22:41:45.6692143Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mevent Tracking[2m > [22mshould handle concurrent event tracking
2025-06-04T22:41:45.6692894Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mevent Tracking[2m > [22mshould maintain event order
2025-06-04T22:41:45.6693678Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mmetrics Tracking[2m > [22mshould track metrics over time
2025-06-04T22:41:45.6694447Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mmetrics Tracking[2m > [22mshould maintain metric history
2025-06-04T22:41:45.6695350Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mmetrics Tracking[2m > [22mshould handle metric expiration
2025-06-04T22:41:45.6696488Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mreal-time Analytics[2m > [22mshould track active users
2025-06-04T22:41:45.6697676Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mreal-time Analytics[2m > [22mshould handle user session timeouts
2025-06-04T22:41:45.6698574Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mreal-time Analytics[2m > [22mshould track concurrent sessions
2025-06-04T22:41:45.6699917Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22merror Handling[2m > [22mshould handle Redis connection failures
2025-06-04T22:41:45.6701329Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22merror Handling[2m > [22mshould handle invalid metric values
2025-06-04T22:41:45.6702120Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22merror Handling[2m > [22mshould handle Redis memory limits
2025-06-04T22:41:45.6703272Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mperformance[2m > [22mshould handle high event throughput
2025-06-04T22:41:45.6704237Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/Analytics.integration.test.ts[2m > [22manalytics Integration[2m > [22mperformance[2m > [22mshould maintain performance with large datasets
2025-06-04T22:41:45.6704865Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'cleanup')[39m
2025-06-04T22:41:45.6705357Z [36m [2m❯[22m src/lib/services/redis/__tests__/Analytics.integration.test.ts:[2m53:21[22m[39m
2025-06-04T22:41:45.6705596Z     [90m 51| [39m  [34mafterEach[39m([35masync[39m () [33m=>[39m {
2025-06-04T22:41:45.6705909Z     [90m 52| [39m    [35mawait[39m [34mcleanupTestKeys[39m()
2025-06-04T22:41:45.6706328Z     [90m 53| [39m    [35mawait[39m analytics[33m.[39m[34mcleanup[39m()
2025-06-04T22:41:45.6706804Z     [90m   | [39m                    [31m^[39m
2025-06-04T22:41:45.6707066Z     [90m 54| [39m    [35mawait[39m redis[33m.[39m[34mdisconnect[39m()
2025-06-04T22:41:45.6707176Z     [90m 55| [39m  })
2025-06-04T22:41:45.6707183Z 
2025-06-04T22:41:45.6707460Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[325/523]⎯[22m[39m
2025-06-04T22:41:45.6707473Z 
2025-06-04T22:41:45.6708879Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22mcache Pattern Invalidation[2m > [22mshould invalidate all keys matching a pattern
2025-06-04T22:41:45.6710518Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22mcache Pattern Invalidation[2m > [22mshould handle concurrent pattern invalidations
2025-06-04T22:41:45.6711719Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22mcache Tag Invalidation[2m > [22mshould invalidate keys by tag
2025-06-04T22:41:45.6712920Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22mcache Tag Invalidation[2m > [22mshould handle multiple tags per key
2025-06-04T22:41:45.6714123Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22mcache Events[2m > [22mshould emit invalidation events
2025-06-04T22:41:45.6715510Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22mcache Events[2m > [22mshould handle invalidation event subscribers
2025-06-04T22:41:45.6717432Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22merror Handling[2m > [22mshould handle Redis connection failures during invalidation
2025-06-04T22:41:45.6719381Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22merror Handling[2m > [22mshould handle Redis connection recovery
2025-06-04T22:41:45.6721122Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22mperformance[2m > [22mshould handle large-scale invalidations
2025-06-04T22:41:45.6723136Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts[2m > [22mcacheInvalidation Integration[2m > [22mperformance[2m > [22mshould maintain performance under concurrent load
2025-06-04T22:41:45.6723664Z [31m[1mRedisServiceError[22m: Failed to connect to Redis[39m
2025-06-04T22:41:45.6724447Z [36m [2m❯[22m RedisService.connect src/lib/services/redis/RedisService.ts:[2m125:13[22m[39m
2025-06-04T22:41:45.6724679Z     [90m123| [39m      }
2025-06-04T22:41:45.6724859Z     [90m124| [39m
2025-06-04T22:41:45.6725363Z     [90m125| [39m      [35mthrow[39m [35mnew[39m [33mRedisServiceError[39m(
2025-06-04T22:41:45.6725624Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6726238Z     [90m126| [39m        [33mRedisErrorCode[39m[33m.[39m[33mCONNECTION_FAILED[39m[33m,[39m
2025-06-04T22:41:45.6726673Z     [90m127| [39m        [32m'Failed to connect to Redis'[39m[33m,[39m
2025-06-04T22:41:45.6727557Z [90m [2m❯[22m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:[2m34:5[22m[39m
2025-06-04T22:41:45.6727575Z 
2025-06-04T22:41:45.6728123Z [31m[1mCaused by: Error[22m: Redis is already connecting/connected[39m
2025-06-04T22:41:45.6728917Z [90m [2m❯[22m node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:[2m107:24[22m[39m
2025-06-04T22:41:45.6730358Z [90m [2m❯[22m EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:[2m103:25[22m[39m
2025-06-04T22:41:45.6731153Z [36m [2m❯[22m RedisService.connect src/lib/services/redis/RedisService.ts:[2m107:25[22m[39m
2025-06-04T22:41:45.6731997Z [90m [2m❯[22m src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:[2m34:17[22m[39m
2025-06-04T22:41:45.6732012Z 
2025-06-04T22:41:45.6732356Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[326/523]⎯[22m[39m
2025-06-04T22:41:45.6732366Z 
2025-06-04T22:41:45.6733338Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts[2m > [22mpatternRecognition Integration[2m > [22mpattern Detection[2m > [22mshould detect simple patterns
2025-06-04T22:41:45.6734345Z [31m[1mError[22m: Failed to analyze trends: Data retrieval failed: this.sessionRepository.getSessions is not a function[39m
2025-06-04T22:41:45.6735325Z [36m [2m❯[22m PatternRecognitionService.analyzeLongTermTrends src/lib/ai/services/PatternRecognitionService.ts:[2m92:13[22m[39m
2025-06-04T22:41:45.6735690Z     [90m 90| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6736266Z     [90m 91| [39m      logger.error('Error analyzing long-term trends', { clientId, err…
2025-06-04T22:41:45.6736680Z     [90m 92| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.6736962Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6737496Z     [90m 93| [39m        `Failed to analyze trends: ${error instanceof Error ? error.me…
2025-06-04T22:41:45.6737705Z     [90m 94| [39m      )
2025-06-04T22:41:45.6738609Z [90m [2m❯[22m src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts:[2m121:24[22m[39m
2025-06-04T22:41:45.6738626Z 
2025-06-04T22:41:45.6739031Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[327/523]⎯[22m[39m
2025-06-04T22:41:45.6739045Z 
2025-06-04T22:41:45.6741011Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts[2m > [22mpatternRecognition Integration[2m > [22mpattern Detection[2m > [22mshould detect complex patterns
2025-06-04T22:41:45.6741508Z [31m[1mReferenceError[22m: testId is not defined[39m
2025-06-04T22:41:45.6742420Z [36m [2m❯[22m src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts:[2m139:21[22m[39m
2025-06-04T22:41:45.6742635Z     [90m137| [39m        {
2025-06-04T22:41:45.6743071Z     [90m138| [39m          sessionId[33m:[39m [32m'1'[39m[33m,[39m
2025-06-04T22:41:45.6743464Z     [90m139| [39m          clientId[33m:[39m testId[33m,[39m
2025-06-04T22:41:45.6744032Z     [90m   | [39m                    [31m^[39m
2025-06-04T22:41:45.6744520Z     [90m140| [39m          therapistId[33m:[39m [32m'therapist1'[39m[33m,[39m
2025-06-04T22:41:45.6745049Z     [90m141| [39m          startTime[33m:[39m [35mnew[39m [33mDate[39m()[33m,[39m
2025-06-04T22:41:45.6745064Z 
2025-06-04T22:41:45.6745463Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[328/523]⎯[22m[39m
2025-06-04T22:41:45.6745477Z 
2025-06-04T22:41:45.6747274Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts[2m > [22mpatternRecognition Integration[2m > [22mpattern Analysis[2m > [22mshould analyze risk factor correlations
2025-06-04T22:41:45.6748281Z [31m[1mAssertionError[22m: expected [ { primaryFactor: 'anxiety', …(4) } ] to deep equally contain ObjectContaining{…}[39m
2025-06-04T22:41:45.6748298Z 
2025-06-04T22:41:45.6748525Z [32m- Expected:[39m 
2025-06-04T22:41:45.6748683Z ObjectContaining {
2025-06-04T22:41:45.6748833Z   "correlatedFactors": {
2025-06-04T22:41:45.6749276Z     "asymmetricMatch": [Function asymmetricMatch],
2025-06-04T22:41:45.6749479Z     "toString": [Function toString],
2025-06-04T22:41:45.6749590Z   },
2025-06-04T22:41:45.6749744Z   "primaryFactor": "anxiety",
2025-06-04T22:41:45.6749864Z }
2025-06-04T22:41:45.6749875Z 
2025-06-04T22:41:45.6750086Z [31m+ Received:[39m 
2025-06-04T22:41:45.6750203Z [
2025-06-04T22:41:45.6750315Z   {
2025-06-04T22:41:45.6750466Z     "actionRequired": true,
2025-06-04T22:41:45.6750816Z     "correlatedFactors": [
2025-06-04T22:41:45.6750938Z       {
2025-06-04T22:41:45.6751085Z         "confidence": 0.9,
2025-06-04T22:41:45.6751219Z         "correlation": 0.8,
2025-06-04T22:41:45.6751356Z         "factor": "sleep",
2025-06-04T22:41:45.6751470Z       },
2025-06-04T22:41:45.6751581Z     ],
2025-06-04T22:41:45.6751773Z     "primaryFactor": "anxiety",
2025-06-04T22:41:45.6751903Z     "severity": "high",
2025-06-04T22:41:45.6752040Z     "timeFrame": {
2025-06-04T22:41:45.6752228Z       "end": 2025-06-04T21:55:03.906Z,
2025-06-04T22:41:45.6752435Z       "start": 2025-06-04T21:55:03.906Z,
2025-06-04T22:41:45.6752549Z     },
2025-06-04T22:41:45.6752662Z   },
2025-06-04T22:41:45.6752780Z ]
2025-06-04T22:41:45.6752792Z 
2025-06-04T22:41:45.6753696Z [36m [2m❯[22m src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts:[2m194:28[22m[39m
2025-06-04T22:41:45.6753998Z     [90m192| [39m        analyses[33m,[39m
2025-06-04T22:41:45.6754181Z     [90m193| [39m      )
2025-06-04T22:41:45.6754740Z     [90m194| [39m      [34mexpect[39m(correlations)[33m.[39m[34mtoContainEqual[39m(
2025-06-04T22:41:45.6755052Z     [90m   | [39m                           [31m^[39m
2025-06-04T22:41:45.6755475Z     [90m195| [39m        expect[33m.[39m[34mobjectContaining[39m({
2025-06-04T22:41:45.6755946Z     [90m196| [39m          primaryFactor[33m:[39m [32m'anxiety'[39m[33m,[39m
2025-06-04T22:41:45.6755959Z 
2025-06-04T22:41:45.6756336Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[329/523]⎯[22m[39m
2025-06-04T22:41:45.6756362Z 
2025-06-04T22:41:45.6757591Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22mRedisService[2m > [22mkey-Value Operations[2m > [22mshould handle TTL
2025-06-04T22:41:45.6758240Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toBeNull')[39m
2025-06-04T22:41:45.6758919Z [36m [2m❯[22m src/lib/services/redis/__tests__/RedisService.test.ts:[2m275:22[22m[39m
2025-06-04T22:41:45.6759552Z     [90m273| [39m      [90m// Skip sleep and simulate TTL expiry[39m
2025-06-04T22:41:45.6760162Z     [90m274| [39m      [35mconst[39m result [33m=[39m [35mawait[39m redis[33m.[39m[35mget[39m(key)
2025-06-04T22:41:45.6760693Z     [90m275| [39m      [34mexpect[39m(result)[33m.[39mnot[33m.[39m[34mtoBeNull[39m()
2025-06-04T22:41:45.6760974Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6761143Z     [90m276| [39m
2025-06-04T22:41:45.6761475Z     [90m277| [39m      [90m// Simulate expired TTL[39m
2025-06-04T22:41:45.6761701Z 
2025-06-04T22:41:45.6762073Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[330/523]⎯[22m[39m
2025-06-04T22:41:45.6762084Z 
2025-06-04T22:41:45.6763373Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22mRedisService[2m > [22mkey-Value Operations[2m > [22mshould delete keys
2025-06-04T22:41:45.6763869Z [31m[1mTypeError[22m: expect(...).toBe is not a function[39m
2025-06-04T22:41:45.6764591Z [36m [2m❯[22m src/lib/services/redis/__tests__/RedisService.test.ts:[2m296:22[22m[39m
2025-06-04T22:41:45.6765021Z     [90m294| [39m      [90m// Using direct call instead of matcher[39m
2025-06-04T22:41:45.6765661Z     [90m295| [39m      [35mconst[39m exists [33m=[39m [35mawait[39m redis[33m.[39m[34mexists[39m(key)
2025-06-04T22:41:45.6766198Z     [90m296| [39m      [34mexpect[39m(exists)[33m.[39m[34mtoBe[39m([35mfalse[39m)
2025-06-04T22:41:45.6766502Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6767090Z     [90m297| [39m      console[33m.[39m[34mlog[39m([32m'✅ PASS: should delete keys'[39m)
2025-06-04T22:41:45.6767292Z     [90m298| [39m    })
2025-06-04T22:41:45.6767304Z 
2025-06-04T22:41:45.6767666Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[331/523]⎯[22m[39m
2025-06-04T22:41:45.6767677Z 
2025-06-04T22:41:45.6768979Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22mRedisService[2m > [22mkey-Value Operations[2m > [22mshould check key existence
2025-06-04T22:41:45.6769835Z [31m[1mTypeError[22m: expect(...).toBe is not a function[39m
2025-06-04T22:41:45.6770551Z [36m [2m❯[22m src/lib/services/redis/__tests__/RedisService.test.ts:[2m309:22[22m[39m
2025-06-04T22:41:45.6771144Z     [90m307| [39m      [35mawait[39m redis[33m.[39m[35mset[39m(key[33m,[39m [32m'test'[39m)
2025-06-04T22:41:45.6771779Z     [90m308| [39m      [35mconst[39m exists [33m=[39m [35mawait[39m redis[33m.[39m[34mexists[39m(key)
2025-06-04T22:41:45.6772324Z     [90m309| [39m      [34mexpect[39m(exists)[33m.[39m[34mtoBe[39m([35mtrue[39m)
2025-06-04T22:41:45.6772607Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6773202Z     [90m310| [39m      console[33m.[39m[34mlog[39m([32m'✅ PASS: should check key existence'[39m)
2025-06-04T22:41:45.6773392Z     [90m311| [39m    })
2025-06-04T22:41:45.6773405Z 
2025-06-04T22:41:45.6773781Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[332/523]⎯[22m[39m
2025-06-04T22:41:45.6773793Z 
2025-06-04T22:41:45.6775070Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22mRedisService[2m > [22mkey-Value Operations[2m > [22mshould increment values
2025-06-04T22:41:45.6775563Z [31m[1mTypeError[22m: expect(...).toBe is not a function[39m
2025-06-04T22:41:45.6776240Z [36m [2m❯[22m src/lib/services/redis/__tests__/RedisService.test.ts:[2m322:22[22m[39m
2025-06-04T22:41:45.6776812Z     [90m320| [39m      [35mawait[39m redis[33m.[39m[35mset[39m(key[33m,[39m [32m'0'[39m)
2025-06-04T22:41:45.6777638Z     [90m321| [39m      [35mconst[39m result [33m=[39m [35mawait[39m redis[33m.[39m[34mincr[39m(key)
2025-06-04T22:41:45.6778139Z     [90m322| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBe[39m([34m1[39m)
2025-06-04T22:41:45.6778427Z     [90m   | [39m                     [31m^[39m
2025-06-04T22:41:45.6779029Z     [90m323| [39m      console[33m.[39m[34mlog[39m([32m'✅ PASS: should increment values'[39m)
2025-06-04T22:41:45.6779410Z     [90m324| [39m    })
2025-06-04T22:41:45.6779425Z 
2025-06-04T22:41:45.6779814Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[333/523]⎯[22m[39m
2025-06-04T22:41:45.6779826Z 
2025-06-04T22:41:45.6781127Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22mRedisService[2m > [22mset Operations[2m > [22mshould add and remove set members
2025-06-04T22:41:45.6781651Z [31m[1mTypeError[22m: expect(...).toEqual is not a function[39m
2025-06-04T22:41:45.6782363Z [36m [2m❯[22m src/lib/services/redis/__tests__/RedisService.test.ts:[2m344:31[22m[39m
2025-06-04T22:41:45.6782749Z     [90m342| [39m      [90m// Check members after adding[39m
2025-06-04T22:41:45.6783478Z     [90m343| [39m      [35mconst[39m membersAfterAdd [33m=[39m [35mawait[39m redis[33m.[39m[34msmembers[39m(key)
2025-06-04T22:41:45.6784050Z     [90m344| [39m      [34mexpect[39m(membersAfterAdd)[33m.[39m[34mtoEqual[39m([member])
2025-06-04T22:41:45.6784401Z     [90m   | [39m                              [31m^[39m
2025-06-04T22:41:45.6784577Z     [90m345| [39m
2025-06-04T22:41:45.6785106Z     [90m346| [39m      [35mawait[39m redis[33m.[39m[34msrem[39m(key[33m,[39m member)
2025-06-04T22:41:45.6785119Z 
2025-06-04T22:41:45.6785483Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[334/523]⎯[22m[39m
2025-06-04T22:41:45.6785494Z 
2025-06-04T22:41:45.6786703Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22mRedisService[2m > [22mset Operations[2m > [22mshould get set members
2025-06-04T22:41:45.6787272Z [31m[1mTypeError[22m: expect.arrayContaining is not a function[39m
2025-06-04T22:41:45.6787976Z [36m [2m❯[22m src/lib/services/redis/__tests__/RedisService.test.ts:[2m366:37[22m[39m
2025-06-04T22:41:45.6788194Z     [90m364| [39m      }
2025-06-04T22:41:45.6788879Z     [90m365| [39m      [35mconst[39m result [33m=[39m [35mawait[39m redis[33m.[39m[34msmembers[39m(key)
2025-06-04T22:41:45.6790023Z     [90m366| [39m      [34mexpect[39m(result)[33m.[39m[34mtoEqual[39m(expect[33m.[39m[34marrayContaining[39m(members))
2025-06-04T22:41:45.6790417Z     [90m   | [39m                                    [31m^[39m
2025-06-04T22:41:45.6790987Z     [90m367| [39m      console[33m.[39m[34mlog[39m([32m'✅ PASS: should get set members'[39m)
2025-06-04T22:41:45.6791185Z     [90m368| [39m    })
2025-06-04T22:41:45.6791198Z 
2025-06-04T22:41:45.6791564Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[335/523]⎯[22m[39m
2025-06-04T22:41:45.6791590Z 
2025-06-04T22:41:45.6792835Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22mRedisService[2m > [22merror Handling[2m > [22mshould handle invalid JSON
2025-06-04T22:41:45.6793378Z [31m[1mTypeError[22m: expect(...).toBeInstanceOf is not a function[39m
2025-06-04T22:41:45.6794032Z [36m [2m❯[22m src/lib/services/redis/__tests__/RedisService.test.ts:[2m387:19[22m[39m
2025-06-04T22:41:45.6794822Z     [90m385| [39m        [34mexpect[39m([32m'Should have thrown an error'[39m)[33m.[39m[34mtoBe[39m([32m"But didn't throw"[39m)
2025-06-04T22:41:45.6795097Z     [90m386| [39m      } [35mcatch[39m (e) {
2025-06-04T22:41:45.6795713Z     [90m387| [39m        [34mexpect[39m(e)[33m.[39m[34mtoBeInstanceOf[39m([33mRedisServiceError[39m)
2025-06-04T22:41:45.6795977Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.6796724Z     [90m388| [39m        [34mexpect[39m((e [35mas[39m [33mRedisServiceError[39m)[33m.[39mcode)[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.6797493Z     [90m389| [39m          [33mRedisErrorCode[39m[33m.[39m[33mOPERATION_FAILED[39m[33m,[39m
2025-06-04T22:41:45.6797505Z 
2025-06-04T22:41:45.6797868Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[336/523]⎯[22m[39m
2025-06-04T22:41:45.6797878Z 
2025-06-04T22:41:45.6799295Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22mRedisService[2m > [22merror Handling[2m > [22mshould handle operation timeouts
2025-06-04T22:41:45.6799869Z [31m[1mTypeError[22m: expect(...).toBeInstanceOf is not a function[39m
2025-06-04T22:41:45.6800537Z [36m [2m❯[22m src/lib/services/redis/__tests__/RedisService.test.ts:[2m415:19[22m[39m
2025-06-04T22:41:45.6801326Z     [90m413| [39m        [34mexpect[39m([32m'Should have thrown an error'[39m)[33m.[39m[34mtoBe[39m([32m"But didn't throw"[39m)
2025-06-04T22:41:45.6801601Z     [90m414| [39m      } [35mcatch[39m (e) {
2025-06-04T22:41:45.6802220Z     [90m415| [39m        [34mexpect[39m(e)[33m.[39m[34mtoBeInstanceOf[39m([33mRedisServiceError[39m)
2025-06-04T22:41:45.6802498Z     [90m   | [39m                  [31m^[39m
2025-06-04T22:41:45.6803236Z     [90m416| [39m        [34mexpect[39m((e [35mas[39m [33mRedisServiceError[39m)[33m.[39mcode)[33m.[39m[34mtoBe[39m(
2025-06-04T22:41:45.6803817Z     [90m417| [39m          [33mRedisErrorCode[39m[33m.[39m[33mCONNECTION_FAILED[39m[33m,[39m
2025-06-04T22:41:45.6803829Z 
2025-06-04T22:41:45.6804204Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[337/523]⎯[22m[39m
2025-06-04T22:41:45.6804215Z 
2025-06-04T22:41:45.6805481Z [41m[1m FAIL [22m[49m src/lib/services/redis/__tests__/RedisService.test.ts[2m > [22mRedisService[2m > [22mperformance[2m > [22mshould handle concurrent operations
2025-06-04T22:41:45.6805958Z [31m[1mTypeError[22m: expect(...).toBe is not a function[39m
2025-06-04T22:41:45.6806616Z [36m [2m❯[22m src/lib/services/redis/__tests__/RedisService.test.ts:[2m439:43[22m[39m
2025-06-04T22:41:45.6807361Z     [90m437| [39m      [35mconst[39m results [33m=[39m [35mawait[39m [33mPromise[39m[33m.[39m[34mall[39m(promises)
2025-06-04T22:41:45.6807529Z     [90m438| [39m
2025-06-04T22:41:45.6808321Z     [90m439| [39m      [34mexpect[39m(results[results[33m.[39mlength [33m-[39m [34m1[39m])[33m.[39m[34mtoBe[39m([34m100[39m)
2025-06-04T22:41:45.6808668Z     [90m   | [39m                                          [31m^[39m
2025-06-04T22:41:45.6809633Z     [90m440| [39m      console[33m.[39m[34mlog[39m([32m'✅ PASS: should handle concurrent operations'[39m)
2025-06-04T22:41:45.6809832Z     [90m441| [39m    })
2025-06-04T22:41:45.6809844Z 
2025-06-04T22:41:45.6810199Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[338/523]⎯[22m[39m
2025-06-04T22:41:45.6810218Z 
2025-06-04T22:41:45.6811929Z [41m[1m FAIL [22m[49m src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22mMentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould use LLM classification when no keywords match
2025-06-04T22:41:45.6812522Z [31m[1mError[22m: expected keyword+classification to be classification[39m
2025-06-04T22:41:45.6813362Z [36m [2m❯[22m src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts:[2m53:36[22m[39m
2025-06-04T22:41:45.6813543Z     [90m 51| [39m
2025-06-04T22:41:45.6814270Z     [90m 52| [39m      [34mexpect[39m(result[33m.[39mtargetAnalyzer)[33m.[39m[34mtoBe[39m([32m'depression'[39m)
2025-06-04T22:41:45.6815031Z     [90m 53| [39m      [34mexpect[39m(result[33m.[39mroutingMethod)[33m.[39m[34mtoBe[39m([32m'classification'[39m)
2025-06-04T22:41:45.6815383Z     [90m   | [39m                                   [31m^[39m
2025-06-04T22:41:45.6816047Z     [90m 54| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeCloseTo[39m([34m0.85[39m)
2025-06-04T22:41:45.6816238Z     [90m 55| [39m    })
2025-06-04T22:41:45.6816250Z 
2025-06-04T22:41:45.6816618Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[339/523]⎯[22m[39m
2025-06-04T22:41:45.6816816Z 
2025-06-04T22:41:45.6818682Z [41m[1m FAIL [22m[49m src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22mMentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould apply fallback mechanisms for low confidence decisions
2025-06-04T22:41:45.6819395Z [31m[1mError[22m: expected unknown to be general_mental_health[39m
2025-06-04T22:41:45.6820287Z [36m [2m❯[22m src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts:[2m95:37[22m[39m
2025-06-04T22:41:45.6820463Z     [90m 93| [39m
2025-06-04T22:41:45.6820906Z     [90m 94| [39m      [90m// Should apply fallback for low confidence[39m
2025-06-04T22:41:45.6821721Z     [90m 95| [39m      [34mexpect[39m(result[33m.[39mtargetAnalyzer)[33m.[39m[34mtoBe[39m([32m'general_mental_health'[39m)
2025-06-04T22:41:45.6822088Z     [90m   | [39m                                    [31m^[39m
2025-06-04T22:41:45.6822791Z     [90m 96| [39m      [34mexpect[39m(result[33m.[39mroutingMethod)[33m.[39m[34mtoBe[39m([32m'fallback'[39m)
2025-06-04T22:41:45.6823005Z     [90m 97| [39m    })
2025-06-04T22:41:45.6823017Z 
2025-06-04T22:41:45.6823375Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[340/523]⎯[22m[39m
2025-06-04T22:41:45.6823387Z 
2025-06-04T22:41:45.6825251Z [41m[1m FAIL [22m[49m src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts[2m > [22mMentalHealthTaskRouter[2m > [22mdetermineRoute[2m > [22mshould handle very short texts appropriately
2025-06-04T22:41:45.6825724Z [31m[1mError[22m: expected depression to be unknown[39m
2025-06-04T22:41:45.6826573Z [36m [2m❯[22m src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts:[2m122:37[22m[39m
2025-06-04T22:41:45.6827289Z     [90m120| [39m      [35mconst[39m result [33m=[39m [35mawait[39m router[33m.[39m[34mdetermineRoute[39m(text)
2025-06-04T22:41:45.6827462Z     [90m121| [39m
2025-06-04T22:41:45.6828173Z     [90m122| [39m      [34mexpect[39m(result[33m.[39mtargetAnalyzer)[33m.[39m[34mtoBe[39m([32m'unknown'[39m)
2025-06-04T22:41:45.6828542Z     [90m   | [39m                                    [31m^[39m
2025-06-04T22:41:45.6829415Z     [90m123| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeLessThan[39m([34m0.5[39m)
2025-06-04T22:41:45.6829611Z     [90m124| [39m    })
2025-06-04T22:41:45.6829624Z 
2025-06-04T22:41:45.6830000Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[341/523]⎯[22m[39m
2025-06-04T22:41:45.6830026Z 
2025-06-04T22:41:45.6830507Z [31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Unhandled Errors [49m[22m[31m⎯⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6830666Z [31m[1m
2025-06-04T22:41:45.6831006Z Vitest caught 17 unhandled errors during the test run.
2025-06-04T22:41:45.6831921Z This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m
2025-06-04T22:41:45.6831933Z 
2025-06-04T22:41:45.6832424Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6833262Z [31m[1mError[22m: Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.6834315Z [36m [2m❯[22m PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m218:13[22m[39m
2025-06-04T22:41:45.6834621Z     [90m216| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6835303Z     [90m217| [39m      console[33m.[39m[34merror[39m([32m'Error generating insights:'[39m[33m,[39m error)
2025-06-04T22:41:45.6835727Z     [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.6835986Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6836503Z     [90m219| [39m        `Failed to generate insights: ${error instanceof Error ? error…
2025-06-04T22:41:45.6836693Z     [90m220| [39m      )
2025-06-04T22:41:45.6836705Z 
2025-06-04T22:41:45.6838276Z [31mThis error originated in "[1msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6838495Z 
2025-06-04T22:41:45.6839013Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6840002Z [31m[1mError[22m: Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.6841075Z [36m [2m❯[22m PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m218:13[22m[39m
2025-06-04T22:41:45.6841393Z     [90m216| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6841894Z     [90m217| [39m      console[33m.[39m[34merror[39m([32m'Error generating insights:'[39m[33m,[39m error)
2025-06-04T22:41:45.6842132Z     [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.6842284Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6842579Z     [90m219| [39m        `Failed to generate insights: ${error instanceof Error ? error…
2025-06-04T22:41:45.6842794Z     [90m220| [39m      )
2025-06-04T22:41:45.6842808Z 
2025-06-04T22:41:45.6844453Z [31mThis error originated in "[1msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6844470Z 
2025-06-04T22:41:45.6845002Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6846061Z [31m[1mError[22m: Failed to generate insights: Cannot read properties of undefined (reading 'some')[39m
2025-06-04T22:41:45.6847216Z [36m [2m❯[22m PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:[2m218:13[22m[39m
2025-06-04T22:41:45.6847557Z     [90m216| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6848257Z     [90m217| [39m      console[33m.[39m[34merror[39m([32m'Error generating insights:'[39m[33m,[39m error)
2025-06-04T22:41:45.6848717Z     [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m(
2025-06-04T22:41:45.6848989Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6849761Z     [90m219| [39m        `Failed to generate insights: ${error instanceof Error ? error…
2025-06-04T22:41:45.6849975Z     [90m220| [39m      )
2025-06-04T22:41:45.6849988Z 
2025-06-04T22:41:45.6851600Z [31mThis error originated in "[1msrc/lib/ai/datasets/__tests__/patient-psi-insights.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6851615Z 
2025-06-04T22:41:45.6852134Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6853188Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6854352Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6854818Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6855385Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6856366Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6856628Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6856852Z     [90m839| [39m    }
2025-06-04T22:41:45.6857027Z     [90m840| [39m  }
2025-06-04T22:41:45.6858140Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6858156Z 
2025-06-04T22:41:45.6860031Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6861522Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6861895Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6862888Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6862904Z 
2025-06-04T22:41:45.6863450Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6864472Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6865623Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6865939Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6866522Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6867521Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6867794Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6867973Z     [90m839| [39m    }
2025-06-04T22:41:45.6868145Z     [90m840| [39m  }
2025-06-04T22:41:45.6869620Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6869642Z 
2025-06-04T22:41:45.6871380Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6872571Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6872971Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6873905Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6873921Z 
2025-06-04T22:41:45.6874454Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6875505Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6876678Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6877006Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6877584Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6878561Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6886221Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6886510Z     [90m839| [39m    }
2025-06-04T22:41:45.6886695Z     [90m840| [39m  }
2025-06-04T22:41:45.6887853Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6887873Z 
2025-06-04T22:41:45.6889766Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6890949Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6891314Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6892235Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6892474Z 
2025-06-04T22:41:45.6893002Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6894033Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6895115Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6895438Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6895986Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6896921Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6897174Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6897367Z     [90m839| [39m    }
2025-06-04T22:41:45.6897552Z     [90m840| [39m  }
2025-06-04T22:41:45.6898659Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6898674Z 
2025-06-04T22:41:45.6900514Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6901849Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6902223Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6903137Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6903157Z 
2025-06-04T22:41:45.6903665Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6904691Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6905826Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6906137Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6906693Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6907654Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6907921Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6908114Z     [90m839| [39m    }
2025-06-04T22:41:45.6908299Z     [90m840| [39m  }
2025-06-04T22:41:45.6909568Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6909601Z 
2025-06-04T22:41:45.6911278Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6912409Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6912786Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6913673Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6913686Z 
2025-06-04T22:41:45.6914184Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6915169Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6916271Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6916775Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6917326Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6918293Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6918581Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6918770Z     [90m839| [39m    }
2025-06-04T22:41:45.6918940Z     [90m840| [39m  }
2025-06-04T22:41:45.6920202Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6920218Z 
2025-06-04T22:41:45.6921909Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6923115Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6923478Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6924407Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6924620Z 
2025-06-04T22:41:45.6925155Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6926211Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6927357Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6927693Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6928267Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6928828Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6928982Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6929289Z     [90m839| [39m    }
2025-06-04T22:41:45.6929449Z     [90m840| [39m  }
2025-06-04T22:41:45.6930088Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6930098Z 
2025-06-04T22:41:45.6931016Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6931648Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6931860Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6932358Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6932367Z 
2025-06-04T22:41:45.6932653Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6933213Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6933847Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6934024Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6934341Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6934868Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6935205Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6935313Z     [90m839| [39m    }
2025-06-04T22:41:45.6935416Z     [90m840| [39m  }
2025-06-04T22:41:45.6936019Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6936027Z 
2025-06-04T22:41:45.6936950Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6937576Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6937781Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6938276Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6938283Z 
2025-06-04T22:41:45.6938567Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6939308Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6940071Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6940261Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6940575Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6941102Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6941253Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6941367Z     [90m839| [39m    }
2025-06-04T22:41:45.6941466Z     [90m840| [39m  }
2025-06-04T22:41:45.6942071Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6942079Z 
2025-06-04T22:41:45.6942995Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6943623Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6943818Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6944309Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6944317Z 
2025-06-04T22:41:45.6944601Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6945151Z [31m[1mError[22m: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')[39m
2025-06-04T22:41:45.6945744Z [36m [2m❯[22m EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m838:13[22m[39m
2025-06-04T22:41:45.6945917Z     [90m836| [39m    } [35mcatch[39m (error) {
2025-06-04T22:41:45.6946221Z     [90m837| [39m      logger.error('Error analyzing emotions from text', { error, text…
2025-06-04T22:41:45.6946744Z     [90m838| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to analyze emotions from text: [39m[36m${[39merror[36m}[39m[32m`[39m)
2025-06-04T22:41:45.6946886Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6946997Z     [90m839| [39m    }
2025-06-04T22:41:45.6947095Z     [90m840| [39m  }
2025-06-04T22:41:45.6947687Z [90m [2m❯[22m EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:[2m752:24[22m[39m
2025-06-04T22:41:45.6947824Z 
2025-06-04T22:41:45.6948737Z [31mThis error originated in "[1msrc/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6949551Z [31mThe latest test that might've caused the error is "[1mshould adapt batch size based on processing time[22m". It might mean one of the following:
2025-06-04T22:41:45.6949760Z - The error was thrown, while Vitest was running this test.
2025-06-04T22:41:45.6950252Z - If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
2025-06-04T22:41:45.6950265Z 
2025-06-04T22:41:45.6950544Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6951016Z [31m[1mError[22m: ML model initialization failed: Failed to load efficacyPrediction model: fetch failed[39m
2025-06-04T22:41:45.6951655Z [36m [2m❯[22m PersonalizationServiceImpl.initializeMLModels src/lib/ai/services/PersonalizationServiceImpl.ts:[2m288:13[22m[39m
2025-06-04T22:41:45.6952116Z     [90m286| [39m        error [35minstanceof[39m [33mError[39m [33m?[39m error[33m.[39mmessage [33m:[39m [33mString[39m(error)
2025-06-04T22:41:45.6952639Z     [90m287| [39m      logger[33m.[39m[34merror[39m([32m'Failed to initialize ML models'[39m[33m,[39m { error })
2025-06-04T22:41:45.6952947Z     [90m288| [39m      throw new Error(`ML model initialization failed: ${errorMessage}…
2025-06-04T22:41:45.6953099Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6953202Z     [90m289| [39m    }
2025-06-04T22:41:45.6953305Z     [90m290| [39m  }
2025-06-04T22:41:45.6953717Z [90m [2m❯[22m processTicksAndRejections node:internal/process/task_queues:[2m105:5[22m[39m
2025-06-04T22:41:45.6953725Z 
2025-06-04T22:41:45.6954640Z [31mThis error originated in "[1msrc/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6954648Z 
2025-06-04T22:41:45.6954922Z [31m⎯⎯⎯⎯[39m[1m[41m Unhandled Rejection [49m[22m[31m⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6955378Z [31m[1mError[22m: ML model initialization failed: Failed to load recommendation model: fetch failed[39m
2025-06-04T22:41:45.6956005Z [36m [2m❯[22m PersonalizationServiceImpl.initializeMLModels src/lib/ai/services/PersonalizationServiceImpl.ts:[2m288:13[22m[39m
2025-06-04T22:41:45.6956464Z     [90m286| [39m        error [35minstanceof[39m [33mError[39m [33m?[39m error[33m.[39mmessage [33m:[39m [33mString[39m(error)
2025-06-04T22:41:45.6956852Z     [90m287| [39m      logger[33m.[39m[34merror[39m([32m'Failed to initialize ML models'[39m[33m,[39m { error })
2025-06-04T22:41:45.6957151Z     [90m288| [39m      throw new Error(`ML model initialization failed: ${errorMessage}…
2025-06-04T22:41:45.6957297Z     [90m   | [39m            [31m^[39m
2025-06-04T22:41:45.6957399Z     [90m289| [39m    }
2025-06-04T22:41:45.6957502Z     [90m290| [39m  }
2025-06-04T22:41:45.6957904Z [90m [2m❯[22m processTicksAndRejections node:internal/process/task_queues:[2m105:5[22m[39m
2025-06-04T22:41:45.6957910Z 
2025-06-04T22:41:45.6958821Z [31mThis error originated in "[1msrc/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-06-04T22:41:45.6958828Z 
2025-06-04T22:41:45.6959259Z [31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Unhandled Error [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6959693Z [31m[1mError[22m: Worker terminated due to reaching memory limit: JS heap out of memory[39m
2025-06-04T22:41:45.6959965Z [90m [2m❯[22m [kOnExit] node:internal/worker:[2m314:26[22m[39m
2025-06-04T22:41:45.6960304Z [90m [2m❯[22m Worker.<computed>.onexit node:internal/worker:[2m230:20[22m[39m
2025-06-04T22:41:45.6960461Z 
2025-06-04T22:41:45.6960681Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-06-04T22:41:45.6961012Z [31m[1mSerialized Error:[22m[39m [90m{ code: 'ERR_WORKER_OUT_OF_MEMORY' }[39m
2025-06-04T22:41:45.6961018Z 
2025-06-04T22:41:45.6961286Z [31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Unhandled Error [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6961684Z [31m[1mError[22m: Worker terminated due to reaching memory limit: JS heap out of memory[39m
2025-06-04T22:41:45.6961951Z [90m [2m❯[22m [kOnExit] node:internal/worker:[2m314:26[22m[39m
2025-06-04T22:41:45.6962274Z [90m [2m❯[22m Worker.<computed>.onexit node:internal/worker:[2m230:20[22m[39m
2025-06-04T22:41:45.6962281Z 
2025-06-04T22:41:45.6962482Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-06-04T22:41:45.6962841Z [31m[1mSerialized Error:[22m[39m [90m{ code: 'ERR_WORKER_OUT_OF_MEMORY' }[39m
2025-06-04T22:41:45.6963025Z [31m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39m
2025-06-04T22:41:45.6963042Z 
2025-06-04T22:41:45.6963058Z 
2025-06-04T22:41:45.6963559Z [2m Test Files [22m [1m[31m99 failed[39m[22m[2m | [22m[1m[32m15 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (117)[39m
2025-06-04T22:41:45.6964053Z [2m      Tests [22m [1m[31m437 failed[39m[22m[2m | [22m[1m[32m564 passed[39m[22m[2m | [22m[33m43 skipped[39m[90m (1054)[39m
2025-06-04T22:41:45.6964244Z [2m     Errors [22m [1m[31m17 errors[39m[22m
2025-06-04T22:41:45.6964526Z [2m   Start at [22m 21:54:31
2025-06-04T22:41:45.6965069Z [2m   Duration [22m 2833.75s[2m (transform 3.98s, setup 17.94s, collect 10.07s, tests 11.48s, environment 66.05s, prepare 12.00s)[22m
2025-06-04T22:41:45.6965077Z 
2025-06-04T22:41:45.6965088Z 
2025-06-04T22:41:45.6987460Z ##[error]Error: Failed to generate insights: Cannot read properties of undefined (reading 'some')
 ❯ PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:218:13

This error originated in "src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

2025-06-04T22:41:45.6994181Z 
2025-06-04T22:41:45.6997421Z ##[error]Error: Failed to generate insights: Cannot read properties of undefined (reading 'some')
 ❯ PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:218:13

This error originated in "src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

2025-06-04T22:41:45.6997794Z 
2025-06-04T22:41:45.7000656Z ##[error]Error: Failed to generate insights: Cannot read properties of undefined (reading 'some')
 ❯ PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:218:13

This error originated in "src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

2025-06-04T22:41:45.7001200Z 
2025-06-04T22:41:45.7006735Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7007081Z 
2025-06-04T22:41:45.7012762Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7013139Z 
2025-06-04T22:41:45.7018690Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7019067Z 
2025-06-04T22:41:45.7024597Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7024964Z 
2025-06-04T22:41:45.7030573Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7031141Z 
2025-06-04T22:41:45.7036586Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7036962Z 
2025-06-04T22:41:45.7042479Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7042863Z 
2025-06-04T22:41:45.7049270Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7050042Z 
2025-06-04T22:41:45.7060190Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7060946Z 
2025-06-04T22:41:45.7071081Z ##[error]Error: Failed to analyze emotions from text: TypeError: Cannot read properties of undefined (reading 'emotions')
 ❯ EmotionDetectionEngine.analyzeEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:838:13
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:24

This error originated in "src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "should adapt batch size based on processing time". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

2025-06-04T22:41:45.7072018Z 
2025-06-04T22:41:45.7077532Z ##[error]Error: ML model initialization failed: Failed to load efficacyPrediction model: fetch failed
 ❯ PersonalizationServiceImpl.initializeMLModels src/lib/ai/services/PersonalizationServiceImpl.ts:288:13
 ❯ processTicksAndRejections node:internal/process/task_queues:105:5

This error originated in "src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

2025-06-04T22:41:45.7078041Z 
2025-06-04T22:41:45.7083531Z ##[error]Error: ML model initialization failed: Failed to load recommendation model: fetch failed
 ❯ PersonalizationServiceImpl.initializeMLModels src/lib/ai/services/PersonalizationServiceImpl.ts:288:13
 ❯ processTicksAndRejections node:internal/process/task_queues:105:5

This error originated in "src/lib/ai/services/__tests__/PersonalizationLayerFactory.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

2025-06-04T22:41:45.7084227Z 
2025-06-04T22:41:45.7086947Z ##[error]Error: page.evaluate: TypeError: Failed to fetch
    at eval (eval at evaluate (:313:29), <anonymous>:2:20)
    at UtilityScript.evaluate (<anonymous>:315:16)
    at UtilityScript.<anonymous> (<anonymous>:1:44)
 ❯ src/tests/performance.test.ts:344:31


2025-06-04T22:41:45.7087458Z 
2025-06-04T22:41:45.7090707Z ##[error]Error: page.evaluate: TypeError: Failed to fetch
    at eval (eval at evaluate (:313:29), <anonymous>:2:35)
    at UtilityScript.evaluate (<anonymous>:315:16)
    at UtilityScript.<anonymous> (<anonymous>:1:44)
 ❯ src/tests/performance.test.ts:336:31


2025-06-04T22:41:45.7091389Z 
2025-06-04T22:41:45.7093406Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/hooks/__tests__/useEmotionDetection.test.ts:41:22


2025-06-04T22:41:45.7094070Z 
2025-06-04T22:41:45.7095829Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/hooks/__tests__/useEmotionDetection.test.ts:61:22


2025-06-04T22:41:45.7096472Z 
2025-06-04T22:41:45.7098363Z ##[error]Error: expected [object Object] to equal ObjectContaining
 ❯ src/hooks/__tests__/useNotificationPreferences.test.ts:66:40


2025-06-04T22:41:45.7098998Z 
2025-06-04T22:41:45.7100770Z ##[error]Error: expected  to equal [object Object]
 ❯ src/hooks/__tests__/usePatternDetection.test.ts:60:22


2025-06-04T22:41:45.7101386Z 
2025-06-04T22:41:45.7102928Z ##[error]Error: expected  to equal [object Object]
 ❯ src/hooks/__tests__/usePatternDetection.test.ts:73:22


2025-06-04T22:41:45.7103556Z 
2025-06-04T22:41:45.7105076Z ##[error]Error: expected  to equal [object Object]
 ❯ src/hooks/__tests__/usePatternDetection.test.ts:86:22


2025-06-04T22:41:45.7105696Z 
2025-06-04T22:41:45.7107215Z ##[error]Error: expected  to equal [object Object]
 ❯ src/hooks/__tests__/usePatternDetection.test.ts:107:22


2025-06-04T22:41:45.7107830Z 
2025-06-04T22:41:45.7109578Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/tests/ai/crisis-detection.test.ts:173:22


2025-06-04T22:41:45.7110206Z 
2025-06-04T22:41:45.7111836Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/tests/ai/crisis-detection.test.ts:236:22


2025-06-04T22:41:45.7112436Z 
2025-06-04T22:41:45.7114270Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/tests/ai/crisis-detection.test.ts:285:22


2025-06-04T22:41:45.7114894Z 
2025-06-04T22:41:45.7116542Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/tests/ai/crisis-detection.test.ts:334:22


2025-06-04T22:41:45.7117194Z 
2025-06-04T22:41:45.7130563Z ##[error]AssertionError: expected "spy" to be called with arguments: [ { …(2) }, ObjectContaining{…} ]

Received: 

  1st spy call:

  [
+   [
      {
-     "asymmetricMatch": [Function asymmetricMatch],
-     "toString": [Function toString],
+       "content": "You are a mental health assessment assistant specializing in crisis detection. Analyze the message for indicators of crisis, including self-harm, suicidal ideation, harm to others, and severe psychological distress.
+
+ The current sensitivity level is set to: HIGH
+
+ Respond in valid JSON format with:
+ - isCrisis: boolean indicating if there is a crisis concern
+ - confidence: number from 0-1 indicating confidence in assessment
+ - category: optional string categorizing the type of crisis (e.g., \"self-harm\", \"suicide\", \"abuse\")
+ - severity: \"none\", \"low\", \"medium\", \"high\", or \"severe\"
+ - recommendedAction: optional string with recommended next steps
+
+ Be extremely cautious about false negatives - if there's ambiguity, lean toward safety.",
+       "name": "",
+       "role": "system",
      },
-   ObjectContaining {
+     {
+       "content": "I'm feeling really anxious about everything.",
+       "name": "",
+       "role": "user",
+     },
+   ],
+   {
      "model": "test-model",
    },
  ]


Number of calls: 1

 ❯ src/tests/ai/crisis-detection.test.ts:415:50


2025-06-04T22:41:45.7131346Z 
2025-06-04T22:41:45.7132845Z ##[error]Error: expected low to be none
 ❯ src/tests/ai/crisis-detection.test.ts:551:35


2025-06-04T22:41:45.7133533Z 
2025-06-04T22:41:45.7135429Z ##[error]TypeError: Cannot read properties of undefined (reading 'model')
 ❯ src/tests/ai/crisis-detection.test.ts:608:70


2025-06-04T22:41:45.7136131Z 
2025-06-04T22:41:45.7138156Z ##[error]TypeError: Cannot read properties of undefined (reading 'defaultPrompt')
 ❯ src/tests/ai/crisis-detection.test.ts:621:12


2025-06-04T22:41:45.7138831Z 
2025-06-04T22:41:45.7142221Z ##[error]Error: Failed to parse intervention analysis result
 ❯ InterventionAnalysisService.analyzeIntervention src/lib/ai/services/intervention-analysis.ts:167:13
 ❯ src/tests/ai/intervention-analysis.test.ts:132:22


2025-06-04T22:41:45.7142940Z 
2025-06-04T22:41:45.7146362Z ##[error]Error: Failed to parse intervention analysis result
 ❯ InterventionAnalysisService.analyzeIntervention src/lib/ai/services/intervention-analysis.ts:167:13
 ❯ src/tests/ai/intervention-analysis.test.ts:211:7


2025-06-04T22:41:45.7147076Z 
2025-06-04T22:41:45.7149840Z ##[error]Error: Failed to parse intervention analysis result
 ❯ InterventionAnalysisService.analyzeIntervention src/lib/ai/services/intervention-analysis.ts:167:13


2025-06-04T22:41:45.7150521Z 
2025-06-04T22:41:45.7152503Z ##[error]TypeError: Cannot read properties of undefined (reading 'model')
 ❯ src/tests/ai/intervention-analysis.test.ts:420:59


2025-06-04T22:41:45.7153185Z 
2025-06-04T22:41:45.7155255Z ##[error]TypeError: Cannot read properties of undefined (reading 'systemPrompt')
 ❯ src/tests/ai/intervention-analysis.test.ts:434:64


2025-06-04T22:41:45.7155913Z 
2025-06-04T22:41:45.7157678Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/tests/ai/response-generation.test.ts:53:22


2025-06-04T22:41:45.7158335Z 
2025-06-04T22:41:45.7162056Z ##[error]TypeError: this.aiService.createChatCompletionStream is not a function
 ❯ ResponseGenerationService.generateStreamingResponse src/lib/ai/services/response-generation.ts:381:49
 ❯ src/tests/ai/response-generation.test.ts:298:29


2025-06-04T22:41:45.7162784Z 
2025-06-04T22:41:45.7165727Z ##[error]Error: Failed to parse sentiment analysis result
 ❯ SentimentAnalysisService.analyzeSentiment src/lib/ai/services/sentiment-analysis.ts:110:13
 ❯ src/tests/ai/sentiment-analysis.test.ts:69:22


2025-06-04T22:41:45.7166619Z 
2025-06-04T22:41:45.7169705Z ##[error]Error: Failed to parse sentiment analysis result
 ❯ SentimentAnalysisService.analyzeSentiment src/lib/ai/services/sentiment-analysis.ts:110:13
 ❯ src/tests/ai/sentiment-analysis.test.ts:115:22


2025-06-04T22:41:45.7170382Z 
2025-06-04T22:41:45.7173362Z ##[error]Error: Failed to parse sentiment analysis result
 ❯ SentimentAnalysisService.analyzeSentiment src/lib/ai/services/sentiment-analysis.ts:110:13
 ❯ src/tests/ai/sentiment-analysis.test.ts:147:22


2025-06-04T22:41:45.7174038Z 
2025-06-04T22:41:45.7176333Z ##[error]Error: Failed to parse sentiment analysis result
 ❯ SentimentAnalysisService.analyzeSentiment src/lib/ai/services/sentiment-analysis.ts:110:13


2025-06-04T22:41:45.7177009Z 
2025-06-04T22:41:45.7178825Z ##[error]TypeError: Cannot read properties of undefined (reading 'model')
 ❯ src/tests/ai/sentiment-analysis.test.ts:296:70


2025-06-04T22:41:45.7179659Z 
2025-06-04T22:41:45.7181605Z ##[error]TypeError: Cannot read properties of undefined (reading 'defaultPrompt')
 ❯ src/tests/ai/sentiment-analysis.test.ts:324:12


2025-06-04T22:41:45.7182244Z 
2025-06-04T22:41:45.7188210Z ##[error]Error: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock
 ❯ src/lib/services/analytics/AnalyticsService.ts:3:1

Caused by: Caused by: ReferenceError: Cannot access 'mockLoggerInstance' before initialization
 ❯ src/workers/__tests__/analytics-worker.test.ts:17:11
 ❯ src/lib/services/analytics/AnalyticsService.ts:3:1


2025-06-04T22:41:45.7188874Z 
2025-06-04T22:41:45.7194808Z ##[error]Error: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock
 ❯ src/lib/services/email/EmailService.ts:3:1

Caused by: Caused by: ReferenceError: Cannot access 'mockLoggerInstance' before initialization
 ❯ src/workers/__tests__/notification-worker.test.ts:28:11
 ❯ src/lib/services/email/EmailService.ts:3:1


2025-06-04T22:41:45.7195495Z 
2025-06-04T22:41:45.7212229Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7212975Z 
2025-06-04T22:41:45.7229422Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7230362Z 
2025-06-04T22:41:45.7232594Z ##[error]TypeError: mockWebSocket.mockImplementation is not a function
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:109:19


2025-06-04T22:41:45.7233264Z 
2025-06-04T22:41:45.7235483Z ##[error]TypeError: mockWebSocket.mockImplementation is not a function
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:132:19


2025-06-04T22:41:45.7236139Z 
2025-06-04T22:41:45.7238305Z ##[error]TypeError: mockWebSocket.mockImplementation is not a function
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:155:19


2025-06-04T22:41:45.7238970Z 
2025-06-04T22:41:45.7248358Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7248810Z 
2025-06-04T22:41:45.7250271Z ##[error]TypeError: mockWebSocket.mockImplementation is not a function
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:216:19


2025-06-04T22:41:45.7250654Z 
2025-06-04T22:41:45.7251833Z ##[error]TypeError: mockWebSocket.mockImplementation is not a function
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:253:19


2025-06-04T22:41:45.7252203Z 
2025-06-04T22:41:45.7261200Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7261754Z 
2025-06-04T22:41:45.7270885Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7271298Z 
2025-06-04T22:41:45.7280420Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7280841Z 
2025-06-04T22:41:45.7289890Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7290462Z 
2025-06-04T22:41:45.7299716Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7300141Z 
2025-06-04T22:41:45.7309023Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7309784Z 
2025-06-04T22:41:45.7319408Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7319892Z 
2025-06-04T22:41:45.7331062Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7331568Z 
2025-06-04T22:41:45.7343044Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7343721Z 
2025-06-04T22:41:45.7354765Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7355293Z 
2025-06-04T22:41:45.7365943Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7366398Z 
2025-06-04T22:41:45.7377840Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7378469Z 
2025-06-04T22:41:45.7390872Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7391360Z 
2025-06-04T22:41:45.7402897Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7403404Z 
2025-06-04T22:41:45.7416965Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7417639Z 
2025-06-04T22:41:45.7428981Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7429633Z 
2025-06-04T22:41:45.7441787Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7442497Z 
2025-06-04T22:41:45.7456990Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7457914Z 
2025-06-04T22:41:45.7469654Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7470325Z 
2025-06-04T22:41:45.7481102Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7481700Z 
2025-06-04T22:41:45.7497355Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7498046Z 
2025-06-04T22:41:45.7511469Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7512200Z 
2025-06-04T22:41:45.7526670Z ##[error]ReferenceError: Cannot access 'announceToScreenReader' before initialization
 ❯ BiasDashboard src/components/admin/bias-detection/BiasDashboard.tsx:693:84
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7527483Z 
2025-06-04T22:41:45.7535599Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:749:7


2025-06-04T22:41:45.7536235Z 
2025-06-04T22:41:45.7544402Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:770:7


2025-06-04T22:41:45.7545129Z 
2025-06-04T22:41:45.7552931Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:788:7


2025-06-04T22:41:45.7553454Z 
2025-06-04T22:41:45.7559826Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:842:7


2025-06-04T22:41:45.7560261Z 
2025-06-04T22:41:45.7566927Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:859:7


2025-06-04T22:41:45.7567609Z 
2025-06-04T22:41:45.7573608Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:870:7


2025-06-04T22:41:45.7574032Z 
2025-06-04T22:41:45.7580585Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:908:7


2025-06-04T22:41:45.7581262Z 
2025-06-04T22:41:45.7589302Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:923:7


2025-06-04T22:41:45.7590006Z 
2025-06-04T22:41:45.7598602Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:943:7


2025-06-04T22:41:45.7599549Z 
2025-06-04T22:41:45.7608180Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:975:7


2025-06-04T22:41:45.7609232Z 
2025-06-04T22:41:45.7617867Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1002:7


2025-06-04T22:41:45.7618542Z 
2025-06-04T22:41:45.7627401Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1013:7


2025-06-04T22:41:45.7628082Z 
2025-06-04T22:41:45.7636788Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1026:7


2025-06-04T22:41:45.7637403Z 
2025-06-04T22:41:45.7645479Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1067:7


2025-06-04T22:41:45.7646206Z 
2025-06-04T22:41:45.7652265Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1090:7


2025-06-04T22:41:45.7652738Z 
2025-06-04T22:41:45.7657926Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1115:7


2025-06-04T22:41:45.7658549Z 
2025-06-04T22:41:45.7664887Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1145:7


2025-06-04T22:41:45.7665378Z 
2025-06-04T22:41:45.7673112Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1167:7


2025-06-04T22:41:45.7673813Z 
2025-06-04T22:41:45.7681857Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1196:7


2025-06-04T22:41:45.7682497Z 
2025-06-04T22:41:45.7690576Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1230:7


2025-06-04T22:41:45.7691250Z 
2025-06-04T22:41:45.7699469Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1272:7


2025-06-04T22:41:45.7700210Z 
2025-06-04T22:41:45.7708121Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1309:7


2025-06-04T22:41:45.7708794Z 
2025-06-04T22:41:45.7716679Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1345:7


2025-06-04T22:41:45.7717325Z 
2025-06-04T22:41:45.7725021Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1374:27


2025-06-04T22:41:45.7725691Z 
2025-06-04T22:41:45.7733208Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1398:7


2025-06-04T22:41:45.7733831Z 
2025-06-04T22:41:45.7741399Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1428:7


2025-06-04T22:41:45.7742370Z 
2025-06-04T22:41:45.7751301Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1455:7


2025-06-04T22:41:45.7752048Z 
2025-06-04T22:41:45.7761100Z ##[error]Error: Target container is not a DOM element.
 ❯ Object.process.env.NODE_ENV.exports.createRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:24878:15
 ❯ createConcurrentRoot node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:147:27
 ❯ Proxy.render node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.0_@types+react-dom@19.1.5_@type_f7baedc87abeea735b6a71317a9c8149/node_modules/@testing-library/react/dist/pure.js:266:12
 ❯ src/components/admin/bias-detection/BiasDashboard.test.tsx:1475:7


2025-06-04T22:41:45.7761853Z 
2025-06-04T22:41:45.7788602Z ##[error]TestingLibraryElementError: Unable to find an element with the text: /100 \/1000/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="p-6"
    >
      <div
        class="mb-6"
      >
        <h3
          class="text-lg font-medium mb-2"
        >
          Cache Performance
        </h3>
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"
        >
          <div
            class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"
          >
            <div
              class="text-sm text-gray-500 dark:text-gray-400"
            >
              Size
            </div>
            <div
              class="text-xl font-semibold"
            >
              100
               entries
            </div>
          </div>
          <div
            class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"
          >
            <div
              class="text-sm text-gray-500 dark:text-gray-400"
            >
              Max Size
            </div>
            <div
              class="text-xl font-semibold"
            >
              1000
               entries
            </div>
          </div>
          <div
            class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"
          >
            <div
              class="text-sm text-gray-500 dark:text-gray-400"
            >
              Hit Rate
            </div>
            <div
              class="text-xl font-semibold"
            >
              75.0%
            </div>
          </div>
          <div
            class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"
          >
            <div
              class="text-sm text-gray-500 dark:text-gray-400"
            >
              TTL
            </div>
            <div
              class="text-xl font-semibold"
            >
              60s
            </div>
          </div>
        </div>
      </div>
      <div
        class="flex justify-between items-center mb-4"
      >
        <div
          class="text-sm"
        >
          <span
            class="text-gray-500 dark:text-gray-400"
          >
            Status:
          </span>
           
          <span
            class="font-medium text-green-600 dark:text-green-400"
          >
            Enabled
          </span>
        </div>
        <button
          class="px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded"
        >
          Clear Cache
        </button>
      </div>
      <div
        class="text-xs text-gray-500 dark:text-gray-400 mt-6 text-right"
      >
        Last updated: 
        9:55:38 PM
      </div>
    </div>
  </div>
</body>
 ❯ Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/ai/__tests__/PerformanceDashboard.test.tsx:32:19


2025-06-04T22:41:45.7789825Z 
2025-06-04T22:41:45.7821379Z ##[error]TestingLibraryElementError: Found multiple elements with the text: N/A

Here are the matching elements:

Ignored nodes: comments, script, style
<div
  class="text-xl font-semibold"
>
  N/A
</div>

Ignored nodes: comments, script, style
<div
  class="text-xl font-semibold"
>
  N/A
</div>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="p-6"
    >
      <div
        class="mb-6"
      >
        <h3
          class="text-lg font-medium mb-2"
        >
          Cache Performance
        </h3>
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"
        >
          <div
            class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"
          >
            <div
              class="text-sm text-gray-500 dark:text-gray-400"
            >
              Size
            </div>
            <div
              class="text-xl font-semibold"
            >
              0
               entries
            </div>
          </div>
          <div
            class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"
          >
            <div
              class="text-sm text-gray-500 dark:text-gray-400"
            >
              Max Size
            </div>
            <div
              class="text-xl font-semibold"
            >
              0
               entries
            </div>
          </div>
          <div
            class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"
          >
            <div
              class="text-sm text-gray-500 dark:text-gray-400"
            >
              Hit Rate
            </div>
            <div
              class="text-xl font-semibold"
            >
              N/A
            </div>
          </div>
          <div
            class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"
          >
            <div
              class="text-sm text-gray-500 dark:text-gray-400"
            >
              TTL
            </div>
            <div
              class="text-xl font-semibold"
            >
              N/A
            </div>
          </div>
        </div>
      </div>
      <div
        class="flex justify-between items-center mb-4"
      >
        <div
          class="text-sm"
        >
          <span
            class="text-gray-500 dark:text-gray-400"
          >
            Status:
          </span>
           
          <span
            class="font-medium text-red-600 dark:text-red-400"
          >
            Disabled
          </span>
        </div>
        <button
          class="px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded"
        >
          Clear Cache
        </button>
      </div>
      <div
        class="text-xs text-gray-500 dark:text-gray-400 mt-6 text-right"
      >
        Last updated: 
        9:55:38 PM
      </div>
    </div>
  </div>
</body>
 ❯ Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:20:35
 ❯ getMultipleElementsFoundError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:23:10
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:55:13
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/ai/__tests__/PerformanceDashboard.test.tsx:83:19


2025-06-04T22:41:45.7822396Z 
2025-06-04T22:41:45.7824779Z ##[error]Error: Expected element to have attribute "aria-invalid" with value "false"
 ❯ src/components/auth/__tests__/RegisterForm.test.tsx:29:27


2025-06-04T22:41:45.7825484Z 
2025-06-04T22:41:45.7835447Z ##[error]Error: Invalid Chai property: toHaveTextContent

Ignored nodes: comments, script, style
<html>
  <head />
  <body>
    <div>
      <div
        aria-live="polite"
        class="auth-success"
        role="alert"
      >
        <h2>
          Registration Successful
        </h2>
        <p>
          Please check your email to verify your account. If you don't see it within a few minutes, check your spam folder.
        </p>
      </div>
    </div>
  </body>
</html>
 ❯ src/components/auth/__tests__/RegisterForm.test.tsx:107:28
 ❯ runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:47:12
 ❯ checkCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:124:77
 ❯ Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:118:16


2025-06-04T22:41:45.7836169Z 
2025-06-04T22:41:45.7838409Z ##[error]Error: Expected element to have attribute "aria-label" with value "Sign up with Google"
 ❯ src/components/auth/__tests__/RegisterForm.test.tsx:136:26


2025-06-04T22:41:45.7839265Z 
2025-06-04T22:41:45.7844090Z ##[error]Error: [vitest] No "getLogger" export is defined on the "@/lib/utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/utils/logger"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ src/lib/fhe/index.ts:13:16
 ❯ src/lib/fhe/exports.ts:28:1


2025-06-04T22:41:45.7845039Z 
2025-06-04T22:41:45.7861367Z ##[error]TypeError: Cannot read properties of undefined (reading 'map')
 ❯ MentalHealthInsights src/components/chat/MentalHealthInsights.tsx:114:43
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7862148Z 
2025-06-04T22:41:45.7875117Z ##[error]TypeError: Cannot read properties of undefined (reading 'map')
 ❯ MentalHealthInsights src/components/chat/MentalHealthInsights.tsx:114:43
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7875621Z 
2025-06-04T22:41:45.7885528Z ##[error]TypeError: Cannot read properties of undefined (reading 'map')
 ❯ MentalHealthInsights src/components/chat/MentalHealthInsights.tsx:114:43
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44


2025-06-04T22:41:45.7886198Z 
2025-06-04T22:41:45.7901769Z ##[error]Error: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../../lib/ai/types/TherapyStyles"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ TherapyStyleSelector src/components/chat/TherapyStyleSelector.tsx:51:24
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41


2025-06-04T22:41:45.7902568Z 
2025-06-04T22:41:45.7919642Z ##[error]Error: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../../lib/ai/types/TherapyStyles"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ TherapyStyleSelector src/components/chat/TherapyStyleSelector.tsx:51:24
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41


2025-06-04T22:41:45.7920199Z 
2025-06-04T22:41:45.7929700Z ##[error]Error: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../../lib/ai/types/TherapyStyles"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ TherapyStyleSelector src/components/chat/TherapyStyleSelector.tsx:51:24
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41


2025-06-04T22:41:45.7930304Z 
2025-06-04T22:41:45.7941165Z ##[error]Error: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../../lib/ai/types/TherapyStyles"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ TherapyStyleSelector src/components/chat/TherapyStyleSelector.tsx:51:24
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41


2025-06-04T22:41:45.7941684Z 
2025-06-04T22:41:45.7954611Z ##[error]Error: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../../lib/ai/types/TherapyStyles"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ TherapyStyleSelector src/components/chat/TherapyStyleSelector.tsx:51:24
 ❯ Object.react-stack-bottom-frame node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41


2025-06-04T22:41:45.7955344Z 
2025-06-04T22:41:45.7960897Z ##[error]Error: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../../lib/ai/types/TherapyStyles"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ src/components/chat/__tests__/TherapyStyleSelector.test.tsx:126:7


2025-06-04T22:41:45.7961535Z 
2025-06-04T22:41:45.7966652Z ##[error]Error: [vitest] No "therapyStyleConfigs" export is defined on the "../../../lib/ai/types/TherapyStyles" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../../lib/ai/types/TherapyStyles"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ src/components/chat/__tests__/TherapyStyleSelector.test.tsx:160:36


2025-06-04T22:41:45.7967297Z 
2025-06-04T22:41:45.7992647Z ##[error]TestingLibraryElementError: Unable to find an element with the text: Real User Monitoring. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="rum-dashboard"
      data-testid="astro-component"
    >
      <div
        class="metrics-container"
      >
        <div
          class="grid"
        >
          <div
            class="metric-card"
          >
            <h3>
              Loading Performance
            </h3>
            <div
              id="loading-metrics"
            >
              <div>
                <span>
                  TTFB:
                </span>
                <span>
                  Loading...
                </span>
              </div>
              <div>
                <span>
                  FCP:
                </span>
                <span>
                  Loading...
                </span>
              </div>
              <div>
                <span>
                  LCP:
                </span>
                <span>
                  Loading...
                </span>
              </div>
              <div>
                <span>
                  Speed Index:
                </span>
                <span>
                  Loading...
                </span>
              </div>
            </div>
          </div>
          <div
            class="metric-card"
          >
            <h3>
              Interactivity
            </h3>
            <div
              id="interactivity-metrics"
            >
              <div>
                <span>
                  FID:
                </span>
                <span>
                  Loading...
                </span>
              </div>
              <div>
                <span>
                  TBT:
                </span>
                <span>
                  Loading...
                </span>
              </div>
              <div>
                <span>
                  TTI:
                </span>
                <span>
                  Loading...
                </span>
              </div>
            </div>
          </div>
          <div
            class="metric-card"
          >
            <h3>
              Visual Stability
            </h3>
            <div
              id="stability-metrics"
            >
              <div>
                <span>
                  CLS:
                </span>
                <span>
                  Loading...
                </span>
              </div>
            </div>
          </div>
          <div
            class="metric-card"
          >
            <h3>
              User Demographics
            </h3>
            <div
              id="demographics-metrics"
            >
              <div>
                <span>
                  Devices:
                </span>
                <span>
                  Loading...
                </span>
              </div>
              <div>
                <span>
                  Browsers:
                </span>
                <span>
                  Loading...
                </span>
              </div>
              <div>
                <span>
                  Countries:
                </span>
                <span>
                  Loading...
                </span>
              </div>
            </div>
          </div>
          <div
            class="metric-card"
          >
            <h3>
              Resource Metrics
            </h3>
            <div
              id="resource-metrics"
            >
              <div>
                <span>
                  JS Size:
                </span>
                <span>
                  Loading...
                </span>
              </div>
              <div>
                <span>
                  CSS Size:
                </span>
                <span>
                  Loading...
                </span>
              </div>
              <div>
         
2025-06-04T22:41:45.7993600Z 
2025-06-04T22:41:45.8000591Z ##[error]AssertionError: expected "spy" to be called 1 times, but got 0 times

Ignored nodes: comments, script, style
<html>
  <head />
  <body />
</html>
 ❯ src/lib/ai/__tests__/performance-optimizations.test.ts:91:51
 ❯ runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:47:12
 ❯ checkCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:124:77
 ❯ Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:118:16


2025-06-04T22:41:45.8001239Z 
2025-06-04T22:41:45.8003099Z ##[error]AssertionError: expected "spy" to be called 2 times, but got 3 times
 ❯ src/lib/ai/__tests__/performance-optimizations.test.ts:135:26


2025-06-04T22:41:45.8003728Z 
2025-06-04T22:41:45.8008528Z ##[error]AssertionError: expected "spy" to be called with arguments: [ { …(2) }, ObjectContaining{…} ]

Received: 

  1st spy call:

  [
+   [
      {
-     "asymmetricMatch": [Function asymmetricMatch],
-     "toString": [Function toString],
+       "content": "You are a helpful assistant.",
+       "name": "system",
+       "role": "system",
      },
-   ObjectContaining {
+   ],
+   {
      "model": "test-model",
+     "temperature": 1,
    },
  ]


Number of calls: 1

 ❯ src/lib/ai/__tests__/performance-optimizations.test.ts:201:26


2025-06-04T22:41:45.8009320Z 
2025-06-04T22:41:45.8016136Z ##[error]AssertionError: expected "spy" to be called 3 times, but got 0 times

Ignored nodes: comments, script, style
<html>
  <head />
  <body />
</html>
 ❯ src/lib/ai/__tests__/performance-optimizations.test.ts:264:51
 ❯ runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:47:12
 ❯ checkCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:124:77
 ❯ Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:118:16


2025-06-04T22:41:45.8016758Z 
2025-06-04T22:41:45.8020746Z ##[error]AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 

  1st spy call:

  [
-   ObjectContaining {
-     "model": "fallback-model-1",
+   [
+     {
+       "content": "Hello",
+       "name": "user",
+       "role": "user",
+     },
+   ],
+   {
+     "model": "primary-model",
+     "temperature": 1,
    },
  ]


Number of calls: 1

 ❯ src/lib/ai/__tests__/performance-optimizations.test.ts:312:26


2025-06-04T22:41:45.8021381Z 
2025-06-04T22:41:45.8023097Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8023691Z 
2025-06-04T22:41:45.8025578Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8026169Z 
2025-06-04T22:41:45.8027835Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8028434Z 
2025-06-04T22:41:45.8030275Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8030860Z 
2025-06-04T22:41:45.8032519Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8033073Z 
2025-06-04T22:41:45.8034671Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8035234Z 
2025-06-04T22:41:45.8036827Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8037417Z 
2025-06-04T22:41:45.8039265Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8039876Z 
2025-06-04T22:41:45.8041538Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8042109Z 
2025-06-04T22:41:45.8043779Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8044377Z 
2025-06-04T22:41:45.8046032Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8046624Z 
2025-06-04T22:41:45.8048311Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8048904Z 
2025-06-04T22:41:45.8050729Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8051321Z 
2025-06-04T22:41:45.8052951Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8053517Z 
2025-06-04T22:41:45.8055357Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8055960Z 
2025-06-04T22:41:45.8057646Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8058230Z 
2025-06-04T22:41:45.8060086Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8060688Z 
2025-06-04T22:41:45.8062364Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8063024Z 
2025-06-04T22:41:45.8064444Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8064854Z 
2025-06-04T22:41:45.8066174Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8066574Z 
2025-06-04T22:41:45.8067645Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8068022Z 
2025-06-04T22:41:45.8069823Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8070466Z 
2025-06-04T22:41:45.8072244Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8072651Z 
2025-06-04T22:41:45.8073931Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8074319Z 
2025-06-04T22:41:45.8075343Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8075715Z 
2025-06-04T22:41:45.8076726Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8077097Z 
2025-06-04T22:41:45.8078097Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8078468Z 
2025-06-04T22:41:45.8080067Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8080696Z 
2025-06-04T22:41:45.8082455Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8083083Z 
2025-06-04T22:41:45.8084827Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8085434Z 
2025-06-04T22:41:45.8087187Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8087814Z 
2025-06-04T22:41:45.8089717Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8090352Z 
2025-06-04T22:41:45.8092099Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8092693Z 
2025-06-04T22:41:45.8094405Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8095025Z 
2025-06-04T22:41:45.8096731Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8097345Z 
2025-06-04T22:41:45.8099268Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8099902Z 
2025-06-04T22:41:45.8101355Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8101992Z 
2025-06-04T22:41:45.8103392Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8103797Z 
2025-06-04T22:41:45.8104848Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8105226Z 
2025-06-04T22:41:45.8106241Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8106632Z 
2025-06-04T22:41:45.8107649Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8108027Z 
2025-06-04T22:41:45.8109032Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8109791Z 
2025-06-04T22:41:45.8110847Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8111220Z 
2025-06-04T22:41:45.8112214Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8112580Z 
2025-06-04T22:41:45.8113579Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8114138Z 
2025-06-04T22:41:45.8115160Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8115530Z 
2025-06-04T22:41:45.8116526Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8116892Z 
2025-06-04T22:41:45.8117894Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8118257Z 
2025-06-04T22:41:45.8119454Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8119842Z 
2025-06-04T22:41:45.8120868Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8121241Z 
2025-06-04T22:41:45.8122246Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8122624Z 
2025-06-04T22:41:45.8123618Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8123980Z 
2025-06-04T22:41:45.8124977Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8125343Z 
2025-06-04T22:41:45.8126348Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8126715Z 
2025-06-04T22:41:45.8127714Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8128078Z 
2025-06-04T22:41:45.8129242Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8129857Z 
2025-06-04T22:41:45.8131072Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8131455Z 
2025-06-04T22:41:45.8132463Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8132825Z 
2025-06-04T22:41:45.8134009Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:46:41


2025-06-04T22:41:45.8134395Z 
2025-06-04T22:41:45.8135446Z ##[error]TypeError: Cannot set properties of undefined (setting 'instance')
 ❯ src/lib/ai/bias-detection/config.test.ts:54:41


2025-06-04T22:41:45.8135818Z 
2025-06-04T22:41:45.8136861Z ##[error]TypeError: Cannot read properties of undefined (reading 'getConfig')
 ❯ src/lib/ai/bias-detection/config.test.ts:503:40


2025-06-04T22:41:45.8137233Z 
2025-06-04T22:41:45.8138250Z ##[error]TypeError: Cannot read properties of undefined (reading 'getConfig')
 ❯ src/lib/ai/bias-detection/config.test.ts:509:41


2025-06-04T22:41:45.8138630Z 
2025-06-04T22:41:45.8140532Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8140928Z 
2025-06-04T22:41:45.8142649Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8167278Z 
2025-06-04T22:41:45.8169655Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8170114Z 
2025-06-04T22:41:45.8171879Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8172481Z 
2025-06-04T22:41:45.8174199Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8174578Z 
2025-06-04T22:41:45.8176258Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8176645Z 
2025-06-04T22:41:45.8178295Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8178679Z 
2025-06-04T22:41:45.8180608Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8181004Z 
2025-06-04T22:41:45.8182831Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8183230Z 
2025-06-04T22:41:45.8184922Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8185290Z 
2025-06-04T22:41:45.8186941Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8187315Z 
2025-06-04T22:41:45.8188961Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8189582Z 
2025-06-04T22:41:45.8191282Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8191651Z 
2025-06-04T22:41:45.8193306Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8193677Z 
2025-06-04T22:41:45.8195322Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8195711Z 
2025-06-04T22:41:45.8197381Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8197750Z 
2025-06-04T22:41:45.8199596Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8199991Z 
2025-06-04T22:41:45.8201664Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8202192Z 
2025-06-04T22:41:45.8203851Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8204215Z 
2025-06-04T22:41:45.8205880Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8206253Z 
2025-06-04T22:41:45.8207908Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8208275Z 
2025-06-04T22:41:45.8210126Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8210515Z 
2025-06-04T22:41:45.8212191Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8212564Z 
2025-06-04T22:41:45.8214595Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8215407Z 
2025-06-04T22:41:45.8217914Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8218326Z 
2025-06-04T22:41:45.8220243Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8220653Z 
2025-06-04T22:41:45.8222367Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8222737Z 
2025-06-04T22:41:45.8224401Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8224767Z 
2025-06-04T22:41:45.8226423Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8226802Z 
2025-06-04T22:41:45.8228453Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8228817Z 
2025-06-04T22:41:45.8230968Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8231362Z 
2025-06-04T22:41:45.8233062Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8233433Z 
2025-06-04T22:41:45.8235079Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8235655Z 
2025-06-04T22:41:45.8237463Z ##[error]TypeError: Cannot read properties of undefined (reading 'debug')
 ❯ new EmotionDetectionEngine src/lib/ai/emotions/EmotionDetectionEngine.ts:200:12
 ❯ src/lib/ai/emotions/EmotionDetectionEngine.test.ts:130:21


2025-06-04T22:41:45.8237849Z 
2025-06-04T22:41:45.8238922Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/lib/analytics/__tests__/breach-analytics.test.ts:141:23


2025-06-04T22:41:45.8239525Z 
2025-06-04T22:41:45.8240587Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/lib/analytics/__tests__/breach-analytics.test.ts:193:25


2025-06-04T22:41:45.8240964Z 
2025-06-04T22:41:45.8241968Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/lib/analytics/__tests__/breach-analytics.test.ts:214:30


2025-06-04T22:41:45.8242340Z 
2025-06-04T22:41:45.8243346Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/lib/analytics/__tests__/breach-analytics.test.ts:313:22


2025-06-04T22:41:45.8243722Z 
2025-06-04T22:41:45.8284254Z ##[error]AssertionError: expected { type: 'high_frequency', …(3) } to match object { type: 'high_frequency', …(3) }

- Expected
+ Received

  {
    "description": StringContaining "user1",
-   "relatedLogs": {
-     "asymmetricMatch": [Function asymmetricMatch],
-     "toString": [Function toString],
+   "relatedLogs": [
+     {
+       "action": "read",
+       "id": "log0",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log1",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:54:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log2",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:53:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log3",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:52:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log4",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:51:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log5",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:50:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log6",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:49:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log7",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:48:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log8",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:47:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log9",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:46:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log10",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:45:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log11",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:44:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log12",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:43:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log13",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2025-06-04T21:42:09.450Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log14",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "
2025-06-04T22:41:45.8284879Z 
2025-06-04T22:41:45.8296618Z ##[error]AssertionError: expected { type: 'odd_hours', …(3) } to match object { type: 'odd_hours', …(3) }

- Expected
+ Received

  {
    "description": StringContaining "user1",
-   "relatedLogs": {
-     "asymmetricMatch": [Function asymmetricMatch],
-     "toString": [Function toString],
+   "relatedLogs": [
+     {
+       "action": "read",
+       "id": "log0",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2024-01-01T23:30:00.000Z,
+       "userId": "user1",
      },
-   "severity": "low",
+     {
+       "action": "read",
+       "id": "log1",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2024-01-01T23:30:00.000Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log2",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2024-01-02T00:30:00.000Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log3",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2024-01-02T00:30:00.000Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log4",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "document",
+       "status": "success",
+       "timestamp": 2024-01-02T01:30:00.000Z,
+       "userId": "user1",
+     },
+   ],
+   "severity": "medium",
    "type": "odd_hours",
  }

 ❯ src/lib/audit/__tests__/analysis.test.ts:74:27


2025-06-04T22:41:45.8297353Z 
2025-06-04T22:41:45.8325194Z ##[error]AssertionError: expected { type: 'sensitive_access', …(3) } to match object { type: 'sensitive_access', …(3) }

- Expected
+ Received

  {
    "description": StringContaining "user1",
-   "relatedLogs": {
-     "asymmetricMatch": [Function asymmetricMatch],
-     "toString": [Function toString],
+   "relatedLogs": [
+     {
+       "action": "read",
+       "id": "log0",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log1",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log2",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log3",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log4",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log5",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log6",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log7",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log8",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log9",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log10",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log11",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log12",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
      },
+     {
+       "action": "read",
+       "id": "log13",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userId": "user1",
+     },
+     {
+       "action": "read",
+       "id": "log14",
+       "metadata": {},
+       "resourceId": "doc1",
+       "resourceType": "pii",
+       "status": "success",
+       "timestamp": 2025-06-04T21:55:09.489Z,
+       "userI
2025-06-04T22:41:45.8326093Z 
2025-06-04T22:41:45.8328264Z ##[error]AssertionError: expected [ { type: 'odd_hours', …(3) }, …(3) ] to have a length of 3 but got 4

- Expected
+ Received

- 3
+ 4

 ❯ src/lib/audit/__tests__/analysis.test.ts:176:24


2025-06-04T22:41:45.8328892Z 
2025-06-04T22:41:45.8330658Z ##[error]ReferenceError: string is not defined
 ❯ src/lib/ehr/types.ts:142:13
 ❯ src/lib/ehr/services/fhir.client.ts:2:1


2025-06-04T22:41:45.8331283Z 
2025-06-04T22:41:45.8332967Z ##[error]ReferenceError: string is not defined
 ❯ src/lib/ehr/types.ts:142:13
 ❯ src/lib/ehr/providers/athenahealth.provider.ts:1:1


2025-06-04T22:41:45.8333602Z 
2025-06-04T22:41:45.8335211Z ##[error]ReferenceError: string is not defined
 ❯ src/lib/ehr/types.ts:142:13
 ❯ src/lib/ehr/services/fhir.client.ts:2:1


2025-06-04T22:41:45.8335823Z 
2025-06-04T22:41:45.8337446Z ##[error]ReferenceError: string is not defined
 ❯ src/lib/ehr/types.ts:142:13
 ❯ src/lib/ehr/services/fhir.client.ts:2:1


2025-06-04T22:41:45.8338070Z 
2025-06-04T22:41:45.8340288Z ##[error]Error: expected balanced-approach to be security-focused
 ❯ src/lib/fhe/__tests__/parameter-optimizer.test.ts:54:22


2025-06-04T22:41:45.8340923Z 
2025-06-04T22:41:45.8342724Z ##[error]Error: expected [object Object] to equal [object Object]
 ❯ src/lib/fhe/__tests__/parameter-optimizer.test.ts:70:25


2025-06-04T22:41:45.8343345Z 
2025-06-04T22:41:45.8347684Z ##[error]AssertionError: promise rejected "SecurityError: Failed to log audit event" instead of resolving
 ❯ src/lib/security/__tests__/audit.logging.test.ts:52:7

Caused by: Caused by: SecurityError: Failed to log audit event
 ❯ AuditLoggingService.logEvent src/lib/security/audit.logging.ts:91:13
 ❯ src/lib/security/__tests__/audit.logging.test.ts:51:29


2025-06-04T22:41:45.8348315Z 
2025-06-04T22:41:45.8350242Z ##[error]AssertionError: expected "spy" to be called at least once
 ❯ src/lib/security/__tests__/audit.logging.test.ts:65:32


2025-06-04T22:41:45.8350875Z 
2025-06-04T22:41:45.8353623Z ##[error]TypeError: this.config.redactFields is not iterable
 ❯ AuditLoggingService.sanitizeEntry src/lib/security/audit.logging.ts:112:39
 ❯ src/lib/security/__tests__/audit.logging.test.ts:73:59


2025-06-04T22:41:45.8354253Z 
2025-06-04T22:41:45.8356604Z ##[error]AssertionError: expected "spy" to be called with arguments: [ 'Audit logging service cleaned up' ]

Number of calls: 0

 ❯ src/lib/security/__tests__/audit.logging.test.ts:93:31


2025-06-04T22:41:45.8357224Z 
2025-06-04T22:41:45.8363873Z ##[error]Error: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../audit"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AuditLogger.log src/lib/security/dlp.ts:27:5
 ❯ DLPService.logDLPEvent src/lib/security/dlp.ts:274:17
 ❯ DLPService.scanContent src/lib/security/dlp.ts:216:10
 ❯ src/lib/security/__tests__/dlp.test.ts:144:33


2025-06-04T22:41:45.8364545Z 
2025-06-04T22:41:45.8370941Z ##[error]Error: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../audit"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AuditLogger.log src/lib/security/dlp.ts:27:5
 ❯ DLPService.logDLPEvent src/lib/security/dlp.ts:274:17
 ❯ DLPService.scanContent src/lib/security/dlp.ts:216:10
 ❯ src/lib/security/__tests__/dlp.test.ts:155:33


2025-06-04T22:41:45.8371575Z 
2025-06-04T22:41:45.8377632Z ##[error]Error: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../audit"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AuditLogger.log src/lib/security/dlp.ts:27:5
 ❯ DLPService.logDLPEvent src/lib/security/dlp.ts:274:17
 ❯ DLPService.scanContent src/lib/security/dlp.ts:216:10
 ❯ src/lib/security/__tests__/dlp.test.ts:178:33


2025-06-04T22:41:45.8378279Z 
2025-06-04T22:41:45.8384554Z ##[error]Error: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../audit"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AuditLogger.log src/lib/security/dlp.ts:27:5
 ❯ DLPService.logDLPEvent src/lib/security/dlp.ts:274:17
 ❯ DLPService.scanContent src/lib/security/dlp.ts:216:10
 ❯ src/lib/security/__tests__/dlp.test.ts:208:18


2025-06-04T22:41:45.8385190Z 
2025-06-04T22:41:45.8391621Z ##[error]Error: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../audit"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AuditLogger.log src/lib/security/dlp.ts:27:5
 ❯ DLPService.logDLPEvent src/lib/security/dlp.ts:274:17
 ❯ DLPService.scanContent src/lib/security/dlp.ts:216:10
 ❯ src/lib/security/__tests__/dlp.test.ts:232:33


2025-06-04T22:41:45.8392068Z 
2025-06-04T22:41:45.8395853Z ##[error]Error: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../audit"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AuditLogger.log src/lib/security/dlp.ts:27:5
 ❯ DLPService.logDLPEvent src/lib/security/dlp.ts:274:17
 ❯ DLPService.scanContent src/lib/security/dlp.ts:216:10
 ❯ src/lib/security/__tests__/dlp.test.ts:274:33


2025-06-04T22:41:45.8396267Z 
2025-06-04T22:41:45.8400996Z ##[error]Error: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../audit"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AuditLogger.log src/lib/security/dlp.ts:27:5
 ❯ DLPService.logDLPEvent src/lib/security/dlp.ts:274:17
 ❯ DLPService.scanContent src/lib/security/dlp.ts:216:10
 ❯ src/lib/security/__tests__/dlp.test.ts:297:33


2025-06-04T22:41:45.8401471Z 
2025-06-04T22:41:45.8406829Z ##[error]Error: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../audit"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AuditLogger.log src/lib/security/dlp.ts:27:5
 ❯ DLPService.logDLPEvent src/lib/security/dlp.ts:274:17
 ❯ DLPService.scanContent src/lib/security/dlp.ts:216:10
 ❯ src/lib/security/__tests__/dlp.test.ts:316:18


2025-06-04T22:41:45.8407489Z 
2025-06-04T22:41:45.8413624Z ##[error]Error: [vitest] No "logAuditEvent" export is defined on the "../../audit" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../audit"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AuditLogger.log src/lib/security/dlp.ts:27:5
 ❯ DLPService.logDLPEvent src/lib/security/dlp.ts:274:17
 ❯ DLPService.scanContent src/lib/security/dlp.ts:216:10
 ❯ src/lib/security/__tests__/dlp.test.ts:349:18


2025-06-04T22:41:45.8414260Z 
2025-06-04T22:41:45.8416000Z ##[error]Error: expected [REDACTED]: [REDACTED] to be Contact: [EMAIL]
 ❯ src/lib/security/__tests__/phiDetection.test.ts:5:62


2025-06-04T22:41:45.8416616Z 
2025-06-04T22:41:45.8418303Z ##[error]Error: expected [REDACTED] me at [REDACTED] to be Call me at [PHONE]
 ❯ src/lib/security/__tests__/phiDetection.test.ts:11:59


2025-06-04T22:41:45.8418911Z 
2025-06-04T22:41:45.8420649Z ##[error]Error: expected SSN: [REDACTED] to be SSN: [ID]
 ❯ src/lib/security/__tests__/phiDetection.test.ts:21:52


2025-06-04T22:41:45.8421269Z 
2025-06-04T22:41:45.8422978Z ##[error]Error: expected [REDACTED]ED]ACTED] [REDACTED] to be Patient [NAME]
 ❯ src/lib/security/__tests__/phiDetection.test.ts:26:52


2025-06-04T22:41:45.8423564Z 
2025-06-04T22:41:45.8425854Z ##[error]Error: expected [REDACTED]ACTED]DACTED], SSN: [REDACTED], email: [REDACTED], phone: [REDACTED] to be [NAME], SSN: [ID], email: [EMAIL], phone: [PHONE]
 ❯ src/lib/security/__tests__/phiDetection.test.ts:34:39


2025-06-04T22:41:45.8426624Z 
2025-06-04T22:41:45.8428383Z ##[error]Error: expected [REDACTED] sensitive info here. to be No sensitive info here.
 ❯ src/lib/security/__tests__/phiDetection.test.ts:38:59


2025-06-04T22:41:45.8428945Z 
2025-06-04T22:41:45.8430670Z ##[error]TypeError: content.trim is not a function
 ❯ src/lib/security/__tests__/security-scanning.test.ts:93:22


2025-06-04T22:41:45.8431271Z 
2025-06-04T22:41:45.8432853Z ##[error]TypeError: content.trim is not a function
 ❯ src/lib/security/__tests__/security-scanning.test.ts:160:22


2025-06-04T22:41:45.8433429Z 
2025-06-04T22:41:45.8435007Z ##[error]TypeError: content.trim is not a function
 ❯ src/lib/security/__tests__/security-scanning.test.ts:215:22


2025-06-04T22:41:45.8435622Z 
2025-06-04T22:41:45.8437271Z ##[error]TypeError: content.trim is not a function
 ❯ src/lib/security/__tests__/security-scanning.test.ts:265:22


2025-06-04T22:41:45.8437885Z 
2025-06-04T22:41:45.8443661Z ##[error]Error: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock
 ❯ src/lib/security/token.encryption.ts:1:1

Caused by: Caused by: ReferenceError: Cannot access 'mockCrypto' before initialization
 ❯ src/lib/security/__tests__/token.encryption.test.ts:31:21
 ❯ src/lib/security/token.encryption.ts:1:1


2025-06-04T22:41:45.8444304Z 
2025-06-04T22:41:45.8447506Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8448112Z 
2025-06-04T22:41:45.8451390Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8451976Z 
2025-06-04T22:41:45.8454976Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8455635Z 
2025-06-04T22:41:45.8458671Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8459376Z 
2025-06-04T22:41:45.8462358Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8463028Z 
2025-06-04T22:41:45.8465981Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8466552Z 
2025-06-04T22:41:45.8469769Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8470381Z 
2025-06-04T22:41:45.8473381Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8474205Z 
2025-06-04T22:41:45.8477356Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8477959Z 
2025-06-04T22:41:45.8480768Z ##[error]SyntaxError: Invalid URL: undefined
 ❯ initAsClient node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:692:13
 ❯ new WebSocket node_modules/.pnpm/ws@8.18.2/node_modules/ws/lib/websocket.js:88:7
 ❯ src/lib/websocket/__tests__/server.test.ts:72:21


2025-06-04T22:41:45.8481213Z 
2025-06-04T22:41:45.8482517Z ##[error]Error: expected undefined to be true
 ❯ src/pages/api/bias-detection/dashboard.test.ts:201:36


2025-06-04T22:41:45.8483120Z 
2025-06-04T22:41:45.8484605Z ##[error]Error: expected undefined to be true
 ❯ src/pages/api/bias-detection/dashboard.test.ts:228:36


2025-06-04T22:41:45.8485237Z 
2025-06-04T22:41:45.8486963Z ##[error]Error: expected undefined to be true
 ❯ src/pages/api/bias-detection/dashboard.test.ts:244:36


2025-06-04T22:41:45.8487642Z 
2025-06-04T22:41:45.8489594Z ##[error]Error: expected undefined to be true
 ❯ src/pages/api/bias-detection/dashboard.test.ts:263:36


2025-06-04T22:41:45.8490321Z 
2025-06-04T22:41:45.8492366Z ##[error]Error: expected undefined to be false
 ❯ src/pages/api/bias-detection/dashboard.test.ts:292:36


2025-06-04T22:41:45.8493110Z 
2025-06-04T22:41:45.8494885Z ##[error]Error: expected undefined to be true
 ❯ src/pages/api/bias-detection/dashboard.test.ts:332:36


2025-06-04T22:41:45.8495568Z 
2025-06-04T22:41:45.8497186Z ##[error]Error: expected undefined to be true
 ❯ src/pages/api/bias-detection/dashboard.test.ts:427:36


2025-06-04T22:41:45.8497800Z 
2025-06-04T22:41:45.8499559Z ##[error]Error: expected undefined to be false
 ❯ src/pages/api/bias-detection/dashboard.test.ts:456:36


2025-06-04T22:41:45.8500213Z 
2025-06-04T22:41:45.8501772Z ##[error]Error: expected undefined to be number
 ❯ src/pages/api/bias-detection/dashboard.test.ts:468:50


2025-06-04T22:41:45.8502380Z 
2025-06-04T22:41:45.8504325Z ##[error]AssertionError: expected "spy" to be called with arguments: [ …(2) ]

Number of calls: 0

 ❯ src/pages/api/bias-detection/export.test.ts:172:31


2025-06-04T22:41:45.8504937Z 
2025-06-04T22:41:45.8506876Z ##[error]AssertionError: expected "spy" to be called with arguments: [ …(2) ]

Number of calls: 0

 ❯ src/pages/api/bias-detection/export.test.ts:313:31


2025-06-04T22:41:45.8507481Z 
2025-06-04T22:41:45.8508966Z ##[error]Error: expected undefined to be false
 ❯ src/pages/api/bias-detection/export.test.ts:342:36


2025-06-04T22:41:45.8509755Z 
2025-06-04T22:41:45.8511144Z ##[error]Error: expected 400 to be 200
 ❯ src/pages/api/bias-detection/export.test.ts:367:31


2025-06-04T22:41:45.8511755Z 
2025-06-04T22:41:45.8513221Z ##[error]Error: expected undefined to be false
 ❯ src/pages/api/bias-detection/export.test.ts:484:36


2025-06-04T22:41:45.8513846Z 
2025-06-04T22:41:45.8515776Z ##[error]AssertionError: expected "spy" to be called with arguments: [ …(2) ]

Number of calls: 0

 ❯ src/pages/api/bias-detection/export.test.ts:504:31


2025-06-04T22:41:45.8516382Z 
2025-06-04T22:41:45.8518901Z ##[error]Error: Invalid Chai property: toHaveStyle
 ❯ src/simulator/components/__tests__/EmotionDisplay.test.tsx:60:17
 ❯ src/simulator/components/__tests__/EmotionDisplay.test.tsx:59:18


2025-06-04T22:41:45.8519722Z 
2025-06-04T22:41:45.8532419Z ##[error]TestingLibraryElementError: Unable to find an element with the text: Cognitive Reframing (95.0%). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="p-4 border rounded-lg"
    >
      <h2
        class="text-lg font-semibold mb-2"
      >
        Detected Techniques
      </h2>
      <p
        class="text-muted-foreground"
      >
        No therapeutic techniques detected yet.
      </p>
    </div>
  </div>
</body>
 ❯ Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/simulator/components/__tests__/TechniqueDisplay.test.tsx:34:21
 ❯ src/simulator/components/__tests__/TechniqueDisplay.test.tsx:32:20


2025-06-04T22:41:45.8533281Z 
2025-06-04T22:41:45.8543936Z ##[error]TestingLibraryElementError: Unable to find an element with the text: /.*\(\d+\.\d+%\)/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="p-4 border rounded-lg"
    >
      <h2
        class="text-lg font-semibold mb-2"
      >
        Detected Techniques
      </h2>
      <p
        class="text-muted-foreground"
      >
        No therapeutic techniques detected yet.
      </p>
    </div>
  </div>
</body>
 ❯ Object.getElementError node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:109:15
 ❯ src/simulator/components/__tests__/TechniqueDisplay.test.tsx:41:27


2025-06-04T22:41:45.8544629Z 
2025-06-04T22:41:45.8547884Z ##[error]TypeError: Cannot read properties of undefined (reading 'pythonServiceUrl')
 ❯ new BiasDetectionEngine src/lib/ai/bias-detection/BiasDetectionEngine.ts:30:62
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:108:29


2025-06-04T22:41:45.8548513Z 
2025-06-04T22:41:45.8551110Z ##[error]AssertionError: expected [Function] to throw an error

- Expected: 
null

+ Received: 
undefined

 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:125:10


2025-06-04T22:41:45.8551740Z 
2025-06-04T22:41:45.8556274Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:131:39


2025-06-04T22:41:45.8556893Z 
2025-06-04T22:41:45.8561535Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:150:39


2025-06-04T22:41:45.8562180Z 
2025-06-04T22:41:45.8566724Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:159:46


2025-06-04T22:41:45.8567349Z 
2025-06-04T22:41:45.8571953Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:185:39


2025-06-04T22:41:45.8572573Z 
2025-06-04T22:41:45.8577260Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:192:39


2025-06-04T22:41:45.8577883Z 
2025-06-04T22:41:45.8582571Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:199:39


2025-06-04T22:41:45.8583195Z 
2025-06-04T22:41:45.8587700Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:206:39


2025-06-04T22:41:45.8588328Z 
2025-06-04T22:41:45.8593188Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.getDashboardData src/lib/ai/bias-detection/BiasDetectionEngine.ts:229:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:215:46


2025-06-04T22:41:45.8593820Z 
2025-06-04T22:41:45.8598375Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.getDashboardData src/lib/ai/bias-detection/BiasDetectionEngine.ts:229:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:228:40


2025-06-04T22:41:45.8598993Z 
2025-06-04T22:41:45.8603705Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.getDashboardData src/lib/ai/bias-detection/BiasDetectionEngine.ts:229:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:237:40


2025-06-04T22:41:45.8604319Z 
2025-06-04T22:41:45.8606326Z ##[error]TypeError: biasEngine.startMonitoring is not a function
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:249:24


2025-06-04T22:41:45.8606942Z 
2025-06-04T22:41:45.8608916Z ##[error]TypeError: biasEngine.startMonitoring is not a function
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:256:24


2025-06-04T22:41:45.8609665Z 
2025-06-04T22:41:45.8611677Z ##[error]TypeError: biasEngine.startMonitoring is not a function
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:264:24


2025-06-04T22:41:45.8612281Z 
2025-06-04T22:41:45.8616774Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:293:24


2025-06-04T22:41:45.8617403Z 
2025-06-04T22:41:45.8622918Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:307:44
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:307:18


2025-06-04T22:41:45.8623549Z 
2025-06-04T22:41:45.8625727Z ##[error]TypeError: Cannot read properties of undefined (reading 'analyze_session')
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:318:45


2025-06-04T22:41:45.8626531Z 
2025-06-04T22:41:45.8628703Z ##[error]TypeError: Cannot read properties of undefined (reading 'analyze_session')
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:328:45


2025-06-04T22:41:45.8629522Z 
2025-06-04T22:41:45.8632204Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:351:39


2025-06-04T22:41:45.8632595Z 
2025-06-04T22:41:45.8635149Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:361:24


2025-06-04T22:41:45.8635538Z 
2025-06-04T22:41:45.8638061Z ##[error]Error: Bias Detection Engine not initialized. Call initialize() first.
 ❯ BiasDetectionEngine.ensureInitialized src/lib/ai/bias-detection/BiasDetectionEngine.ts:265:13
 ❯ BiasDetectionEngine.analyzeSession src/lib/ai/bias-detection/BiasDetectionEngine.ts:63:10
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:374:27


2025-06-04T22:41:45.8638452Z 
2025-06-04T22:41:45.8640020Z ##[error]TypeError: biasEngine.getSessionAnalysis is not a function
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:384:39


2025-06-04T22:41:45.8640437Z 
2025-06-04T22:41:45.8641614Z ##[error]TypeError: biasEngine.getMetrics is not a function
 ❯ src/lib/ai/bias-detection/__tests__/BiasDetectionEngine.test.ts:391:40


2025-06-04T22:41:45.8641985Z 
2025-06-04T22:41:45.8642856Z ##[error]ReferenceError: jest is not defined
 ❯ src/lib/ai/crisis/__tests__/CrisisProtocol.test.ts:9:1


2025-06-04T22:41:45.8643231Z 
2025-06-04T22:41:45.8645245Z ##[error]Error: Failed to generate insights: Cannot read properties of undefined (reading 'some')
 ❯ PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:218:13
 ❯ src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:253:24


2025-06-04T22:41:45.8645622Z 
2025-06-04T22:41:45.8647614Z ##[error]Error: Failed to generate insights: Cannot read properties of undefined (reading 'some')
 ❯ PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:218:13
 ❯ src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:294:25


2025-06-04T22:41:45.8647985Z 
2025-06-04T22:41:45.8649047Z ##[error]AssertionError: expected undefined to be defined
 ❯ src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:380:52


2025-06-04T22:41:45.8649612Z 
2025-06-04T22:41:45.8652756Z ##[error]TypeError: Cannot read properties of undefined (reading 'some')
 ❯ src/lib/ai/datasets/patient-psi-insights.ts:962:28
 ❯ PatientPsiInsightsService.analyzeInterventionEffectiveness src/lib/ai/datasets/patient-psi-insights.ts:961:39
 ❯ PatientPsiInsightsService.generateTherapeuticInsights src/lib/ai/datasets/patient-psi-insights.ts:555:12
 ❯ src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:435:32


2025-06-04T22:41:45.8653135Z 
2025-06-04T22:41:45.8655094Z ##[error]Error: Failed to generate insights: Cannot read properties of undefined (reading 'some')
 ❯ PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:218:13
 ❯ src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:572:24


2025-06-04T22:41:45.8655458Z 
2025-06-04T22:41:45.8657398Z ##[error]Error: Failed to generate insights: Cannot read properties of undefined (reading 'some')
 ❯ PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:218:13
 ❯ src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:615:25


2025-06-04T22:41:45.8657764Z 
2025-06-04T22:41:45.8659909Z ##[error]Error: Failed to generate insights: Cannot read properties of undefined (reading 'some')
 ❯ PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:218:13
 ❯ src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:646:24


2025-06-04T22:41:45.8660460Z 
2025-06-04T22:41:45.8662473Z ##[error]Error: Failed to generate insights: Cannot read properties of undefined (reading 'some')
 ❯ PatientPsiInsightsService.generateInsights src/lib/ai/datasets/patient-psi-insights.ts:218:13
 ❯ src/lib/ai/datasets/__tests__/patient-psi-insights.test.ts:678:24


2025-06-04T22:41:45.8662846Z 
2025-06-04T22:41:45.8663822Z ##[error]Error: expected null to be null
 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:73:31


2025-06-04T22:41:45.8664188Z 
2025-06-04T22:41:45.8665088Z ##[error]Error: expected 0 to be 2
 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:160:40


2025-06-04T22:41:45.8665451Z 
2025-06-04T22:41:45.8667447Z ##[error]Error: Normalization failed for model stats-patient: Model completeness 0.25 below required 0.7
 ❯ PatientPsiIntegration.normalizeModel src/lib/ai/datasets/patient-psi-integration.ts:269:13
 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:219:7


2025-06-04T22:41:45.8667829Z 
2025-06-04T22:41:45.8670626Z ##[error]AssertionError: expected 'Normalization failed for model error-…' to contain 'Parser failed: Invalid data structure'

Expected: "Parser failed: Invalid data structure"
Received: "Normalization failed for model error-test: Model completeness 0.25 below required 0.7"

 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:264:34


2025-06-04T22:41:45.8671036Z 
2025-06-04T22:41:45.8673878Z ##[error]AssertionError: expected 'Normalization failed for model indexe…' to contain 'Database connection lost'

Expected: "Database connection lost"
Received: "Normalization failed for model indexer-error-test: Model completeness 0.25 below required 0.7"

 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:319:34


2025-06-04T22:41:45.8674280Z 
2025-06-04T22:41:45.8676276Z ##[error]AssertionError: expected 'Cannot read properties of null (readi…' to contain 'Normalization failed'

Expected: "Normalization failed"
Received: "Cannot read properties of null (reading 'id')"

 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:359:36


2025-06-04T22:41:45.8676651Z 
2025-06-04T22:41:45.8678740Z ##[error]Error: Normalization failed for model concurrent-patient-0: Model completeness 0.25 below required 0.7
 ❯ PatientPsiIntegration.normalizeModel src/lib/ai/datasets/patient-psi-integration.ts:269:13
 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:443:23


2025-06-04T22:41:45.8679296Z 
2025-06-04T22:41:45.8680279Z ##[error]Error: expected 0 to be 3
 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:497:31


2025-06-04T22:41:45.8680661Z 
2025-06-04T22:41:45.8682668Z ##[error]Error: Normalization failed for model load-test-0: Model completeness 0.25 below required 0.7
 ❯ PatientPsiIntegration.normalizeModel src/lib/ai/datasets/patient-psi-integration.ts:269:13
 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:560:28


2025-06-04T22:41:45.8683045Z 
2025-06-04T22:41:45.8684107Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/datasets/__tests__/patient-psi-integration.test.ts:617:32


2025-06-04T22:41:45.8684476Z 
2025-06-04T22:41:45.8686246Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ EmotionAlertSystem.detectCrisis src/lib/ai/emotions/EmotionAlertSystem.ts:242:56
 ❯ src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:51:31


2025-06-04T22:41:45.8686625Z 
2025-06-04T22:41:45.8688357Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ EmotionAlertSystem.detectCrisis src/lib/ai/emotions/EmotionAlertSystem.ts:242:56
 ❯ src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:93:31


2025-06-04T22:41:45.8688726Z 
2025-06-04T22:41:45.8690642Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ EmotionAlertSystem.detectCrisis src/lib/ai/emotions/EmotionAlertSystem.ts:242:56
 ❯ src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:139:31


2025-06-04T22:41:45.8691194Z 
2025-06-04T22:41:45.8692948Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ EmotionAlertSystem.detectCrisis src/lib/ai/emotions/EmotionAlertSystem.ts:242:56
 ❯ src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:182:31


2025-06-04T22:41:45.8693328Z 
2025-06-04T22:41:45.8694585Z ##[error]TypeError: Cannot read properties of undefined (reading 'fetchPreviousAnalyses')
 ❯ src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:231:36


2025-06-04T22:41:45.8694957Z 
2025-06-04T22:41:45.8696142Z ##[error]TypeError: Cannot set properties of undefined (setting 'updateAlertStatus')
 ❯ src/lib/ai/emotions/__tests__/EmotionAlertSystem.test.ts:291:26


2025-06-04T22:41:45.8696513Z 
2025-06-04T22:41:45.8697495Z ##[error]Error: expected undefined to be I am happy to see you!
 ❯ src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:51:28


2025-06-04T22:41:45.8697872Z 
2025-06-04T22:41:45.8699300Z ##[error]Error: expected undefined to equal {"smile":0.85,"eyebrowPosition":"raised","mouthOpenness":0.2}
 ❯ src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:96:28


2025-06-04T22:41:45.8699697Z 
2025-06-04T22:41:45.8701442Z ##[error]Error: expected [object Object],[object Object] to equal ArrayContaining([{"sample":{"type":{"sample":{},"inverse":false},"severity":"high"},"inverse":false}])
 ❯ src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:182:29


2025-06-04T22:41:45.8701829Z 
2025-06-04T22:41:45.8702886Z ##[error]TypeError: detector.storeAnalysis is not a function
 ❯ src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:227:35


2025-06-04T22:41:45.8703258Z 
2025-06-04T22:41:45.8704296Z ##[error]Error: expected undefined to be 0
 ❯ src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:262:37


2025-06-04T22:41:45.8704675Z 
2025-06-04T22:41:45.8705811Z ##[error]TypeError: detector.combineEmotionAnalyses is not a function
 ❯ src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:310:39


2025-06-04T22:41:45.8706196Z 
2025-06-04T22:41:45.8707129Z ##[error]Error: expected [object Object] to equal 
 ❯ src/lib/ai/emotions/__tests__/EmotionDetector.test.ts:341:29


2025-06-04T22:41:45.8707503Z 
2025-06-04T22:41:45.8708713Z ##[error]TypeError: mapper.mapEmotionToDimensions is not a function
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:27:28


2025-06-04T22:41:45.8709253Z 
2025-06-04T22:41:45.8710611Z ##[error]TypeError: mapper.mapEmotionToDimensions is not a function
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:42:28


2025-06-04T22:41:45.8711003Z 
2025-06-04T22:41:45.8712337Z ##[error]TypeError: mapper.mapEmotionToDimensions is not a function
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:57:28


2025-06-04T22:41:45.8712730Z 
2025-06-04T22:41:45.8713965Z ##[error]TypeError: mapper.mapEmotionToDimensions is not a function
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:72:28


2025-06-04T22:41:45.8714347Z 
2025-06-04T22:41:45.8715570Z ##[error]TypeError: mapper.createDimensionalMapping is not a function
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:97:28


2025-06-04T22:41:45.8715935Z 
2025-06-04T22:41:45.8717279Z ##[error]Error: expected high-arousal positive-valence high-dominance to be positive-high
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:110:7


2025-06-04T22:41:45.8717651Z 
2025-06-04T22:41:45.8718907Z ##[error]TypeError: mapper.determineDominantDimension is not a function
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:132:14


2025-06-04T22:41:45.8719513Z 
2025-06-04T22:41:45.8720901Z ##[error]TypeError: Cannot set properties of undefined (setting 'storeDimensionalMapping')
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:180:21


2025-06-04T22:41:45.8721274Z 
2025-06-04T22:41:45.8722490Z ##[error]TypeError: mapper.mapEmotionToDimensions is not a function
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:206:28


2025-06-04T22:41:45.8723052Z 
2025-06-04T22:41:45.8724304Z ##[error]TypeError: mapper.mapEmotionToDimensions is not a function
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:228:32


2025-06-04T22:41:45.8724685Z 
2025-06-04T22:41:45.8725876Z ##[error]TypeError: mapper.normalizeDimensions is not a function
 ❯ src/lib/ai/emotions/__tests__/MultidimensionalEmotionMapper.test.ts:247:31


2025-06-04T22:41:45.8726260Z 
2025-06-04T22:41:45.8727402Z ##[error]AssertionError: expected "spy" to be called at least once
 ❯ src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:112:41


2025-06-04T22:41:45.8727768Z 
2025-06-04T22:41:45.8728917Z ##[error]AssertionError: expected "spy" to be called at least once
 ❯ src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:151:29


2025-06-04T22:41:45.8729536Z 
2025-06-04T22:41:45.8732029Z ##[error]Error: Test error
 ❯ EmotionDetectionEngine.<anonymous> src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:216:31
 ❯ EmotionDetectionEngine.detectEmotionsFromText src/lib/ai/emotions/EmotionDetectionEngine.ts:752:35
 ❯ src/lib/ai/emotions/__tests__/RealTimeAnalysisOptimization.test.ts:245:38


2025-06-04T22:41:45.8732420Z 
2025-06-04T22:41:45.8735340Z ##[error]AssertionError: expected [ { type: 'neutral', …(2) }, …(2) ] to deep equally contain ObjectContaining {"emotion": "neutral"}

- Expected: 
ObjectContaining {
  "emotion": "neutral",
}

+ Received: 
[
  {
    "confidence": 0.8,
    "intensity": 0.7,
    "type": "neutral",
  },
  {
    "confidence": 0.6,
    "intensity": 0.3,
    "type": "curious",
  },
  {
    "confidence": 0.7,
    "intensity": 0.4,
    "type": "cautious",
  },
]

 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:183:9


2025-06-04T22:41:45.8735743Z 
2025-06-04T22:41:45.8743834Z ##[error]AssertionError: promise resolved "{ sessionId: 'test-session-3', …(7) }" instead of rejecting

- Expected
+ Received

- Error {
-   "message": "rejected promise",
+ {
+   "clientId": "test-client-3",
+   "contextualFactors": {
+     "communicationPatterns": [],
+     "emotionalBaseline": {
+       "contextualFactors": [],
+       "emotions": [
+         {
+           "confidence": 0.8,
+           "intensity": 0.7,
+           "type": "neutral",
+         },
+         {
+           "confidence": 0.6,
+           "intensity": 0.3,
+           "type": "curious",
+         },
+         {
+           "confidence": 0.7,
+           "intensity": 0.4,
+           "type": "cautious",
+         },
+       ],
+       "id": "baseline-test-client-3-1749074074881",
+       "input": "baseline-assessment",
+       "requiresAttention": false,
+       "riskFactors": [],
+       "source": "text",
+       "timestamp": "2025-06-04T21:54:34.881Z",
+       "userId": "test-client-3",
+     },
+     "engagementMetrics": {
+       "emotionalVariability": 0,
+       "messageLength": [],
+       "participationLevel": 0,
+       "responseLatency": [],
+       "topicCoherence": 0,
+     },
+     "environmentalContext": {
+       "deviceType": "desktop",
+       "externalDisruptions": [],
+       "privacyLevel": "high",
+       "sessionDuration": 0,
+       "timeOfDay": "night",
+     },
+     "sessionGoals": [],
+     "therapeuticAlliance": 0.3,
+   },
+   "currentPhase": "opening",
+   "interventionHistory": [],
+   "riskLevel": "minimal",
+   "sessionId": "test-session-3",
+   "startTime": 2025-06-04T21:54:34.882Z,
+   "therapistId": "test-therapist-3",
  }

 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:197:7


2025-06-04T22:41:45.8744255Z 
2025-06-04T22:41:45.8745349Z ##[error]Error: expected minimal to be critical
 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:258:43


2025-06-04T22:41:45.8745723Z 
2025-06-04T22:41:45.8746783Z ##[error]Error: expected minimal to be moderate
 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:293:43


2025-06-04T22:41:45.8747156Z 
2025-06-04T22:41:45.8748368Z ##[error]Error: expected minimal to be low
 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:391:45


2025-06-04T22:41:45.8748744Z 
2025-06-04T22:41:45.8749880Z ##[error]Error: expected false to be true
 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:441:9


2025-06-04T22:41:45.8750256Z 
2025-06-04T22:41:45.8751420Z ##[error]Error: expected undefined to equal [object Object]
 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:645:62


2025-06-04T22:41:45.8751789Z 
2025-06-04T22:41:45.8752837Z ##[error]Error: expected opening to be working
 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:758:44


2025-06-04T22:41:45.8753211Z 
2025-06-04T22:41:45.8754254Z ##[error]Error: expected minimal to be critical
 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:817:32


2025-06-04T22:41:45.8754619Z 
2025-06-04T22:41:45.8755665Z ##[error]Error: expected undefined to be closing
 ❯ src/lib/ai/intervention/__tests__/RealTimeInterventionEngine.test.ts:947:48


2025-06-04T22:41:45.8756032Z 
2025-06-04T22:41:45.8758068Z ##[error]Error: Fine-tuning failed: Cannot read properties of undefined (reading 'model_path')
 ❯ MentalArenaAdapter.fineTuneModelWithPythonBridge src/lib/ai/mental-arena/MentalArenaAdapter.ts:808:13
 ❯ src/lib/ai/mental-arena/__tests__/MentalArenaAdapter.test.ts:147:7


2025-06-04T22:41:45.8758441Z 
2025-06-04T22:41:45.8761798Z ##[error]Error: [vitest] No "getLogger" export is defined on the "../../../logging" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("../../../logging"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ src/lib/ai/mental-llama/utils/bart-score.ts:17:16
 ❯ src/lib/ai/mental-llama/tests/evaluation-system.test.ts:11:1


2025-06-04T22:41:45.8762211Z 
2025-06-04T22:41:45.8763505Z ##[error]AssertionError: expected "spy" to be called at least once
 ❯ src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:299:36


2025-06-04T22:41:45.8763899Z 
2025-06-04T22:41:45.8765017Z ##[error]AssertionError: expected 0 to be less than 0
 ❯ src/lib/ai/performance/__tests__/PerformanceOptimizationEngine.test.ts:727:27


2025-06-04T22:41:45.8765384Z 
2025-06-04T22:41:45.8766304Z ##[error]Error: expected false to be true
 ❯ src/lib/ai/temporal/__tests__/dimensionDominance.test.ts:234:9


2025-06-04T22:41:45.8766681Z 
2025-06-04T22:41:45.8767622Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/temporal/__tests__/integration.test.ts:62:29


2025-06-04T22:41:45.8767987Z 
2025-06-04T22:41:45.8768929Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/temporal/__tests__/integration.test.ts:79:29


2025-06-04T22:41:45.8769436Z 
2025-06-04T22:41:45.8770386Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/temporal/__tests__/integration.test.ts:90:36


2025-06-04T22:41:45.8770772Z 
2025-06-04T22:41:45.8771730Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/temporal/__tests__/integration.test.ts:165:35


2025-06-04T22:41:45.8772099Z 
2025-06-04T22:41:45.8772901Z ##[error]Error: expected 0 to be 2
 ❯ src/lib/ai/temporal/__tests__/integration.test.ts:187:35


2025-06-04T22:41:45.8773264Z 
2025-06-04T22:41:45.8774228Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/temporal/__tests__/integration.test.ts:202:35


2025-06-04T22:41:45.8774590Z 
2025-06-04T22:41:45.8775446Z ##[error]Error: expected false to be true
 ❯ src/lib/ai/temporal/__tests__/integration.test.ts:226:9


2025-06-04T22:41:45.8775811Z 
2025-06-04T22:41:45.8776663Z ##[error]Error: expected false to be true
 ❯ src/lib/ai/temporal/__tests__/integration.test.ts:266:63


2025-06-04T22:41:45.8777023Z 
2025-06-04T22:41:45.8778186Z ##[error]AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 ❯ src/lib/ai/temporal/__tests__/oscillations.test.ts:65:22


2025-06-04T22:41:45.8778713Z 
2025-06-04T22:41:45.8780382Z ##[error]AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 ❯ src/lib/ai/temporal/__tests__/oscillations.test.ts:143:24
 ❯ src/lib/ai/temporal/__tests__/oscillations.test.ts:141:18


2025-06-04T22:41:45.8780751Z 
2025-06-04T22:41:45.8781922Z ##[error]AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 ❯ src/lib/ai/temporal/__tests__/oscillations.test.ts:177:22


2025-06-04T22:41:45.8782291Z 
2025-06-04T22:41:45.8783467Z ##[error]AssertionError: expected [] to have a length of 2 but got +0

- Expected
+ Received

- 2
+ 0

 ❯ src/lib/ai/temporal/__tests__/patternDetection.test.ts:37:28


2025-06-04T22:41:45.8783830Z 
2025-06-04T22:41:45.8784816Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/temporal/__tests__/patternDetection.test.ts:70:35


2025-06-04T22:41:45.8785177Z 
2025-06-04T22:41:45.8786210Z ##[error]AssertionError: expected undefined to be defined
 ❯ src/lib/ai/temporal/__tests__/patternDetection.test.ts:101:33


2025-06-04T22:41:45.8786572Z 
2025-06-04T22:41:45.8787590Z ##[error]AssertionError: expected undefined to be defined
 ❯ src/lib/ai/temporal/__tests__/patternDetection.test.ts:133:33


2025-06-04T22:41:45.8787958Z 
2025-06-04T22:41:45.8788872Z ##[error]Error: expected undefined to equal 
 ❯ src/lib/ai/temporal/__tests__/patternDetection.test.ts:143:33


2025-06-04T22:41:45.8789358Z 
2025-06-04T22:41:45.8790654Z ##[error]TypeError: Cannot read properties of undefined (reading 'findIndex')
 ❯ src/lib/ai/temporal/__tests__/patternDetection.test.ts:172:47


2025-06-04T22:41:45.8791032Z 
2025-06-04T22:41:45.8792263Z ##[error]AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 ❯ src/lib/ai/temporal/__tests__/quadrantTransitions.test.ts:100:22


2025-06-04T22:41:45.8792627Z 
2025-06-04T22:41:45.8793975Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:131:38


2025-06-04T22:41:45.8794365Z 
2025-06-04T22:41:45.8795690Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:152:38


2025-06-04T22:41:45.8796056Z 
2025-06-04T22:41:45.8797391Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:170:38


2025-06-04T22:41:45.8797754Z 
2025-06-04T22:41:45.8799071Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:195:21


2025-06-04T22:41:45.8799703Z 
2025-06-04T22:41:45.8801103Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:231:21


2025-06-04T22:41:45.8801637Z 
2025-06-04T22:41:45.8802980Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:259:38


2025-06-04T22:41:45.8803343Z 
2025-06-04T22:41:45.8804662Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:273:38


2025-06-04T22:41:45.8805028Z 
2025-06-04T22:41:45.8807282Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:291:38


2025-06-04T22:41:45.8807711Z 
2025-06-04T22:41:45.8808984Z ##[error]TypeError: service.assessModelCoherence is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:309:44


2025-06-04T22:41:45.8809566Z 
2025-06-04T22:41:45.8810851Z ##[error]TypeError: service.generateModelCoherenceReport is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:340:36


2025-06-04T22:41:45.8811236Z 
2025-06-04T22:41:45.8812550Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:367:23


2025-06-04T22:41:45.8812918Z 
2025-06-04T22:41:45.8814233Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:395:40


2025-06-04T22:41:45.8814715Z 
2025-06-04T22:41:45.8816079Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:436:38


2025-06-04T22:41:45.8816450Z 
2025-06-04T22:41:45.8817757Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:460:23


2025-06-04T22:41:45.8818123Z 
2025-06-04T22:41:45.8819628Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:489:38


2025-06-04T22:41:45.8820020Z 
2025-06-04T22:41:45.8821352Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:505:38


2025-06-04T22:41:45.8821712Z 
2025-06-04T22:41:45.8823057Z ##[error]TypeError: service.assessModelCoherence is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:523:44


2025-06-04T22:41:45.8823444Z 
2025-06-04T22:41:45.8825272Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:538:17
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:537:30


2025-06-04T22:41:45.8825637Z 
2025-06-04T22:41:45.8826974Z ##[error]TypeError: service.generateCognitivelyConsistentResponse is not a function
 ❯ src/lib/ai/services/__tests__/CognitiveConsistencyEngine.test.ts:562:23


2025-06-04T22:41:45.8827343Z 
2025-06-04T22:41:45.8828677Z ##[error]AssertionError: expected 1749074073506 to be greater than 1749074073506
 ❯ src/lib/ai/services/__tests__/ComprehensiveOutcomePredictionService.test.ts:1074:49


2025-06-04T22:41:45.8829042Z 
2025-06-04T22:41:45.8831793Z ##[error]AssertionError: expected 'When I\'m stressed about crisis situa…' to contain 'don\'t know what to do'

Expected: "don't know what to do"
Received: "When I'm stressed about crisis situation, I try to go for a walk. it usually helps and helps me clear my head. Sometimes I also try cognitive_reframing."

 ❯ src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts:379:37


2025-06-04T22:41:45.8832185Z 
2025-06-04T22:41:45.8833228Z ##[error]Error: expected false to be true
 ❯ src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts:415:9


2025-06-04T22:41:45.8833599Z 
2025-06-04T22:41:45.8834612Z ##[error]Error: expected false to be true
 ❯ src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts:490:36


2025-06-04T22:41:45.8835140Z 
2025-06-04T22:41:45.8836559Z ##[error]AssertionError: expected [ Array(2) ] to include 'Introduce stress management techniques'
 ❯ src/lib/ai/services/__tests__/CopingStrategyResponseService.test.ts:582:49


2025-06-04T22:41:45.8836935Z 
2025-06-04T22:41:45.8838435Z ##[error]AssertionError: expected null to be truthy

- Expected: 
true

+ Received: 
null

 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:622:22


2025-06-04T22:41:45.8838821Z 
2025-06-04T22:41:45.8840526Z ##[error]AssertionError: expected null to be truthy

- Expected: 
true

+ Received: 
null

 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:636:22


2025-06-04T22:41:45.8840906Z 
2025-06-04T22:41:45.8842388Z ##[error]AssertionError: expected null to be truthy

- Expected: 
true

+ Received: 
null

 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:685:22


2025-06-04T22:41:45.8842772Z 
2025-06-04T22:41:45.8844062Z ##[error]AssertionError: expected 0.5 to be greater than 0.5
 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:727:27


2025-06-04T22:41:45.8844430Z 
2025-06-04T22:41:45.8846567Z ##[error]AssertionError: expected null to be truthy

- Expected: 
true

+ Received: 
null

 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:745:22
 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:741:25


2025-06-04T22:41:45.8846931Z 
2025-06-04T22:41:45.8849049Z ##[error]AssertionError: expected null to be truthy

- Expected: 
true

+ Received: 
null

 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:768:22
 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:764:21


2025-06-04T22:41:45.8849604Z 
2025-06-04T22:41:45.8851750Z ##[error]AssertionError: expected null to be truthy

- Expected: 
true

+ Received: 
null

 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:788:22
 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:784:29


2025-06-04T22:41:45.8852129Z 
2025-06-04T22:41:45.8853573Z ##[error]AssertionError: expected null to be truthy

- Expected: 
true

+ Received: 
null

 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:845:20


2025-06-04T22:41:45.8853943Z 
2025-06-04T22:41:45.8855365Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:937:62


2025-06-04T22:41:45.8855743Z 
2025-06-04T22:41:45.8857103Z ##[error]Error: Invalid Chai property: slice. Did you mean "which"?
 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:964:20


2025-06-04T22:41:45.8857473Z 
2025-06-04T22:41:45.8858787Z ##[error]Error: expected contemplation to be preparation
 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:998:62


2025-06-04T22:41:45.8859344Z 
2025-06-04T22:41:45.8862308Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ getActiveBeliefs src/lib/ai/types/CognitiveModel.ts:196:6
 ❯ EnhancedPatientModelService.processBeliefReinforcementForTurn src/lib/ai/services/EnhancedPatientModelService.ts:1129:27
 ❯ src/lib/ai/services/__tests__/EnhancedPatientModelService.beliefReinforcement.test.ts:1107:20


2025-06-04T22:41:45.8862707Z 
2025-06-04T22:41:45.8863854Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts:450:50


2025-06-04T22:41:45.8864235Z 
2025-06-04T22:41:45.8865868Z ##[error]AssertionError: expected 0 to be greater than 0
 ❯ src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts:531:36


2025-06-04T22:41:45.8866489Z 
2025-06-04T22:41:45.8867649Z ##[error]AssertionError: expected undefined to be defined
 ❯ src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts:651:27


2025-06-04T22:41:45.8868193Z 
2025-06-04T22:41:45.8890825Z ##[error]AssertionError: expected undefined to be defined
 ❯ src/lib/ai/services/__tests__/TreatmentPlanningService.test.ts:692:30


2025-06-04T22:41:45.8891314Z 
2025-06-04T22:41:45.8900747Z ##[error]AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]

Received: 

  1st spy call:

  [
-   ObjectContaining {
+   {
+     "cached": false,
+     "input_tokens": 0,
+     "latency": 0,
      "model": "test-model",
-     "operation": "validation-emotion-detection",
-     "requestId": "123",
+     "optimized": false,
+     "output_tokens": 0,
+     "request_id": "123",
      "success": true,
+     "total_tokens": 0,
    },
  ]

  2nd spy call:

  [
-   ObjectContaining {
+   {
+     "cached": false,
+     "input_tokens": 0,
+     "latency": 0,
      "model": "test-model",
-     "operation": "validation-emotion-detection",
-     "requestId": "123",
+     "optimized": false,
+     "output_tokens": 0,
+     "request_id": "test1",
      "success": true,
+     "total_tokens": 0,
    },
  ]

  3rd spy call:

  [
-   ObjectContaining {
+   {
+     "cached": false,
+     "input_tokens": 0,
+     "latency": 0,
      "model": "test-model",
-     "operation": "validation-emotion-detection",
-     "requestId": "123",
-     "success": true,
+     "optimized": false,
+     "output_tokens": 0,
+     "request_id": "test2",
+     "success": false,
+     "total_tokens": 0,
    },
  ]

  4th spy call:

  [
-   ObjectContaining {
+   {
+     "cached": false,
+     "input_tokens": 0,
+     "latency": 0,
      "model": "test-model",
-     "operation": "validation-emotion-detection",
-     "requestId": "123",
+     "optimized": false,
+     "output_tokens": 0,
+     "request_id": "test3",
      "success": true,
+     "total_tokens": 0,
    },
  ]

  5th spy call:

  [
-   ObjectContaining {
+   {
+     "cached": false,
+     "input_tokens": 0,
+     "latency": 0,
      "model": "test-model",
-     "operation": "validation-emotion-detection",
-     "requestId": "123",
+     "optimized": false,
+     "output_tokens": 0,
+     "request_id": "123",
      "success": true,
+     "total_tokens": 0,
    },
  ]


Number of calls: 5

 ❯ src/lib/ai/validation/__tests__/ContinuousValidationPipeline.test.ts:165:51


2025-06-04T22:41:45.8901191Z 
2025-06-04T22:41:45.8903082Z ##[error]TypeError: crypto.randomUUID is not a function
 ❯ AnalyticsService.trackEvent src/lib/services/analytics/AnalyticsService.ts:86:30
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:129:46


2025-06-04T22:41:45.8903496Z 
2025-06-04T22:41:45.8905169Z ##[error]TypeError: crypto.randomUUID is not a function
 ❯ AnalyticsService.trackEvent src/lib/services/analytics/AnalyticsService.ts:86:30
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:169:30


2025-06-04T22:41:45.8905553Z 
2025-06-04T22:41:45.8908981Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.trackMetric src/lib/services/analytics/AnalyticsService.ts:119:13
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:179:30


2025-06-04T22:41:45.8909500Z 
2025-06-04T22:41:45.8912900Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.trackMetric src/lib/services/analytics/AnalyticsService.ts:119:13
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:189:30


2025-06-04T22:41:45.8913447Z 
2025-06-04T22:41:45.8916905Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.processEvents src/lib/services/analytics/AnalyticsService.ts:145:28
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:231:30


2025-06-04T22:41:45.8917285Z 
2025-06-04T22:41:45.8921010Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.processEvents src/lib/services/analytics/AnalyticsService.ts:145:28
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:248:30


2025-06-04T22:41:45.8921423Z 
2025-06-04T22:41:45.8925104Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.processEvents src/lib/services/analytics/AnalyticsService.ts:145:28
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:257:30


2025-06-04T22:41:45.8925530Z 
2025-06-04T22:41:45.8928955Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.getEvents src/lib/services/analytics/AnalyticsService.ts:202:32
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:284:45


2025-06-04T22:41:45.8929480Z 
2025-06-04T22:41:45.8933032Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.getEvents src/lib/services/analytics/AnalyticsService.ts:202:32
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:293:30


2025-06-04T22:41:45.8933433Z 
2025-06-04T22:41:45.8936871Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.getMetrics src/lib/services/analytics/AnalyticsService.ts:236:33
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:327:45


2025-06-04T22:41:45.8937243Z 
2025-06-04T22:41:45.8940739Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.getMetrics src/lib/services/analytics/AnalyticsService.ts:236:33
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:351:45


2025-06-04T22:41:45.8941265Z 
2025-06-04T22:41:45.8944705Z ##[error]Error: [vitest] No "redis" export is defined on the "@/lib/services/redis" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/services/redis"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ AnalyticsService.cleanup src/lib/services/analytics/AnalyticsService.ts:287:15
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:368:30


2025-06-04T22:41:45.8945088Z 
2025-06-04T22:41:45.8946066Z ##[error]Error: expected true to be false
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:408:50


2025-06-04T22:41:45.8946450Z 
2025-06-04T22:41:45.8948104Z ##[error]TypeError: crypto.randomUUID is not a function
 ❯ AnalyticsService.trackEvent src/lib/services/analytics/AnalyticsService.ts:86:30
 ❯ src/lib/services/analytics/__tests__/AnalyticsService.test.ts:420:30


2025-06-04T22:41:45.8948485Z 
2025-06-04T22:41:45.8951577Z ##[error]Error: [vitest] No "default" export is defined on the "fs/promises" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("fs/promises"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ src/lib/services/contact/ContactService.ts:4:26
 ❯ src/lib/services/contact/__tests__/ContactService.test.ts:2:1


2025-06-04T22:41:45.8951960Z 
2025-06-04T22:41:45.8954977Z ##[error]Error: [vitest] No "getLogger" export is defined on the "@/lib/utils/logger" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("@/lib/utils/logger"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 ❯ src/lib/services/notification/smsUtils.ts:5:16
 ❯ src/lib/services/notification/NotificationService.ts:9:1


2025-06-04T22:41:45.8955353Z 
2025-06-04T22:41:45.8961652Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.8962157Z 
2025-06-04T22:41:45.8963574Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.8963969Z 
2025-06-04T22:41:45.8968279Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.8968669Z 
2025-06-04T22:41:45.8970121Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.8970680Z 
2025-06-04T22:41:45.8974957Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.8975334Z 
2025-06-04T22:41:45.8976525Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.8976908Z 
2025-06-04T22:41:45.8981373Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.8981763Z 
2025-06-04T22:41:45.8982981Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.8983360Z 
2025-06-04T22:41:45.8987576Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.8987968Z 
2025-06-04T22:41:45.8989257Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.8989637Z 
2025-06-04T22:41:45.8993858Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.8994249Z 
2025-06-04T22:41:45.8995416Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.8995778Z 
2025-06-04T22:41:45.9000377Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.9002317Z 
2025-06-04T22:41:45.9004507Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.9005213Z 
2025-06-04T22:41:45.9012924Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.9013760Z 
2025-06-04T22:41:45.9016329Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.9017054Z 
2025-06-04T22:41:45.9025217Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.9026007Z 
2025-06-04T22:41:45.9028369Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.9029070Z 
2025-06-04T22:41:45.9037578Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.9038345Z 
2025-06-04T22:41:45.9040898Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.9041581Z 
2025-06-04T22:41:45.9049780Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.9050799Z 
2025-06-04T22:41:45.9053270Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.9054009Z 
2025-06-04T22:41:45.9062075Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.9062834Z 
2025-06-04T22:41:45.9065300Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.9066046Z 
2025-06-04T22:41:45.9074573Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.9075352Z 
2025-06-04T22:41:45.9077698Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.9078469Z 
2025-06-04T22:41:45.9086842Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:42:17


2025-06-04T22:41:45.9087621Z 
2025-06-04T22:41:45.9090265Z ##[error]TypeError: Cannot read properties of undefined (reading 'cleanup')
 ❯ src/lib/services/redis/__tests__/Analytics.integration.test.ts:53:21


2025-06-04T22:41:45.9091282Z 
2025-06-04T22:41:45.9099953Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9100712Z 
2025-06-04T22:41:45.9109017Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9110036Z 
2025-06-04T22:41:45.9118803Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9119962Z 
2025-06-04T22:41:45.9128421Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9129418Z 
2025-06-04T22:41:45.9137845Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9138643Z 
2025-06-04T22:41:45.9147319Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9148393Z 
2025-06-04T22:41:45.9157092Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9157879Z 
2025-06-04T22:41:45.9166614Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9167356Z 
2025-06-04T22:41:45.9175483Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9176193Z 
2025-06-04T22:41:45.9184234Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/CacheInvalidation.integration.test.ts:34:17


2025-06-04T22:41:45.9184922Z 
2025-06-04T22:41:45.9189507Z ##[error]Error: Failed to analyze trends: Data retrieval failed: this.sessionRepository.getSessions is not a function
 ❯ PatternRecognitionService.analyzeLongTermTrends src/lib/ai/services/PatternRecognitionService.ts:92:13
 ❯ src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts:121:24


2025-06-04T22:41:45.9190193Z 
2025-06-04T22:41:45.9192241Z ##[error]ReferenceError: testId is not defined
 ❯ src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts:139:21


2025-06-04T22:41:45.9192889Z 
2025-06-04T22:41:45.9200417Z ##[error]AssertionError: expected [ { primaryFactor: 'anxiety', …(4) } ] to deep equally contain ObjectContaining{…}

- Expected: 
ObjectContaining {
  "correlatedFactors": {
    "asymmetricMatch": [Function asymmetricMatch],
    "toString": [Function toString],
  },
  "primaryFactor": "anxiety",
}

+ Received: 
[
  {
    "actionRequired": true,
    "correlatedFactors": [
      {
        "confidence": 0.9,
        "correlation": 0.8,
        "factor": "sleep",
      },
    ],
    "primaryFactor": "anxiety",
    "severity": "high",
    "timeFrame": {
      "end": 2025-06-04T21:55:03.906Z,
      "start": 2025-06-04T21:55:03.906Z,
    },
  },
]

 ❯ src/lib/services/redis/__tests__/PatternRecognition.integration.test.ts:194:28


2025-06-04T22:41:45.9201446Z 
2025-06-04T22:41:45.9210111Z ##[error]RedisServiceError: Failed to connect to Redis
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:125:13
 ❯ src/lib/services/redis/__tests__/RedisService.integration.test.ts:32:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'REDIS_CONNECTION_FAILED' }
Caused by: Caused by: Error: Redis is already connecting/connected
 ❯ node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:107:24
 ❯ EventEmitter.connect node_modules/.pnpm/ioredis@5.6.1/node_modules/ioredis/built/Redis.js:103:25
 ❯ RedisService.connect src/lib/services/redis/RedisService.ts:107:25
 ❯ src/lib/services/redis/__tests__/RedisService.integration.test.ts:32:17


2025-06-04T22:41:45.9210927Z 
2025-06-04T22:41:45.9213255Z ##[error]TypeError: Cannot read properties of undefined (reading 'toBeNull')
 ❯ src/lib/services/redis/__tests__/RedisService.test.ts:275:22


2025-06-04T22:41:45.9213991Z 
2025-06-04T22:41:45.9216157Z ##[error]TypeError: expect(...).toBe is not a function
 ❯ src/lib/services/redis/__tests__/RedisService.test.ts:296:22


2025-06-04T22:41:45.9216895Z 
2025-06-04T22:41:45.9218843Z ##[error]TypeError: expect(...).toBe is not a function
 ❯ src/lib/services/redis/__tests__/RedisService.test.ts:309:22


2025-06-04T22:41:45.9219814Z 
2025-06-04T22:41:45.9221760Z ##[error]TypeError: expect(...).toBe is not a function
 ❯ src/lib/services/redis/__tests__/RedisService.test.ts:322:22


2025-06-04T22:41:45.9222500Z 
2025-06-04T22:41:45.9224483Z ##[error]TypeError: expect(...).toEqual is not a function
 ❯ src/lib/services/redis/__tests__/RedisService.test.ts:344:31


2025-06-04T22:41:45.9225183Z 
2025-06-04T22:41:45.9227222Z ##[error]TypeError: expect.arrayContaining is not a function
 ❯ src/lib/services/redis/__tests__/RedisService.test.ts:366:37


2025-06-04T22:41:45.9227956Z 
2025-06-04T22:41:45.9230264Z ##[error]TypeError: expect(...).toBeInstanceOf is not a function
 ❯ src/lib/services/redis/__tests__/RedisService.test.ts:387:19


2025-06-04T22:41:45.9231011Z 
2025-06-04T22:41:45.9233045Z ##[error]TypeError: expect(...).toBeInstanceOf is not a function
 ❯ src/lib/services/redis/__tests__/RedisService.test.ts:415:19


2025-06-04T22:41:45.9233758Z 
2025-06-04T22:41:45.9235574Z ##[error]TypeError: expect(...).toBe is not a function
 ❯ src/lib/services/redis/__tests__/RedisService.test.ts:439:43


2025-06-04T22:41:45.9236246Z 
2025-06-04T22:41:45.9241779Z ##[error]Error: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock
 ❯ src/pages/api/v1/health.ts:5:1

Caused by: Caused by: ReferenceError: Cannot access 'redisMock' before initialization
 ❯ src/pages/api/v1/__tests__/health.test.ts:33:3
 ❯ src/pages/api/v1/health.ts:5:1


2025-06-04T22:41:45.9242557Z 
2025-06-04T22:41:45.9245129Z ##[error]Error: expected keyword+classification to be classification
 ❯ src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts:53:36


2025-06-04T22:41:45.9245882Z 
2025-06-04T22:41:45.9248191Z ##[error]Error: expected unknown to be general_mental_health
 ❯ src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts:95:37


2025-06-04T22:41:45.9248901Z 
2025-06-04T22:41:45.9251312Z ##[error]Error: expected depression to be unknown
 ❯ src/lib/ai/mental-llama/routing/__tests__/MentalHealthTaskRouter.test.ts:122:37


2025-06-04T22:41:45.9252614Z  ELIFECYCLE  Test failed. See above for more details.
2025-06-04T22:41:45.9254865Z ##[error]Process completed with exit code 1.
2025-06-04T22:41:45.9317025Z Post job cleanup.
2025-06-04T22:41:45.9879744Z Pruning is unnecessary.
2025-06-04T22:41:45.9973872Z Post job cleanup.
2025-06-04T22:41:46.0944992Z [command]/usr/bin/git version
2025-06-04T22:41:46.0981467Z git version 2.49.0
2025-06-04T22:41:46.1031608Z Temporarily overriding HOME='/home/runner/work/_temp/5cda89e6-0e2a-484f-8058-44c06e9e8f67' before making global git config changes
2025-06-04T22:41:46.1033057Z Adding repository directory to the temporary git global config as a safe directory
2025-06-04T22:41:46.1037619Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/pixelated/pixelated
2025-06-04T22:41:46.1072617Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-06-04T22:41:46.1105710Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-06-04T22:41:46.1427694Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-06-04T22:41:46.1454176Z http.https://github.com/.extraheader
2025-06-04T22:41:46.1471979Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-06-04T22:41:46.1508405Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-06-04T22:41:46.1931460Z Print service container logs: bf83ecc7e3ae463081a9c4e9200ade6b_redislatest_6761ba
2025-06-04T22:41:46.1935793Z ##[command]/usr/bin/docker logs --details 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T22:41:46.2055705Z  Starting Redis Server
2025-06-04T22:41:46.2058255Z  1:C 04 Jun 2025 21:51:45.891 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
2025-06-04T22:41:46.2061048Z  1:C 04 Jun 2025 21:51:45.891 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
2025-06-04T22:41:46.2061571Z  1:C 04 Jun 2025 21:51:45.891 * Redis version=8.0.2, bits=64, commit=00000000, modified=1, pid=1, just started
2025-06-04T22:41:46.2062017Z  1:C 04 Jun 2025 21:51:45.891 * Configuration loaded
2025-06-04T22:41:46.2062330Z  1:M 04 Jun 2025 21:51:45.891 * monotonic clock: POSIX clock_gettime
2025-06-04T22:41:46.2062678Z  1:M 04 Jun 2025 21:51:45.892 * Running mode=standalone, port=6379.
2025-06-04T22:41:46.2063026Z  1:M 04 Jun 2025 21:51:45.892 * <bf> RedisBloom version 8.0.1 (Git=unknown)
2025-06-04T22:41:46.2063636Z  1:M 04 Jun 2025 21:51:45.892 * <bf> Registering configuration options: [
2025-06-04T22:41:46.2063991Z  1:M 04 Jun 2025 21:51:45.892 * <bf> 	{ bf-error-rate       :      0.01 }
2025-06-04T22:41:46.2064326Z  1:M 04 Jun 2025 21:51:45.892 * <bf> 	{ bf-initial-size     :       100 }
2025-06-04T22:41:46.2064664Z  1:M 04 Jun 2025 21:51:45.892 * <bf> 	{ bf-expansion-factor :         2 }
2025-06-04T22:41:46.2064994Z  1:M 04 Jun 2025 21:51:45.892 * <bf> 	{ cf-bucket-size      :         2 }
2025-06-04T22:41:46.2065328Z  1:M 04 Jun 2025 21:51:45.892 * <bf> 	{ cf-initial-size     :      1024 }
2025-06-04T22:41:46.2065652Z  1:M 04 Jun 2025 21:51:45.892 * <bf> 	{ cf-max-iterations   :        20 }
2025-06-04T22:41:46.2065980Z  1:M 04 Jun 2025 21:51:45.892 * <bf> 	{ cf-expansion-factor :         1 }
2025-06-04T22:41:46.2066308Z  1:M 04 Jun 2025 21:51:45.892 * <bf> 	{ cf-max-expansions   :        32 }
2025-06-04T22:41:46.2066597Z  1:M 04 Jun 2025 21:51:45.892 * <bf> ]
2025-06-04T22:41:46.2066937Z  1:M 04 Jun 2025 21:51:45.892 * Module 'bf' loaded from /usr/local/lib/redis/modules//redisbloom.so
2025-06-04T22:41:46.2067394Z  1:M 04 Jun 2025 21:51:45.894 * <search> Redis version found by RedisSearch : 8.0.2 - oss
2025-06-04T22:41:46.2067795Z  1:M 04 Jun 2025 21:51:45.894 * <search> RediSearch version 8.0.1 (Git=5688fcc)
2025-06-04T22:41:46.2068198Z  1:M 04 Jun 2025 21:51:45.894 * <search> Low level api version 1 initialized successfully
2025-06-04T22:41:46.2069383Z  1:M 04 Jun 2025 21:51:45.894 * <search> gc: ON, prefix min length: 2, min word length to stem: 4, prefix max expansions: 200, query timeout (ms): 500, timeout policy: return, cursor read size: 1000, cursor max idle (ms): 300000, max doctable size: 1000000, max number of search results:  1000000, 
2025-06-04T22:41:46.2070330Z  1:M 04 Jun 2025 21:51:45.894 * <search> Initialized thread pools!
2025-06-04T22:41:46.2070698Z  1:M 04 Jun 2025 21:51:45.894 * <search> Disabled workers threadpool of size 0
2025-06-04T22:41:46.2071054Z  1:M 04 Jun 2025 21:51:45.894 * <search> Subscribe to config changes
2025-06-04T22:41:46.2071407Z  1:M 04 Jun 2025 21:51:45.894 * <search> Enabled role change notification
2025-06-04T22:41:46.2071882Z  1:M 04 Jun 2025 21:51:45.894 * <search> Cluster configuration: AUTO partitions, type: 0, coordinator timeout: 0ms
2025-06-04T22:41:46.2072332Z  1:M 04 Jun 2025 21:51:45.894 * <search> Register write commands
2025-06-04T22:41:46.2072752Z  1:M 04 Jun 2025 21:51:45.894 * Module 'search' loaded from /usr/local/lib/redis/modules//redisearch.so
2025-06-04T22:41:46.2073646Z  1:M 04 Jun 2025 21:51:45.894 * <timeseries> RedisTimeSeries version 80001, git_sha=577bfa8b5909e7ee572f0b651399be8303dc6641
2025-06-04T22:41:46.2074616Z  1:M 04 Jun 2025 21:51:45.894 * <timeseries> Redis version found by RedisTimeSeries : 8.0.2 - oss
2025-06-04T22:41:46.2075351Z  1:M 04 Jun 2025 21:51:45.894 * <timeseries> Registering configuration options: [
2025-06-04T22:41:46.2075875Z  1:M 04 Jun 2025 21:51:45.894 * <timeseries> 	{ ts-compaction-policy   :              }
2025-06-04T22:41:46.2076285Z  1:M 04 Jun 2025 21:51:45.895 * <timeseries> 	{ ts-num-threads         :            3 }
2025-06-04T22:41:46.2076679Z  1:M 04 Jun 2025 21:51:45.895 * <timeseries> 	{ ts-retention-policy    :            0 }
2025-06-04T22:41:46.2077067Z  1:M 04 Jun 2025 21:51:45.895 * <timeseries> 	{ ts-duplicate-policy    :        block }
2025-06-04T22:41:46.2077456Z  1:M 04 Jun 2025 21:51:45.895 * <timeseries> 	{ ts-chunk-size-bytes    :         4096 }
2025-06-04T22:41:46.2077837Z  1:M 04 Jun 2025 21:51:45.895 * <timeseries> 	{ ts-encoding            :   compressed }
2025-06-04T22:41:46.2078233Z  1:M 04 Jun 2025 21:51:45.895 * <timeseries> 	{ ts-ignore-max-time-diff:            0 }
2025-06-04T22:41:46.2078625Z  1:M 04 Jun 2025 21:51:45.895 * <timeseries> 	{ ts-ignore-max-val-diff :     0.000000 }
2025-06-04T22:41:46.2078954Z  1:M 04 Jun 2025 21:51:45.895 * <timeseries> ]
2025-06-04T22:41:46.2079449Z  1:M 04 Jun 2025 21:51:45.895 * <timeseries> Detected redis oss
2025-06-04T22:41:46.2079891Z  1:M 04 Jun 2025 21:51:45.895 * Module 'timeseries' loaded from /usr/local/lib/redis/modules//redistimeseries.so
2025-06-04T22:41:46.2080518Z  1:M 04 Jun 2025 21:51:45.895 * <ReJSON> Created new data type 'ReJSON-RL'
2025-06-04T22:41:46.2080903Z  1:M 04 Jun 2025 21:51:45.895 * <ReJSON> version: 80001 git sha: unknown branch: unknown
2025-06-04T22:41:46.2081279Z  1:M 04 Jun 2025 21:51:45.895 * <ReJSON> Exported RedisJSON_V1 API
2025-06-04T22:41:46.2081603Z  1:M 04 Jun 2025 21:51:45.895 * <ReJSON> Exported RedisJSON_V2 API
2025-06-04T22:41:46.2081925Z  1:M 04 Jun 2025 21:51:45.895 * <ReJSON> Exported RedisJSON_V3 API
2025-06-04T22:41:46.2082249Z  1:M 04 Jun 2025 21:51:45.895 * <ReJSON> Exported RedisJSON_V4 API
2025-06-04T22:41:46.2082574Z  1:M 04 Jun 2025 21:51:45.895 * <ReJSON> Exported RedisJSON_V5 API
2025-06-04T22:41:46.2082905Z  1:M 04 Jun 2025 21:51:45.895 * <ReJSON> Enabled diskless replication
2025-06-04T22:41:46.2083294Z  1:M 04 Jun 2025 21:51:45.895 * <ReJSON> Initialized shared string cache, thread safe: false.
2025-06-04T22:41:46.2083757Z  1:M 04 Jun 2025 21:51:45.895 * Module 'ReJSON' loaded from /usr/local/lib/redis/modules//rejson.so
2025-06-04T22:41:46.2084158Z  1:M 04 Jun 2025 21:51:45.895 * <search> Acquired RedisJSON_V5 API
2025-06-04T22:41:46.2084452Z  1:M 04 Jun 2025 21:51:45.896 * Server initialized
2025-06-04T22:41:46.2084742Z  1:M 04 Jun 2025 21:51:45.896 * Ready to accept connections tcp
2025-06-04T22:41:46.2090997Z Stop and remove container: bf83ecc7e3ae463081a9c4e9200ade6b_redislatest_6761ba
2025-06-04T22:41:46.2096137Z ##[command]/usr/bin/docker rm --force 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T22:41:46.3237115Z 0c34d3fb1e24ef3a4b7c2dd2fd75c16e5e4df60b23b67a99456f634806f301a0
2025-06-04T22:41:46.3264198Z Remove container network: github_network_6b650f71936e4c90a2bc0d16c3b8fcf8
2025-06-04T22:41:46.3268373Z ##[command]/usr/bin/docker network rm github_network_6b650f71936e4c90a2bc0d16c3b8fcf8
2025-06-04T22:41:46.4427314Z github_network_6b650f71936e4c90a2bc0d16c3b8fcf8
2025-06-04T22:41:46.4483366Z Cleaning up orphan processes
