---
// This is a placeholder component for the AI Performance Dashboard
// Updated with performance optimizations

// Set cache headers to improve client caching
export const cacheControl = {
  maxAge: 60, // Cache for 1 minute on client
  staleWhileRevalidate: 600, // Allow stale content while revalidating for 10 minutes
}

// Add preload for critical resources
---

<div
  class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 performance-dashboard"
>
  <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">
    AI Performance Dashboard
  </h2>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="bg-blue-50 dark:bg-blue-900 p-4 rounded-lg transition-all">
      <h3 class="text-lg font-medium mb-2 text-blue-700 dark:text-blue-300">
        Requests
      </h3>
      <p class="text-3xl font-bold text-blue-800 dark:text-blue-200">2,547</p>
      <p class="text-sm text-gray-500 dark:text-gray-400">Last 7 days</p>
      <div class="mt-2 h-1 w-full bg-blue-100 dark:bg-blue-800">
        <div class="h-1 bg-blue-500 dark:bg-blue-400" style="width: 75%;"></div>
      </div>
    </div>

    <div class="bg-green-50 dark:bg-green-900 p-4 rounded-lg transition-all">
      <h3 class="text-lg font-medium mb-2 text-green-700 dark:text-green-300">
        Avg Response Time
      </h3>
      <p class="text-3xl font-bold text-green-800 dark:text-green-200">312ms</p>
      <p class="text-sm text-gray-500 dark:text-gray-400">Last 7 days</p>
      <div class="mt-2 h-1 w-full bg-green-100 dark:bg-green-800">
        <div class="h-1 bg-green-500 dark:bg-green-400" style="width: 60%;">
        </div>
      </div>
    </div>

    <div class="bg-purple-50 dark:bg-purple-900 p-4 rounded-lg transition-all">
      <h3 class="text-lg font-medium mb-2 text-purple-700 dark:text-purple-300">
        Token Usage
      </h3>
      <p class="text-3xl font-bold text-purple-800 dark:text-purple-200">
        1.2M
      </p>
      <p class="text-sm text-gray-500 dark:text-gray-400">Last 7 days</p>
      <div class="mt-2 h-1 w-full bg-purple-100 dark:bg-purple-800">
        <div class="h-1 bg-purple-500 dark:bg-purple-400" style="width: 85%;">
        </div>
      </div>
    </div>
  </div>

  <div class="mb-8">
    <h3 class="text-xl font-bold mb-4 text-gray-800 dark:text-white">
      Performance Over Time
    </h3>
    <div
      class="h-64 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center skeleton-container"
    >
      <div class="skeleton-chart" aria-hidden="true">
        <div class="skeleton-line"></div>
        <div class="skeleton-line"></div>
        <div class="skeleton-line"></div>
        <div class="skeleton-line"></div>
      </div>
      <p class="text-gray-500 dark:text-gray-400 sr-only">
        Chart placeholder - Historical performance data
      </p>
    </div>
  </div>

  <div>
    <h3 class="text-xl font-bold mb-4 text-gray-800 dark:text-white">
      Model Comparison
    </h3>
    <div class="overflow-x-auto">
      <table class="min-w-full bg-white dark:bg-gray-800 border-collapse">
        <thead>
          <tr class="bg-gray-100 dark:bg-gray-700">
            <th class="py-3 px-4 text-left text-gray-700 dark:text-gray-300"
              >Model</th
            >
            <th class="py-3 px-4 text-left text-gray-700 dark:text-gray-300"
              >Avg Response Time</th
            >
            <th class="py-3 px-4 text-left text-gray-700 dark:text-gray-300"
              >Tokens/Request</th
            >
            <th class="py-3 px-4 text-left text-gray-700 dark:text-gray-300"
              >Success Rate</th
            >
          </tr>
        </thead>
        <tbody>
          <tr
            class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"
          >
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300"
              >Mixtral-8x7B</td
            >
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300">285ms</td>
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300">1,245</td>
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300">99.8%</td>
          </tr>
          <tr
            class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"
          >
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300"
              >Llama-3-70B</td
            >
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300">312ms</td>
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300">1,312</td>
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300">99.7%</td>
          </tr>
          <tr class="hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors">
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300"
              >Qwen-1.5-72B</td
            >
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300">325ms</td>
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300">1,185</td>
            <td class="py-3 px-4 text-gray-800 dark:text-gray-300">99.5%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
  .performance-dashboard {
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  .skeleton-container {
    position: relative;
    overflow: hidden;
  }

  .skeleton-chart {
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 80%;
    padding: 0 1rem;
  }

  .skeleton-line {
    height: 12px;
    margin: 10px 0;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
    border-radius: 6px;
  }

  .skeleton-line:nth-child(1) {
    width: 85%;
  }
  .skeleton-line:nth-child(2) {
    width: 75%;
  }
  .skeleton-line:nth-child(3) {
    width: 90%;
  }
  .skeleton-line:nth-child(4) {
    width: 65%;
  }

  :global(.dark) .skeleton-line {
    background: linear-gradient(90deg, #303030 25%, #404040 50%, #303030 75%);
    background-size: 200% 100%;
  }

  @keyframes loading {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  @media (prefers-reduced-motion) {
    .skeleton-line {
      animation: none;
      background: #f0f0f0;
    }

    :global(.dark) .skeleton-line {
      background: #303030;
    }
  }
</style>
