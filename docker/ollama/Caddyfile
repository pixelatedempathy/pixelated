ollama.pixelatedempathy.com {
    # Add CORS headers
    header {
        Access-Control-Allow-Origin "*"
        Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
        Access-Control-Allow-Headers "Content-Type, Authorization"
        Access-Control-Max-Age "3600"
    }

    # Handle OPTIONS requests for CORS preflight
    @options {
        method OPTIONS
    }
    handle @options {
        header Access-Control-Allow-Origin "*"
        header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
        header Access-Control-Allow-Headers "Content-Type, Authorization"
        respond "" 204
    }

    # Basic authentication for API
    # Uncomment the following lines to enable basic auth
    # basicauth / {
    #     # Generate hash with: htpasswd -B -C 12 "" user
    #     user JDJhJDEyJG9qRUR5TG1ZaC9RZG9qRUR5TG1ZaC9RZG9qRUR5TG1ZaC9RZG9qRUR5TG1ZaC9R  # password: password
    # }

    # Reverse proxy to Ollama service
    reverse_proxy http://localhost:11434

    # Logging
    log {
        output stdout
        format console
    }

    # Error handling
    handle_errors {
        respond "Service temporarily unavailable" 503
    }
}