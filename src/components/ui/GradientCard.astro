---
export interface Props {
  title?: string;
  description?: string;
  icon?: string;
  gradient?: 'primary' | 'secondary' | 'accent' | 'custom';
  customGradient?: string;
  hoverEffect?: 'lift' | 'glow' | 'scale' | 'none';
  variant?: 'default' | 'outlined' | 'elevated';
  padding?: 'sm' | 'md' | 'lg' | 'xl';
  borderRadius?: 'none' | 'sm' | 'md' | 'lg' | 'xl' | 'full';
  shadow?: 'none' | 'sm' | 'md' | 'lg' | 'xl';
  className?: string;
  children?: any;
  href?: string;
  target?: string;
  rel?: string;
}

const {
  title,
  description,
  icon,
  gradient = 'primary',
  customGradient,
  hoverEffect = 'lift',
  variant = 'default',
  padding = 'md',
  borderRadius = 'lg',
  shadow = 'md',
  className = '',
  children,
  href,
  target,
  rel
} = Astro.props;

// Gradient configurations inspired by Astromaxx
const gradientClasses = {
  primary: 'from-primary-600 to-secondary-600',
  secondary: 'from-secondary-600 to-accent-500',
  accent: 'from-accent-500 to-primary-500',
  custom: customGradient || 'from-primary-600 to-secondary-600'
};

// Hover effect configurations
const hoverEffectClasses = {
  lift: 'hover:-translate-y-2 hover:shadow-xl',
  glow: 'hover:shadow-2xl hover:shadow-primary-500/20',
  scale: 'hover:scale-105 hover:shadow-xl',
  none: ''
};

// Variant configurations
const variantClasses = {
  default: 'bg-secondary border-secondary',
  outlined: 'bg-transparent border-primary-500/20',
  elevated: 'bg-secondary/80 border-secondary backdrop-blur-sm'
};

// Padding configurations
const paddingClasses = {
  sm: 'p-4',
  md: 'p-6',
  lg: 'p-8',
  xl: 'p-10'
};

// Border radius configurations
const borderRadiusClasses = {
  none: 'rounded-none',
  sm: 'rounded-sm',
  md: 'rounded-md',
  lg: 'rounded-lg',
  xl: 'rounded-xl',
  full: 'rounded-full'
};

// Shadow configurations
const shadowClasses = {
  none: 'shadow-none',
  sm: 'shadow-sm',
  md: 'shadow-md',
  lg: 'shadow-lg',
  xl: 'shadow-xl'
};

const gradientBgClass = gradient !== 'custom' ? `bg-gradient-to-br ${gradientClasses[gradient]}` : `bg-gradient-to-br ${customGradient}`;
const hoverClass = hoverEffectClasses[hoverEffect];
const variantClass = variantClasses[variant];
const paddingClass = paddingClasses[padding];
const borderRadiusClass = borderRadiusClasses[borderRadius];
const shadowClass = shadowClasses[shadow];

const baseClasses = `
  relative overflow-hidden
  ${gradientBgClass}
  ${variantClass}
  ${paddingClass}
  ${borderRadiusClass}
  ${shadowClass}
  ${hoverClass}
  transition-all duration-300 ease-in-out
  group
  cursor-pointer
  ${className}
`;

const contentClasses = `
  relative z-10
  ${variant === 'elevated' ? 'text-primary' : 'text-white'}
`;

const Tag = href ? 'a' : 'div';
const linkProps = href ? { href, target, rel } : {};
---

<{Tag} class={baseClasses} {...linkProps}>
  <!-- Gradient overlay for depth -->
  <div class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

  <!-- Background pattern effect -->
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1)_0%,transparent_50%)] opacity-30"></div>

  <div class={contentClasses}>
    {icon && (
      <div class="mb-4 text-3xl">
        {icon}
      </div>
    )}

    {title && (
      <h3 class="text-xl font-semibold mb-2 text-balance">
        {title}
      </h3>
    )}

    {description && (
      <p class="text-sm opacity-90 text-balance">
        {description}
      </p>
    )}

    {children}
  </div>

  <!-- Hover indicator -->
  {hoverEffect !== 'none' && (
    <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-white/50 to-transparent transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ease-out"></div>
  )}
</{Tag}>

<style>
  /* Dark mode adjustments */
  @media (prefers-color-scheme: dark) {
    .card-outlined {
      border-color: rgba(255, 255, 255, 0.1);
    }
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .card {
      padding: 1rem;
    }
  }
</style>