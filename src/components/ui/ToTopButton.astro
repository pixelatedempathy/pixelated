---
interface Props {
  class?: string
}

const { class: className = '' } = Astro.props
---

<button
  id="to-top-button"
  class={`fixed bottom-8 right-8 z-50 p-2 bg-primary-500 text-white rounded-full shadow-lg transform transition-transform duration-300 translate-y-20 opacity-0 pointer-events-none ${className}`}
  aria-label="Scroll to top"
  title="Scroll to top"
  tabindex="-1"
  aria-hidden="true"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="h-6 w-6"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M5 15l7-7 7 7"></path>
  </svg>
</button>

<script>
  document.addEventListener('astro:page-load', (_event: Event) => {
    const toTopButton = document.getElementById('to-top-button')

    if (!toTopButton) return

    // Show button when user scrolls down 300px
    window.addEventListener('scroll', (_event: Event) => {
      if (window.scrollY > 300) {
        toTopButton.classList.remove(
          'translate-y-20',
          'opacity-0',
          'pointer-events-none',
        )
        toTopButton.classList.add('translate-y-0', 'opacity-100')
        toTopButton.removeAttribute('tabindex')
        toTopButton.removeAttribute('aria-hidden')
      } else {
        toTopButton.classList.add(
          'translate-y-20',
          'opacity-0',
          'pointer-events-none',
        )
        toTopButton.classList.remove('translate-y-0', 'opacity-100')
        toTopButton.setAttribute('tabindex', '-1')
        toTopButton.setAttribute('aria-hidden', 'true')
      }
    })

    // Scroll to top when button is clicked
    toTopButton.addEventListener('click', (_event: Event) => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth',
      })
    })
  })
</script>
