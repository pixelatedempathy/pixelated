---

---

<button
  id="to-top-button"
  class="z-50 fixed right-5 bottom-6
    w-10 h-10 rounded-full
    op-0 pointer-events-none op-transition
    lt-lgp:(op-50! bg-#8883 dark:bg-#8886 pointer-events-auto!)
    hover:(op-100! bg-#8883) print:hidden"
  aria-label="Scroll to top"
  tabindex="-1"
  aria-hidden="true"
>
  <div u-i-ri-arrow-up-line></div>
</button>

<script>
  document.addEventListener("astro:page-load", () => {
    const toTopButton = document.getElementById("to-top-button");
    if (!toTopButton) return;

    const handleClick = () => {
      window.scrollTo({ top: 0 });
    };

    const handleScroll = () => {
      const scrollThreshold = 300;
      const isDesktop = window.matchMedia("(min-width: 1024px)").matches;

      if (isDesktop) {
        // Desktop: show/hide based on scroll position
        const scrollY = window.scrollY || document.documentElement.scrollTop;
        if (scrollY <= scrollThreshold) {
          toTopButton.style.opacity = "0";
          toTopButton.style.pointerEvents = "none";
          toTopButton.setAttribute("tabindex", "-1");
          toTopButton.setAttribute("aria-hidden", "true");
          toTopButton.setAttribute("disabled", "");
        } else {
          toTopButton.style.opacity = "0.3";
          toTopButton.style.pointerEvents = "auto";
          toTopButton.removeAttribute("tabindex");
          toTopButton.removeAttribute("aria-hidden");
          toTopButton.removeAttribute("disabled");
        }
      } else {
        // Mobile/Tablet: always accessible (CSS makes it always visible via lt-lgp)
        toTopButton.removeAttribute("tabindex");
        toTopButton.removeAttribute("aria-hidden");
        toTopButton.removeAttribute("disabled");
      }
    };

    toTopButton.addEventListener("click", handleClick);
    window.addEventListener("scroll", handleScroll);
    window.addEventListener("resize", handleScroll);

    // Initial check
    handleScroll();

    // Cleanup listeners on page navigation
    document.addEventListener(
      "astro:before-preparation",
      () => {
        window.removeEventListener("scroll", handleScroll);
        window.removeEventListener("resize", handleScroll);
        toTopButton.removeEventListener("click", handleClick);
      },
      { once: true },
    );
  });
</script>
